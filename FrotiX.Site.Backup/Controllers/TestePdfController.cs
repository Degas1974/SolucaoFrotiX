using FrotiX.Services;
using Microsoft.AspNetCore.Mvc;
using System;

namespace FrotiX.Controllers
{
    /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    /// โ ๐ NOME: TestePdfController                                                โ
    /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
    /// โ ๐ DESCRIรรO:                                                                โ
    /// โ    Controlador de teste para verificaรงรฃo bรกsica de endpoints.                โ
    /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
    /// โ ๐ ESCOPO: API REST                                                          โ
    /// โ    โข Rota base: /api/TestePdf                                              โ
    /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    [ApiController]
    [Route("api/[controller]")]
    public class TestePdfController : Controller
    {
        private readonly ILogService _log;

        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        /// โ ๐ NOME: TestePdfController (Construtor)                                 โ
        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
        /// โ ๐ DESCRIรรO:                                                                โ
        /// โ    Inicializa o serviรงo de log centralizado.                                โ
        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
        /// โ ๐ฅ PARรMETROS:                                                               โ
        /// โ    โข log (ILogService): Serviรงo de log centralizado.                         โ
        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        public TestePdfController(ILogService log)
        {
            try
            {
                _log = log;
            }
            catch (Exception error)
            {
                Alerta.TratamentoErroComLinha("TestePdfController.cs", "Constructor", error);
            }
        }

        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        /// โ ๐ NOME: Ping (GET)                                                      โ
        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
        /// โ ๐ DESCRIรรO:                                                                โ
        /// โ    Endpoint para verificar se o controller estรก respondendo.                โ
        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
        /// โ ๐ค RETORNO:                                                                  โ
        /// โ    โข IActionResult: JSON com status.                                        โ
        /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        [HttpGet("Ping")]
        public IActionResult Ping()
        {
            try
            {
                // [LOG] Acesso ao ping.
                _log.Info("Endpoint de Ping (TestePdf) acessado.");
                // [RETORNO] OK.
                return Ok(new { success = true, message = "TestePdf funcionando!" });
            }
            catch (Exception error)
            {
                // [LOG] Erro de execuรงรฃo.
                Alerta.TratamentoErroComLinha("TestePdfController.cs", "Ping", error);
                _log.Error("Erro no Ping de TestePdf", error);
                // [RETORNO] Erro 500.
                return StatusCode(500, new { success = false, message = error.Message });
            }
        }
    }
}
