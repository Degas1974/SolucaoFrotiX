@* ****************************************************************************************
 * ‚ö° ARQUIVO: Pages/AtaRegistroPrecos/Index.cshtml
 * --------------------------------------------------------------------------------------
 * üéØ OBJETIVO     : P√°gina de listagem de Atas de Registro de Pre√ßos com DataTable customizado,
 *                   badges de status estilizados (Verde Militar/Cinza Chumbo) e bot√µes de a√ß√£o.
 * üì• ENTRADAS     : @Model FrotiX.Models.AtaRegistroPrecos, route /AtaRegistroPrecos,
 *                   bot√µes delegados no DataTable (.btn-editar, .btn-delete, .updateStatus),
 *                   OnGet() do IndexModel
 * üì§ SA√çDAS       : DataTable #tblAtaRegistroPrecos renderizado, badges ftx-badge-status
 *                   (btn-verde #4A5D23 / fundo-cinza #4A4A4A), bot√µes √≠cone 28x28px (ftx-actions),
 *                   link para /AtaRegistroPrecos/Upsert, exporta√ß√µes Excel/PDF, AJAX calls ata.js
 * üîó CHAMADA POR  : Route /AtaRegistroPrecos, navega√ß√£o sidebar (Cadastros > Atas),
 *                   IndexModel.OnGet() (code-behind)
 * üîÑ CHAMA        : ata.js (211 linhas - loadList, delete handlers com verifica√ß√£o de depend√™ncias,
 *                   status toggle), /AtaRegistroPrecos/Upsert (cria√ß√£o/edi√ß√£o), /api/AtaRegistroPrecos/*
 *                   endpoints, data-ftx-loading attribute, DataTables API
 * üì¶ DEPEND√äNCIAS : ASP.NET Core Razor Pages, jQuery, DataTables, ata.js (arquivo externo),
 *                   Bootstrap 5, Font Awesome 6 Duotone (fa-folders), ftx-card-header (layout)
 * üìù OBSERVA√á√ïES  : 200 linhas. **CSS AVAN√áADO**: ftx-badge-status com cores customizadas (Verde
 *                   Militar #4A5D23 para Ativo, Cinza Chumbo #4A4A4A para Inativo), min-width 85px,
 *                   uppercase, letter-spacing 0.3px, hover translateY(-1px). Bot√µes de a√ß√£o
 *                   ftx-actions (flexbox gap 4px), btn-icon-28 (28x28px), border-radius 6px, hover
 *                   translateY(-2px). Header ftx-card-header azul #3D5771 com bot√£o laranja
 *                   (outline branco hover). ViewData icon fa-folders. DataTable ftx-table
 *                   (table-bordered table-striped). Layout moderno FrotiX completo. @section
 *                   ScriptsBlock referencia ata.js. CSS inline extenso (~100 linhas). Sistema
 *                   cr√≠tico para gest√£o contratual. Badges com texto branco (#fff color).
 *****************************************************************************************@
@page

@model FrotiX.Models.AtaRegistroPrecos

@{
	ViewData["Title"] = "Atas de Registro de Pre√ßos";
	ViewData["PageName"] = "ataregistroprecos_index";
	ViewData["Heading"] = "<i class='fa-duotone fa-folders'></i> Cadastros: <span class='fw-300'>Atas de Registro de Pre√ßos</span>";
	ViewData["Category1"] = "Cadastros";
	ViewData["PageIcon"] = "fa-duotone fa-folders";
}

@section HeadBlock {
	<style>
		/* ======== OUTLINE BRANCO NO BOT√ÉO DO HEADER (Padr√£o FrotiX) ======== */
		.ftx-card-header .btn-fundo-laranja {
			outline: 2px solid rgba(255, 255, 255, 0.5) !important;
			outline-offset: 1px;
			transition: all 0.2s ease;
		}

		.ftx-card-header .btn-fundo-laranja:hover {
			outline: 2px solid rgba(255, 255, 255, 0.8) !important;
			outline-offset: 2px;
		}

		/* ===== BADGE DE STATUS (sem degrad√™ - Padr√£o FrotiX) ===== */
		.ftx-badge-status {
			font-size: 0.75rem;
			padding: 0.35rem 0.75rem;
			border-radius: 6px;
			font-weight: 600;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 0.35rem;
			min-width: 85px;
			text-align: center;
			text-decoration: none;
			transition: all 0.2s ease;
			text-transform: uppercase;
			letter-spacing: 0.3px;
		}

		.ftx-badge-status:hover {
			transform: translateY(-1px);
			cursor: pointer;
		}

		.ftx-badge-status i {
			font-size: 0.7rem;
		}

		/* Ativo = Verde Militar */
		.ftx-badge-status.btn-verde {
			background-color: #4A5D23 !important;
			color: #fff !important;
			border: none;
		}

		.ftx-badge-status.btn-verde:hover {
			background-color: #3d4d1c !important;
		}

		/* Inativo = Cinza Chumbo */
		.ftx-badge-status.fundo-cinza {
			background-color: #4A4A4A !important;
			color: #fff !important;
		}

		.ftx-badge-status.fundo-cinza:hover {
			background-color: #3a3a3a !important;
		}

		/* ===== BOT√ïES DE A√á√ÉO NA TABELA ===== */
		.ftx-actions {
			display: flex;
			justify-content: center;
			align-items: center;
			flex-wrap: wrap;
			gap: 4px;
		}

		.ftx-actions .btn,
		.ftx-actions .btn-icon-28 {
			width: 28px;
			height: 28px;
			padding: 0 !important;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			border-radius: 6px;
			font-size: 0.85rem;
			transition: all 0.2s ease;
			border: none;
			color: #fff !important;
		}

		.ftx-actions .btn:hover,
		.ftx-actions .btn-icon-28:hover {
			transform: translateY(-2px);
		}

		/* Glow por cor de bot√£o */
		.ftx-actions .btn-azul {
			box-shadow: 0 2px 6px rgba(50, 93, 136, 0.35);
		}

		.ftx-actions .btn-azul:hover {
			box-shadow: 0 4px 10px rgba(50, 93, 136, 0.5);
		}

		.ftx-actions .btn-vinho {
			box-shadow: 0 2px 6px rgba(114, 47, 55, 0.35);
		}

		.ftx-actions .btn-vinho:hover {
			box-shadow: 0 4px 10px rgba(114, 47, 55, 0.5);
		}

		/* ===== BOT√ïES DESABILITADOS (quando ata inativa ou com depend√™ncias) ===== */
		/* IMPORTANTE: For√ßar pointer-events:auto para permitir tooltips */
		.ftx-actions .btn.disabled,
		.ftx-actions .btn.disabled:hover,
		.ftx-actions .btn.disabled:focus {
			pointer-events: auto !important;
			opacity: 0.5;
			cursor: not-allowed !important;
			transform: none !important;
			box-shadow: none !important;
		}

		/* ===== TOOLTIP BOOTSTRAP ESTILO SYNCFUSION (para quebra de linha) ===== */
		.tooltip-ftx-syncfusion .tooltip-inner {
			background-color: #4a6b8a !important;
			color: #ffffff !important;
			border: 1px solid #7a8a9a !important;
			border-radius: 8px !important;
			padding: 8px 12px !important;
			font-size: 13px !important;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
			text-align: left !important;
			white-space: normal !important;
			line-height: 1.4 !important;
			max-width: 300px !important;
		}

		.tooltip-ftx-syncfusion .tooltip-arrow {
			display: none !important;
		}
	</style>
}

<div class="row">
	<div class="col-xl-12">
		<div id="panel-1" class="panel">
			<!-- ===== HEADER FROTIX ===== -->
			<div class="ftx-card-header">
				<h2 class="titulo-paginas">
					<i class="fa-duotone fa-folders"></i>
					Atas de Registro de Pre√ßos
				</h2>
				<div class="ftx-card-actions">
					<a href="/AtaRegistroPrecos/Upsert" class="btn btn-fundo-laranja" data-ftx-loading>
						<i class="fa-duotone fa-clone-plus icon-pulse me-1"></i> Adicionar Ata
					</a>
				</div>
			</div>

			<div class="panel-container show">
				<div class="panel-content">
					<div class="box-body">
						<table id="tblAta" class="table table-bordered table-striped" width="100%">
							<thead>
								<tr>
									<th>Ata</th>
									<th>Processo</th>
									<th>Objeto</th>
									<th>Empresa</th>
									<th>Vig√™ncia</th>
									<th>Valor</th>
									<th>Status</th>
									<th>A√ß√µes</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section ScriptsBlock {

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
		crossorigin="anonymous" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
		crossorigin="anonymous"></script>

	<script src="~/js/cadastros/ata.js" asp-append-version="true"></script>
}