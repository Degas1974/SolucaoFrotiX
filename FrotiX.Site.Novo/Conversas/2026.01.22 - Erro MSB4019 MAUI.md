# 2026.01.22 - Erro MSB4019 MAUI

## Resumo executivo

Ajustado o build para evitar a importação automática de workloads (MAUI) em um projeto web que não utiliza MAUI, prevenindo o erro MSB4019.

Corrigida a referência de rubrica inicial na view de Viagens para usar a propriedade `Rubrica` do modelo `Viagem`, eliminando o erro CS1061.

Removidas diretivas `using` duplicadas nos controllers de Abastecimento e Viagem, reduzindo avisos de compilação.

Ajuste final em `ViagemController.cs` removendo usings redundantes de `System.Security.*` e `System.Threading.Tasks`.

Reintroduzido `using System.Threading.Tasks` em `ViagemController.cs` após erros CS0246 de `Task/Task<>` no build.

Reintroduzidos `using System.Security.Claims` e `using System.Security.Cryptography` em `ViagemController.cs` após erros em `ClaimsPrincipal`, `ClaimTypes` e `SHA256`.

Correções de documentação: ajustes de títulos, blocos de código e remoção de seções duplicadas corrompidas em documentações de Viagens e Abastecimento.

Qualificação explícita de `ClaimsPrincipal`/`ClaimTypes` em `ViagemController.cs` para evitar erros de resolução de namespace.

## Arquivos alterados

- Directory.Build.props
- Pages/Viagens/Upsert.cshtml
- Documentacao/Pages/Viagens - Upsert.md
- Documentacao/Pages/Viagens - Upsert.html
- Controllers/AbastecimentoController.cs
- Controllers/ViagemController.cs
- Documentacao/Controllers/AbastecimentoController.md
- Documentacao/Controllers/ViagemController.md
- Documentacao/Controllers/AbastecimentoController.html
- Documentacao/Controllers/ViagemController.html
- Documentacao/Pages/Viagens - Upsert.md
- Documentacao/Pages/Viagens - Upsert.html

## Decisões técnicas

- Desativado o Workload Resolver via propriedade `MSBuildEnableWorkloadResolver` para impedir a tentativa de importação do pack `Microsoft.Maui.Sdk`.
- Padronizada a verificação de rubrica inicial na view para a propriedade existente `Rubrica`.
- Removidos blocos duplicados de `using` nos controllers para eliminar CS0105.
- Removidos usings redundantes de `System.Security.*` e `System.Threading.Tasks` em `ViagemController.cs`.
- Restaurado `using System.Threading.Tasks` para corrigir erros de `Task/Task<>`.
- Restaurados `using System.Security.Claims` e `using System.Security.Cryptography` para corrigir erros de segurança/criptografia.
- Ajustes de formatação Markdown e remoção de duplicidades em documentações afetadas.
- Uso explícito de `System.Security.Claims.ClaimsPrincipal` e `System.Security.Claims.ClaimTypes` no `ViagemController.cs`.
- Correção de regressões visuais: badges Status com fa-duotone, tooltip Finalizar, cor btn-foto, tooltips em botões desabilitados.
- Refatoração completa do Modal de Finalização: layout em cards, 6 itens devolvidos (Documento, Cartão, Cabo, Arla, Cinta, Tablet), botão Ficha corrigido para null/false/0.

## Próximos passos

- Reabrir a solução ou reconstruir o projeto para validar o carregamento sem o erro.
