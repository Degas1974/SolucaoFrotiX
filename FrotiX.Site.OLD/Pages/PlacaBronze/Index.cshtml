@* ****************************************************************************************
 * ‚ö° ARQUIVO: Pages/PlacaBronze/Index.cshtml
 * --------------------------------------------------------------------------------------
 * üéØ OBJETIVO     : P√°gina de listagem de Placas de Bronze com DataTable e CRUD via
 *                   JavaScript (placabronze.js). Sistema de identifica√ß√£o de ve√≠culos.
 * üì• ENTRADAS     : @Model FrotiX.Models.PlacaBronze, route /PlacaBronze, bot√µes delegados
 *                   no DataTable (editar/excluir/toggle status), OnGet() do IndexModel
 * üì§ SA√çDAS       : DataTable #tblPlacaBronze renderizado (4 colunas: Descri√ß√£o da Placa,
 *                   Ve√≠culo Associado, Status, A√ß√£o), link para /PlacaBronze/Upsert,
 *                   exporta√ß√µes Excel/PDF, AJAX calls /api/PlacaBronze (placabronze.js)
 * üîó CHAMADA POR  : Route /PlacaBronze, navega√ß√£o sidebar (Cadastros > Placas de Bronze),
 *                   IndexModel.OnGet() (code-behind)
 * üîÑ CHAMA        : placabronze.js (439 linhas - anti-double initialization flag
 *                   placaBronzeInitialized, loadList, delete handlers, status toggle,
 *                   event cleanup .off(), stopImmediatePropagation), /PlacaBronze/Upsert,
 *                   /api/PlacaBronze/* endpoints, data-ftx-loading, DataTables API
 * üì¶ DEPEND√äNCIAS : ASP.NET Core Razor Pages, jQuery, DataTables (table-bordered table-striped),
 *                   placabronze.js (arquivo externo complexo com flag anti-reinit), Bootstrap 5,
 *                   Font Awesome 6 Duotone (fa-file-certificate, fa-rectangle-history),
 *                   Syncfusion tooltips (data-ejtip)
 * üìù OBSERVA√á√ïES  : 79 linhas. Layout FrotiX moderno (ftx-card-header azul #3D5771, bot√£o laranja
 *                   com outline branco hover). CSS inline minimalista (fundo-cinza #2F4F4F).
 *                   Coment√°rio IMPORTANTE no @section ScriptsBlock: "N√£o incluir global-toast.js
 *                   se j√° estiver no _Layout" (evitar duplica√ß√£o). placabronze.js usa flag
 *                   placaBronzeInitialized para prevenir double initialization. ViewData icon
 *                   fa-file-certificate. <br/><br/> para espa√ßamento antes da tabela.
 *                   Sistema de patrim√¥nio/identifica√ß√£o veicular.
 **************************************************************************************** *@
@page
@model FrotiX.Models.PlacaBronze

@{
	ViewData["Title"] = "Placas de Bronze";
	ViewData["PageName"] = "cadastros_placabronze";
	ViewData["Heading"] = "<i class='fa-duotone fa-file-certificate'></i> Cadastros: <span class='fw-300'>Placas de Bronze</span>";
	ViewData["Category1"] = "Cadastros";
	ViewData["PageIcon"] = "fa-duotone fa-file-certificate";
}

@section HeadBlock {
	<style>
		/* ======== OUTLINE BRANCO NO BOT√ÉO DO HEADER (Padr√£o FrotiX) ======== */
		.ftx-card-header .btn-fundo-laranja {
			outline: 2px solid rgba(255, 255, 255, 0.5) !important;
			outline-offset: 1px;
			transition: all 0.2s ease;
		}

		.ftx-card-header .btn-fundo-laranja:hover {
			outline: 2px solid rgba(255, 255, 255, 0.8) !important;
			outline-offset: 2px;
		}

		.fundo-cinza {
			background-color: #2F4F4F;
			color: aliceblue;
		}
	</style>
}

<div class="row">
	<div class="col-xl-12">
		<div id="panel-1" class="panel">
			<div class="panel-container show">
				<!-- HEADER DO CARD -->
				<div class="ftx-card-header">
					<h2 class="titulo-paginas">
						<i class="fa-duotone fa-rectangle-history"></i>
						Listagem de Placas de Bronze
					</h2>
					<div class="ftx-card-actions">
						<a href="/PlacaBronze/Upsert"
						   class="btn btn-fundo-laranja"
						   data-ftx-loading
						   data-ejtip="Adicionar nova placa de bronze ao sistema">
							<i class="fa-duotone fa-clone-plus icon-pulse me-1"></i>
							Adicionar Placa de Bronze
						</a>
					</div>
				</div>

				<div class="panel-content">
					<div class="box-body">
						<br /><br />
						<table id="tblPlacaBronze" class="table table-bordered table-striped" width="100%">
							<thead>
								<tr>
									<th>Descri√ß√£o da Placa</th>
									<th>Ve√≠culo Associado</th>
									<th>Status</th>
									<th>A√ß√£o</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section ScriptsBlock {
	<script>
		/***
		 * ‚ö° ARQUIVO: placabronze.js (Externo - Arquivo dedicado)
		 * ============================================================================
		 * üì• RESPONSABILIDADES:
		 *    ‚Ä¢ Flag anti-reinit: placaBronzeInitialized (evita double binding)
		 *    ‚Ä¢ loadList() - Busca placas via AJAX para DataTable
		 *    ‚Ä¢ Delete handlers - Valida√ß√£o de depend√™ncias antes de excluir
		 *    ‚Ä¢ Status toggle - Ativar/inativar placa via AJAX
		 *    ‚Ä¢ Event cleanup - $.off() + stopImmediatePropagation
		 *    ‚Ä¢ Event delegation - Bot√µes .btn-editar, .btn-delete
		 *
		 * üì§ SA√çDAS: DataTable #tblPlacaBronze inicializado com dados din√¢micos
		 *
		 * ‚ö†Ô∏è IMPORTANTE: N√£o incluir global-toast.js se j√° estiver no _Layout
		 * üîÑ DOCUMENTA√á√ÉO: Ver arquivo completo /wwwroot/js/cadastros/placabronze.js (439 linhas)
		 ***/
	</script>

	<script src="~/js/cadastros/placabronze.js" asp-append-version="true"></script>
}
