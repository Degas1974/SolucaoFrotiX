@*****************************************************************************************
 * âš¡ ARQUIVO: Lockout.cshtml
 * --------------------------------------------------------------------------------------
 * ğŸ¯ OBJETIVO     : PÃ¡gina de bloqueio de conta que permite desbloqueio via senha.
 *
 * ğŸ“¥ ENTRADAS     : Input.Password (senha para desbloqueio), ViewBag.User, ViewBag.Email.
 *
 * ğŸ“¤ SAÃDAS       : POST para LockoutModel com tentativa de desbloqueio.
 *
 * ğŸ”— CHAMADA POR  : Rota Razor Pages /Account/Lockout.
 *
 * ğŸ”„ CHAMA        : LockoutModel.OnPostAsync(), _ValidationScriptsPartial.
 *
 * ğŸ“¦ DEPENDÃŠNCIAS : Razor Pages, Bootstrap, jQuery, ValidationScriptsPartial.
 *
 * ğŸ“ OBSERVAÃ‡Ã•ES  : Campo de senha possui valor hardcoded para demo (Password123!) e
 *                   deve ser removido em produÃ§Ã£o.
 *****************************************************************************************@
@page
@model LockoutModel
@{
    ViewData["PageName"] = "lockout";
}

@* [DOC] Container centralizado com formulÃ¡rio de desbloqueio *@
<div class="container py-4 py-lg-5 my-lg-5 px-4 px-sm-0 text-white d-flex align-items-center justify-content-center">
    <form id="js-login" role="form" class="text-center text-white mb-5 pb-5" method="post">
        @* [DOC] Avatar do usuÃ¡rio bloqueado *@
        <div class="py-3">
            <img src="~/img/demo/avatars/avatar-admin-lg.png" class="img-responsive rounded-circle img-thumbnail" alt="thumbnail">
        </div>
        @* [DOC] InformaÃ§Ãµes do usuÃ¡rio e campo de senha para desbloquear *@
        <div class="form-group">
            <h3>
                @ViewBag.User
                <small>
                    @ViewBag.Email
                </small>
            </h3>
            <p class="text-white opacity-50">Enter password to unlock screen</p>
            @* [DOC] Input de senha com botÃ£o de submit integrado *@
            <div class="input-group input-group-lg">
                @* [DOC] ATENÃ‡ÃƒO: value="Password123!" hardcoded - REMOVER em produÃ§Ã£o *@
                <input type="password" asp-for="Input.Password" class="form-control" value="Password123!" required="required" />
                <span class="invalid-feedback" asp-validation-for="Input.Password">Sorry, you missed this one.</span>
                <div class="input-group-append">
                    <button class="btn btn-verde shadow-0" type="submit" id="button-addon5"><i class="fal fa-key"></i></button>
                </div>
            </div>
        </div>
        @* [DOC] Link para voltar Ã  pÃ¡gina de login (caso nÃ£o seja este usuÃ¡rio) *@
        <div class="text-center">
            <a asp-page="Login" class="text-white opacity-90">Not <span class="text-secondary">@ViewBag.User</span>?</a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        /****************************************************************************************
         * âš¡ FUNÃ‡ÃƒO: click #js-login-btn
         * --------------------------------------------------------------------------------------
         * ğŸ¯ OBJETIVO     : Validar formulÃ¡rio de desbloqueio antes do submit usando API de
         *                   validaÃ§Ã£o HTML5 + classes Bootstrap.
         *
         * ğŸ“¥ ENTRADAS     : [Event] event - Evento de clique do botÃ£o
         *
         * ğŸ“¤ SAÃDAS       : Form validado visualmente (classe 'was-validated')
         *
         * ğŸ”— CHAMADA POR  : Evento click do botÃ£o #js-login-btn
         *
         * ğŸ”„ CHAMA        : form.checkValidity(), form.addClass()
         *
         * ğŸ“¦ DEPENDÃŠNCIAS : jQuery, Bootstrap Validation
         *
         * ğŸ“ OBSERVAÃ‡Ã•ES  : ValidaÃ§Ã£o ocorre no cliente antes do POST ao servidor.
         ****************************************************************************************/
        $("#js-login-btn").click(function (event) {
            // [DOC] Seleciona formulÃ¡rio para aplicar validaÃ§Ã£o customizada do Bootstrap
            var form = $("#js-login");

            // [DOC] Se formulÃ¡rio invÃ¡lido (senha vazia), impede submit
            if (form[0].checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
            }

            // [DOC] Adiciona classe Bootstrap para exibir feedback visual de validaÃ§Ã£o
            form.addClass('was-validated');
            // Perform ajax submit here...
        });
    </script>
}
