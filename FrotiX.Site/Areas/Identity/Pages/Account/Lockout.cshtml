@*****************************************************************************************
 * ‚ö° P√ÅGINA: Lockout
 * --------------------------------------------------------------------------------------
 * üéØ OBJETIVO     : P√°gina de bloqueio de conta por tentativas de login falhas. Exibe
 *                   formul√°rio para desbloquear tela com senha, mostrando avatar e
 *                   informa√ß√µes do usu√°rio bloqueado.
 *
 * üì• ENTRADAS     : Input.Password (string) - Senha para desbloquear
 *                   ViewBag.User (string) - Nome do usu√°rio bloqueado
 *                   ViewBag.Email (string) - Email do usu√°rio bloqueado
 *
 * üì§ SA√çDAS       : HTML - Formul√°rio de desbloqueio com avatar + valida√ß√£o JavaScript
 *
 * üîó CHAMADA POR  : Sistema de autentica√ß√£o (ap√≥s m√∫ltiplas tentativas de login falhas)
 *
 * üîÑ CHAMA        : LockoutModel (POST), _ValidationScriptsPartial
 *
 * üì¶ DEPEND√äNCIAS : ASP.NET Core Identity, jQuery, Bootstrap Validation
 *
 * üìù OBSERVA√á√ïES  : Senha pr√©-preenchida (Password123!) - deve ser removido em produ√ß√£o
 *                   por seguran√ßa. Usa btn-verde personalizado.
 *****************************************************************************************@
@page
@model LockoutModel
@{
    ViewData["PageName"] = "lockout";
}

@* [DOC] Container centralizado com formul√°rio de desbloqueio *@
<div class="container py-4 py-lg-5 my-lg-5 px-4 px-sm-0 text-white d-flex align-items-center justify-content-center">
    <form id="js-login" role="form" class="text-center text-white mb-5 pb-5" method="post">
        @* [DOC] Avatar do usu√°rio bloqueado *@
        <div class="py-3">
            <img src="~/img/demo/avatars/avatar-admin-lg.png" class="img-responsive rounded-circle img-thumbnail" alt="thumbnail">
        </div>
        @* [DOC] Informa√ß√µes do usu√°rio e campo de senha para desbloquear *@
        <div class="form-group">
            <h3>
                @ViewBag.User
                <small>
                    @ViewBag.Email
                </small>
            </h3>
            <p class="text-white opacity-50">Enter password to unlock screen</p>
            @* [DOC] Input de senha com bot√£o de submit integrado *@
            <div class="input-group input-group-lg">
                @* [DOC] ATEN√á√ÉO: value="Password123!" hardcoded - REMOVER em produ√ß√£o *@
                <input type="password" asp-for="Input.Password" class="form-control" value="Password123!" required="required" />
                <span class="invalid-feedback" asp-validation-for="Input.Password">Sorry, you missed this one.</span>
                <div class="input-group-append">
                    <button class="btn btn-verde shadow-0" type="submit" id="button-addon5"><i class="fal fa-key"></i></button>
                </div>
            </div>
        </div>
        @* [DOC] Link para voltar √† p√°gina de login (caso n√£o seja este usu√°rio) *@
        <div class="text-center">
            <a asp-page="Login" class="text-white opacity-90">Not <span class="text-secondary">@ViewBag.User</span>?</a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        /****************************************************************************************
         * ‚ö° FUN√á√ÉO: click #js-login-btn
         * --------------------------------------------------------------------------------------
         * üéØ OBJETIVO     : Validar formul√°rio de desbloqueio antes do submit usando API de
         *                   valida√ß√£o HTML5 + classes Bootstrap.
         *
         * üì• ENTRADAS     : [Event] event - Evento de clique do bot√£o
         *
         * üì§ SA√çDAS       : Form validado visualmente (classe 'was-validated')
         *
         * üîó CHAMADA POR  : Evento click do bot√£o #js-login-btn
         *
         * üîÑ CHAMA        : form.checkValidity(), form.addClass()
         *
         * üì¶ DEPEND√äNCIAS : jQuery, Bootstrap Validation
         *
         * üìù OBSERVA√á√ïES  : Valida√ß√£o ocorre no cliente antes do POST ao servidor.
         ****************************************************************************************/
        $("#js-login-btn").click(function (event) {
            // [DOC] Seleciona formul√°rio para aplicar valida√ß√£o customizada do Bootstrap
            var form = $("#js-login");

            // [DOC] Se formul√°rio inv√°lido (senha vazia), impede submit
            if (form[0].checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
            }

            // [DOC] Adiciona classe Bootstrap para exibir feedback visual de valida√ß√£o
            form.addClass('was-validated');
            // Perform ajax submit here...
        });
    </script>
}
