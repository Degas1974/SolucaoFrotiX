@*****************************************************************************************
 * âš¡ PÃGINA: ForgotPassword
 * --------------------------------------------------------------------------------------
 * ğŸ¯ OBJETIVO     : PÃ¡gina de recuperaÃ§Ã£o de senha. Permite usuÃ¡rio solicitar reset de
 *                   senha atravÃ©s do email cadastrado. Exibe formulÃ¡rio com validaÃ§Ã£o
 *                   e envia email com link de recuperaÃ§Ã£o.
 *
 * ğŸ“¥ ENTRADAS     : Input.Email (string) - Email do usuÃ¡rio para recuperaÃ§Ã£o
 *
 * ğŸ“¤ SAÃDAS       : HTML - FormulÃ¡rio de recuperaÃ§Ã£o + seÃ§Ã£o de validaÃ§Ã£o JavaScript
 *
 * ğŸ”— CHAMADA POR  : UsuÃ¡rio que esqueceu senha (link na pÃ¡gina de login)
 *
 * ğŸ”„ CHAMA        : ForgotPasswordModel (POST), _ValidationScriptsPartial
 *
 * ğŸ“¦ DEPENDÃŠNCIAS : ASP.NET Core Identity, jQuery, Bootstrap Validation
 *
 * ğŸ“ OBSERVAÃ‡Ã•ES  : Interface com tema personalizado (btn-vinho). Usa validaÃ§Ã£o HTML5
 *                   + Bootstrap + JavaScript customizado.
 *****************************************************************************************@
@page
@model ForgotPasswordModel
@{
    ViewData["PageName"] = "forgotpassword";
}

@* [DOC] SeÃ§Ã£o de cabeÃ§alho da pÃ¡gina com mensagem descontraÃ­da *@
@section PageHeading {
    <div class="col-xl-12">
        <h2 class="fs-xxl fw-500 text-white text-center">
            "My dog ate my password"
            <small class="h3 fw-300 mt-3 mb-5 text-white opacity-60 hidden-sm-down">
                Not a problem, happens to the best of us. Just use the form below to reset it!
            </small>
        </h2>
    </div>
}

@* [DOC] Card centralizado com formulÃ¡rio de recuperaÃ§Ã£o de senha *@
<div class="col-xl-6 ml-auto mr-auto">
    <div class="card p-4 rounded-plus bg-faded">
        <form id="js-login" method="post">
            @* [DOC] Campo de email com validaÃ§Ã£o HTML5 (required) e mensagem de ajuda *@
            <div class="form-group">
                <label class="form-label" asp-for="Input.Email">Your username or email</label>
                <input type="email" asp-for="Input.Email" class="form-control" placeholder="Recovery email" required>
                <span class="invalid-feedback" asp-validation-for="Input.Email">No, you missed this one.</span>
                <div class="help-block">We will email you the instructions on how to reset your password.</div>
            </div>
            @* [DOC] BotÃ£o de submissÃ£o com estilo personalizado (btn-vinho) *@
            <div class="row no-gutters">
                <div class="col-md-4 ml-auto text-right">
                    <button id="js-login-btn" type="submit" class="btn btn-vinho">Recover</button>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        /****************************************************************************************
         * âš¡ FUNÃ‡ÃƒO: click #js-login-btn
         * --------------------------------------------------------------------------------------
         * ğŸ¯ OBJETIVO     : Validar formulÃ¡rio de recuperaÃ§Ã£o de senha antes do submit usando
         *                   API de validaÃ§Ã£o HTML5 + classes Bootstrap.
         *
         * ğŸ“¥ ENTRADAS     : [Event] event - Evento de clique do botÃ£o
         *
         * ğŸ“¤ SAÃDAS       : Form validado visualmente (classe 'was-validated')
         *
         * ğŸ”— CHAMADA POR  : Evento click do botÃ£o #js-login-btn
         *
         * ğŸ”„ CHAMA        : form.checkValidity(), form.addClass()
         *
         * ğŸ“¦ DEPENDÃŠNCIAS : jQuery, Bootstrap Validation
         *
         * ğŸ“ OBSERVAÃ‡Ã•ES  : ValidaÃ§Ã£o ocorre no cliente antes do POST ao servidor.
         ****************************************************************************************/
        $("#js-login-btn").click(function (event) {
            // [DOC] Seleciona formulÃ¡rio para aplicar validaÃ§Ã£o customizada do Bootstrap
            var form = $("#js-login");

            // [DOC] Se formulÃ¡rio invÃ¡lido (campo vazio ou email invÃ¡lido), impede submit
            if (form[0].checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
            }

            // [DOC] Adiciona classe Bootstrap para exibir feedback visual de validaÃ§Ã£o
            form.addClass('was-validated');
            // Perform ajax submit here...
        });
    </script>
}
