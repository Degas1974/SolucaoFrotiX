@* ****************************************************************************************
 * ‚ö° ARQUIVO: Pages/Unidade/VeiculosUnidade.cshtml
 * --------------------------------------------------------------------------------------
 * üéØ OBJETIVO     : P√°gina de listagem de Ve√≠culos vinculados a uma Unidade Usu√°ria espec√≠fica (relacionamento
 *                   Unidade ‚Üî Ve√≠culo) com DataTable #tblVeiculosUnidade (4 colunas: Placa/Marca/Contrato/A√ß√£o),
 *                   h2 "Unidade Usu√°ria - @Descricao", veiculosunidade.js (AJAX list), bot√£o voltar ./Index.
 * üì• ENTRADAS     : @page route /Unidade/VeiculosUnidade?id={UnidadeId}, @model VeiculosUnidadeModel (code-behind),
 *                   Model.UnidadeObj (properties UnidadeId Guid, Descricao string), veiculosunidade.js (AJAX GET)
 * üì§ SA√çDAS       : Panel com h2 border-bottom #325d88 "Unidade Usu√°ria - @Model.UnidadeObj.Descricao",
 *                   input hidden asp-for="UnidadeObj.UnidadeId" (se != Guid.Empty), DataTable #tblVeiculosUnidade
 *                   (4 colunas tbody vazio), bot√£o btn-voltar col-6 link ./Index "Voltar √† Lista" fa-rotate-left
 *                   data-ftx-loading, Bootstrap 5 CDN (REDUNDANTE!), veiculosunidade.js cache busting,
 *                   jquery.tooltipster.min.js (js/ path ERRADO! sem ~/ - falha 404)
 * üîó CHAMADA POR  : Link "Ver Ve√≠culos" em Unidade/Index.cshtml DataTable a√ß√£o, route /Unidade/VeiculosUnidade?id={guid},
 *                   VeiculosUnidadeModel.OnGet(Guid id) (code-behind), bot√µes dashboard/reports Unidade
 * üîÑ CHAMA        : VeiculosUnidadeModel (code-behind Unidade/VeiculosUnidade.cshtml.cs), Model.UnidadeObj
 *                   (properties UnidadeId, Descricao - carregados OnGet via Repository GetById), ./Index (link voltar),
 *                   ~/js/cadastros/veiculosunidade.js (AJAX GET /api/Unidade/{id}/Veiculos loadList DataTable),
 *                   js/jquery.tooltipster.min.js (**PATH ERRADO! sem ~/ - deve ser ~/js/**), Bootstrap 5 CDN
 *                   (jsdelivr.net v5.3.8 CSS + JS bundle), ViewData (Title/PageName/Heading/Category1/PageIcon),
 *                   Font Awesome Duotone (fa-car-building, fa-rotate-left), CSS inline (.form-control-xs, .label,
 *                   input[type=checkbox] N√ÉO usados!), @addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers,
 *                   asp-for hidden input, asp-page link, asp-action form (N√ÉO usado! form sem inputs), data-ftx-loading
 * üì¶ DEPEND√äNCIAS : ASP.NET Core Razor Pages, VeiculosUnidadeModel (code-behind), @addTagHelper*, veiculosunidade.js
 *                   (AJAX list/unlink ve√≠culos), DataTables jQuery plugin, Bootstrap 5 CDN (REDUNDANTE), Tooltipster
 *                   (jquery.tooltipster.min.js - path errado), Font Awesome 6 Duotone, CSS inline (N√ÉO usado),
 *                   asp-for/asp-page TagHelpers, data-ftx-loading
 * üìù OBSERVA√á√ïES  : 109 linhas. P√°gina ve√≠culos de uma unidade (relacionamento UnidadeVeiculo). ViewData config:
 *                   - Title: "Ve√≠culos da Unidade Usu√°ria"
 *                   - PageName: "unidade_veiculosunidade"
 *                   - Heading: "<i class='fa-duotone fa-car-building'></i> Cadastros: <span class='fw-300'>Ve√≠culos da Unidade Usu√°ria</span>"
 *                   - Category1: "Cadastros"
 *                   - PageIcon: "fa-duotone fa-car-building"
 *                   @addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers (linha 2 - global _ViewImports j√° tem, redundante).
 *                   CSS inline (N√ÉO usado): .form-control-xs, .label, input[type=checkbox] (sobras copypaste - remover).
 *                   @section HeadBlock: VAZIO {}. Form method POST asp-action="Upsert" (N√ÉO faz sentido! p√°gina s√≥
 *                   lista ve√≠culos, sem inputs edit, sem submit - remover form tag ou adicionar funcionalidade vincular).
 *                   Asp-validation-summary ModelOnly text-danger (N√ÉO usado! sem inputs, sem valida√ß√£o). @if
 *                   (Model.UnidadeObj.UnidadeId != Guid.Empty) input hidden asp-for="UnidadeObj.UnidadeId" (preserva
 *                   ID para postback - mas form N√ÉO submeta! contradiz asp-action="Upsert"). H2 border-bottom #325d88
 *                   text-primary "Unidade Usu√°ria - @Model.UnidadeObj.Descricao" (nome unidade din√¢mico). Panel nested
 *                   col-xl-12 #panel-1: <br/><br/> (espa√ßamento desnecess√°rio - remover) + table #tblVeiculosUnidade
 *                   width 100% table-bordered table-striped. DataTable 4 colunas thead:
 *                   1. Placa (ve√≠culo associado)
 *                   2. Marca (join MarcaVeiculo/ModeloVeiculo)
 *                   3. Contrato/Fornecedor (join Contratos contrato loca√ß√£o fornecedor)
 *                   4. A√ß√£o (bot√µes view details, unlink ve√≠culo da unidade - AJAX DELETE /api/Unidade/{id}/Veiculo/{veiculoId})
 *                   Tbody vazio (preenchido via veiculosunidade.js AJAX). Bot√£o voltar: form-group row col-9 col-6
 *                   asp-page="./Index" btn-voltar data-ftx-loading fa-rotate-left icon-space icon-rotate-left "Voltar √† Lista".
 *                   @section ScriptsBlock: **Bootstrap 5 CDN REDUNDANTE** (v5.3.8 CSS + JS bundle), veiculosunidade.js
 *                   asp-append-version="true", **jquery.tooltipster.min.js PATH ERRADO** (js/jquery.tooltipster.min.js
 *                   sem ~/ - deve ser ~/js/ ou CDN - 404 error!). **PROBLEMAS**:
 *                   1. @addTagHelper* redundante (_ViewImports j√° tem)
 *                   2. CSS inline N√ÉO usado (remover)
 *                   3. Form asp-action="Upsert" N√ÉO faz sentido (s√≥ lista, remover ou add funcionalidade vincular)
 *                   4. Input hidden UnidadeId preservado mas form n√£o submeta
 *                   5. Asp-validation-summary N√ÉO usado
 *                   6. Bootstrap CDN redundante
 *                   7. <br/><br/> espa√ßamento manual (usar mt-3)
 *                   8. **Tooltipster path ERRADO** (js/ sem ~/ - 404! corrigir para ~/js/ ou CDN ou remover se N√ÉO usado)
 *                   veiculosunidade.js deve: loadList() GET /api/Unidade/{id}/Veiculos (populate DataTable), bot√£o
 *                   unlink DELETE confirm, DataTable config. Relacionamento: Unidade (1) ‚Üî Veiculo (N) via join table
 *                   UnidadeVeiculo (many-to-many - um ve√≠culo pode servir m√∫ltiplas unidades, uma unidade tem m√∫ltiplos ve√≠culos).
 **************************************************************************************** *@
@page
@addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers

@model FrotiX.Pages.Unidade.VeiculosUnidadeModel

@{
	ViewData["Title"] = "Ve√≠culos da Unidade Usu√°ria";
	ViewData["PageName"] = "unidade_veiculosunidade";
	ViewData["Heading"] = "<i class='fa-duotone fa-car-building'></i> Cadastros: <span class='fw-300'>Ve√≠culos da Unidade Usu√°ria</span>";
	ViewData["Category1"] = "Cadastros";
	ViewData["PageIcon"] = "fa-duotone fa-car-building";
}

<style>
	.form-control-xs {
		height: calc(1em + .775rem + 2px) !important;
		padding: .125rem .25rem !important;
		font-size: .75rem !important;
		line-height: 1.5;
		border-radius: .2rem;
	}

	.label {
		margin-bottom: -5px;
		margin-top: 10px;
	}

	input[type=checkbox] {
		vertical-align: middle;
		position: relative;
		bottom: 1px;
	}
</style>

@section HeadBlock {

}

<form method="post" asp-action="Upsert">
	<div class="row">
		<div class="col-xl-12">
			<div id="panel-1" class="panel">
				<div class="panel-container show">
					<div class="panel-content">
						<div asp-validation-summary="ModelOnly" class="text-danger"></div>
						@if (Model.UnidadeObj.UnidadeId != Guid.Empty)
						{
							<input type="hidden" asp-for="UnidadeObj.UnidadeId" />
						}

						<div class="col-12 px-3" style="border-bottom:1px solid #325d88">
							<h2 class="text-primary">Unidade Usu√°ria - @Model.UnidadeObj.Descricao </h2>
						</div>

						<div class="col-12 pt-3">

							<div class="col-xl-12">
								<div id="panel-1" class="panel">
									<div class="panel-container show">
										<div class="panel-content ">
											<div class="box-body">
												<br /><br />
												<table id="tblVeiculosUnidade" class="table table-bordered table-striped" width="100%">
													<thead>
														<tr>
															<th>Placa</th>
															<th>Marca</th>
															<th>Contrato/Fornecedor</th>
															<th>A√ß√£o</th>
														</tr>
													</thead>
													<tbody>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-9">
									<div class="row">
										<div class="col-6">
											<a asp-page="./Index" class="btn btn-voltar form-control" data-ftx-loading>
												<i class="fa-duotone fa-rotate-left icon-space icon-rotate-left"></i>
												Voltar √† Lista
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</form>

@section ScriptsBlock {

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" crossorigin="anonymous" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

	<script src="~/js/cadastros/veiculosunidade.js" asp-append-version="true"></script>

	<script type="text/javascript" src="js/jquery.tooltipster.min.js"></script>

}
