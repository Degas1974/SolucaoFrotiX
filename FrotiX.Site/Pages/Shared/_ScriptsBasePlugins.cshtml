<!-- ARQUIVO COMPLETO: _ScriptsBasePlugins.cshtml -->
<!-- COPIE TODO O CONTE√öDO ABAIXO E SUBSTITUA O ARQUIVO EXISTENTE -->
<!-- ‚ö†Ô∏è ORDEM CR√çTICA - N√ÉO ALTERE SEM NECESSIDADE ‚ö†Ô∏è -->

<script src="~/js/kendo-error-suppressor.js" asp-append-version="true"></script>

<!-- ============================================ -->
<!-- GRUPO 1: DEPEND√äNCIAS BASE (ORDEM EXATA!) -->
<!-- ============================================ -->
<!-- 1. jQuery PRIMEIRO (antes de qualquer plugin que use $) -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
		crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js" asp-append-version="true"></script>

<!-- 2. SignalR CDN (ANTES do signalr_manager.js!) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.14/signalr.min.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/flatpickr" crossorigin="anonymous"></script>

<!-- Script de inicializa√ß√£o do SignalR com preven√ß√£o de dupla inicializa√ß√£o -->
<script>
	// Configura√ß√£o para inicializa√ß√£o √öNICA do SignalR
	(function() {
		// Flag global para evitar m√∫ltiplas inicializa√ß√µes
		if (window._signalRAlertasIniciado) {
			console.log('‚ö†Ô∏è Sistema de alertas j√° foi iniciado, pulando...');
			return;
		}
		window._signalRAlertasIniciado = true;

		document.addEventListener('DOMContentLoaded', function() {

			// Verificar se o SignalR est√° dispon√≠vel
			function verificarSignalR() {
				if (typeof signalR === 'undefined') {
					console.error('SignalR n√£o est√° carregado ainda');
					setTimeout(verificarSignalR, 500);
					return;
				}

				// Adicionar delay extra para garantir que tudo est√° pronto
				setTimeout(function() {
					inicializarSistemaAlertas();
				}, 2000); // 2 segundos de delay total
			}

			function inicializarSistemaAlertas() {
				// Verificar novamente para evitar dupla inicializa√ß√£o
				if (window._alertasJaInicializados) {
					console.log('‚úÖ Alertas j√° inicializados');
					return;
				}
				window._alertasJaInicializados = true;

				console.log('Inicializando sistema de alertas do sino...');

				// Fun√ß√£o melhorada para o sino
				function inicializarSignalR() {
					console.log('Sino: Conectando ao SignalR Manager...');

					if (!window.SignalRManager) {
						console.error('SignalRManager n√£o est√° dispon√≠vel');
						setTimeout(inicializarSignalR, 1000);
						return;
					}

					// Obter conex√£o com tratamento de erro melhorado
					window.SignalRManager.getConnection()
						.then(function(connection) {
							console.log('Sino conectado ao SignalRManager');

							// Verificar informa√ß√µes de debug
							var debugInfo = window.SignalRManager.getDebugInfo();
							console.log('Informa√ß√µes de conex√£o:', debugInfo);

							// Configurar eventos do sino (verificar se fun√ß√µes existem)
							connection.on('NovoAlerta', function(alerta) {
								console.log('Novo alerta recebido:', alerta);
								if (typeof exibirNovoAlerta === 'function') {
									exibirNovoAlerta(alerta);
								}
							});

							connection.on('AtualizarBadgeAlertas', function(quantidade) {
								console.log('Atualizar badge:', quantidade);
								if (typeof atualizarBadge === 'function') {
									atualizarBadge(quantidade);
								}
							});

							connection.on('ExibirAlertasIniciais', function(alertas) {
								console.log('Alertas iniciais:', alertas);
								if (alertas && alertas.length > 0) {
									if (typeof renderizarAlertas === 'function') {
										renderizarAlertas(alertas);
									}
								}
							});

							// Registrar callbacks para reconex√£o
							window.SignalRManager.registerCallback({
								onReconnecting: function(error) {
									console.log('Sino: SignalR reconectando...');
								},
								onReconnected: function(connectionId) {
									console.log('Sino: SignalR reconectado');
									if (typeof carregarAlertasAtivos === 'function') {
										carregarAlertasAtivos();
									}
								},
								onClose: function(error) {
									console.log('Sino: SignalR desconectado');
								}
							});

							console.log('Sino: Event handlers configurados');

							if (typeof carregarAlertasAtivos === 'function') {
								carregarAlertasAtivos();
							}
						})
						.catch(function(error) {
							// Silenciar erros esperados de WebSocket
							if (!error.toString().includes('WebSocket')) {
								console.error('Sino: Erro ao conectar SignalR:', error);
							}
						});
				}

				// Iniciar com delay
				inicializarSignalR();
			}

			// Come√ßar verifica√ß√£o
			verificarSignalR();
		});
	})();
</script>

<!-- 3. SignalR Manager - Gerenciador Global (NOSSO - ap√≥s SignalR CDN) -->
<script src="~/js/signalr_manager.js" asp-append-version="true"></script>

<!-- ============================================ -->
<!-- GRUPO 3: FRAMEWORKS UI -->
<!-- ============================================ -->

<!-- ‚ö†Ô∏è ADICIONE O KENDO UI AQUI, ANTES DO VENDORS.BUNDLE.JS -->
<!-- Kendo UI - CDN Oficial Telerik -->
@* <link href="https://kendo.cdn.telerik.com/2023.1.117/styles/kendo.default-main.min.css" rel="stylesheet" /> *@
<script src="https://kendo.cdn.telerik.com/2023.1.117/js/jszip.min.js" crossorigin="anonymous"></script>
<!-- Usar distribui√ß√£o cl√°ssica (non-module) para evitar SyntaxError em browsers -->
<script src="https://kendo.cdn.telerik.com/2025.2.520/js/kendo.all.min.js" crossorigin="anonymous"></script>
<script src="https://kendo.cdn.telerik.com/2025.2.520/js/kendo.aspnetmvc.min.js" crossorigin="anonymous"></script>

<!-- PDF.js para o Kendo PDFViewer -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js" crossorigin="anonymous"></script>
<script>
	if (window.pdfjsLib) {
		pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
	}
</script>

@* <script src="/api/reports/resources/js/telerikReportViewer-19.1.25.521.min.js"></script>*@

 <script src="/api/reports/resources/js/telerikReportViewer-18.1.24.514.min.js"></script>

<!-- Syncfusion EJ2 (usando unpkg como alternativa - CDN oficial com problemas de CORS) -->
<script src="https://unpkg.com/@@syncfusion/ej2@@32.1.23/dist/ej2.min.js" crossorigin="anonymous"></script>
<!-- ============================================ -->
<!-- SYNCFUSION LOCALIZA√á√ÉO PT-BR COMPLETA      -->
<!-- CLDR + L10n para vers√£o 32.1.23            -->
<!-- ============================================ -->
<script>
(function() {
    'use strict';

    // URLs dos arquivos CLDR necess√°rios (vers√£o 44 - mais recente est√°vel)
    const CLDR_BASE = 'https://cdn.jsdelivr.net/npm/cldr-data@36.0.1';
    const cldrUrls = [
        `${CLDR_BASE}/main/pt/numbers.json`,
        `${CLDR_BASE}/main/pt/ca-gregorian.json`,
        `${CLDR_BASE}/main/pt/timeZoneNames.json`,
        `${CLDR_BASE}/main/pt/currencies.json`,
        `${CLDR_BASE}/supplemental/numberingSystems.json`,
        `${CLDR_BASE}/supplemental/currencyData.json`
    ];

    // Tradu√ß√µes L10n customizadas para pt-BR (Syncfusion 32.x)
    const ptBRLocale = {
        'pt': {
            // Grid
            'grid': {
                'EmptyRecord': 'Nenhum registro encontrado',
                'True': 'Sim',
                'False': 'N√£o',
                'InvalidFilterMessage': 'Dados de filtro inv√°lidos',
                'GroupDropArea': 'Arraste um cabe√ßalho de coluna aqui para agrupar',
                'UnGroup': 'Clique aqui para desagrupar',
                'GroupDisable': 'Agrupamento desabilitado para esta coluna',
                'FilterbarTitle': 'C√©lula de filtro',
                'EmptyDataSourceError': 'DataSource n√£o pode estar vazio no carregamento inicial',
                'Add': 'Adicionar',
                'Edit': 'Editar',
                'Cancel': 'Cancelar',
                'Update': 'Atualizar',
                'Delete': 'Excluir',
                'Print': 'Imprimir',
                'Pdfexport': 'Exportar PDF',
                'Excelexport': 'Exportar Excel',
                'Wordexport': 'Exportar Word',
                'Csvexport': 'Exportar CSV',
                'Search': 'Buscar',
                'Columnchooser': 'Colunas',
                'Save': 'Salvar',
                'Item': 'Item',
                'Items': 'Itens',
                'EditOperationAlert': 'Nenhum registro selecionado para edi√ß√£o',
                'DeleteOperationAlert': 'Nenhum registro selecionado para exclus√£o',
                'SaveButton': 'Salvar',
                'OKButton': 'OK',
                'CancelButton': 'Cancelar',
                'EditFormTitle': 'Detalhes de ',
                'AddFormTitle': 'Adicionar Novo Registro',
                'BatchSaveConfirm': 'Deseja salvar as altera√ß√µes?',
                'BatchSaveLostChanges': 'Altera√ß√µes n√£o salvas ser√£o perdidas. Deseja continuar?',
                'ConfirmDelete': 'Tem certeza que deseja excluir o registro?',
                'CancelEdit': 'Tem certeza que deseja cancelar as altera√ß√µes?',
                'ChooseColumns': 'Escolher Colunas',
                'SearchColumns': 'Buscar Colunas',
                'Matchs': 'Nenhuma correspond√™ncia encontrada',
                'FilterButton': 'Filtrar',
                'ClearButton': 'Limpar',
                'StartsWith': 'Come√ßa com',
                'EndsWith': 'Termina com',
                'Contains': 'Cont√©m',
                'Equal': 'Igual',
                'NotEqual': 'Diferente',
                'LessThan': 'Menor que',
                'LessThanOrEqual': 'Menor ou igual',
                'GreaterThan': 'Maior que',
                'GreaterThanOrEqual': 'Maior ou igual',
                'ChooseDate': 'Escolha uma data',
                'EnterValue': 'Digite o valor',
                'Copy': 'Copiar',
                'Group': 'Agrupar por esta coluna',
                'Ungroup': 'Desagrupar por esta coluna',
                'autoFitAll': 'Ajustar todas as colunas',
                'autoFit': 'Ajustar esta coluna',
                'Export': 'Exportar',
                'FirstPage': 'Primeira P√°gina',
                'LastPage': '√öltima P√°gina',
                'PreviousPage': 'P√°gina Anterior',
                'NextPage': 'Pr√≥xima P√°gina',
                'SortAscending': 'Ordenar Crescente',
                'SortDescending': 'Ordenar Decrescente',
                'EditRecord': 'Editar Registro',
                'DeleteRecord': 'Excluir Registro',
                'FilterMenu': 'Filtro',
                'SelectAll': 'Selecionar Todos',
                'Blanks': '(Vazios)',
                'FilterTrue': 'Sim',
                'FilterFalse': 'N√£o',
                'NoResult': 'Nenhum resultado encontrado',
                'ClearFilter': 'Limpar Filtro',
                'NumberFilter': 'Filtros Num√©ricos',
                'TextFilter': 'Filtros de Texto',
                'DateFilter': 'Filtros de Data',
                'DateTimeFilter': 'Filtros de Data/Hora',
                'MatchCase': 'Diferenciar mai√∫sculas',
                'Between': 'Entre',
                'CustomFilter': 'Filtro Personalizado',
                'CustomFilterPlaceHolder': 'Digite o valor',
                'CustomFilterDatePlaceHolder': 'Escolha uma data',
                'AND': 'E',
                'OR': 'OU',
                'ShowRowsWhere': 'Mostrar linhas onde:',
                'currentPageInfo': '{0} de {1} p√°ginas',
                'totalItemsInfo': '({0} itens)',
                'firstPageTooltip': 'Ir para primeira p√°gina',
                'lastPageTooltip': 'Ir para √∫ltima p√°gina',
                'nextPageTooltip': 'Ir para pr√≥xima p√°gina',
                'previousPageTooltip': 'Ir para p√°gina anterior',
                'nextPagerTooltip': 'Ir para pr√≥ximos itens',
                'previousPagerTooltip': 'Ir para itens anteriores',
                'pagerDropDown': 'Itens por p√°gina',
                'pagerAllDropDown': 'Itens',
                'All': 'Todos'
            },
            // Pager
            'pager': {
                'currentPageInfo': '{0} de {1} p√°ginas',
                'totalItemsInfo': '({0} itens)',
                'firstPageTooltip': 'Ir para primeira p√°gina',
                'lastPageTooltip': 'Ir para √∫ltima p√°gina',
                'nextPageTooltip': 'Ir para pr√≥xima p√°gina',
                'previousPageTooltip': 'Ir para p√°gina anterior',
                'nextPagerTooltip': 'Ir para pr√≥ximos itens',
                'previousPagerTooltip': 'Ir para itens anteriores',
                'pagerDropDown': 'Itens por p√°gina',
                'pagerAllDropDown': 'Itens',
                'All': 'Todos'
            },
            // DatePicker
            'datepicker': {
                'placeholder': 'Selecione uma data',
                'today': 'Hoje'
            },
            // DateTimePicker
            'datetimepicker': {
                'placeholder': 'Selecione data e hora',
                'today': 'Hoje'
            },
            // TimePicker
            'timepicker': {
                'placeholder': 'Selecione o hor√°rio'
            },
            // Calendar
            'calendar': {
                'today': 'Hoje'
            },
            // DateRangePicker
            'daterangepicker': {
                'placeholder': 'Selecione um per√≠odo',
                'startLabel': 'Data Inicial',
                'endLabel': 'Data Final',
                'applyText': 'Aplicar',
                'cancelText': 'Cancelar',
                'selectedDays': 'Dias Selecionados',
                'days': 'Dias',
                'customRange': 'Per√≠odo Personalizado'
            },
            // DropDownList
            'dropdownlist': {
                'noRecordsTemplate': 'Nenhum registro encontrado',
                'actionFailureTemplate': 'Falha na requisi√ß√£o'
            },
            // ComboBox
            'combobox': {
                'noRecordsTemplate': 'Nenhum registro encontrado',
                'actionFailureTemplate': 'Falha na requisi√ß√£o'
            },
            // AutoComplete
            'autocomplete': {
                'noRecordsTemplate': 'Nenhum registro encontrado',
                'actionFailureTemplate': 'Falha na requisi√ß√£o'
            },
            // MultiSelect
            'multiselect': {
                'noRecordsTemplate': 'Nenhum registro encontrado',
                'actionFailureTemplate': 'Falha na requisi√ß√£o',
                'selectAllText': 'Selecionar Todos',
                'unSelectAllText': 'Desmarcar Todos',
                'overflowCountTemplate': '+${count} mais...'
            },
            // ListBox
            'listbox': {
                'noRecordsTemplate': 'Nenhum registro encontrado'
            },
            // Uploader
            'uploader': {
                'Browse': 'Procurar',
                'Clear': 'Limpar',
                'Upload': 'Enviar',
                'dropFilesHint': 'Ou solte arquivos aqui',
                'invalidMinFileSize': 'Arquivo muito pequeno',
                'invalidMaxFileSize': 'Arquivo muito grande',
                'invalidFileType': 'Tipo de arquivo n√£o permitido',
                'uploadFailedMessage': 'Falha no upload',
                'uploadSuccessMessage': 'Upload conclu√≠do',
                'removedSuccessMessage': 'Arquivo removido',
                'removedFailedMessage': 'Falha ao remover arquivo',
                'inProgress': 'Enviando',
                'readyToUploadMessage': 'Pronto para enviar',
                'remove': 'Remover',
                'cancel': 'Cancelar',
                'delete': 'Excluir'
            },
            // NumericTextBox
            'numerictextbox': {
                'incrementTitle': 'Incrementar valor',
                'decrementTitle': 'Decrementar valor'
            },
            // Dialog
            'dialog': {
                'close': 'Fechar'
            },
            // RichTextEditor
            'richtexteditor': {
                'alignments': 'Alinhamentos',
                'justifyLeft': 'Alinhar √† Esquerda',
                'justifyCenter': 'Centralizar',
                'justifyRight': 'Alinhar √† Direita',
                'justifyFull': 'Justificar',
                'fontName': 'Fonte',
                'fontSize': 'Tamanho',
                'fontColor': 'Cor da Fonte',
                'backgroundColor': 'Cor de Fundo',
                'bold': 'Negrito',
                'italic': 'It√°lico',
                'underline': 'Sublinhado',
                'strikethrough': 'Tachado',
                'clearFormat': 'Limpar Formata√ß√£o',
                'clearAll': 'Limpar Tudo',
                'cut': 'Cortar',
                'copy': 'Copiar',
                'paste': 'Colar',
                'unorderedList': 'Lista com Marcadores',
                'orderedList': 'Lista Numerada',
                'indent': 'Aumentar Recuo',
                'outdent': 'Diminuir Recuo',
                'undo': 'Desfazer',
                'redo': 'Refazer',
                'createLink': 'Inserir Link',
                'image': 'Inserir Imagem',
                'createTable': 'Criar Tabela',
                'removeTable': 'Remover Tabela',
                'sourcecode': 'C√≥digo Fonte',
                'preview': 'Visualizar',
                'maximize': 'Maximizar',
                'minimize': 'Minimizar'
            },
            // Scheduler
            'schedule': {
                'day': 'Dia',
                'week': 'Semana',
                'workWeek': 'Semana de Trabalho',
                'month': 'M√™s',
                'agenda': 'Agenda',
                'weekAgenda': 'Agenda Semanal',
                'workWeekAgenda': 'Agenda da Semana de Trabalho',
                'monthAgenda': 'Agenda Mensal',
                'today': 'Hoje',
                'noEvents': 'Sem eventos',
                'emptyContainer': 'N√£o h√° eventos agendados para este dia.',
                'allDay': 'Dia inteiro',
                'start': 'In√≠cio',
                'end': 'Fim',
                'more': 'mais',
                'close': 'Fechar',
                'cancel': 'Cancelar',
                'noTitle': '(Sem t√≠tulo)',
                'delete': 'Excluir',
                'deleteEvent': 'Excluir Evento',
                'deleteMultipleEvent': 'Excluir M√∫ltiplos Eventos',
                'selectedItems': 'Itens selecionados',
                'deleteSeries': 'Excluir S√©rie',
                'edit': 'Editar',
                'editSeries': 'Editar S√©rie',
                'editEvent': 'Editar Evento',
                'createEvent': 'Criar',
                'subject': 'Assunto',
                'addTitle': 'Adicionar t√≠tulo',
                'moreDetails': 'Mais Detalhes',
                'save': 'Salvar',
                'editContent': 'Deseja editar apenas este evento ou toda a s√©rie?',
                'deleteRecurrenceContent': 'Deseja excluir apenas este evento ou toda a s√©rie?',
                'deleteContent': 'Tem certeza que deseja excluir este evento?',
                'deleteMultipleContent': 'Tem certeza que deseja excluir os eventos selecionados?',
                'newEvent': 'Novo Evento',
                'title': 'T√≠tulo',
                'location': 'Local',
                'description': 'Descri√ß√£o',
                'timezone': 'Fuso Hor√°rio',
                'startTimezone': 'Fuso Hor√°rio Inicial',
                'endTimezone': 'Fuso Hor√°rio Final',
                'repeat': 'Repetir',
                'saveButton': 'Salvar',
                'cancelButton': 'Cancelar',
                'deleteButton': 'Excluir',
                'recurrence': 'Recorr√™ncia',
                'wrongPattern': 'O padr√£o de recorr√™ncia √© inv√°lido.',
                'seriesChangeAlert': 'As altera√ß√µes feitas em inst√¢ncias espec√≠ficas desta s√©rie ser√£o canceladas e esses eventos corresponder√£o √† s√©rie novamente.',
                'createError': 'A dura√ß√£o do evento deve ser menor que a frequ√™ncia com que ele ocorre.',
                'recurrenceDateValidation': 'Alguns meses t√™m menos dias do que a data selecionada. Para esses meses, a ocorr√™ncia cair√° no √∫ltimo dia do m√™s.',
                'sameDayAlert': 'Duas ocorr√™ncias do mesmo evento n√£o podem ocorrer no mesmo dia.',
                'editRecurrence': 'Editar Recorr√™ncia',
                'repeats': 'Repete',
                'alert': 'Alerta',
                'startEndError': 'A data de t√©rmino selecionada ocorre antes da data de in√≠cio.',
                'invalidDateError': 'O valor de data inserido √© inv√°lido.',
                'ok': 'OK',
                'occurrence': 'Ocorr√™ncia',
                'series': 'S√©rie',
                'previous': 'Anterior',
                'next': 'Pr√≥ximo',
                'timelineDay': 'Linha do Tempo - Dia',
                'timelineWeek': 'Linha do Tempo - Semana',
                'timelineWorkWeek': 'Linha do Tempo - Semana de Trabalho',
                'timelineMonth': 'Linha do Tempo - M√™s'
            }
        }
    };

    // Fun√ß√£o para carregar CLDR de forma ass√≠ncrona
    async function loadCldrData() {
        try {
            console.log('üåç Carregando dados CLDR para pt-BR...');

            const responses = await Promise.all(
                cldrUrls.map(url =>
                    fetch(url)
                        .then(res => {
                            if (!res.ok) throw new Error(`Falha ao carregar ${url}`);
                            return res.json();
                        })
                        .catch(err => {
                            console.warn(`‚ö†Ô∏è N√£o foi poss√≠vel carregar: ${url}`, err.message);
                            return null;
                        })
                )
            );

            // Filtrar respostas v√°lidas
            const validData = responses.filter(data => data !== null);

            if (validData.length > 0 && typeof ej !== 'undefined' && ej.base && ej.base.loadCldr) {
                ej.base.loadCldr(...validData);
                console.log(`‚úÖ CLDR carregado (${validData.length}/${cldrUrls.length} arquivos)`);
            }

            return true;
        } catch (error) {
            console.error('‚ùå Erro ao carregar CLDR:', error);
            return false;
        }
    }

    // Fun√ß√£o para aplicar localiza√ß√µes
    function applyLocalization() {
        try {
            if (typeof ej === 'undefined' || !ej.base) {
                console.warn('‚ö†Ô∏è Syncfusion n√£o carregado ainda');
                return false;
            }

            // Carregar tradu√ß√µes L10n
            if (ej.base.L10n && ej.base.L10n.load) {
                ej.base.L10n.load(ptBRLocale);
                console.log('‚úÖ Tradu√ß√µes L10n pt-BR carregadas');
            }

            // Definir cultura
            if (ej.base.setCulture) {
                ej.base.setCulture('pt');
                console.log('‚úÖ Cultura definida: pt');
            }

            // Definir c√≥digo da moeda
            if (ej.base.setCurrencyCode) {
                ej.base.setCurrencyCode('BRL');
                console.log('‚úÖ Moeda definida: BRL');
            }

            window.__syncfusionLocaleReady = true;
            document.dispatchEvent(new CustomEvent('syncfusion-locale-ready'));

            return true;
        } catch (error) {
            console.error('‚ùå Erro ao aplicar localiza√ß√£o:', error);
            return false;
        }
    }

    // Inicializa√ß√£o
    async function init() {
        try {
            // Primeiro aplicar tradu√ß√µes L10n (n√£o depende do CLDR)
            applyLocalization();

            // Depois carregar CLDR em background (para formata√ß√£o de n√∫meros/datas)
            await loadCldrData();

            console.log('üéâ Localiza√ß√£o Syncfusion pt-BR configurada com sucesso!');
            window.__cldrLoaded = true;

        } catch (error) {
            console.error('‚ùå Erro na inicializa√ß√£o da localiza√ß√£o:', error);
            window.__cldrLoaded = false;
        }
    }

    // Executar inicializa√ß√£o
    init();

})();
</script>
<!-- Registro de licen√ßa Syncfusion -->
<script>
	ej.base.registerLicense("Ngo9BigBOggjHTQxAR8/V1JGaF5cXGpCf1FpRmJGdld5fUVHYVZUTXxaS00DNHVRdkdlWX1ecXRVRmRcUkFxWEtWYEs=");
	// Flag e evento para indicar que licen√ßa foi registrada
	window.syncfusionLicenseReady = true;
	document.dispatchEvent(new CustomEvent('syncfusion-license-ready'));
</script>

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	  rel="stylesheet"
	  integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
	  crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
		crossorigin="anonymous"></script>
<!-- Shim para expor $.fn.tooltip usando Bootstrap 5 (evita logs \"bs.tooltip is not loaded\") -->
<script>
	(function ($, bootstrap) {
		if (!$ || !bootstrap || !bootstrap.Tooltip) return;
		if ($.fn.tooltip) return;
		$.fn.tooltip = function (arg) {
			return this.each(function () {
				var instance = bootstrap.Tooltip.getInstance(this);
				if (!instance) {
					instance = new bootstrap.Tooltip(this, typeof arg === 'object' ? arg : {});
				}
				if (typeof arg === 'string' && typeof instance[arg] === 'function') {
					instance[arg]();
				}
			});
		};
	})(window.jQuery, window.bootstrap);
</script>

<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/afeb78ad1f.js" crossorigin="anonymous"></script>

<!-- ============================================ -->
<!-- GRUPO 2: FUN√á√ïES GLOBAIS DO PROJETO -->
<!-- ============================================ -->
<!-- Fun√ß√µes Globais do FrotiX (usa $, deixe depois do jQuery) -->
<script src="~/js/dt-better-errors.js" asp-append-version="true"></script>
<script src="~/js/frotix.js" asp-append-version="true"></script>

<!-- ============================================ -->
<!-- GRUPO 4: BUNDLES DO PROJETO -->
<!-- ============================================ -->

<script src="~/js/vendors.bundle.js"></script>
<script src="/js/shims/jquery.throttle-debounce.js"></script>
<script>
(function () {
  if (!(window.bootstrap && (bootstrap.Dropdown || bootstrap.Tooltip || bootstrap.Popover))) return;

  // Dropdowns: inicializa todos os com data-bs-toggle="dropdown"
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('[data-bs-toggle="dropdown"]').forEach(function (el) {
      new bootstrap.Dropdown(el, {
        popperConfig: function (defaultCfg) {
          defaultCfg = defaultCfg || {};
          defaultCfg.modifiers = (defaultCfg.modifiers || []).concat([
            { name: 'computeStyles', options: { gpuAcceleration: false } }
          ]);
          return defaultCfg;
        }
      });
    });

    // Tooltips (se voc√™ usa)
    document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(function (el) {
      new bootstrap.Tooltip(el, {
        popperConfig: { modifiers: [{ name: 'computeStyles', options: { gpuAcceleration: false } }] }
      });
    });

    // Popovers (se voc√™ usa)
    document.querySelectorAll('[data-bs-toggle="popover"]').forEach(function (el) {
      new bootstrap.Popover(el, {
        popperConfig: { modifiers: [{ name: 'computeStyles', options: { gpuAcceleration: false } }] }
      });
    });
  });
})();
</script>
<script src="/js/shims/rgb2hex.js"></script>
<script src="~/js/app.bundle.js" asp-append-version="true"></script>
<script src="~/js/site.js"></script>
<script src="~/js/botao-loading.js"></script>
<script src="~/js/loading_script.js"></script>

<!-- ============================================ -->
<!-- GRUPO 5: BIBLIOTECAS DE DADOS E TABELAS -->
<!-- ============================================ -->
<!-- Moment.js -->
<script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/min/moment.min.js" crossorigin="anonymous"></script>

<!-- DataTables + Plugins -->
<link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.13.8/b-2.4.2/r-2.5.0/sl-1.7.0/datatables.min.css" crossorigin="anonymous">
<script src="https://cdn.datatables.net/v/dt/dt-1.13.8/b-2.4.2/r-2.5.0/sl-1.7.0/datatables.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/plug-ins/1.13.8/sorting/datetime-moment.js" crossorigin="anonymous"></script>

<!-- JSZip e PDFMake (para exporta√ß√£o DataTables) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js" crossorigin="anonymous"></script>

<!-- Configurar formatos de data do DataTables -->
<script>
	$.fn.dataTable.moment('DD/MM/YYYY');
	$.fn.dataTable.moment('DD/MM/YYYY HH:mm:ss');
</script>

<!-- ============================================ -->
<!-- GRUPO 6: BIBLIOTECAS UI E ALERTAS -->
<!-- ============================================ -->
<!-- jQuery UI -->
<script src="https://code.jquery.com/ui/1.14.1/jquery-ui.min.js" crossorigin="anonymous"></script>

<!-- Toastr -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js" crossorigin="anonymous"></script>

<!-- SweetAlert2 (vers√£o fixada) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.4/dist/sweetalert2.min.css" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.4/dist/sweetalert2.all.min.js" crossorigin="anonymous"></script>

<!-- Select2 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js" crossorigin="anonymous"></script>

<!-- TinyMCE (com API Key v√°lida) -->
<script src="https://cdn.tiny.cloud/1/kl9497zd17qjx1o2xzsybc9rf2dikkylq4ou0riihjjo7wbg/tinymce/8/tinymce.min.js"
		referrerpolicy="origin"
		crossorigin="anonymous"></script>

<!-- ============================================ -->
<!-- GRUPO 7: HELPERS E WRAPPERS DO PROJETO -->
<!-- ============================================ -->
<!-- Helpers pr√≥prios (DEPOIS de carregar swal/Swal) -->
<script src="js/toastHelper_006.js"></script>
<script src="js/sweetalert_interop.js" asp-append-version="true"></script>
<script src="js/alerta.js" asp-append-version="true"></script>
<script src="js/error_handler.js" asp-append-version="true"></script>

<!-- Configura√ß√µes Syncfusion -->
<script src="~/js/global-toast.js" asp-append-version="true"></script>
<script src="~/js/syncfusion_tooltips.js" asp-append-version="true"></script>

<!-- 4. Alertas Navbar (NOSSO - ap√≥s SignalR Manager) -->
<script src="~/js/alertasfrotix/alertas_navbar.js" asp-append-version="true"></script>
<script src="~/js/alertasfrotix/alertas_gestao.js" asp-append-version="true"></script>

<!-- ============================================ -->
<!-- GRUPO 8: FUN√á√ïES UTILIT√ÅRIAS -->
<!-- ============================================ -->
<!-- Fun√ß√£o moeda (mantida) -->
<script>
	function moeda(a,e,r,t){let n="",h=j=0,u=tamanho2=0,l=ajd2="",o=window.Event?t.which:t.keyCode;if(13==o||8==o)return!0;if(n=String.fromCharCode(o),-1=="0123456789".indexOf(n))return!1;for(u=a.value.length,h=0;h<u&&("0"==a.value.charAt(h)||a.value.charAt(h)==r);h++);for(l="";h<u;h++)-1!="0123456789".indexOf(a.value.charAt(h))&&(l+=a.value.charAt(h));if(l+=n,0==(u=l.length)&&(a.value=""),1==u&&(a.value="0"+r+"0"+l),2==u&&(a.value="0"+r+l),u>2){for(ajd2="",j=0,h=u-3;h>=0;h--)3==j&&(ajd2+=e,j=0),ajd2+=l.charAt(h),j++;for(a.value="",tamanho2=ajd2.length,h=tamanho2-1;h>=0;h--)a.value+=ajd2.charAt(h);a.value+=r+l.substr(u-2,u)}return!1}
</script>

<!-- ============================================ -->
<!-- GRUPO 9: CONFIGURA√á√ïES ESPEC√çFICAS -->
<!-- ============================================ -->
<!-- Configura√ß√£o do Rich Text Editor (EJ2) -->
<script>
	var defaultRTE;
	function onCreate(){ defaultRTE = this; }
	function toolbarClick(e){
	  if(e.item.id=="rte_toolbar_Image"){
		var element=document.getElementById('rte_upload');
		element.ej2_instances[0].uploading=function(args){
		  args.currentRequest.setRequestHeader('XSRF-TOKEN', document.getElementsByName('__RequestVerificationToken')[0].value);
		}
	  }
	}
	ej.base.L10n.load({
	  "pt-BR": { "richtexteditor": {
		"alignments":"Alinhamentos","justifyLeft":"Alinhar √† Esquerda","justifyCenter":"Centralizar","justifyRight":"Alinhar √† Direita","justifyFull":"Justificar",
		"fontName":"Nome da Fonte","fontSize":"Tamanho da Fonte","fontColor":"Cor da Fonte","backgroundColor":"Cor de Fundo","bold":"Negrito","italic":"It√°lico",
		"underline":"Sublinhado","strikethrough":"Tachado","clearFormat":"Limpa Formata√ß√£o","clearAll":"Limpa Tudo","cut":"Cortar","copy":"Copiar","paste":"Colar",
		"unorderedList":"Lista com Marcadores","orderedList":"Lista Numerada","indent":"Aumentar Identa√ß√£o","outdent":"Diminuir Identa√ß√£o","undo":"Desfazer",
		"redo":"Refazer","superscript":"Sobrescrito","subscript":"Subscrito","createLink":"Inserir Link","openLink":"Abrir Link","editLink":"Editar Link",
		"removeLink":"Remover Link","image":"Inserir Imagem","replace":"Substituir","align":"Alinhar","caption":"T√≠tulo da Imagem","remove":"Remover",
		"insertLink":"Inserir Link","display":"Exibir","altText":"Texto Alternativo","dimension":"Mudar Tamanho","fullscreen":"Maximizar","maximize":"Maximizar",
		"minimize":"Minimizar","lowerCase":"Caixa Baixa","upperCase":"Caixa Alta","print":"Imprimir","formats":"Formatos","sourcecode":"Visualizar C√≥digo",
		"preview":"Exibir","viewside":"ViewSide","insertCode":"Inserir C√≥digo","linkText":"Exibir Texto","linkTooltipLabel":"T√≠tulo","linkWebUrl":"Endere√ßo Web",
		"linkTitle":"Entre com um t√≠tulo","linkurl":"http://exemplo.com","linkOpenInNewWindow":"Abrir Link em Nova Janela","linkHeader":"Inserir Link",
		"dialogInsert":"Inserir","dialogCancel":"Cancelar","dialogUpdate":"Atualizar","imageHeader":"Inserir Imagem",
		"imageLinkHeader":"Voc√™ pode proporcionar um link da web","mdimageLink":"Favor proporcionar uma URL para sua imagem",
		"imageUploadMessage":"Solte a imagem aqui ou busque para o upload","imageDeviceUploadMessage":"Clique aqui para o upload",
		"imageAlternateText":"Texto Alternativo","alternateHeader":"Texto Alternativo","browse":"Procurar","imageUrl":"http://exemplo.com/imagem.png","imageCaption":"T√≠tulo",
		"imageSizeHeader":"Tamanho da Imagem","imageHeight":"Altura","imageWidth":"Largura","textPlaceholder":"Entre com um Texto","inserttablebtn":"Inserir Tabela",
		"tabledialogHeader":"Inserir Tabela","tableWidth":"Largura","cellpadding":"Espa√ßamento de c√©lula","cellspacing":"Espa√ßamento de c√©lula",
		"columns":"N√∫mero de colunas","rows":"N√∫mero de linhas","tableRows":"Linhas da Tabela","tableColumns":"Colunas da Tabela",
		"tableCellHorizontalAlign":"Alinhamento Horizontal da C√©lular","tableCellVerticalAlign":"Alinhamento Vertical da C√©lular",
		"createTable":"Criar Tabela","removeTable":"Remover Tabela","tableHeader":"Cabe√ßalho da Tabela","tableRemove":"Remover Tabela",
		"tableCellBackground":"Fundo da C√©lula","tableEditProperties":"Editar Propriedades da Tabela","styles":"Estilos",
		"insertColumnLeft":"Inserir Coluna √† Esquerda","insertColumnRight":"Inserir Coluna √† Direita","deleteColumn":"Apagar Coluna",
		"insertRowBefore":"Inserir Linha Antes","insertRowAfter":"Inserir Linha Depois","deleteRow":"Apagar Linha","tableEditHeader":"Edita Tabela",
		"TableHeadingText":"Cabe√ßalho","TableColText":"Col","imageInsertLinkHeader":"Inserir Link","editImageHeader":"Edita Imagem",
		"alignmentsDropDownLeft":"Alinhar √† Esquerda","alignmentsDropDownCenter":"Centralizar","alignmentsDropDownRight":"Alinhar √† Direita",
		"alignmentsDropDownJustify":"Justificar","imageDisplayDropDownInline":"Inline","imageDisplayDropDownBreak":"Break",
		"tableInsertRowDropDownBefore":"Inserir linha antes","tableInsertRowDropDownAfter":"Inserir linha depois","tableInsertRowDropDownDelete":"Apagar linha",
		"tableInsertColumnDropDownLeft":"Inserir coluna √† esquerda","tableInsertColumnDropDownRight":"Inserir coluna √† direita",
		"tableInsertColumnDropDownDelete":"Apagar Coluna","tableVerticalAlignDropDownTop":"Alinhar no Topo","tableVerticalAlignDropDownMiddle":"Alinhar no Meio",
		"tableVerticalAlignDropDownBottom":"Alinhar no Fundo","tableStylesDropDownDashedBorder":"Bordas Pontilhadas","tableStylesDropDownAlternateRows":"Linhas Alternadas",
		"pasteFormat":"Colar Formato","pasteFormatContent":"Escolha a a√ß√£o de formata√ß√£o","plainText":"Texto Simples","cleanFormat":"Limpar","keepFormat":"Manter",
		"formatsDropDownParagraph":"Par√°grafo","formatsDropDownCode":"C√≥digo","formatsDropDownQuotation":"Cita√ß√£o","formatsDropDownHeading1":"Cabe√ßalho 1",
		"formatsDropDownHeading2":"Cabe√ßalho 2","formatsDropDownHeading3":"Cabe√ßalho 3","formatsDropDownHeading4":"Cabe√ßalho 4",
		"fontNameSegoeUI":"SegoeUI","fontNameArial":"Arial","fontNameGeorgia":"Georgia","fontNameImpact":"Impact","fontNameTahoma":"Tahoma",
		"fontNameTimesNewRoman":"Times New Roman","fontNameVerdana":"Verdana"
	  }}});
</script>

<!-- ============================================ -->
<!-- GRUPO 10: UTILIT√ÅRIOS DE LIMPEZA -->
<!-- ============================================ -->
<!-- Limpa a tela depois de fechar modais/overlays -->
<script>
	function limparResiduosModalVanilla(){
	  document.querySelectorAll('.modal-backdrop, .swal2-container, .swal2-backdrop-show').forEach(e=>e.remove());
	  document.body.classList.remove('modal-open');
	  document.body.style.overflow='';
	  document.body.style.zIndex='';
	  document.querySelectorAll('div').forEach(div=>{
		const s=getComputedStyle(div);
		if((s.position==='fixed'||s.position==='absolute') && parseInt(s.zIndex||0)>=1040 &&
		   ((parseInt(s.width)===window.innerWidth)||s.width==='100vw'||s.left==='0px') &&
		   ((parseInt(s.height)===window.innerHeight)||s.height==='100vh'||s.top==='0px')){
		  if(!div.classList.contains('fc') && !div.classList.contains('fc-view-harness')){
			div.remove();
		  }
		}
	  });
	}
</script>

<!-- NOTA: Tradu√ß√µes L10n completas j√° carregadas no in√≠cio do arquivo (SYNCFUSION LOCALIZA√á√ÉO PT-BR COMPLETA) -->
