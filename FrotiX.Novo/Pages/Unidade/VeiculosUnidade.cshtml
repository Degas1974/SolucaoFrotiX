@* ****************************************************************************************
 * âš¡ ARQUIVO: Pages/Unidade/VeiculosUnidade.cshtml
 * --------------------------------------------------------------------------------------
 * ðŸŽ¯ OBJETIVO     : PÃ¡gina de listagem de VeÃ­culos vinculados a uma Unidade UsuÃ¡ria especÃ­fica (relacionamento
 *                   Unidade â†” VeÃ­culo) com DataTable #tblVeiculosUnidade (4 colunas: Placa/Marca/Contrato/AÃ§Ã£o),
 *                   h2 "Unidade UsuÃ¡ria - @Descricao", veiculosunidade.js (AJAX list), botÃ£o voltar ./Index.
 * ðŸ“¥ ENTRADAS     : @page route /Unidade/VeiculosUnidade?id={UnidadeId}, @model VeiculosUnidadeModel (code-behind),
 *                   Model.UnidadeObj (properties UnidadeId Guid, Descricao string), veiculosunidade.js (AJAX GET)
 * ðŸ“¤ SAÃDAS       : Panel com h2 border-bottom #325d88 "Unidade UsuÃ¡ria - @Model.UnidadeObj.Descricao",
 *                   input hidden asp-for="UnidadeObj.UnidadeId" (se != Guid.Empty), DataTable #tblVeiculosUnidade
 *                   (4 colunas tbody vazio), botÃ£o btn-voltar col-6 link ./Index "Voltar Ã  Lista" fa-rotate-left
 *                   data-ftx-loading, Bootstrap 5 CDN (REDUNDANTE!), veiculosunidade.js cache busting,
 *                   jquery.tooltipster.min.js (js/ path ERRADO! sem ~/ - falha 404)
 * ðŸ”— CHAMADA POR  : Link "Ver VeÃ­culos" em Unidade/Index.cshtml DataTable aÃ§Ã£o, route /Unidade/VeiculosUnidade?id={guid},
 *                   VeiculosUnidadeModel.OnGet(Guid id) (code-behind), botÃµes dashboard/reports Unidade
 * ðŸ”„ CHAMA        : VeiculosUnidadeModel (code-behind Unidade/VeiculosUnidade.cshtml.cs), Model.UnidadeObj
 *                   (properties UnidadeId, Descricao - carregados OnGet via Repository GetById), ./Index (link voltar),
 *                   ~/js/cadastros/veiculosunidade.js (AJAX GET /api/Unidade/{id}/Veiculos loadList DataTable),
 *                   js/jquery.tooltipster.min.js (**PATH ERRADO! sem ~/ - deve ser ~/js/**), Bootstrap 5 CDN
 *                   (jsdelivr.net v5.3.8 CSS + JS bundle), ViewData (Title/PageName/Heading/Category1/PageIcon),
 *                   Font Awesome Duotone (fa-car-building, fa-rotate-left), CSS inline (.form-control-xs, .label,
 *                   input[type=checkbox] NÃƒO usados!), @addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers,
 *                   asp-for hidden input, asp-page link, asp-action form (NÃƒO usado! form sem inputs), data-ftx-loading
 * ðŸ“¦ DEPENDÃŠNCIAS : ASP.NET Core Razor Pages, VeiculosUnidadeModel (code-behind), @addTagHelper*, veiculosunidade.js
 *                   (AJAX list/unlink veÃ­culos), DataTables jQuery plugin, Bootstrap 5 CDN (REDUNDANTE), Tooltipster
 *                   (jquery.tooltipster.min.js - path errado), Font Awesome 6 Duotone, CSS inline (NÃƒO usado),
 *                   asp-for/asp-page TagHelpers, data-ftx-loading
 * ðŸ“ OBSERVAÃ‡Ã•ES  : 109 linhas. PÃ¡gina veÃ­culos de uma unidade (relacionamento UnidadeVeiculo). ViewData config:
 *                   - Title: "VeÃ­culos da Unidade UsuÃ¡ria"
 *                   - PageName: "unidade_veiculosunidade"
 *                   - Heading: "<i class='fa-duotone fa-car-building'></i> Cadastros: <span class='fw-300'>VeÃ­culos da Unidade UsuÃ¡ria</span>"
 *                   - Category1: "Cadastros"
 *                   - PageIcon: "fa-duotone fa-car-building"
 *                   @addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers (linha 2 - global _ViewImports jÃ¡ tem, redundante).
 *                   CSS inline (NÃƒO usado): .form-control-xs, .label, input[type=checkbox] (sobras copypaste - remover).
 *                   @section HeadBlock: VAZIO {}. Form method POST asp-action="Upsert" (NÃƒO faz sentido! pÃ¡gina sÃ³
 *                   lista veÃ­culos, sem inputs edit, sem submit - remover form tag ou adicionar funcionalidade vincular).
 *                   Asp-validation-summary ModelOnly text-danger (NÃƒO usado! sem inputs, sem validaÃ§Ã£o). @if
 *                   (Model.UnidadeObj.UnidadeId != Guid.Empty) input hidden asp-for="UnidadeObj.UnidadeId" (preserva
 *                   ID para postback - mas form NÃƒO submeta! contradiz asp-action="Upsert"). H2 border-bottom #325d88
 *                   text-primary "Unidade UsuÃ¡ria - @Model.UnidadeObj.Descricao" (nome unidade dinÃ¢mico). Panel nested
 *                   col-xl-12 #panel-1: <br/><br/> (espaÃ§amento desnecessÃ¡rio - remover) + table #tblVeiculosUnidade
 *                   width 100% table-bordered table-striped. DataTable 4 colunas thead:
 *                   1. Placa (veÃ­culo associado)
 *                   2. Marca (join MarcaVeiculo/ModeloVeiculo)
 *                   3. Contrato/Fornecedor (join Contratos contrato locaÃ§Ã£o fornecedor)
 *                   4. AÃ§Ã£o (botÃµes view details, unlink veÃ­culo da unidade - AJAX DELETE /api/Unidade/{id}/Veiculo/{veiculoId})
 *                   Tbody vazio (preenchido via veiculosunidade.js AJAX). BotÃ£o voltar: form-group row col-9 col-6
 *                   asp-page="./Index" btn-voltar data-ftx-loading fa-rotate-left icon-space icon-rotate-left "Voltar Ã  Lista".
 *                   @section ScriptsBlock: **Bootstrap 5 CDN REDUNDANTE** (v5.3.8 CSS + JS bundle), veiculosunidade.js
 *                   asp-append-version="true", **jquery.tooltipster.min.js PATH ERRADO** (js/jquery.tooltipster.min.js
 *                   sem ~/ - deve ser ~/js/ ou CDN - 404 error!). **PROBLEMAS**:
 *                   1. @addTagHelper* redundante (_ViewImports jÃ¡ tem)
 *                   2. CSS inline NÃƒO usado (remover)
 *                   3. Form asp-action="Upsert" NÃƒO faz sentido (sÃ³ lista, remover ou add funcionalidade vincular)
 *                   4. Input hidden UnidadeId preservado mas form nÃ£o submeta
 *                   5. Asp-validation-summary NÃƒO usado
 *                   6. Bootstrap CDN redundante
 *                   7. <br/><br/> espaÃ§amento manual (usar mt-3)
 *                   8. **Tooltipster path ERRADO** (js/ sem ~/ - 404! corrigir para ~/js/ ou CDN ou remover se NÃƒO usado)
 *                   veiculosunidade.js deve: loadList() GET /api/Unidade/{id}/Veiculos (populate DataTable), botÃ£o
 *                   unlink DELETE confirm, DataTable config. Relacionamento: Unidade (1) â†” Veiculo (N) via join table
 *                   UnidadeVeiculo (many-to-many - um veÃ­culo pode servir mÃºltiplas unidades, uma unidade tem mÃºltiplos veÃ­culos).
 **************************************************************************************** *@
@page
@addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers

@model FrotiX.Pages.Unidade.VeiculosUnidadeModel

@{
	ViewData["Title"] = "VeÃ­culos da Unidade UsuÃ¡ria";
	ViewData["PageName"] = "unidade_veiculosunidade";
	ViewData["Heading"] = "<i class='fa-duotone fa-car-building'></i> Cadastros: <span class='fw-300'>VeÃ­culos da Unidade UsuÃ¡ria</span>";
	ViewData["Category1"] = "Cadastros";
	ViewData["PageIcon"] = "fa-duotone fa-car-building";
}

<style>
	.form-control-xs {
		height: calc(1em + .775rem + 2px) !important;
		padding: .125rem .25rem !important;
		font-size: .75rem !important;
		line-height: 1.5;
		border-radius: .2rem;
	}

	.label {
		margin-bottom: -5px;
		margin-top: 10px;
	}

	input[type=checkbox] {
		vertical-align: middle;
		position: relative;
		bottom: 1px;
	}
</style>

@section HeadBlock {

}

<form method="post" asp-action="Upsert">
	<div class="row">
		<div class="col-xl-12">
			<div id="panel-1" class="panel">
				<div class="panel-container show">
					<div class="panel-content">
						<div asp-validation-summary="ModelOnly" class="text-danger"></div>
						@if (Model.UnidadeObj.UnidadeId != Guid.Empty)
						{
							<input type="hidden" asp-for="UnidadeObj.UnidadeId" />
						}

						<div class="col-12 px-3" style="border-bottom:1px solid #325d88">
							<h2 class="text-primary">Unidade UsuÃ¡ria - @Model.UnidadeObj.Descricao </h2>
						</div>

						<div class="col-12 pt-3">

							<div class="col-xl-12">
								<div id="panel-1" class="panel">
									<div class="panel-container show">
										<div class="panel-content ">
											<div class="box-body">
												<br /><br />
												<table id="tblVeiculosUnidade" class="table table-bordered table-striped" width="100%">
													<thead>
														<tr>
															<th>Placa</th>
															<th>Marca</th>
															<th>Contrato/Fornecedor</th>
															<th>AÃ§Ã£o</th>
														</tr>
													</thead>
													<tbody>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-9">
									<div class="row">
										<div class="col-6">
											<a asp-page="./Index" class="btn btn-voltar form-control" data-ftx-loading>
												<i class="fa-duotone fa-rotate-left icon-space icon-rotate-left"></i>
												Voltar Ã  Lista
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</form>

@section ScriptsBlock {

	
	

	<script src="~/js/cadastros/veiculosunidade.js" asp-append-version="true"></script>

	<script type="text/javascript" src="js/jquery.tooltipster.min.js"></script>

}

