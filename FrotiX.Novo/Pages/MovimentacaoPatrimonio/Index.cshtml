@* ****************************************************************************************
 * âš¡ ARQUIVO: Pages/MovimentacaoPatrimonio/Index.cshtml
 * --------------------------------------------------------------------------------------
 * ðŸŽ¯ OBJETIVO     : Listagem de movimentaÃ§Ãµes de patrimÃ´nio com filtros dinÃ¢micos (data, setor origem/destino, responsÃ¡vel)
 * ðŸ“¥ ENTRADAS     : @page, @model IndexModel, filtros: drpDataMovimentacao, ddtSetorSecaoOrigem, ddtSetorSecaoDestino, cmbResponsavel
 * ðŸ“¤ SAÃDAS       : DataTable #tblMovimentacaoPatrimonio (JSON via API), loading overlay ftx-spin-overlay, redirecionamento para Upsert
 * ðŸ”— CHAMADA POR  : Menu navegaÃ§Ã£o (MovimentaÃ§Ãµes), links diretos, botÃ£o "Inserir MovimentaÃ§Ã£o"
 * ðŸ”„ CHAMA        : /api/movimentacaopatrimonio (assumido), ~/js/cadastros/movimentacaopatrimonio.js, ./MovimentacaoPatrimonio/Upsert
 * ðŸ“¦ DEPENDÃŠNCIAS : Syncfusion.EJ2 (DateRangePicker, DropDownTree, ComboBox), Bootstrap 5.3.8 (CDN), DataTables (implÃ­cito no JS), Font Awesome Duotone
 * ðŸ“ OBSERVAÃ‡Ã•ES  : Total: 173 linhas. PROBLEMA: Bootstrap 5.3.8 CDN redundante (jÃ¡ carregado no _Layout), CSS inline pequeno (27 linhas) apenas para outline botÃ£o header - pode ser extraÃ­do, Loading overlay padrÃ£o FrotiX (bom padrÃ£o), JS externo correto (movimentacaopatrimonio.js), Falta validaÃ§Ã£o: se filtros vazios DataTable pode tentar carregar tudo
 **************************************************************************************** *@
@page
@using Syncfusion.EJ2
@addTagHelper *, Syncfusion.EJ2
@model FrotiX.Pages.MovimentacaoPatrimonio.IndexModel

@{
	ViewData["Title"] = "MovimentaÃ§Ãµes";
	ViewData["PageName"] = "movimentacaopatrimonio_index";
	ViewData["Heading"] = "<i class='fa-duotone fa-truck-fast'></i> Cadastros: <span class='fw-300'>MovimentaÃ§Ãµes</span>";
	ViewData["Category1"] = "MovimentaÃ§Ãµes";
	ViewData["PageIcon"] = "fa-duotone fa-truck-fast";
}

@section HeadBlock {
	<style>
/* ======== OUTLINE BRANCO NO BOTÃƒO DO HEADER (PadrÃ£o FrotiX) ======== */
		.ftx-card-header .btn-fundo-laranja {
			outline: 2px solid rgba(255, 255, 255, 0.5) !important;
			outline-offset: 1px;
			transition: all 0.2s ease;
		}

		.ftx-card-header .btn-fundo-laranja:hover {
			outline: 2px solid rgba(255, 255, 255, 0.8) !important;
			outline-offset: 2px;
		}

	</style>
}

<style>
	.fundo-cinza {
		background-color: #2F4F4F;
		color: aliceblue;
	}

	.label {
		color: white;
	}
</style>

<div class="row">
	<div class="col-xl-12">
		<div id="panel-1" class="panel">
			<div class="panel-container show">
				<!-- HEADER DO CARD -->
				<div class="ftx-card-header">
					<h2 class="titulo-paginas">
						<i class="fa-duotone fa-conveyor-belt-boxes"></i>
						MovimentaÃ§Ã£o de PatrimÃ´nios
					</h2>
					<div class="ftx-card-actions">
						<a href="./MovimentacaoPatrimonio/Upsert" class="btn btn-fundo-laranja" data-ftx-loading>
							<i class="fa-duotone fa-clone-plus icon-pulse me-1"></i>
							Inserir MovimentaÃ§Ã£o
						</a>
					</div>
				</div>

				<div class="panel-content">
					<div class="box-body">
						<br /><br />
						<div class="col-12 px-3">
							<div class="d-flex justify-content-between align-items-center">
								<label class="fw-bold mb-0">
									<i class="fa-duotone fa-filter"></i>
									Escolha os filtros desejados para visualizar as MovimentaÃ§Ãµes:
								</label>
								<button id="btnFiltrarMovimentacoes" class="btn btn-marrom">
									<i class="fa-duotone fa-filter"></i>
									Filtrar MovimentaÃ§Ãµes
								</button>
							</div>
						</div>

						<br /><br />

						<div class="col-12">
							<div class="form-group row">
								<div class="col-sm-3">
									<label for="drpDataMovimentacao" class="form-label">
										<i class="fa-duotone fa-calendar"></i>
										Data MovimentaÃ§Ã£o
									</label>
									<ejs-daterangepicker id="drpDataMovimentacao" 
										placeholder="Selecione o perÃ­odo" 
										format="dd/MM/yyyy"
										locale="pt-BR"
										cssClass="e-outline">
									</ejs-daterangepicker>
								</div>

								<div class="col-sm-3">
									<label for="ddtSetorSecaoOrigem" class="form-label">
										<i class="fa-duotone fa-building"></i>
										Setor/SeÃ§Ã£o Origem
									</label>
									<ejs-dropdowntree id="ddtSetorSecaoOrigem"
										placeholder="Selecione Setor/SeÃ§Ã£o Origem"
										popupHeight="300px"
										showCheckBox="true"
										mode="Delimiter"
										allowFiltering="true"
										filterBarPlaceholder="Buscar..."
										cssClass="e-outline">
									</ejs-dropdowntree>
								</div>

								<div class="col-sm-3">
									<label for="ddtSetorSecaoDestino" class="form-label">
										<i class="fa-duotone fa-building"></i>
										Setor/SeÃ§Ã£o Destino
									</label>
									<ejs-dropdowntree id="ddtSetorSecaoDestino"
										placeholder="Selecione Setor/SeÃ§Ã£o Destino"
										popupHeight="300px"
										showCheckBox="true"
										mode="Delimiter"
										allowFiltering="true"
										filterBarPlaceholder="Buscar..."
										cssClass="e-outline">
									</ejs-dropdowntree>
								</div>

								<div class="col-sm-3">
									<label for="cmbResponsavel" class="form-label">
										<i class="fa-duotone fa-user"></i>
										ResponsÃ¡vel
									</label>
									<ejs-combobox id="cmbResponsavel"
										placeholder="Selecione o ResponsÃ¡vel"
										allowFiltering="true"
										filterBarPlaceholder="Buscar..."
										cssClass="e-outline">
									</ejs-combobox>
								</div>
							</div>
						</div>

						<br /><br />

						<table id="tblMovimentacaoPatrimonio" class="table table-bordered table-striped" width="100%">
							<thead>
								<tr>
									<th>Data MovimentaÃ§Ã£o</th>
									<th>NPR</th>
									<th>DescriÃ§Ã£o</th>
									<th>Setor Origem</th>
									<th>SeÃ§Ã£o Origem</th>
									<th>Setor Destino</th>
									<th>SeÃ§Ã£o Destino</th>
									<th>ResponsÃ¡vel MovimentaÃ§Ã£o</th>
									<th>AÃ§Ã£o</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- OVERLAY DE LOADING - PADRÃƒO FROTIX -->
<div id="loadingOverlayMovPatrimonio" class="ftx-spin-overlay" style="z-index: 999999; cursor: wait; display: none;">
    <div class="ftx-spin-box" style="text-align: center; min-width: 300px;">
        <img src="/images/logo_gota_frotix_transparente.png" alt="FrotiX" class="ftx-loading-logo" style="display: block;" />
        <div class="ftx-loading-bar"></div>
        <div class="ftx-loading-text">Carregando Movimentacoes...</div>
        <div class="ftx-loading-subtext">Aguarde, por favor</div>
    </div>
</div>

@section ScriptsBlock {
	
	

	<script src="~/js/cadastros/movimentacaopatrimonio.js" asp-append-version="true"></script>
}

