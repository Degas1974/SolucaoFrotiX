{
    "RemovidasTables":  [

                        ],
    "NovasViews":  [
                       "DocGenerator",
                       "vw_RankingMotoristasPorPeriodo"
                   ],
    "NovasTables":  [
                        "AnosDisponiveisAbastecimento",
                        "AnosDisponiveisVeiculo",
                        "ControleAcesso_BACKUP",
                        "DocGenerator",
                        "EstatisticaAbastecimentoCategoria",
                        "EstatisticaAbastecimentoCombustivel",
                        "EstatisticaAbastecimentoMensal",
                        "EstatisticaAbastecimentoTipoVeiculo",
                        "EstatisticaAbastecimentoVeiculo",
                        "EstatisticaAbastecimentoVeiculoMensal",
                        "EstatisticaGeralMensal",
                        "EstatisticaMotoristasMensal",
                        "EstatisticaVeiculoAnoFabricacao",
                        "EstatisticaVeiculoCategoria",
                        "EstatisticaVeiculoCombustivel",
                        "EstatisticaVeiculoGeral",
                        "EstatisticaVeiculoModelo",
                        "EstatisticaVeiculoRankingConsumo",
                        "EstatisticaVeiculoRankingKm",
                        "EstatisticaVeiculoRankingLitros",
                        "EstatisticaVeiculoStatus",
                        "EstatisticaVeiculoUnidade",
                        "EstatisticaVeiculoUsoMensal",
                        "EvolucaoViagensDiaria",
                        "HeatmapAbastecimentoMensal",
                        "HeatmapViagensMensal",
                        "LogErros",
                        "RankingMotoristasMensal",
                        "Recurso_BACKUP",
                        "RepactuacaoVeiculo",
                        "SchemaChangeLog"
                    ],
    "RemovidasProcedures":  [
                                "sp_RecalcularEstatisticasMultasMotoristas"
                            ],
    "DevProcedures":  {
                          "sp_AtualizarTodasEstatisticasViagem":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarTodasEstatisticasViagem\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    IF NOT EXISTS (SELECT * FROM sys.tables WHERE name = \u0027ViagemEstatistica\u0027)\r\n    BEGIN\r\n        PRINT \u0027Tabela ViagemEstatistica nao existe - ignorando\u0027\r\n        RETURN\r\n    END\r\n    \r\n    DECLARE @DataAtual DATE\r\n    DECLARE @DataMin DATE\r\n    DECLARE @DataMax DATE\r\n    DECLARE @Hoje DATE = CAST(GETDATE() AS DATE)\r\n    DECLARE @Total INT = 0\r\n    \r\n    SELECT @DataMin = MIN(CAST(DataInicial AS DATE)), @DataMax = MAX(CAST(DataInicial AS DATE))\r\n    FROM Viagem\r\n    WHERE DataInicial IS NOT NULL AND Status = \u0027Realizada\u0027\r\n    \r\n    -- Limitar até a data atual (não calcular para datas futuras)\r\n    IF @DataMax \u003e @Hoje\r\n        SET @DataMax = @Hoje\r\n    \r\n    SET @DataAtual = @DataMin\r\n    \r\n    PRINT \u0027Atualizando estatisticas de \u0027 + CONVERT(VARCHAR, @DataMin, 103) + \u0027 a \u0027 + CONVERT(VARCHAR, @DataMax, 103) + \u0027...\u0027\r\n    \r\n    WHILE @DataAtual \u003c= @DataMax\r\n    BEGIN\r\n        EXEC sp_AtualizarEstatisticasViagem @DataAtual\r\n        SET @DataAtual = DATEADD(DAY, 1, @DataAtual)\r\n        SET @Total = @Total + 1\r\n        \r\n        IF @Total % 100 = 0\r\n            PRINT \u0027  Processados \u0027 + CAST(@Total AS VARCHAR) + \u0027 dias...\u0027\r\n    END\r\n    \r\n    PRINT \u0027Total: \u0027 + CAST(@Total AS VARCHAR) + \u0027 dias processados com sucesso!\u0027\r\n    \r\n    RETURN @Total\r\nEND",
                          "sp_tr_Delete":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_Delete \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE \r\n\tFROM [dbo].[tr_String] \r\n\tWHERE [Id] = @Key \r\n\t\r\n\tDELETE \r\n\tFROM [dbo].[tr_Object] \r\n\tWHERE [Id] = @Key\r\nEND",
                          "sp_AtualizarEstatisticasMesAtual":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarEstatisticasMesAtual\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @Ano INT = YEAR(GETDATE());\r\n    DECLARE @Mes INT = MONTH(GETDATE());\r\n\r\n    -- Recalcula mês atual\r\n    EXEC sp_RecalcularEstatisticasMotoristas @Ano, @Mes;\r\n\r\n    -- Recalcula também mês anterior\r\n    IF @Mes = 1\r\n    BEGIN\r\n        SET @Ano = @Ano - 1;\r\n        SET @Mes = 12;\r\n    END\r\n    ELSE\r\n        SET @Mes = @Mes - 1;\r\n\r\n    EXEC sp_RecalcularEstatisticasMotoristas @Ano, @Mes;\r\n\r\n    PRINT \u0027Estatísticas do mês atual e anterior atualizadas!\u0027;\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoCategoria":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoCategoria\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DELETE FROM EstatisticaVeiculoCategoria;\r\n\r\n        INSERT INTO EstatisticaVeiculoCategoria (\r\n            Categoria, TotalVeiculos, VeiculosAtivos,\r\n            VeiculosProprios, VeiculosLocados, DataAtualizacao\r\n        )\r\n        SELECT\r\n            ISNULL(Categoria, \u0027Sem Categoria\u0027),\r\n            COUNT(*),\r\n            SUM(CASE WHEN Status = 1 THEN 1 ELSE 0 END),\r\n            SUM(CASE WHEN VeiculoProprio = 1 THEN 1 ELSE 0 END),\r\n            SUM(CASE WHEN VeiculoProprio = 0 THEN 1 ELSE 0 END),\r\n            GETDATE()\r\n        FROM Veiculo\r\n        GROUP BY Categoria;\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas por categoria recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_RecalcularEstatisticasMotoristaUnico":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasMotoristaUnico\r\n      @MotoristaId UNIQUEIDENTIFIER,\r\n      @Ano INT,\r\n      @Mes INT\r\n  AS\r\n  BEGIN\r\n      SET NOCOUNT ON;\r\n\r\n      DECLARE @DataInicio DATE = DATEFROMPARTS(@Ano, @Mes, 1);\r\n      DECLARE @DataFim DATE = EOMONTH(@DataInicio);\r\n\r\n      BEGIN TRY\r\n          DELETE FROM EstatisticaMotoristasMensal\r\n          WHERE MotoristaId = @MotoristaId AND Ano = @Ano AND Mes = @Mes;\r\n\r\n          INSERT INTO EstatisticaMotoristasMensal (MotoristaId, Ano, Mes, TotalViagens, KmTotal, MinutosTotais, DataAtualizacao)\r\n          SELECT\r\n              @MotoristaId,\r\n              @Ano,\r\n              @Mes,\r\n              COUNT(*),\r\n              SUM(CASE\r\n                  WHEN v.KmInicial IS NOT NULL AND v.KmFinal IS NOT NULL\r\n                       AND v.KmFinal \u003e= v.KmInicial\r\n                       AND (v.KmFinal - v.KmInicial) \u003c= 2000\r\n                  THEN v.KmFinal - v.KmInicial\r\n                  ELSE 0\r\n              END),\r\n              SUM(ISNULL(v.Minutos, 0)),\r\n              GETDATE()\r\n          FROM Viagem v\r\n          WHERE v.MotoristaId = @MotoristaId\r\n            AND v.DataInicial \u003e= @DataInicio\r\n            AND v.DataInicial \u003c DATEADD(DAY, 1, @DataFim);\r\n\r\n          IF @@ROWCOUNT = 0\r\n          BEGIN\r\n              INSERT INTO EstatisticaMotoristasMensal (MotoristaId, Ano, Mes, DataAtualizacao)\r\n              VALUES (@MotoristaId, @Ano, @Mes, GETDATE());\r\n          END\r\n\r\n          UPDATE e\r\n          SET e.TotalMultas = ISNULL(m.Total, 0),\r\n              e.ValorTotalMultas = ISNULL(m.Valor, 0),\r\n              e.DataAtualizacao = GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          LEFT JOIN (\r\n              SELECT COUNT(*) as Total, SUM(ISNULL(ValorAteVencimento, 0)) as Valor\r\n              FROM Multa\r\n              WHERE MotoristaId = @MotoristaId\r\n                AND Data \u003e= @DataInicio AND Data \u003c DATEADD(DAY, 1, @DataFim)\r\n          ) m ON 1=1\r\n          WHERE e.MotoristaId = @MotoristaId AND e.Ano = @Ano AND e.Mes = @Mes;\r\n\r\n          UPDATE e\r\n          SET e.TotalAbastecimentos = ISNULL(a.Total, 0),\r\n              e.LitrosTotais = ISNULL(a.Litros, 0),\r\n              e.ValorTotalAbastecimentos = ISNULL(a.Valor, 0),\r\n              e.DataAtualizacao = GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          LEFT JOIN (\r\n              SELECT COUNT(*) as Total,\r\n                     SUM(ISNULL(Litros, 0)) as Litros,\r\n                     SUM(ISNULL(Litros, 0) * ISNULL(ValorUnitario, 0)) as Valor\r\n              FROM Abastecimento\r\n              WHERE MotoristaId = @MotoristaId\r\n                AND DataHora \u003e= @DataInicio AND DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n          ) a ON 1=1\r\n          WHERE e.MotoristaId = @MotoristaId AND e.Ano = @Ano AND e.Mes = @Mes;\r\n\r\n          -- HEATMAP - CORRIGIDO: Usar HoraInicio\r\n          DELETE FROM HeatmapViagensMensal\r\n          WHERE Ano = @Ano AND Mes = @Mes AND MotoristaId = @MotoristaId;\r\n\r\n          INSERT INTO HeatmapViagensMensal (Ano, Mes, MotoristaId, DiaSemana, Hora, TotalViagens, DataAtualizacao)\r\n          SELECT\r\n              @Ano, @Mes, @MotoristaId,\r\n              DATEPART(WEEKDAY, v.HoraInicio) - 1,  -- CORRIGIDO: HoraInicio\r\n              DATEPART(HOUR, v.HoraInicio),          -- CORRIGIDO: HoraInicio\r\n              COUNT(*),\r\n              GETDATE()\r\n          FROM Viagem v\r\n          WHERE v.MotoristaId = @MotoristaId\r\n            AND v.DataInicial \u003e= @DataInicio\r\n            AND v.DataInicial \u003c DATEADD(DAY, 1, @DataFim)\r\n            AND v.HoraInicio IS NOT NULL\r\n          GROUP BY DATEPART(WEEKDAY, v.HoraInicio), DATEPART(HOUR, v.HoraInicio);\r\n\r\n          DELETE FROM EvolucaoViagensDiaria\r\n          WHERE Data \u003e= @DataInicio AND Data \u003c= @DataFim AND MotoristaId = @MotoristaId;\r\n\r\n          INSERT INTO EvolucaoViagensDiaria (Data, MotoristaId, TotalViagens, KmTotal, MinutosTotais, DataAtualizacao)\r\n          SELECT\r\n              CAST(v.DataInicial AS DATE),\r\n              @MotoristaId,\r\n              COUNT(*),\r\n              SUM(CASE\r\n                  WHEN v.KmInicial IS NOT NULL AND v.KmFinal IS NOT NULL\r\n                       AND v.KmFinal \u003e= v.KmInicial\r\n                       AND (v.KmFinal - v.KmInicial) \u003c= 2000\r\n                  THEN v.KmFinal - v.KmInicial\r\n                  ELSE 0\r\n              END),\r\n              SUM(ISNULL(v.Minutos, 0)),\r\n              GETDATE()\r\n          FROM Viagem v\r\n          WHERE v.MotoristaId = @MotoristaId\r\n            AND v.DataInicial \u003e= @DataInicio\r\n            AND v.DataInicial \u003c DATEADD(DAY, 1, @DataFim)\r\n          GROUP BY CAST(v.DataInicial AS DATE);\r\n\r\n      END TRY\r\n      BEGIN CATCH\r\n          THROW;\r\n      END CATCH\r\n  END",
                          "DocGenerator":  "CREATE OR ALTER PROCEDURE DocGenerator.sp_DetectFileChanges\r\n    @FilePath NVARCHAR(500),\r\n    @NewHash NVARCHAR(64),\r\n    @NewSize INT,\r\n    @NewLineCount INT,\r\n    @NewCharCount INT\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @OldHash NVARCHAR(64),\r\n            @OldSize INT,\r\n            @ChangePercentage DECIMAL(5,2),\r\n            @ChangeType NVARCHAR(50),\r\n            @NeedsUpdate BIT = 0,\r\n            @UpdateReason NVARCHAR(200);\r\n\r\n    -- Verificar se arquivo já existe no tracking\r\n    SELECT @OldHash = FileHash, @OldSize = FileSize\r\n    FROM DocGenerator.FileTracking\r\n    WHERE FilePath = @FilePath;\r\n\r\n    IF @OldHash IS NULL\r\n    BEGIN\r\n        -- Arquivo novo\r\n        SET @ChangeType = \u0027ADDED\u0027;\r\n        SET @NeedsUpdate = 1;\r\n        SET @UpdateReason = \u0027Arquivo novo detectado\u0027;\r\n\r\n        INSERT INTO DocGenerator.FileTracking\r\n            (FilePath, FileHash, FileSize, LineCount, CharacterCount, LastModified, NeedsUpdate, UpdateReason)\r\n        VALUES\r\n            (@FilePath, @NewHash, @NewSize, @NewLineCount, @NewCharCount, GETDATE(), 1, @UpdateReason);\r\n    END\r\n    ELSE IF @OldHash != @NewHash\r\n    BEGIN\r\n        -- Arquivo modificado\r\n        SET @ChangeType = \u0027MODIFIED\u0027;\r\n\r\n        -- Calcular percentual de mudança (baseado no tamanho)\r\n        SET @ChangePercentage = ABS(@NewSize - @OldSize) * 100.0 / NULLIF(@OldSize, 0);\r\n\r\n        -- Verificar se precisa atualizar baseado no threshold\r\n        DECLARE @Threshold DECIMAL(5,2);\r\n        SELECT @Threshold = CAST(ConfigValue AS DECIMAL(5,2))\r\n        FROM DocGenerator.MonitoringConfig\r\n        WHERE ConfigKey = \u0027ChangeThreshold\u0027;\r\n\r\n        IF @ChangePercentage \u003e= ISNULL(@Threshold, 5.0)\r\n        BEGIN\r\n            SET @NeedsUpdate = 1;\r\n            SET @UpdateReason = CONCAT(\u0027Mudança de \u0027, FORMAT(@ChangePercentage, \u0027N2\u0027), \u0027% detectada\u0027);\r\n\r\n            -- Determinar prioridade do alerta\r\n            DECLARE @Priority INT = 1;\r\n            DECLARE @HighThreshold DECIMAL(5,2), @MediumThreshold DECIMAL(5,2);\r\n\r\n            SELECT @HighThreshold = CAST(ConfigValue AS DECIMAL(5,2))\r\n            FROM DocGenerator.MonitoringConfig WHERE ConfigKey = \u0027HighPriorityThreshold\u0027;\r\n\r\n            SELECT @MediumThreshold = CAST(ConfigValue AS DECIMAL(5,2))\r\n            FROM DocGenerator.MonitoringConfig WHERE ConfigKey = \u0027MediumPriorityThreshold\u0027;\r\n\r\n            IF @ChangePercentage \u003e= ISNULL(@HighThreshold, 20.0)\r\n                SET @Priority = 3;\r\n            ELSE IF @ChangePercentage \u003e= ISNULL(@MediumThreshold, 10.0)\r\n                SET @Priority = 2;\r\n\r\n            -- Criar alerta\r\n            INSERT INTO DocGenerator.DocumentationAlerts\r\n                (FilePath, AlertType, AlertMessage, Priority)\r\n            VALUES\r\n                (@FilePath, \u0027NEEDS_UPDATE\u0027, @UpdateReason, @Priority);\r\n        END\r\n\r\n        -- Atualizar tracking\r\n        UPDATE DocGenerator.FileTracking\r\n        SET FileHash = @NewHash,\r\n            FileSize = @NewSize,\r\n            LineCount = @NewLineCount,\r\n            CharacterCount = @NewCharCount,\r\n            LastModified = GETDATE(),\r\n            NeedsUpdate = @NeedsUpdate,\r\n            UpdateReason = @UpdateReason,\r\n            UpdatedAt = GETDATE()\r\n        WHERE FilePath = @FilePath;\r\n    END\r\n\r\n    -- Registrar no histórico\r\n    INSERT INTO DocGenerator.FileChangeHistory\r\n        (FilePath, OldHash, NewHash, OldSize, NewSize, ChangeType, ChangePercentage)\r\n    VALUES\r\n        (@FilePath, @OldHash, @NewHash, @OldSize, @NewSize, @ChangeType, @ChangePercentage);\r\n\r\n    SELECT @NeedsUpdate AS NeedsUpdate, @UpdateReason AS UpdateReason;\r\nEND",
                          "sp_AtualizarEstatisticasVeiculosMesAtual":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarEstatisticasVeiculosMesAtual\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @Ano INT = YEAR(GETDATE());\r\n    DECLARE @Mes INT = MONTH(GETDATE());\r\n\r\n    -- Atualiza snapshot da frota\r\n    EXEC sp_RecalcularEstatisticasVeiculoGeral;\r\n    EXEC sp_RecalcularEstatisticasVeiculoCategoria;\r\n    EXEC sp_RecalcularEstatisticasVeiculoStatus;\r\n    EXEC sp_RecalcularEstatisticasVeiculoModelo;\r\n    EXEC sp_RecalcularEstatisticasVeiculoCombustivel;\r\n    EXEC sp_RecalcularEstatisticasVeiculoUnidade;\r\n    EXEC sp_RecalcularEstatisticasVeiculoAnoFabricacao;\r\n\r\n    -- Atualiza mês atual\r\n    EXEC sp_RecalcularEstatisticasVeiculoUsoMensal @Ano, @Mes;\r\n    EXEC sp_RecalcularRankingsVeiculoAnual @Ano;\r\n\r\n    -- Atualiza mês anterior\r\n    IF @Mes = 1\r\n    BEGIN\r\n        SET @Ano = @Ano - 1;\r\n        SET @Mes = 12;\r\n    END\r\n    ELSE\r\n        SET @Mes = @Mes - 1;\r\n\r\n    EXEC sp_RecalcularEstatisticasVeiculoUsoMensal @Ano, @Mes;\r\n\r\n    PRINT \u0027Estatísticas de veículos do mês atual e anterior atualizadas!\u0027;\r\nEND",
                          "sp_RecalcularEstatisticasAbastecimentos":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasAbastecimentos\r\n    @Ano INT,\r\n    @Mes INT\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @DataInicio DATE = DATEFROMPARTS(@Ano, @Mes, 1);\r\n    DECLARE @DataFim DATE = EOMONTH(@DataInicio);\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        -- =====================================================\r\n        -- 9.1 Estatísticas Gerais do Mês\r\n        -- =====================================================\r\n\r\n        DELETE FROM EstatisticaAbastecimentoMensal WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n        INSERT INTO EstatisticaAbastecimentoMensal (Ano, Mes, TotalAbastecimentos, ValorTotal, LitrosTotal, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            @Mes,\r\n            COUNT(*),\r\n            SUM(ISNULL(Litros, 0) * ISNULL(ValorUnitario, 0)),\r\n            SUM(ISNULL(Litros, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento\r\n        WHERE DataHora \u003e= @DataInicio AND DataHora \u003c DATEADD(DAY, 1, @DataFim);\r\n\r\n        -- =====================================================\r\n        -- 9.2 Estatísticas por Combustível\r\n        -- =====================================================\r\n\r\n        DELETE FROM EstatisticaAbastecimentoCombustivel WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n        INSERT INTO EstatisticaAbastecimentoCombustivel (Ano, Mes, TipoCombustivel, TotalAbastecimentos, ValorTotal, LitrosTotal, MediaValorLitro, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            @Mes,\r\n            ISNULL(c.Descricao, \u0027Não Informado\u0027),\r\n            COUNT(*),\r\n            SUM(ISNULL(a.Litros, 0) * ISNULL(a.ValorUnitario, 0)),\r\n            SUM(ISNULL(a.Litros, 0)),\r\n            AVG(ISNULL(a.ValorUnitario, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento a\r\n        LEFT JOIN Combustivel c ON a.CombustivelId = c.CombustivelId\r\n        WHERE a.DataHora \u003e= @DataInicio AND a.DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n        GROUP BY c.Descricao;\r\n\r\n        -- =====================================================\r\n        -- 9.3 Estatísticas por Categoria de Veículo\r\n        -- =====================================================\r\n\r\n        DELETE FROM EstatisticaAbastecimentoCategoria WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n        INSERT INTO EstatisticaAbastecimentoCategoria (Ano, Mes, Categoria, TotalAbastecimentos, ValorTotal, LitrosTotal, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            @Mes,\r\n            ISNULL(v.Categoria, \u0027Sem Categoria\u0027),\r\n            COUNT(*),\r\n            SUM(ISNULL(a.Litros, 0) * ISNULL(a.ValorUnitario, 0)),\r\n            SUM(ISNULL(a.Litros, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento a\r\n        LEFT JOIN Veiculo v ON a.VeiculoId = v.VeiculoId\r\n        WHERE a.DataHora \u003e= @DataInicio AND a.DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n        GROUP BY v.Categoria;\r\n\r\n        -- =====================================================\r\n        -- 9.4 Estatísticas por Tipo/Modelo de Veículo\r\n        -- =====================================================\r\n\r\n        DELETE FROM EstatisticaAbastecimentoTipoVeiculo WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n        INSERT INTO EstatisticaAbastecimentoTipoVeiculo (Ano, Mes, TipoVeiculo, TotalAbastecimentos, ValorTotal, LitrosTotal, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            @Mes,\r\n            ISNULL(m.DescricaoModelo, \u0027Não Informado\u0027),\r\n            COUNT(*),\r\n            SUM(ISNULL(a.Litros, 0) * ISNULL(a.ValorUnitario, 0)),\r\n            SUM(ISNULL(a.Litros, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento a\r\n        LEFT JOIN Veiculo v ON a.VeiculoId = v.VeiculoId\r\n        LEFT JOIN ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\n        WHERE a.DataHora \u003e= @DataInicio AND a.DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n        GROUP BY m.DescricaoModelo;\r\n\r\n        -- =====================================================\r\n        -- 9.5 Estatísticas por Veículo Mensal\r\n        -- =====================================================\r\n\r\n        DELETE FROM EstatisticaAbastecimentoVeiculoMensal WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n        INSERT INTO EstatisticaAbastecimentoVeiculoMensal (Ano, Mes, VeiculoId, TotalAbastecimentos, ValorTotal, LitrosTotal, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            @Mes,\r\n            a.VeiculoId,\r\n            COUNT(*),\r\n            SUM(ISNULL(a.Litros, 0) * ISNULL(a.ValorUnitario, 0)),\r\n            SUM(ISNULL(a.Litros, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento a\r\n        WHERE a.DataHora \u003e= @DataInicio AND a.DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n          AND a.VeiculoId IS NOT NULL AND a.VeiculoId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n        GROUP BY a.VeiculoId;\r\n\r\n        -- =====================================================\r\n        -- 9.6 Heatmap Geral (todos os veículos)\r\n        -- =====================================================\r\n\r\n        DELETE FROM HeatmapAbastecimentoMensal\r\n        WHERE Ano = @Ano AND Mes = @Mes AND VeiculoId IS NULL AND TipoVeiculo IS NULL;\r\n\r\n        INSERT INTO HeatmapAbastecimentoMensal (Ano, Mes, VeiculoId, TipoVeiculo, DiaSemana, Hora, TotalAbastecimentos, ValorTotal, DataAtualizacao)\r\n        SELECT\r\n            @Ano, @Mes, NULL, NULL,\r\n            DATEPART(WEEKDAY, DataHora) - 1, -- 0=Domingo\r\n            DATEPART(HOUR, DataHora),\r\n            COUNT(*),\r\n            SUM(ISNULL(Litros, 0) * ISNULL(ValorUnitario, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento\r\n        WHERE DataHora \u003e= @DataInicio AND DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n        GROUP BY DATEPART(WEEKDAY, DataHora), DATEPART(HOUR, DataHora);\r\n\r\n        COMMIT TRANSACTION;\r\n\r\n        PRINT \u0027Estatísticas de abastecimentos do mês \u0027 + CAST(@Mes AS VARCHAR) + \u0027/\u0027 + CAST(@Ano AS VARCHAR) + \u0027 recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoUnidade":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoUnidade\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DELETE FROM EstatisticaVeiculoUnidade;\r\n\r\n        INSERT INTO EstatisticaVeiculoUnidade (\r\n            UnidadeId, Unidade, TotalVeiculos, VeiculosAtivos, DataAtualizacao\r\n        )\r\n        SELECT\r\n            MIN(v.UnidadeId), -- Pega o primeiro UnidadeId encontrado para cada sigla\r\n            ISNULL(u.Sigla, \u0027Sem Unidade\u0027),\r\n            COUNT(*),\r\n            SUM(CASE WHEN v.Status = 1 THEN 1 ELSE 0 END),\r\n            GETDATE()\r\n        FROM Veiculo v\r\n        LEFT JOIN Unidade u ON v.UnidadeId = u.UnidadeId\r\n        GROUP BY u.Sigla; -- Agrupa apenas pela sigla da unidade\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas por unidade recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_TratarNulosTodasTabelas":  "CREATE OR ALTER PROCEDURE dbo.sp_TratarNulosTodasTabelas\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    \r\n    DECLARE @Tabela NVARCHAR(128);\r\n    DECLARE curTabelas CURSOR FOR\r\n        SELECT TABLE_NAME \r\n        FROM INFORMATION_SCHEMA.TABLES \r\n        WHERE TABLE_SCHEMA = \u0027dbo\u0027 \r\n          AND TABLE_TYPE = \u0027BASE TABLE\u0027\r\n          AND TABLE_NAME NOT LIKE \u0027AspNet%\u0027\r\n          AND TABLE_NAME NOT LIKE \u0027__EF%\u0027;\r\n    \r\n    OPEN curTabelas;\r\n    FETCH NEXT FROM curTabelas INTO @Tabela;\r\n    \r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        EXEC dbo.sp_TratarNulosTabela @Tabela;\r\n        FETCH NEXT FROM curTabelas INTO @Tabela;\r\n    END\r\n    \r\n    CLOSE curTabelas;\r\n    DEALLOCATE curTabelas;\r\nEND",
                          "sp_CalcularConsumoVeiculos":  "CREATE OR ALTER PROCEDURE dbo.sp_CalcularConsumoVeiculos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    \r\n    DECLARE @VeiculosAtualizados INT = 0;\r\n    DECLARE @TemTriggers BIT = 0;\r\n\r\n    BEGIN TRY\r\n        -- Verifica se as colunas necessárias existem\r\n        IF NOT EXISTS (\r\n            SELECT 1 FROM sys.columns \r\n            WHERE object_id = OBJECT_ID(\u0027Veiculo\u0027) AND name = \u0027Consumo\u0027\r\n        )\r\n        BEGIN\r\n            RAISERROR(\u0027Coluna Veiculo.Consumo não existe!\u0027, 16, 1);\r\n            RETURN;\r\n        END\r\n\r\n        IF NOT EXISTS (\r\n            SELECT 1 FROM sys.columns \r\n            WHERE object_id = OBJECT_ID(\u0027Abastecimento\u0027) AND name IN (\u0027Litros\u0027, \u0027KmRodado\u0027)\r\n        )\r\n        BEGIN\r\n            RAISERROR(\u0027Colunas Abastecimento.Litros ou KmRodado não existem!\u0027, 16, 1);\r\n            RETURN;\r\n        END\r\n\r\n        BEGIN TRANSACTION;\r\n\r\n        -- Verifica se existem triggers na tabela Veiculo\r\n        IF EXISTS (\r\n            SELECT 1 FROM sys.triggers \r\n            WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027) AND is_disabled = 0\r\n        )\r\n        BEGIN\r\n            SET @TemTriggers = 1;\r\n            PRINT \u0027  [INFO] Desabilitando triggers em Veiculo para evitar recursão...\u0027;\r\n            \r\n            -- Desabilita TODOS os triggers ativos na tabela Veiculo\r\n            DECLARE @TriggerName NVARCHAR(128);\r\n            DECLARE trigger_cursor CURSOR FOR\r\n                SELECT name FROM sys.triggers \r\n                WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027) AND is_disabled = 0;\r\n            \r\n            OPEN trigger_cursor;\r\n            FETCH NEXT FROM trigger_cursor INTO @TriggerName;\r\n            \r\n            WHILE @@FETCH_STATUS = 0\r\n            BEGIN\r\n                EXEC(\u0027ALTER TABLE Veiculo DISABLE TRIGGER \u0027 + @TriggerName);\r\n                PRINT \u0027  [INFO] Trigger desabilitado: \u0027 + @TriggerName;\r\n                FETCH NEXT FROM trigger_cursor INTO @TriggerName;\r\n            END\r\n            \r\n            CLOSE trigger_cursor;\r\n            DEALLOCATE trigger_cursor;\r\n        END\r\n\r\n        -- Atualiza o consumo de cada veículo baseado na média de seus abastecimentos\r\n        PRINT \u0027  [EXEC] Calculando consumo médio por veículo...\u0027;\r\n        \r\n        UPDATE V\r\n        SET V.Consumo = ROUND(Calc.ConsumoMedio, 2)\r\n        FROM Veiculo V\r\n        INNER JOIN (\r\n            SELECT \r\n                VeiculoId,\r\n                AVG(CAST(KmRodado AS FLOAT) / NULLIF(Litros, 0)) AS ConsumoMedio\r\n            FROM Abastecimento\r\n            WHERE Litros \u003e 0 \r\n              AND KmRodado \u003e 0\r\n            GROUP BY VeiculoId\r\n            HAVING AVG(CAST(KmRodado AS FLOAT) / NULLIF(Litros, 0)) \u003e 0\r\n        ) Calc ON V.VeiculoId = Calc.VeiculoId;\r\n\r\n        SET @VeiculosAtualizados = @@ROWCOUNT;\r\n\r\n        -- Reabilita triggers se foram desabilitados\r\n        IF @TemTriggers = 1\r\n        BEGIN\r\n            PRINT \u0027  [INFO] Reabilitando triggers em Veiculo...\u0027;\r\n            \r\n            DECLARE trigger_cursor2 CURSOR FOR\r\n                SELECT name FROM sys.triggers \r\n                WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027);\r\n            \r\n            OPEN trigger_cursor2;\r\n            FETCH NEXT FROM trigger_cursor2 INTO @TriggerName;\r\n            \r\n            WHILE @@FETCH_STATUS = 0\r\n            BEGIN\r\n                EXEC(\u0027ALTER TABLE Veiculo ENABLE TRIGGER \u0027 + @TriggerName);\r\n                PRINT \u0027  [INFO] Trigger reabilitado: \u0027 + @TriggerName;\r\n                FETCH NEXT FROM trigger_cursor2 INTO @TriggerName;\r\n            END\r\n            \r\n            CLOSE trigger_cursor2;\r\n            DEALLOCATE trigger_cursor2;\r\n        END\r\n\r\n        COMMIT TRANSACTION;\r\n\r\n        -- Log de sucesso\r\n        PRINT \u0027  [OK]   Cálculo de consumo concluído com sucesso!\u0027;\r\n        PRINT \u0027  [INFO] Total de veículos atualizados: \u0027 + CAST(@VeiculosAtualizados AS VARCHAR(10));\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT \u003e 0\r\n            ROLLBACK TRANSACTION;\r\n\r\n        -- Tenta reabilitar triggers mesmo em caso de erro\r\n        IF @TemTriggers = 1\r\n        BEGIN\r\n            BEGIN TRY\r\n                PRINT \u0027  [WARN] Tentando reabilitar triggers após erro...\u0027;\r\n                \r\n                DECLARE trigger_cursor3 CURSOR FOR\r\n                    SELECT name FROM sys.triggers \r\n                    WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027);\r\n                \r\n                OPEN trigger_cursor3;\r\n                FETCH NEXT FROM trigger_cursor3 INTO @TriggerName;\r\n                \r\n                WHILE @@FETCH_STATUS = 0\r\n                BEGIN\r\n                    EXEC(\u0027ALTER TABLE Veiculo ENABLE TRIGGER \u0027 + @TriggerName);\r\n                    FETCH NEXT FROM trigger_cursor3 INTO @TriggerName;\r\n                END\r\n                \r\n                CLOSE trigger_cursor3;\r\n                DEALLOCATE trigger_cursor3;\r\n            END TRY\r\n            BEGIN CATCH\r\n                PRINT \u0027  [ERROR] Falha ao reabilitar triggers!\u0027;\r\n            END CATCH\r\n        END\r\n\r\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE();\r\n        DECLARE @ErrorSeverity INT = ERROR_SEVERITY();\r\n        DECLARE @ErrorState INT = ERROR_STATE();\r\n\r\n        RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState);\r\n    END CATCH\r\nEND",
                          "usp_PreencheNulos_Motorista":  "CREATE OR ALTER PROCEDURE dbo.usp_PreencheNulos_Motorista\r\n    @Keys dbo.MotoristaKeyList READONLY\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    -- Atualiza somente colunas NULL e somente linhas passadas em @Keys\r\n    UPDATE M\r\n       SET\r\n         -- strings\r\n         CPF               = ISNULL(M.CPF,               \u0027\u0027),\r\n         CNH               = ISNULL(M.CNH,               \u0027\u0027),\r\n         CategoriaCNH      = ISNULL(M.CategoriaCNH,      \u0027\u0027),\r\n         Celular01         = ISNULL(M.Celular01,         \u0027\u0027),\r\n         Celular02         = ISNULL(M.Celular02,         \u0027\u0027),\r\n         OrigemIndicacao   = ISNULL(M.OrigemIndicacao,   \u0027\u0027),\r\n         UsuarioIdAlteracao= ISNULL(M.UsuarioIdAlteracao,\u0027\u0027),\r\n         TipoCondutor      = ISNULL(M.TipoCondutor,      \u0027\u0027),\r\n         EfetivoFerista    = ISNULL(M.EfetivoFerista,    \u0027\u0027),\r\n\r\n         -- datas\r\n         DataNascimento    = ISNULL(M.DataNascimento,     CONVERT(date,\u002719000101\u0027)),\r\n         DataVencimentoCNH = ISNULL(M.DataVencimentoCNH,  CONVERT(date,\u002719000101\u0027)),\r\n         DataIngresso      = ISNULL(M.DataIngresso,       CONVERT(date,\u002719000101\u0027)),\r\n         DataAlteracao     = ISNULL(M.DataAlteracao,      GETDATE()),\r\n\r\n         -- binário (mantenho excluído por padrão)\r\n         -- Foto           = ISNULL(M.Foto,        0x),\r\n         -- CNHDigital     = ISNULL(M.CNHDigital,  0x),\r\n\r\n         -- numéricos/bit\r\n         Status            = ISNULL(M.Status, 0),\r\n         CodMotoristaQCard = ISNULL(M.CodMotoristaQCard, 0),\r\n\r\n         -- GUIDs\r\n         UnidadeId         = ISNULL(M.UnidadeId, CONVERT(uniqueidentifier,\u002700000000-0000-0000-0000-000000000000\u0027)),\r\n         ContratoId        = ISNULL(M.ContratoId,CONVERT(uniqueidentifier,\u002700000000-0000-0000-0000-000000000000\u0027)),\r\n         CondutorId        = ISNULL(M.CondutorId,CONVERT(uniqueidentifier,\u002700000000-0000-0000-0000-000000000000\u0027))\r\n    FROM dbo.Motorista AS M\r\n    INNER JOIN @Keys      AS K ON K.MotoristaId = M.MotoristaId\r\n    WHERE\r\n         M.CPF                IS NULL OR\r\n         M.CNH                IS NULL OR\r\n         M.CategoriaCNH       IS NULL OR\r\n         M.Celular01          IS NULL OR\r\n         M.Celular02          IS NULL OR\r\n         M.OrigemIndicacao    IS NULL OR\r\n         M.UsuarioIdAlteracao IS NULL OR\r\n         M.TipoCondutor       IS NULL OR\r\n         M.EfetivoFerista     IS NULL OR\r\n\r\n         M.DataNascimento     IS NULL OR\r\n         M.DataVencimentoCNH  IS NULL OR\r\n         M.DataIngresso       IS NULL OR\r\n         M.DataAlteracao      IS NULL OR\r\n\r\n         -- M.Foto            IS NULL OR\r\n         -- M.CNHDigital      IS NULL OR\r\n\r\n         M.Status             IS NULL OR\r\n         M.CodMotoristaQCard  IS NULL OR\r\n\r\n         M.UnidadeId          IS NULL OR\r\n         M.ContratoId         IS NULL OR\r\n         M.CondutorId         IS NULL;\r\nEND",
                          "sp_Requisitante_TratarNulos":  "CREATE OR ALTER PROCEDURE dbo.sp_Requisitante_TratarNulos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    UPDATE dbo.Requisitante\r\n    SET \r\n        Nome = ISNULL(Nome, \u0027\u0027),\r\n        Ponto = ISNULL(Ponto, \u0027\u0027),\r\n        Ramal = ISNULL(Ramal, 0),\r\n        Email = ISNULL(Email, \u0027\u0027),\r\n        Status = ISNULL(Status, 1),\r\n        UsuarioIdAlteracao = ISNULL(UsuarioIdAlteracao, \u0027\u0027),\r\n        DataAlteracao = ISNULL(DataAlteracao, GETDATE())\r\n    WHERE \r\n        Nome IS NULL\r\n        OR Ponto IS NULL\r\n        OR Ramal IS NULL\r\n        OR Email IS NULL\r\n        OR Status IS NULL\r\n        OR UsuarioIdAlteracao IS NULL\r\n        OR DataAlteracao IS NULL;\r\nEND",
                          "sp_tr_GetCountInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetCountInSet \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT COUNT(1) \r\n\tFROM [dbo].[tr_Set] \r\n\tWHERE [Id] = @Key\r\nEND",
                          "sp_CalculaCustosViagem":  "CREATE OR ALTER PROCEDURE dbo.sp_CalculaCustosViagem\r\n    @ViagemId UNIQUEIDENTIFIER\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n\r\n    DECLARE @VeiculoId UNIQUEIDENTIFIER\r\n    DECLARE @MotoristaId UNIQUEIDENTIFIER\r\n    DECLARE @DataInicial DATETIME\r\n    DECLARE @KmRodado INT\r\n    DECLARE @Minutos INT\r\n    DECLARE @Status VARCHAR(50)\r\n\r\n    -- Custos calculados\r\n    DECLARE @CustoCombustivel FLOAT = 0\r\n    DECLARE @CustoVeiculo FLOAT = 0\r\n    DECLARE @CustoMotorista FLOAT = 0\r\n    DECLARE @CustoLavador FLOAT = 0\r\n    DECLARE @CustoOperador FLOAT = 0\r\n\r\n    -- Variáveis auxiliares\r\n    DECLARE @ConsumoVeiculo FLOAT\r\n    DECLARE @ValorCombustivel FLOAT\r\n    DECLARE @ValorUnitarioVeiculo FLOAT\r\n    DECLARE @CustoMensalMotorista FLOAT\r\n    DECLARE @CustoMensalLavador FLOAT\r\n    DECLARE @CustoMensalOperador FLOAT\r\n    DECLARE @MediaMensalViagens FLOAT\r\n    DECLARE @ItemVeiculoId UNIQUEIDENTIFIER\r\n    DECLARE @ContratoMotoristaId UNIQUEIDENTIFIER\r\n    DECLARE @ContratoAtivo UNIQUEIDENTIFIER\r\n    DECLARE @QuantidadeLavador INT\r\n    DECLARE @QuantidadeOperador INT\r\n\r\n    -- ========================================================================\r\n    -- BUSCA DADOS USANDO CAMPOS NORMALIZADOS\r\n    -- ========================================================================\r\n    SELECT \r\n        @VeiculoId = VeiculoId,\r\n        @MotoristaId = MotoristaId,\r\n        @DataInicial = COALESCE(DataInicialNormalizada, DataInicial),\r\n        @KmRodado = COALESCE(KmRodadoNormalizado, \r\n                             CASE WHEN KmFinal \u003e= KmInicial THEN KmFinal - KmInicial ELSE 0 END),\r\n        @Minutos = COALESCE(MinutosNormalizado, Minutos, 0),\r\n        @Status = Status\r\n    FROM Viagem\r\n    WHERE ViagemId = @ViagemId\r\n\r\n    -- Só processa viagens realizadas com veículo\r\n    IF @VeiculoId IS NULL OR @Status \u003c\u003e \u0027Realizada\u0027\r\n        RETURN\r\n\r\n    -- Garantir valores não negativos\r\n    IF @KmRodado \u003c 0 SET @KmRodado = 0\r\n    IF @Minutos \u003c 0 SET @Minutos = 0\r\n\r\n    -- ========================================================================\r\n    -- 1. CUSTO COMBUSTÍVEL\r\n    -- ========================================================================\r\n    IF @KmRodado \u003e 0\r\n    BEGIN\r\n        SET @ConsumoVeiculo = dbo.fn_CalculaConsumoVeiculo(@VeiculoId)\r\n        SET @ValorCombustivel = dbo.fn_GetValorCombustivelProximo(@VeiculoId, @DataInicial)\r\n\r\n        IF @ConsumoVeiculo IS NOT NULL AND @ConsumoVeiculo \u003e 0 AND @ValorCombustivel IS NOT NULL\r\n            SET @CustoCombustivel = @KmRodado * (@ValorCombustivel / @ConsumoVeiculo)\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 2. CUSTO VEÍCULO (Jornada 8h × 22 dias = 10.560 min/mês)\r\n    -- ========================================================================\r\n    IF @Minutos \u003e 0\r\n    BEGIN\r\n        SELECT @ItemVeiculoId = ItemVeiculoId FROM Veiculo WHERE VeiculoId = @VeiculoId\r\n\r\n        IF @ItemVeiculoId IS NOT NULL\r\n        BEGIN\r\n            SELECT @ValorUnitarioVeiculo = ValorUnitario\r\n            FROM ItemVeiculoContrato\r\n            WHERE ItemVeiculoId = @ItemVeiculoId\r\n\r\n            IF @ValorUnitarioVeiculo IS NOT NULL AND @ValorUnitarioVeiculo \u003e 0\r\n                -- FÓRMULA: Jornada 8h × 22 dias = 10.560 minutos/mês\r\n                SET @CustoVeiculo = @ValorUnitarioVeiculo * (CAST(@Minutos AS FLOAT) / 10560.0)\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 3. CUSTO MOTORISTA (Jornada 220h = 13.200 min/mês + TETO)\r\n    -- ========================================================================\r\n    IF @Minutos \u003e 0 AND @MotoristaId IS NOT NULL\r\n    BEGIN\r\n        SELECT @ContratoMotoristaId = ContratoId\r\n        FROM Motorista\r\n        WHERE MotoristaId = @MotoristaId\r\n\r\n        IF @ContratoMotoristaId IS NOT NULL\r\n        BEGIN\r\n            -- Busca repactuação mais recente\r\n            SELECT TOP 1 @CustoMensalMotorista = RT.ValorMotorista\r\n            FROM RepactuacaoTerceirizacao RT\r\n            INNER JOIN RepactuacaoContrato RC ON RT.RepactuacaoContratoId = RC.RepactuacaoContratoId\r\n            WHERE RC.ContratoId = @ContratoMotoristaId\r\n              AND RT.DataRepactuacao \u003c= @DataInicial\r\n            ORDER BY RT.DataRepactuacao DESC\r\n\r\n            -- Fallback: se não tiver repactuação, usa Contrato\r\n            IF @CustoMensalMotorista IS NULL\r\n            BEGIN\r\n                SELECT @CustoMensalMotorista = CustoMensalMotorista\r\n                FROM Contrato\r\n                WHERE ContratoId = @ContratoMotoristaId AND Status = 1\r\n            END\r\n\r\n            IF @CustoMensalMotorista IS NOT NULL AND @CustoMensalMotorista \u003e 0\r\n            BEGIN\r\n                SET @CustoMotorista = @CustoMensalMotorista * (CAST(@Minutos AS FLOAT) / 13200.0)\r\n                \r\n                -- TETO: máximo = salário mensal\r\n                IF @CustoMotorista \u003e @CustoMensalMotorista\r\n                    SET @CustoMotorista = @CustoMensalMotorista\r\n            END\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 4. CUSTO LAVADOR (rateado por média de viagens/mês)\r\n    -- ========================================================================\r\n    IF @DataInicial IS NOT NULL\r\n    BEGIN\r\n        SELECT TOP 1 @ContratoAtivo = ContratoId\r\n        FROM Contrato\r\n        WHERE ContratoLavadores = 1 AND Status = 1\r\n        ORDER BY DataInicio DESC\r\n\r\n        IF @ContratoAtivo IS NOT NULL\r\n        BEGIN\r\n            SELECT TOP 1 \r\n                @CustoMensalLavador = RT.ValorLavador,\r\n                @QuantidadeLavador = RT.QtdLavadores\r\n            FROM RepactuacaoTerceirizacao RT\r\n            INNER JOIN RepactuacaoContrato RC ON RT.RepactuacaoContratoId = RC.RepactuacaoContratoId\r\n            WHERE RC.ContratoId = @ContratoAtivo\r\n              AND RT.DataRepactuacao \u003c= @DataInicial\r\n            ORDER BY RT.DataRepactuacao DESC\r\n\r\n            IF @CustoMensalLavador IS NULL\r\n            BEGIN\r\n                SELECT @CustoMensalLavador = CustoMensalLavador,\r\n                       @QuantidadeLavador = ISNULL(QuantidadeLavador, 1)\r\n                FROM Contrato\r\n                WHERE ContratoId = @ContratoAtivo\r\n            END\r\n\r\n            IF @CustoMensalLavador IS NOT NULL AND @CustoMensalLavador \u003e 0\r\n            BEGIN\r\n                SET @MediaMensalViagens = dbo.fn_CalculaMediaMensalViagens(@DataInicial)\r\n                IF @MediaMensalViagens \u003e 0\r\n                    SET @CustoLavador = (@CustoMensalLavador * ISNULL(@QuantidadeLavador, 1)) / @MediaMensalViagens\r\n            END\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 5. CUSTO OPERADOR (rateado por média de viagens/mês)\r\n    -- ========================================================================\r\n    IF @DataInicial IS NOT NULL\r\n    BEGIN\r\n        SELECT TOP 1 @ContratoAtivo = ContratoId\r\n        FROM Contrato\r\n        WHERE ContratoOperadores = 1 AND Status = 1\r\n        ORDER BY DataInicio DESC\r\n\r\n        IF @ContratoAtivo IS NOT NULL\r\n        BEGIN\r\n            SELECT TOP 1 \r\n                @CustoMensalOperador = RT.ValorOperador,\r\n                @QuantidadeOperador = RT.QtdOperadores\r\n            FROM RepactuacaoTerceirizacao RT\r\n            INNER JOIN RepactuacaoContrato RC ON RT.RepactuacaoContratoId = RC.RepactuacaoContratoId\r\n            WHERE RC.ContratoId = @ContratoAtivo\r\n              AND RT.DataRepactuacao \u003c= @DataInicial\r\n            ORDER BY RT.DataRepactuacao DESC\r\n\r\n            IF @CustoMensalOperador IS NULL\r\n            BEGIN\r\n                SELECT @CustoMensalOperador = CustoMensalOperador,\r\n                       @QuantidadeOperador = ISNULL(QuantidadeOperador, 1)\r\n                FROM Contrato\r\n                WHERE ContratoId = @ContratoAtivo\r\n            END\r\n\r\n            IF @CustoMensalOperador IS NOT NULL AND @CustoMensalOperador \u003e 0\r\n            BEGIN\r\n                IF @MediaMensalViagens IS NULL OR @MediaMensalViagens = 0\r\n                    SET @MediaMensalViagens = dbo.fn_CalculaMediaMensalViagens(@DataInicial)\r\n                \r\n                IF @MediaMensalViagens \u003e 0\r\n                    SET @CustoOperador = (@CustoMensalOperador * ISNULL(@QuantidadeOperador, 1)) / @MediaMensalViagens\r\n            END\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- ATUALIZA VIAGEM\r\n    -- ========================================================================\r\n    UPDATE Viagem\r\n    SET CustoCombustivel = ROUND(@CustoCombustivel, 2),\r\n        CustoVeiculo = ROUND(@CustoVeiculo, 2),\r\n        CustoMotorista = ROUND(@CustoMotorista, 2),\r\n        CustoLavador = ROUND(@CustoLavador, 2),\r\n        CustoOperador = ROUND(@CustoOperador, 2)\r\n    WHERE ViagemId = @ViagemId\r\nEND",
                          "sp_tr_Exists":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_Exists \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tIF EXISTS (SELECT 1 FROM [dbo].[tr_String] WHERE [Id] = @Key)\r\n\t\tRETURN 1\r\n\tELSE \r\n\t\tIF EXISTS (SELECT 1 FROM [dbo].[tr_Object] WHERE [Id] = @Key)\r\n\t\t\tRETURN 1\r\n\t\tELSE\r\n\t\t\tRETURN 0\r\nEND",
                          "sp_RecalcularTodasEstatisticasVeiculos":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularTodasEstatisticasVeiculos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    PRINT \u0027Iniciando recálculo de todas as estatísticas de veículos...\u0027;\r\n    PRINT \u0027\u0027;\r\n\r\n    -- Estatísticas da frota (snapshot atual)\r\n    PRINT \u00271. Recalculando estatísticas gerais da frota...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoGeral;\r\n\r\n    PRINT \u00272. Recalculando estatísticas por categoria...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoCategoria;\r\n\r\n    PRINT \u00273. Recalculando estatísticas por status...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoStatus;\r\n\r\n    PRINT \u00274. Recalculando estatísticas por modelo...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoModelo;\r\n\r\n    PRINT \u00275. Recalculando estatísticas por combustível...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoCombustivel;\r\n\r\n    PRINT \u00276. Recalculando estatísticas por unidade...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoUnidade;\r\n\r\n    PRINT \u00277. Recalculando estatísticas por ano de fabricação...\u0027;\r\n    EXEC sp_RecalcularEstatisticasVeiculoAnoFabricacao;\r\n\r\n    -- Estatísticas de uso (por ano/mês)\r\n    PRINT \u0027\u0027;\r\n    PRINT \u00278. Recalculando estatísticas de uso mensal...\u0027;\r\n\r\n    DECLARE @AnoMes TABLE (Ano INT, Mes INT);\r\n\r\n    -- Anos/meses de viagens\r\n    INSERT INTO @AnoMes (Ano, Mes)\r\n    SELECT DISTINCT YEAR(DataInicial), MONTH(DataInicial)\r\n    FROM Viagem\r\n    WHERE DataInicial IS NOT NULL;\r\n\r\n    -- Anos/meses de abastecimentos (sem duplicar)\r\n    INSERT INTO @AnoMes (Ano, Mes)\r\n    SELECT DISTINCT YEAR(DataHora), MONTH(DataHora)\r\n    FROM Abastecimento\r\n    WHERE DataHora IS NOT NULL\r\n      AND NOT EXISTS (SELECT 1 FROM @AnoMes am WHERE am.Ano = YEAR(DataHora) AND am.Mes = MONTH(DataHora));\r\n\r\n    DECLARE @Ano INT, @Mes INT;\r\n    DECLARE cur CURSOR FOR SELECT DISTINCT Ano, Mes FROM @AnoMes ORDER BY Ano, Mes;\r\n\r\n    OPEN cur;\r\n    FETCH NEXT FROM cur INTO @Ano, @Mes;\r\n\r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        PRINT \u0027   Processando \u0027 + CAST(@Mes AS VARCHAR) + \u0027/\u0027 + CAST(@Ano AS VARCHAR) + \u0027...\u0027;\r\n        EXEC sp_RecalcularEstatisticasVeiculoUsoMensal @Ano, @Mes;\r\n        FETCH NEXT FROM cur INTO @Ano, @Mes;\r\n    END\r\n\r\n    CLOSE cur;\r\n    DEALLOCATE cur;\r\n\r\n    -- Rankings anuais\r\n    PRINT \u0027\u0027;\r\n    PRINT \u00279. Recalculando rankings anuais...\u0027;\r\n\r\n    DECLARE @Anos TABLE (Ano INT);\r\n    INSERT INTO @Anos SELECT DISTINCT Ano FROM @AnoMes;\r\n\r\n    DECLARE cur2 CURSOR FOR SELECT Ano FROM @Anos ORDER BY Ano;\r\n    OPEN cur2;\r\n    FETCH NEXT FROM cur2 INTO @Ano;\r\n\r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        PRINT \u0027   Processando rankings de \u0027 + CAST(@Ano AS VARCHAR) + \u0027...\u0027;\r\n        EXEC sp_RecalcularRankingsVeiculoAnual @Ano;\r\n        FETCH NEXT FROM cur2 INTO @Ano;\r\n    END\r\n\r\n    CLOSE cur2;\r\n    DEALLOCATE cur2;\r\n\r\n    PRINT \u0027\u0027;\r\n    PRINT \u0027=====================================================\u0027;\r\n    PRINT \u0027Todas as estatísticas de veículos foram recalculadas!\u0027;\r\n    PRINT \u0027=====================================================\u0027;\r\nEND",
                          "sp_tr_GetMembersInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetMembersInSet \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\nSELECT [Member] \r\nFROM [dbo].[tr_Set] \r\nWHERE [Id] = @Key\r\nEND",
                          "sp_tr_DeleteInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_DeleteInSet \r\n\t@Key varchar(255) = 0, \r\n\t@Value varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE FROM [dbo].[tr_Set] WHERE [Id] = @Key AND [Member] = @Value\r\n\t\r\n\tRETURN @@rowcount\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoUsoMensal":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoUsoMensal\r\n    @Ano INT,\r\n    @Mes INT\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DECLARE @DataInicio DATE = DATEFROMPARTS(@Ano, @Mes, 1);\r\n        DECLARE @DataFim DATE = EOMONTH(@DataInicio);\r\n\r\n        DELETE FROM EstatisticaVeiculoUsoMensal WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n        -- Viagens do mês\r\n        DECLARE @TotalViagens INT = 0;\r\n        DECLARE @KmTotal DECIMAL(18,2) = 0;\r\n\r\n        SELECT\r\n            @TotalViagens = COUNT(*),\r\n            @KmTotal = ISNULL(SUM(ISNULL(KmFinal, 0) - ISNULL(KmInicial, 0)), 0)\r\n        FROM Viagem\r\n        WHERE DataInicial \u003e= @DataInicio AND DataInicial \u003c DATEADD(DAY, 1, @DataFim);\r\n\r\n        -- Abastecimentos do mês\r\n        DECLARE @TotalAbastecimentos INT = 0;\r\n        DECLARE @LitrosTotal DECIMAL(18,2) = 0;\r\n        DECLARE @ValorAbastecimento DECIMAL(18,2) = 0;\r\n\r\n        SELECT\r\n            @TotalAbastecimentos = COUNT(*),\r\n            @LitrosTotal = ISNULL(SUM(ISNULL(Litros, 0)), 0),\r\n            @ValorAbastecimento = ISNULL(SUM(ISNULL(Litros, 0) * ISNULL(ValorUnitario, 0)), 0)\r\n        FROM Abastecimento\r\n        WHERE DataHora \u003e= @DataInicio AND DataHora \u003c DATEADD(DAY, 1, @DataFim);\r\n\r\n        -- Consumo médio (km/l)\r\n        DECLARE @ConsumoMedio DECIMAL(10,2) = 0;\r\n        IF @LitrosTotal \u003e 0\r\n            SET @ConsumoMedio = @KmTotal / @LitrosTotal;\r\n\r\n        INSERT INTO EstatisticaVeiculoUsoMensal (\r\n            Ano, Mes, TotalViagens, KmTotalRodado,\r\n            TotalAbastecimentos, LitrosTotal, ValorAbastecimento,\r\n            ConsumoMedio, DataAtualizacao\r\n        )\r\n        VALUES (\r\n            @Ano, @Mes, @TotalViagens, @KmTotal,\r\n            @TotalAbastecimentos, @LitrosTotal, @ValorAbastecimento,\r\n            @ConsumoMedio, GETDATE()\r\n        );\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas de uso do mês \u0027 + CAST(@Mes AS VARCHAR) + \u0027/\u0027 + CAST(@Ano AS VARCHAR) + \u0027 recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_JobAtualizacaoViagens":  "CREATE OR ALTER PROCEDURE dbo.sp_JobAtualizacaoViagens\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @Inicio DATETIME = GETDATE()\r\n    DECLARE @InicioEtapa DATETIME\r\n    DECLARE @DataInicio DATE\r\n    DECLARE @DataFim DATE = CAST(GETDATE() AS DATE)\r\n    DECLARE @DiasTotal INT\r\n    \r\n    -- Pega a data do primeiro registro até hoje\r\n    SELECT @DataInicio = MIN(CAST(DataInicial AS DATE)) FROM Viagem WHERE Status = \u0027Realizada\u0027\r\n    SET @DiasTotal = DATEDIFF(DAY, @DataInicio, @DataFim) + 1\r\n    \r\n    PRINT \u0027========================================================================\u0027\r\n    PRINT \u0027         JOB DE ATUALIZACAO DE VIAGENS - FROTIX\u0027\r\n    PRINT \u0027========================================================================\u0027\r\n    PRINT \u0027Inicio: \u0027 + CONVERT(VARCHAR, @Inicio, 120)\r\n    PRINT \u0027Periodo: \u0027 + CONVERT(VARCHAR, @DataInicio, 103) + \u0027 a \u0027 + CONVERT(VARCHAR, @DataFim, 103)\r\n    PRINT \u0027Total de dias: \u0027 + CAST(@DiasTotal AS VARCHAR)\r\n    PRINT \u0027\u0027\r\n    \r\n    BEGIN TRY\r\n        -- ETAPA 1: NORMALIZAR ABASTECIMENTOS\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 1/6] NORMALIZAR ABASTECIMENTOS\u0027\r\n        EXEC dbo.sp_NormalizarAbastecimentos\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 2: CALCULAR CONSUMO DOS VEICULOS\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 2/6] CALCULAR CONSUMO DOS VEICULOS\u0027\r\n        EXEC dbo.sp_CalcularConsumoVeiculos\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 3: ATUALIZAR PADROES ESTATISTICOS DOS VEICULOS\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 3/6] ATUALIZAR PADROES ESTATISTICOS DOS VEICULOS\u0027\r\n        EXEC dbo.sp_AtualizarPadroesVeiculos\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 4: NORMALIZAR VIAGENS (KM, MINUTOS, DATAS) - TODA A BASE\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 4/6] NORMALIZAR VIAGENS (KM, MINUTOS, DATAS)\u0027\r\n        EXEC dbo.sp_NormalizarViagens @DiasParaProcessar = @DiasTotal, @ForcarReprocessamento = 1\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 5: RECALCULAR CUSTOS DAS VIAGENS - TODA A BASE\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 5/6] RECALCULAR CUSTOS DAS VIAGENS\u0027\r\n        EXEC dbo.sp_RecalcularCustosTodasViagens @DataInicio = @DataInicio, @DataFim = @DataFim\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 6: ATUALIZAR ESTATISTICAS (ViagemEstatistica)\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 6/6] ATUALIZAR ESTATISTICAS\u0027\r\n        EXEC dbo.sp_AtualizarTodasEstatisticasViagem\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- RESUMO FINAL\r\n        DECLARE @DuracaoTotal INT = DATEDIFF(SECOND, @Inicio, GETDATE())\r\n        \r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027                    JOB CONCLUIDO COM SUCESSO!\u0027\r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027Tempo total: \u0027 + CAST(@DuracaoTotal AS VARCHAR) + \u0027 segundos\u0027\r\n        PRINT \u0027Termino: \u0027 + CONVERT(VARCHAR, GETDATE(), 120)\r\n        \r\n    END TRY\r\n    BEGIN CATCH\r\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE()\r\n        DECLARE @ErrorSeverity INT = ERROR_SEVERITY()\r\n        DECLARE @ErrorState INT = ERROR_STATE()\r\n        \r\n        PRINT \u0027\u0027\r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027                           ERRO NO JOB!\u0027\r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027Erro: \u0027 + @ErrorMessage\r\n        PRINT \u0027Linha: \u0027 + CAST(ERROR_LINE() AS VARCHAR)\r\n        \r\n        RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState)\r\n    END CATCH\r\nEND",
                          "sp_AtualizarPadroesVeiculos":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarPadroesVeiculos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @KM_MAXIMO_VIAGEM INT = 2000\r\n    DECLARE @VeiculosProcessados INT\r\n    \r\n    PRINT \u0027  Calculando padrões estatísticos por veículo...\u0027\r\n    \r\n    -- Limpar tabela\r\n    DELETE FROM VeiculoPadraoViagem\r\n    \r\n    -- PASSO 1: Calcular agregações básicas\r\n    ;WITH AgregacoesVeiculo AS (\r\n        SELECT \r\n            VeiculoId,\r\n            AVG(CAST(COALESCE(MinutosNormalizado, Minutos) AS DECIMAL(18,2))) AS AvgDuracaoMinutos,\r\n            AVG(CAST(COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) AS DECIMAL(18,2))) AS AvgKmPorViagem,\r\n            CASE \r\n                WHEN COUNT(DISTINCT CAST(COALESCE(DataInicialNormalizada, DataInicial) AS DATE)) \u003e 0 \r\n                THEN SUM(CAST(COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) AS DECIMAL(18,2))) / \r\n                     COUNT(DISTINCT CAST(COALESCE(DataInicialNormalizada, DataInicial) AS DATE))\r\n                ELSE NULL \r\n            END AS AvgKmPorDia,\r\n            ISNULL(STDEV(CAST(COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) AS DECIMAL(18,2))), 0) AS StdDevKm,\r\n            COUNT(*) AS TotalViagens,\r\n            CASE \r\n                WHEN AVG(CAST(COALESCE(MinutosNormalizado, Minutos) AS FLOAT)) \u003c 120 THEN \u0027DIARIO\u0027\r\n                WHEN AVG(CAST(COALESCE(MinutosNormalizado, Minutos) AS FLOAT)) \u003e 480 THEN \u0027LONGA_DURACAO\u0027\r\n                ELSE \u0027MISTO\u0027\r\n            END AS TipoUsoCalculado\r\n        FROM Viagem\r\n        WHERE Status = \u0027Realizada\u0027\r\n          AND VeiculoId IS NOT NULL\r\n          AND COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) BETWEEN 1 AND @KM_MAXIMO_VIAGEM\r\n        GROUP BY VeiculoId\r\n        HAVING COUNT(*) \u003e= 5\r\n    ),\r\n    -- PASSO 2: Calcular percentis\r\n    PercentisPorVeiculo AS (\r\n        SELECT DISTINCT\r\n            VeiculoId,\r\n            PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY COALESCE(KmRodadoNormalizado, KmFinal - KmInicial)) \r\n                OVER (PARTITION BY VeiculoId) AS MedianaKm,\r\n            PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY COALESCE(KmRodadoNormalizado, KmFinal - KmInicial)) \r\n                OVER (PARTITION BY VeiculoId) AS Q1,\r\n            PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY COALESCE(KmRodadoNormalizado, KmFinal - KmInicial)) \r\n                OVER (PARTITION BY VeiculoId) AS Q3\r\n        FROM Viagem\r\n        WHERE Status = \u0027Realizada\u0027\r\n          AND VeiculoId IS NOT NULL\r\n          AND COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) BETWEEN 1 AND @KM_MAXIMO_VIAGEM\r\n    )\r\n    -- PASSO 3: Inserir dados combinados\r\n    INSERT INTO VeiculoPadraoViagem (\r\n        VeiculoId, \r\n        AvgDuracaoMinutos, \r\n        AvgKmPorViagem, \r\n        AvgKmPorDia,\r\n        MaxKmNormalPorViagem,\r\n        MedianaKm,\r\n        Q1Km,\r\n        Q3Km,\r\n        IQRKm,\r\n        LimiteInferiorKm,\r\n        LimiteSuperiorKm,\r\n        TotalViagensAnalisadas,\r\n        TipoUso,\r\n        DataAtualizacao\r\n    )\r\n    SELECT \r\n        A.VeiculoId,\r\n        A.AvgDuracaoMinutos,\r\n        A.AvgKmPorViagem,\r\n        A.AvgKmPorDia,\r\n        -- Max normal = média + 2 desvios padrão (mínimo 500km)\r\n        CASE \r\n            WHEN A.AvgKmPorViagem + 2 * A.StdDevKm \u003e 500\r\n            THEN A.AvgKmPorViagem + 2 * A.StdDevKm\r\n            ELSE 500\r\n        END AS MaxKmNormal,\r\n        P.MedianaKm,\r\n        P.Q1,\r\n        P.Q3,\r\n        P.Q3 - P.Q1 AS IQR,\r\n        P.Q1 - 1.5 * (P.Q3 - P.Q1) AS LimiteInferior,\r\n        P.Q3 + 1.5 * (P.Q3 - P.Q1) AS LimiteSuperior,\r\n        A.TotalViagens,\r\n        A.TipoUsoCalculado,\r\n        GETDATE()\r\n    FROM AgregacoesVeiculo A\r\n    INNER JOIN PercentisPorVeiculo P ON A.VeiculoId = P.VeiculoId\r\n    \r\n    SELECT @VeiculosProcessados = @@ROWCOUNT\r\n    \r\n    PRINT \u0027  ✓ Padrões calculados para \u0027 + CAST(@VeiculosProcessados AS VARCHAR) + \u0027 veículos\u0027\r\n    \r\n    RETURN @VeiculosProcessados\r\nEND",
                          "sp_RecalcularEstatisticasAbastecimentosAnuais":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasAbastecimentosAnuais\r\n    @Ano INT\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        -- Recalcula estatísticas anuais por veículo (para ranking)\r\n        DELETE FROM EstatisticaAbastecimentoVeiculo WHERE Ano = @Ano;\r\n\r\n        INSERT INTO EstatisticaAbastecimentoVeiculo (Ano, VeiculoId, Placa, TipoVeiculo, Categoria, TotalAbastecimentos, ValorTotal, LitrosTotal, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            a.VeiculoId,\r\n            v.Placa,\r\n            m.DescricaoModelo,\r\n            v.Categoria,\r\n            COUNT(*),\r\n            SUM(ISNULL(a.Litros, 0) * ISNULL(a.ValorUnitario, 0)),\r\n            SUM(ISNULL(a.Litros, 0)),\r\n            GETDATE()\r\n        FROM Abastecimento a\r\n        INNER JOIN Veiculo v ON a.VeiculoId = v.VeiculoId\r\n        LEFT JOIN ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\n        WHERE YEAR(a.DataHora) = @Ano\r\n          AND a.VeiculoId IS NOT NULL AND a.VeiculoId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n        GROUP BY a.VeiculoId, v.Placa, m.DescricaoModelo, v.Categoria;\r\n\r\n        -- Atualiza lista de anos disponíveis\r\n        DELETE FROM AnosDisponiveisAbastecimento WHERE Ano = @Ano;\r\n\r\n        INSERT INTO AnosDisponiveisAbastecimento (Ano, TotalAbastecimentos, DataAtualizacao)\r\n        SELECT @Ano, COUNT(*), GETDATE()\r\n        FROM Abastecimento\r\n        WHERE YEAR(DataHora) = @Ano;\r\n\r\n        COMMIT TRANSACTION;\r\n\r\n        PRINT \u0027Estatísticas anuais de abastecimentos do ano \u0027 + CAST(@Ano AS VARCHAR) + \u0027 recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_tr_SetString":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_SetString \r\n\t@Key varchar(255) = 0, \r\n\t@Value nvarchar(4000) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tMERGE [dbo].[tr_String] AS T \r\n\tUSING (SELECT @Key as Id, @Value as Value) AS S \r\n\t\tON (T.Id = S.Id) \r\n\tWHEN NOT MATCHED BY TARGET THEN \r\n\t\tINSERT(Id, Value) VALUES(S.Id, S.Value) \r\n\tWHEN MATCHED THEN \r\n\t\tUPDATE SET T.Value = S.Value;\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoAnoFabricacao":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoAnoFabricacao\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DELETE FROM EstatisticaVeiculoAnoFabricacao;\r\n\r\n        INSERT INTO EstatisticaVeiculoAnoFabricacao (AnoFabricacao, TotalVeiculos, DataAtualizacao)\r\n        SELECT\r\n            ISNULL(AnoFabricacao, 0),\r\n            COUNT(*),\r\n            GETDATE()\r\n        FROM Veiculo\r\n        WHERE AnoFabricacao IS NOT NULL AND AnoFabricacao \u003e 0\r\n        GROUP BY AnoFabricacao;\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas por ano de fabricação recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoGeral":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoGeral\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        -- Limpa tabela\r\n        DELETE FROM EstatisticaVeiculoGeral;\r\n\r\n        -- Insere estatísticas gerais\r\n        INSERT INTO EstatisticaVeiculoGeral (\r\n            TotalVeiculos, VeiculosAtivos, VeiculosInativos,\r\n            VeiculosProprios, VeiculosLocados, IdadeMediaAnos,\r\n            KmMedioRodado, ValorMensalLocacao, DataAtualizacao\r\n        )\r\n        SELECT\r\n            COUNT(*),\r\n            SUM(CASE WHEN Status = 1 THEN 1 ELSE 0 END),\r\n            SUM(CASE WHEN Status = 0 THEN 1 ELSE 0 END),\r\n            SUM(CASE WHEN VeiculoProprio = 1 THEN 1 ELSE 0 END),\r\n            SUM(CASE WHEN VeiculoProprio = 0 THEN 1 ELSE 0 END),\r\n            ISNULL(AVG(CAST(YEAR(GETDATE()) - AnoFabricacao AS DECIMAL(10,2))), 0),\r\n            ISNULL(AVG(CAST(Quilometragem AS DECIMAL(18,2))), 0),\r\n            ISNULL(SUM(CASE WHEN VeiculoProprio = 0 THEN ISNULL(ValorMensal, 0) ELSE 0 END), 0),\r\n            GETDATE()\r\n        FROM Veiculo;\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas gerais de veículos recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoStatus":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoStatus\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DELETE FROM EstatisticaVeiculoStatus;\r\n\r\n        INSERT INTO EstatisticaVeiculoStatus (Status, TotalVeiculos, DataAtualizacao)\r\n        SELECT\r\n            CASE WHEN Status = 1 THEN \u0027Ativo\u0027 ELSE \u0027Inativo\u0027 END,\r\n            COUNT(*),\r\n            GETDATE()\r\n        FROM Veiculo\r\n        GROUP BY Status;\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas por status recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_AtualizarEstatisticasViagem":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarEstatisticasViagem\r\n    @DataParam DATE\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @DataRef DATE = CAST(@DataParam AS DATE)\r\n    DECLARE @EstatisticaId INT\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR ESTATÍSTICAS GERAIS\r\n    -- ========================================================================\r\n    \r\n    DECLARE @TotalViagens INT = 0\r\n    DECLARE @ViagensFinalizadas INT = 0\r\n    DECLARE @ViagensEmAndamento INT = 0\r\n    DECLARE @ViagensAgendadas INT = 0\r\n    DECLARE @ViagensCanceladas INT = 0\r\n    \r\n    SELECT \r\n        @TotalViagens = ISNULL(COUNT(*), 0),\r\n        @ViagensFinalizadas = ISNULL(SUM(CASE WHEN Status = \u0027Realizada\u0027 THEN 1 ELSE 0 END), 0),\r\n        @ViagensEmAndamento = ISNULL(SUM(CASE WHEN Status = \u0027Aberta\u0027 THEN 1 ELSE 0 END), 0),\r\n        @ViagensAgendadas = ISNULL(SUM(CASE WHEN Status = \u0027Agendada\u0027 THEN 1 ELSE 0 END), 0),\r\n        @ViagensCanceladas = ISNULL(SUM(CASE WHEN Status = \u0027Cancelada\u0027 THEN 1 ELSE 0 END), 0)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) = @DataRef\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR CUSTOS (apenas viagens Realizadas)\r\n    -- IMPORTANTE: Soma TODOS os custos por viagem (Combustível + Motorista + Lavador)\r\n    -- ========================================================================\r\n    \r\n    DECLARE @CustoTotal DECIMAL(18,2) = 0\r\n    DECLARE @CustoVeiculo DECIMAL(18,2) = 0\r\n    DECLARE @CustoMotorista DECIMAL(18,2) = 0\r\n    DECLARE @CustoOperador DECIMAL(18,2) = 0\r\n    DECLARE @CustoLavador DECIMAL(18,2) = 0\r\n    DECLARE @CustoCombustivel DECIMAL(18,2) = 0\r\n    \r\n    SELECT \r\n        @CustoCombustivel = ISNULL(SUM(ISNULL(CustoCombustivel, 0)), 0),\r\n        @CustoVeiculo = ISNULL(SUM(ISNULL(CustoVeiculo, 0)), 0),\r\n        @CustoMotorista = ISNULL(SUM(ISNULL(CustoMotorista, 0)), 0),\r\n        @CustoOperador = ISNULL(SUM(ISNULL(CustoOperador, 0)), 0),\r\n        @CustoLavador = ISNULL(SUM(ISNULL(CustoLavador, 0)), 0)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) = @DataRef\r\n      AND Status = \u0027Realizada\u0027\r\n    \r\n    -- Custo total = soma de todos os custos\r\n    SET @CustoTotal = @CustoCombustivel + @CustoVeiculo + @CustoMotorista + @CustoOperador + @CustoLavador\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR QUILOMETRAGEM (com filtro de outliers: 1 a 2000 km)\r\n    -- ========================================================================\r\n    \r\n    DECLARE @KmTotal INT = 0\r\n    DECLARE @KmMedio DECIMAL(18,2) = 0\r\n    DECLARE @MinutosTotal INT = 0\r\n    DECLARE @MinutosMedio INT = 0\r\n    DECLARE @QuilometragemTotal DECIMAL(18,2) = 0\r\n    DECLARE @QuilometragemMedia DECIMAL(18,2) = 0\r\n    \r\n    SELECT \r\n        @KmTotal = ISNULL(SUM(ISNULL(KmRodado, 0)), 0),\r\n        @KmMedio = ISNULL(AVG(CAST(ISNULL(KmRodado, 0) AS DECIMAL(18,2))), 0),\r\n        @MinutosTotal = ISNULL(SUM(ISNULL(Minutos, 0)), 0),\r\n        @MinutosMedio = ISNULL(AVG(ISNULL(Minutos, 0)), 0)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) = @DataRef\r\n      AND Status = \u0027Realizada\u0027\r\n      AND KmRodado IS NOT NULL\r\n      AND KmRodado BETWEEN 1 AND 2000  -- Filtro de outliers\r\n    \r\n    SET @QuilometragemTotal = CAST(@KmTotal AS DECIMAL(18,2))\r\n    SET @QuilometragemMedia = @KmMedio\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR JSONs AGREGADOS\r\n    -- ========================================================================\r\n    \r\n    -- JSON: Viagens por Status\r\n    DECLARE @ViagensPorStatusJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorStatusJson = (\r\n        SELECT \r\n            Status AS status,\r\n            COUNT(*) AS total\r\n        FROM Viagem\r\n        WHERE CAST(DataInicial AS DATE) = @DataRef\r\n        GROUP BY Status\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Motorista\r\n    DECLARE @ViagensPorMotoristaJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorMotoristaJson = (\r\n        SELECT \r\n            m.Nome AS motorista,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN Motorista m ON v.MotoristaId = m.MotoristaId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY m.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Veículo\r\n    DECLARE @ViagensPorVeiculoJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorVeiculoJson = (\r\n        SELECT \r\n            ve.Placa AS veiculo,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN Veiculo ve ON v.VeiculoId = ve.VeiculoId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY ve.Placa\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Finalidade\r\n    DECLARE @ViagensPorFinalidadeJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorFinalidadeJson = (\r\n        SELECT \r\n            v.Finalidade AS finalidade,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.Finalidade IS NOT NULL\r\n        GROUP BY v.Finalidade\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Setor\r\n    DECLARE @ViagensPorSetorJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorSetorJson = (\r\n        SELECT \r\n            s.Nome AS setor,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN SetorSolicitante s ON v.SetorSolicitanteId = s.SetorSolicitanteId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY s.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Requisitante (CORRIGIDO - estava faltando!)\r\n    DECLARE @ViagensPorRequisitanteJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorRequisitanteJson = (\r\n        SELECT \r\n            r.Nome AS requisitante,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN Requisitante r ON v.RequisitanteId = r.RequisitanteId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY r.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Custos por Motorista (apenas CustoMotorista)\r\n    DECLARE @CustosPorMotoristaJson NVARCHAR(MAX)\r\n    SELECT @CustosPorMotoristaJson = (\r\n        SELECT \r\n            m.Nome AS motorista,\r\n            SUM(ISNULL(v.CustoMotorista, 0)) AS custoTotal\r\n        FROM Viagem v\r\n        INNER JOIN Motorista m ON v.MotoristaId = m.MotoristaId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.Status = \u0027Realizada\u0027\r\n        GROUP BY m.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Custos por Veículo (apenas CustoVeiculo - partilha do aluguel)\r\n    DECLARE @CustosPorVeiculoJson NVARCHAR(MAX)\r\n    SELECT @CustosPorVeiculoJson = (\r\n        SELECT \r\n            ve.Placa AS veiculo,\r\n            SUM(ISNULL(v.CustoVeiculo, 0)) AS custoTotal\r\n        FROM Viagem v\r\n        INNER JOIN Veiculo ve ON v.VeiculoId = ve.VeiculoId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.Status = \u0027Realizada\u0027\r\n        GROUP BY ve.Placa\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: KM por Veículo (com filtro de outliers)\r\n    DECLARE @KmPorVeiculoJson NVARCHAR(MAX)\r\n    SELECT @KmPorVeiculoJson = (\r\n        SELECT \r\n            ve.Placa AS veiculo,\r\n            SUM(ISNULL(v.KmRodado, 0)) AS kmTotal\r\n        FROM Viagem v\r\n        INNER JOIN Veiculo ve ON v.VeiculoId = ve.VeiculoId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.KmRodado IS NOT NULL\r\n          AND v.KmRodado BETWEEN 1 AND 2000  -- Filtro de outliers\r\n        GROUP BY ve.Placa\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Custos por Tipo (encapsulado para evitar erro FOR JSON com UNION)\r\n    DECLARE @CustosPorTipoJson NVARCHAR(MAX)\r\n    SELECT @CustosPorTipoJson = (\r\n        SELECT tipo, custo\r\n        FROM (\r\n            SELECT \u0027Combustível\u0027 AS tipo, SUM(ISNULL(CustoCombustivel, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Veículo\u0027 AS tipo, SUM(ISNULL(CustoVeiculo, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Motorista\u0027 AS tipo, SUM(ISNULL(CustoMotorista, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Operador\u0027 AS tipo, SUM(ISNULL(CustoOperador, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Lavador\u0027 AS tipo, SUM(ISNULL(CustoLavador, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n        ) AS CustosPorTipo\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- ========================================================================\r\n    -- INSERIR OU ATUALIZAR\r\n    -- ========================================================================\r\n    \r\n    SELECT @EstatisticaId = Id\r\n    FROM ViagemEstatistica\r\n    WHERE CAST(DataReferencia AS DATE) = @DataRef\r\n    \r\n    IF @EstatisticaId IS NOT NULL\r\n    BEGIN\r\n        UPDATE ViagemEstatistica\r\n        SET \r\n            TotalViagens = @TotalViagens,\r\n            ViagensFinalizadas = @ViagensFinalizadas,\r\n            ViagensEmAndamento = @ViagensEmAndamento,\r\n            ViagensAgendadas = @ViagensAgendadas,\r\n            ViagensCanceladas = @ViagensCanceladas,\r\n            \r\n            CustoTotal = @CustoTotal,\r\n            CustoMedioPorViagem = CASE WHEN @ViagensFinalizadas \u003e 0 THEN @CustoTotal / @ViagensFinalizadas ELSE 0 END,\r\n            CustoVeiculo = @CustoVeiculo,\r\n            CustoMotorista = @CustoMotorista,\r\n            CustoOperador = @CustoOperador,\r\n            CustoLavador = @CustoLavador,\r\n            CustoCombustivel = @CustoCombustivel,\r\n            \r\n            QuilometragemTotal = @QuilometragemTotal,\r\n            QuilometragemMedia = @QuilometragemMedia,\r\n            KmTotal = @KmTotal,\r\n            KmMedio = @KmMedio,\r\n            MinutosTotal = @MinutosTotal,\r\n            MinutosMedio = @MinutosMedio,\r\n            \r\n            ViagensPorStatusJson = @ViagensPorStatusJson,\r\n            ViagensPorMotoristaJson = @ViagensPorMotoristaJson,\r\n            ViagensPorVeiculoJson = @ViagensPorVeiculoJson,\r\n            ViagensPorFinalidadeJson = @ViagensPorFinalidadeJson,\r\n            ViagensPorRequisitanteJson = @ViagensPorRequisitanteJson,\r\n            ViagensPorSetorJson = @ViagensPorSetorJson,\r\n            CustosPorMotoristaJson = @CustosPorMotoristaJson,\r\n            CustosPorVeiculoJson = @CustosPorVeiculoJson,\r\n            KmPorVeiculoJson = @KmPorVeiculoJson,\r\n            CustosPorTipoJson = @CustosPorTipoJson,\r\n            \r\n            DataAtualizacao = GETDATE()\r\n        WHERE Id = @EstatisticaId\r\n    END\r\n    ELSE\r\n    BEGIN\r\n        INSERT INTO ViagemEstatistica (\r\n            DataReferencia,\r\n            TotalViagens, ViagensFinalizadas, ViagensEmAndamento, ViagensAgendadas, ViagensCanceladas,\r\n            CustoTotal, CustoMedioPorViagem, CustoVeiculo, CustoMotorista, CustoOperador, CustoLavador, CustoCombustivel,\r\n            QuilometragemTotal, QuilometragemMedia, KmTotal, KmMedio, MinutosTotal, MinutosMedio,\r\n            ViagensPorStatusJson, ViagensPorMotoristaJson, ViagensPorVeiculoJson, ViagensPorFinalidadeJson,\r\n            ViagensPorRequisitanteJson, ViagensPorSetorJson,\r\n            CustosPorMotoristaJson, CustosPorVeiculoJson, KmPorVeiculoJson, CustosPorTipoJson,\r\n            DataCriacao\r\n        )\r\n        VALUES (\r\n            @DataRef,\r\n            @TotalViagens, @ViagensFinalizadas, @ViagensEmAndamento, @ViagensAgendadas, @ViagensCanceladas,\r\n            @CustoTotal, CASE WHEN @ViagensFinalizadas \u003e 0 THEN @CustoTotal / @ViagensFinalizadas ELSE 0 END,\r\n            @CustoVeiculo, @CustoMotorista, @CustoOperador, @CustoLavador, @CustoCombustivel,\r\n            @QuilometragemTotal, @QuilometragemMedia, @KmTotal, @KmMedio, @MinutosTotal, @MinutosMedio,\r\n            @ViagensPorStatusJson, @ViagensPorMotoristaJson, @ViagensPorVeiculoJson, @ViagensPorFinalidadeJson,\r\n            @ViagensPorRequisitanteJson, @ViagensPorSetorJson,\r\n            @CustosPorMotoristaJson, @CustosPorVeiculoJson, @KmPorVeiculoJson, @CustosPorTipoJson,\r\n            GETDATE()\r\n        )\r\n    END\r\nEND",
                          "sp_TratarNulosTabela":  "CREATE OR ALTER PROCEDURE dbo.sp_TratarNulosTabela\r\n    @NomeTabela NVARCHAR(128)\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    \r\n    DECLARE @SQL NVARCHAR(MAX) = \u0027UPDATE \u0027 + QUOTENAME(@NomeTabela) + \u0027 SET \u0027;\r\n    DECLARE @Colunas NVARCHAR(MAX) = \u0027\u0027;\r\n    DECLARE @Where NVARCHAR(MAX) = \u0027 WHERE \u0027;\r\n    \r\n    SELECT @Colunas = @Colunas + QUOTENAME(c.COLUMN_NAME) + \u0027 = ISNULL(\u0027 + QUOTENAME(c.COLUMN_NAME) + \u0027, \u0027 +\r\n        CASE \r\n            WHEN c.DATA_TYPE IN (\u0027varchar\u0027,\u0027nvarchar\u0027,\u0027char\u0027,\u0027nchar\u0027,\u0027text\u0027,\u0027ntext\u0027) THEN \u0027\u0027\u0027\u0027\u0027\u0027\r\n            WHEN c.DATA_TYPE IN (\u0027int\u0027,\u0027bigint\u0027,\u0027smallint\u0027,\u0027tinyint\u0027,\u0027decimal\u0027,\u0027numeric\u0027,\u0027float\u0027,\u0027real\u0027,\u0027money\u0027) THEN \u00270\u0027\r\n            WHEN c.DATA_TYPE = \u0027bit\u0027 THEN \u00271\u0027\r\n            ELSE \u0027NULL\u0027\r\n        END + \u0027), \u0027\r\n    FROM INFORMATION_SCHEMA.COLUMNS c\r\n    WHERE c.TABLE_NAME = @NomeTabela\r\n      AND c.TABLE_SCHEMA = \u0027dbo\u0027\r\n      AND c.IS_NULLABLE = \u0027YES\u0027\r\n      AND c.DATA_TYPE IN (\u0027varchar\u0027,\u0027nvarchar\u0027,\u0027char\u0027,\u0027nchar\u0027,\u0027text\u0027,\u0027ntext\u0027,\r\n                          \u0027int\u0027,\u0027bigint\u0027,\u0027smallint\u0027,\u0027tinyint\u0027,\u0027decimal\u0027,\u0027numeric\u0027,\u0027float\u0027,\u0027real\u0027,\u0027money\u0027,\r\n                          \u0027bit\u0027)\r\n      -- Exclui colunas que são FK\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu\r\n          INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc \r\n              ON kcu.CONSTRAINT_NAME = tc.CONSTRAINT_NAME\r\n          WHERE tc.CONSTRAINT_TYPE = \u0027FOREIGN KEY\u0027\r\n            AND kcu.TABLE_NAME = c.TABLE_NAME\r\n            AND kcu.COLUMN_NAME = c.COLUMN_NAME\r\n      )\r\n      -- Exclui colunas com CHECK constraints\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu\r\n          INNER JOIN INFORMATION_SCHEMA.CHECK_CONSTRAINTS cc \r\n              ON ccu.CONSTRAINT_NAME = cc.CONSTRAINT_NAME\r\n          WHERE ccu.TABLE_NAME = c.TABLE_NAME\r\n            AND ccu.COLUMN_NAME = c.COLUMN_NAME\r\n      );\r\n    \r\n    SELECT @Where = @Where + QUOTENAME(c.COLUMN_NAME) + \u0027 IS NULL OR \u0027\r\n    FROM INFORMATION_SCHEMA.COLUMNS c\r\n    WHERE c.TABLE_NAME = @NomeTabela\r\n      AND c.TABLE_SCHEMA = \u0027dbo\u0027\r\n      AND c.IS_NULLABLE = \u0027YES\u0027\r\n      AND c.DATA_TYPE IN (\u0027varchar\u0027,\u0027nvarchar\u0027,\u0027char\u0027,\u0027nchar\u0027,\u0027text\u0027,\u0027ntext\u0027,\r\n                          \u0027int\u0027,\u0027bigint\u0027,\u0027smallint\u0027,\u0027tinyint\u0027,\u0027decimal\u0027,\u0027numeric\u0027,\u0027float\u0027,\u0027real\u0027,\u0027money\u0027,\r\n                          \u0027bit\u0027)\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu\r\n          INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc \r\n              ON kcu.CONSTRAINT_NAME = tc.CONSTRAINT_NAME\r\n          WHERE tc.CONSTRAINT_TYPE = \u0027FOREIGN KEY\u0027\r\n            AND kcu.TABLE_NAME = c.TABLE_NAME\r\n            AND kcu.COLUMN_NAME = c.COLUMN_NAME\r\n      )\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu\r\n          INNER JOIN INFORMATION_SCHEMA.CHECK_CONSTRAINTS cc \r\n              ON ccu.CONSTRAINT_NAME = cc.CONSTRAINT_NAME\r\n          WHERE ccu.TABLE_NAME = c.TABLE_NAME\r\n            AND ccu.COLUMN_NAME = c.COLUMN_NAME\r\n      );\r\n    \r\n    IF LEN(@Colunas) \u003e 1\r\n    BEGIN\r\n        SET @Colunas = LEFT(@Colunas, LEN(@Colunas) - 1);\r\n        SET @Where = LEFT(@Where, LEN(@Where) - 3);\r\n        SET @SQL = @SQL + @Colunas + @Where;\r\n        EXEC sp_executesql @SQL;\r\n    END\r\nEND",
                          "sp_NormalizarViagens":  "CREATE OR ALTER PROCEDURE dbo.sp_NormalizarViagens\r\n    @DiasParaProcessar INT = 365,\r\n    @ForcarReprocessamento BIT = 0\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @KM_MAXIMO_VIAGEM INT = 2000\r\n    DECLARE @TotalNormalizadas INT = 0\r\n    DECLARE @DataLimite DATE = DATEADD(DAY, -@DiasParaProcessar, GETDATE())\r\n    \r\n    PRINT \u0027  Normalizando viagens dos últimos \u0027 + CAST(@DiasParaProcessar AS VARCHAR) + \u0027 dias...\u0027\r\n    \r\n    -- PASSO 1: Copiar datas válidas\r\n    PRINT \u0027  [PASSO 1] Copiando datas válidas...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET \r\n        DataInicialNormalizada = DataInicial,\r\n        DataFinalNormalizada = DataFinal,\r\n        HoraInicioNormalizada = HoraInicio,\r\n        HoraFimNormalizada = HoraFim,\r\n        FoiNormalizada = 0,\r\n        TipoNormalizacao = NULL,\r\n        DataNormalizacao = GETDATE()\r\n    WHERE DataInicial IS NOT NULL\r\n      AND DataInicial \u003e= @DataLimite\r\n      AND (@ForcarReprocessamento = 1 OR DataInicialNormalizada IS NULL)\r\n    \r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 datas copiadas\u0027\r\n    \r\n    -- PASSO 2: Corrigir datas invertidas\r\n    PRINT \u0027  [PASSO 2] Corrigindo datas invertidas...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET \r\n        DataInicialNormalizada = DataFinalNormalizada,\r\n        DataFinalNormalizada = DataInicialNormalizada,\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = \u0027DATAS_INVERTIDAS\u0027\r\n    WHERE DataInicialNormalizada \u003e DataFinalNormalizada\r\n      AND DataFinalNormalizada IS NOT NULL\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 datas invertidas corrigidas\u0027\r\n    \r\n    -- PASSO 3: Copiar KM válidos\r\n    PRINT \u0027  [PASSO 3] Copiando KM válidos...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET \r\n        KmInicialNormalizado = KmInicial,\r\n        KmFinalNormalizado = KmFinal,\r\n        KmRodadoNormalizado = KmFinal - KmInicial\r\n    WHERE KmInicial IS NOT NULL\r\n      AND KmFinal IS NOT NULL\r\n      AND KmFinal \u003e= KmInicial\r\n      AND (KmFinal - KmInicial) \u003c= @KM_MAXIMO_VIAGEM\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 KM válidos copiados\u0027\r\n    \r\n    -- PASSO 4: Tratar KM outliers usando padrão do veículo\r\n    PRINT \u0027  [PASSO 4] Corrigindo KM outliers...\u0027\r\n    \r\n    UPDATE v\r\n    SET \r\n        KmFinalNormalizado = v.KmInicial + CAST(COALESCE(p.MedianaKm, p.AvgKmPorViagem, 50) AS INT),\r\n        KmRodadoNormalizado = CAST(COALESCE(p.MedianaKm, p.AvgKmPorViagem, 50) AS INT),\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = COALESCE(v.TipoNormalizacao + \u0027,\u0027, \u0027\u0027) + \u0027KM_OUTLIER\u0027\r\n    FROM Viagem v\r\n    INNER JOIN VeiculoPadraoViagem p ON v.VeiculoId = p.VeiculoId\r\n    WHERE v.KmInicial IS NOT NULL\r\n      AND v.KmFinal IS NOT NULL\r\n      AND (v.KmFinal - v.KmInicial) \u003e @KM_MAXIMO_VIAGEM\r\n      AND v.DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 KM outliers corrigidos\u0027\r\n    \r\n    -- PASSO 5: Anular KM outliers sem padrão\r\n    UPDATE v\r\n    SET \r\n        KmFinalNormalizado = NULL,\r\n        KmRodadoNormalizado = NULL,\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = COALESCE(v.TipoNormalizacao + \u0027,\u0027, \u0027\u0027) + \u0027KM_ANULADO\u0027\r\n    FROM Viagem v\r\n    LEFT JOIN VeiculoPadraoViagem p ON v.VeiculoId = p.VeiculoId\r\n    WHERE v.KmInicial IS NOT NULL\r\n      AND v.KmFinal IS NOT NULL\r\n      AND (v.KmFinal - v.KmInicial) \u003e @KM_MAXIMO_VIAGEM\r\n      AND p.VeiculoId IS NULL\r\n      AND v.DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    \r\n    -- PASSO 6: Calcular MinutosNormalizado\r\n    PRINT \u0027  [PASSO 6] Calculando minutos normalizados...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET MinutosNormalizado = dbo.fn_CalculaMinutosUteis(\r\n        DataInicialNormalizada,\r\n        DataFinalNormalizada,\r\n        HoraInicioNormalizada,\r\n        HoraFimNormalizada\r\n    )\r\n    WHERE DataInicialNormalizada IS NOT NULL\r\n      AND HoraInicioNormalizada IS NOT NULL\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 minutos calculados\u0027\r\n    \r\n    -- PASSO 7: Limitar minutos excessivos\r\n    UPDATE Viagem\r\n    SET MinutosNormalizado = 13200,\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = COALESCE(TipoNormalizacao + \u0027,\u0027, \u0027\u0027) + \u0027MINUTOS_LIMITADOS\u0027\r\n    WHERE MinutosNormalizado \u003e 13200\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    \r\n    PRINT \u0027\u0027\r\n    PRINT \u0027  ✓ Normalização concluída! Total corrigidas: \u0027 + CAST(@TotalNormalizadas AS VARCHAR)\r\n    \r\n    RETURN @TotalNormalizadas\r\nEND",
                          "sp_tr_SetObject":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_SetObject \r\n\t@Key varchar(255) = 0, \r\n\t@Value image\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tMERGE [dbo].[tr_Object] AS T \r\n\tUSING (SELECT @Key as Id, @Value as Value) AS S \r\n\t\tON (T.Id = S.Id) \r\n\tWHEN NOT MATCHED BY TARGET THEN \r\n\t\tINSERT(Id, Value) VALUES(S.Id, S.Value) \r\n\tWHEN MATCHED THEN \r\n\t\tUPDATE SET T.Value = S.Value;\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoCombustivel":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoCombustivel\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DELETE FROM EstatisticaVeiculoCombustivel;\r\n\r\n        INSERT INTO EstatisticaVeiculoCombustivel (Combustivel, TotalVeiculos, DataAtualizacao)\r\n        SELECT\r\n            ISNULL(c.Descricao, \u0027Não Informado\u0027),\r\n            COUNT(*),\r\n            GETDATE()\r\n        FROM Veiculo v\r\n        LEFT JOIN Combustivel c ON v.CombustivelId = c.CombustivelId\r\n        GROUP BY c.Descricao; -- Já está correto, agrupa apenas pela descrição\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas por combustível recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_tr_DeleteSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_DeleteSet \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE\r\n\tFROM [dbo].[tr_Set] \r\n\tWHERE [Id] = @Key\r\nEND",
                          "sp_tr_AcquireLock":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_AcquireLock \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tINSERT INTO [dbo].[tr_AppLock] \r\n\tVALUES (@Key)\r\nEND",
                          "sp_RecalcularTodasEstatisticasAbastecimentos":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularTodasEstatisticasAbastecimentos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @AnoMes TABLE (Ano INT, Mes INT);\r\n\r\n    -- Busca todos os anos/meses com abastecimentos\r\n    INSERT INTO @AnoMes (Ano, Mes)\r\n    SELECT DISTINCT YEAR(DataHora), MONTH(DataHora)\r\n    FROM Abastecimento\r\n    WHERE DataHora IS NOT NULL\r\n    ORDER BY YEAR(DataHora), MONTH(DataHora);\r\n\r\n    DECLARE @Ano INT, @Mes INT;\r\n    DECLARE cur CURSOR FOR SELECT Ano, Mes FROM @AnoMes ORDER BY Ano, Mes;\r\n\r\n    OPEN cur;\r\n    FETCH NEXT FROM cur INTO @Ano, @Mes;\r\n\r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        PRINT \u0027Processando \u0027 + CAST(@Mes AS VARCHAR) + \u0027/\u0027 + CAST(@Ano AS VARCHAR) + \u0027...\u0027;\r\n        EXEC sp_RecalcularEstatisticasAbastecimentos @Ano, @Mes;\r\n        FETCH NEXT FROM cur INTO @Ano, @Mes;\r\n    END\r\n\r\n    CLOSE cur;\r\n    DEALLOCATE cur;\r\n\r\n    -- Recalcula estatísticas anuais\r\n    DECLARE @Anos TABLE (Ano INT);\r\n    INSERT INTO @Anos SELECT DISTINCT Ano FROM @AnoMes;\r\n\r\n    DECLARE cur2 CURSOR FOR SELECT Ano FROM @Anos ORDER BY Ano;\r\n    OPEN cur2;\r\n    FETCH NEXT FROM cur2 INTO @Ano;\r\n\r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        PRINT \u0027Processando estatísticas anuais de \u0027 + CAST(@Ano AS VARCHAR) + \u0027...\u0027;\r\n        EXEC sp_RecalcularEstatisticasAbastecimentosAnuais @Ano;\r\n        FETCH NEXT FROM cur2 INTO @Ano;\r\n    END\r\n\r\n    CLOSE cur2;\r\n    DEALLOCATE cur2;\r\n\r\n    PRINT \u0027Todas as estatísticas de abastecimentos foram recalculadas!\u0027;\r\nEND",
                          "sp_tr_ClearAll":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_ClearAll \r\nAS\r\nBEGIN\r\n\tDELETE [dbo].[tr_Set]\r\n\tDELETE [dbo].[tr_Object]\r\n\tDELETE [dbo].[tr_String]\r\nEND",
                          "sp_RecalcularEstatisticasMotoristas":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasMotoristas\r\n      @Ano INT,\r\n      @Mes INT\r\n  AS\r\n  BEGIN\r\n      SET NOCOUNT ON;\r\n\r\n      DECLARE @DataInicio DATE = DATEFROMPARTS(@Ano, @Mes, 1);\r\n      DECLARE @DataFim DATE = EOMONTH(@DataInicio);\r\n      DECLARE @Hoje DATE = GETDATE();\r\n\r\n      BEGIN TRY\r\n          BEGIN TRANSACTION;\r\n\r\n          -- Limpa dados existentes do mês\r\n          DELETE FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n          -- Insere estatísticas de viagens por motorista\r\n          INSERT INTO EstatisticaMotoristasMensal (MotoristaId, Ano, Mes, TotalViagens, KmTotal, MinutosTotais, DataAtualizacao)\r\n          SELECT\r\n              v.MotoristaId,\r\n              @Ano,\r\n              @Mes,\r\n              COUNT(*),\r\n              SUM(CASE\r\n                  WHEN v.KmInicial IS NOT NULL AND v.KmFinal IS NOT NULL\r\n                       AND v.KmFinal \u003e= v.KmInicial\r\n                       AND (v.KmFinal - v.KmInicial) \u003c= 2000\r\n                  THEN v.KmFinal - v.KmInicial\r\n                  ELSE 0\r\n              END),\r\n              SUM(ISNULL(v.Minutos, 0)),\r\n              GETDATE()\r\n          FROM Viagem v\r\n          WHERE v.MotoristaId IS NOT NULL\r\n            AND v.DataInicial \u003e= @DataInicio\r\n            AND v.DataInicial \u003c DATEADD(DAY, 1, @DataFim)\r\n          GROUP BY v.MotoristaId;\r\n\r\n          -- Atualiza multas por motorista\r\n          UPDATE e\r\n          SET e.TotalMultas = ISNULL(m.Total, 0),\r\n              e.ValorTotalMultas = ISNULL(m.Valor, 0),\r\n              e.DataAtualizacao = GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          LEFT JOIN (\r\n              SELECT MotoristaId, COUNT(*) as Total, SUM(ISNULL(ValorAteVencimento, 0)) as Valor\r\n              FROM Multa\r\n              WHERE Data \u003e= @DataInicio AND Data \u003c DATEADD(DAY, 1, @DataFim)\r\n                AND MotoristaId IS NOT NULL\r\n              GROUP BY MotoristaId\r\n          ) m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes;\r\n\r\n          -- Insere motoristas que só têm multas (sem viagens)\r\n          INSERT INTO EstatisticaMotoristasMensal (MotoristaId, Ano, Mes, TotalMultas, ValorTotalMultas, DataAtualizacao)\r\n          SELECT\r\n              m.MotoristaId,\r\n              @Ano,\r\n              @Mes,\r\n              COUNT(*),\r\n              SUM(ISNULL(m.ValorAteVencimento, 0)),\r\n              GETDATE()\r\n          FROM Multa m\r\n          WHERE m.MotoristaId IS NOT NULL\r\n            AND m.Data \u003e= @DataInicio\r\n            AND m.Data \u003c DATEADD(DAY, 1, @DataFim)\r\n            AND NOT EXISTS (\r\n                SELECT 1 FROM EstatisticaMotoristasMensal e\r\n                WHERE e.MotoristaId = m.MotoristaId AND e.Ano = @Ano AND e.Mes = @Mes\r\n            )\r\n          GROUP BY m.MotoristaId;\r\n\r\n          -- Atualiza abastecimentos por motorista\r\n          UPDATE e\r\n          SET e.TotalAbastecimentos = ISNULL(a.Total, 0),\r\n              e.LitrosTotais = ISNULL(a.Litros, 0),\r\n              e.ValorTotalAbastecimentos = ISNULL(a.Valor, 0),\r\n              e.DataAtualizacao = GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          LEFT JOIN (\r\n              SELECT MotoristaId, COUNT(*) as Total,\r\n                     SUM(ISNULL(Litros, 0)) as Litros,\r\n                     SUM(ISNULL(Litros, 0) * ISNULL(ValorUnitario, 0)) as Valor\r\n              FROM Abastecimento\r\n              WHERE DataHora \u003e= @DataInicio AND DataHora \u003c DATEADD(DAY, 1, @DataFim)\r\n                AND MotoristaId IS NOT NULL AND MotoristaId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n              GROUP BY MotoristaId\r\n          ) a ON e.MotoristaId = a.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes;\r\n\r\n          -- Estatísticas Gerais do Mês\r\n          DELETE FROM EstatisticaGeralMensal WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n          INSERT INTO EstatisticaGeralMensal (\r\n              Ano, Mes,\r\n              TotalMotoristas, MotoristasAtivos, MotoristasInativos,\r\n              Efetivos, Feristas, Cobertura,\r\n              TotalViagens, KmTotal, HorasTotais,\r\n              TotalMultas, ValorTotalMultas,\r\n              TotalAbastecimentos,\r\n              DataAtualizacao\r\n          )\r\n          SELECT\r\n              @Ano,\r\n              @Mes,\r\n              (SELECT COUNT(*) FROM Motorista),\r\n              (SELECT COUNT(*) FROM Motorista WHERE Status = 1),\r\n              (SELECT COUNT(*) FROM Motorista WHERE Status = 0),\r\n              (SELECT COUNT(*) FROM Motorista WHERE Status = 1 AND (EfetivoFerista = \u0027Efetivo\u0027 OR EfetivoFerista IS NULL OR EfetivoFerista = \u0027\u0027)),    \r\n              (SELECT COUNT(*) FROM Motorista WHERE Status = 1 AND EfetivoFerista = \u0027Ferista\u0027),\r\n              (SELECT COUNT(*) FROM Motorista WHERE Status = 1 AND EfetivoFerista = \u0027Cobertura\u0027),\r\n              ISNULL((SELECT SUM(TotalViagens) FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes), 0),\r\n              ISNULL((SELECT SUM(KmTotal) FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes), 0),\r\n              ISNULL((SELECT SUM(MinutosTotais) / 60.0 FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes), 0),\r\n              ISNULL((SELECT SUM(TotalMultas) FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes), 0),\r\n              ISNULL((SELECT SUM(ValorTotalMultas) FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes), 0),\r\n              ISNULL((SELECT SUM(TotalAbastecimentos) FROM EstatisticaMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes), 0),\r\n              GETDATE();\r\n\r\n          -- Rankings Top 10\r\n          DELETE FROM RankingMotoristasMensal WHERE Ano = @Ano AND Mes = @Mes;\r\n\r\n          -- Top 10 por Viagens\r\n          INSERT INTO RankingMotoristasMensal (Ano, Mes, TipoRanking, Posicao, MotoristaId, NomeMotorista, TipoMotorista, ValorPrincipal, DataAtualizacao)\r\n          SELECT TOP 10\r\n              @Ano, @Mes, \u0027VIAGENS\u0027, ROW_NUMBER() OVER (ORDER BY e.TotalViagens DESC),\r\n              e.MotoristaId, m.Nome, ISNULL(m.EfetivoFerista, \u0027Efetivo\u0027), e.TotalViagens, GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          INNER JOIN Motorista m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes AND e.TotalViagens \u003e 0\r\n          ORDER BY e.TotalViagens DESC;\r\n\r\n          -- Top 10 por KM\r\n          INSERT INTO RankingMotoristasMensal (Ano, Mes, TipoRanking, Posicao, MotoristaId, NomeMotorista, TipoMotorista, ValorPrincipal, DataAtualizacao)\r\n          SELECT TOP 10\r\n              @Ano, @Mes, \u0027KM\u0027, ROW_NUMBER() OVER (ORDER BY e.KmTotal DESC),\r\n              e.MotoristaId, m.Nome, ISNULL(m.EfetivoFerista, \u0027Efetivo\u0027), e.KmTotal, GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          INNER JOIN Motorista m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes AND e.KmTotal \u003e 0\r\n          ORDER BY e.KmTotal DESC;\r\n\r\n          -- Top 10 por Horas\r\n          INSERT INTO RankingMotoristasMensal (Ano, Mes, TipoRanking, Posicao, MotoristaId, NomeMotorista, TipoMotorista, ValorPrincipal, DataAtualizacao)\r\n          SELECT TOP 10\r\n              @Ano, @Mes, \u0027HORAS\u0027, ROW_NUMBER() OVER (ORDER BY e.MinutosTotais DESC),\r\n              e.MotoristaId, m.Nome, ISNULL(m.EfetivoFerista, \u0027Efetivo\u0027), ROUND(e.MinutosTotais / 60.0, 1), GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          INNER JOIN Motorista m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes AND e.MinutosTotais \u003e 0\r\n          ORDER BY e.MinutosTotais DESC;\r\n\r\n          -- Top 10 por Abastecimentos\r\n          INSERT INTO RankingMotoristasMensal (Ano, Mes, TipoRanking, Posicao, MotoristaId, NomeMotorista, TipoMotorista, ValorPrincipal, DataAtualizacao)\r\n          SELECT TOP 10\r\n              @Ano, @Mes, \u0027ABASTECIMENTOS\u0027, ROW_NUMBER() OVER (ORDER BY e.TotalAbastecimentos DESC),\r\n              e.MotoristaId, m.Nome, ISNULL(m.EfetivoFerista, \u0027Efetivo\u0027), e.TotalAbastecimentos, GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          INNER JOIN Motorista m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes AND e.TotalAbastecimentos \u003e 0\r\n          ORDER BY e.TotalAbastecimentos DESC;\r\n\r\n          -- Top 10 por Multas\r\n          INSERT INTO RankingMotoristasMensal (Ano, Mes, TipoRanking, Posicao, MotoristaId, NomeMotorista, TipoMotorista, ValorPrincipal, ValorSecundario, DataAtualizacao)\r\n          SELECT TOP 10\r\n              @Ano, @Mes, \u0027MULTAS\u0027, ROW_NUMBER() OVER (ORDER BY e.TotalMultas DESC),\r\n              e.MotoristaId, m.Nome, ISNULL(m.EfetivoFerista, \u0027Efetivo\u0027), e.TotalMultas, e.ValorTotalMultas, GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          INNER JOIN Motorista m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes AND e.TotalMultas \u003e 0\r\n          ORDER BY e.TotalMultas DESC;\r\n\r\n          -- Top 10 Performance\r\n          INSERT INTO RankingMotoristasMensal (Ano, Mes, TipoRanking, Posicao, MotoristaId, NomeMotorista, TipoMotorista, ValorPrincipal, ValorSecundario, ValorTerciario, ValorQuaternario, DataAtualizacao)\r\n          SELECT TOP 10\r\n              @Ano, @Mes, \u0027PERFORMANCE\u0027, ROW_NUMBER() OVER (ORDER BY e.TotalViagens DESC),\r\n              e.MotoristaId, m.Nome, ISNULL(m.EfetivoFerista, \u0027Efetivo\u0027),\r\n              e.TotalViagens, e.KmTotal, ROUND(e.MinutosTotais / 60.0, 1), e.TotalMultas, GETDATE()\r\n          FROM EstatisticaMotoristasMensal e\r\n          INNER JOIN Motorista m ON e.MotoristaId = m.MotoristaId\r\n          WHERE e.Ano = @Ano AND e.Mes = @Mes AND e.TotalViagens \u003e 0\r\n          ORDER BY e.TotalViagens DESC;\r\n\r\n          -- =====================================================\r\n          -- HEATMAP - CORRIGIDO: Usar HoraInicio para extrair a hora\r\n          -- =====================================================\r\n          DELETE FROM HeatmapViagensMensal WHERE Ano = @Ano AND Mes = @Mes AND MotoristaId IS NULL;\r\n\r\n          INSERT INTO HeatmapViagensMensal (Ano, Mes, MotoristaId, DiaSemana, Hora, TotalViagens, DataAtualizacao)\r\n          SELECT\r\n              @Ano, @Mes, NULL,\r\n              DATEPART(WEEKDAY, v.HoraInicio) - 1,  -- CORRIGIDO: HoraInicio\r\n              DATEPART(HOUR, v.HoraInicio),          -- CORRIGIDO: HoraInicio\r\n              COUNT(*),\r\n              GETDATE()\r\n          FROM Viagem v\r\n          WHERE v.MotoristaId IS NOT NULL\r\n            AND v.DataInicial \u003e= @DataInicio\r\n            AND v.DataInicial \u003c DATEADD(DAY, 1, @DataFim)\r\n            AND v.HoraInicio IS NOT NULL\r\n          GROUP BY DATEPART(WEEKDAY, v.HoraInicio), DATEPART(HOUR, v.HoraInicio);\r\n\r\n          -- Evolução Diária de Viagens (Todos os motoristas)\r\n          DELETE FROM EvolucaoViagensDiaria\r\n          WHERE Data \u003e= @DataInicio AND Data \u003c= @DataFim AND MotoristaId IS NULL;\r\n\r\n          INSERT INTO EvolucaoViagensDiaria (Data, MotoristaId, TotalViagens, KmTotal, MinutosTotais, DataAtualizacao)\r\n          SELECT\r\n              CAST(v.DataInicial AS DATE),\r\n              NULL,\r\n              COUNT(*),\r\n              SUM(CASE\r\n                  WHEN v.KmInicial IS NOT NULL AND v.KmFinal IS NOT NULL\r\n                       AND v.KmFinal \u003e= v.KmInicial\r\n                       AND (v.KmFinal - v.KmInicial) \u003c= 2000\r\n                  THEN v.KmFinal - v.KmInicial\r\n                  ELSE 0\r\n              END),\r\n              SUM(ISNULL(v.Minutos, 0)),\r\n              GETDATE()\r\n          FROM Viagem v\r\n          WHERE v.MotoristaId IS NOT NULL\r\n            AND v.DataInicial \u003e= @DataInicio\r\n            AND v.DataInicial \u003c DATEADD(DAY, 1, @DataFim)\r\n          GROUP BY CAST(v.DataInicial AS DATE);\r\n\r\n          COMMIT TRANSACTION;\r\n          PRINT \u0027Estatísticas do mês \u0027 + CAST(@Mes AS VARCHAR) + \u0027/\u0027 + CAST(@Ano AS VARCHAR) + \u0027 recalculadas com sucesso.\u0027;\r\n\r\n      END TRY\r\n      BEGIN CATCH\r\n          ROLLBACK TRANSACTION;\r\n          THROW;\r\n      END CATCH\r\n  END",
                          "sp_RecalcularTodasEstatisticasMotoristas":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularTodasEstatisticasMotoristas\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @AnoMes TABLE (Ano INT, Mes INT);\r\n\r\n    -- Busca todos os anos/meses com viagens\r\n    INSERT INTO @AnoMes (Ano, Mes)\r\n    SELECT DISTINCT YEAR(DataInicial), MONTH(DataInicial)\r\n    FROM Viagem\r\n    WHERE DataInicial IS NOT NULL AND MotoristaId IS NOT NULL\r\n    ORDER BY YEAR(DataInicial), MONTH(DataInicial);\r\n\r\n    -- Adiciona meses de multas que não estão em viagens\r\n    INSERT INTO @AnoMes (Ano, Mes)\r\n    SELECT DISTINCT YEAR(Data), MONTH(Data)\r\n    FROM Multa\r\n    WHERE Data IS NOT NULL\r\n      AND MotoristaId IS NOT NULL\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM @AnoMes am\r\n          WHERE am.Ano = YEAR(Data) AND am.Mes = MONTH(Data)\r\n      );\r\n\r\n    -- Adiciona meses de abastecimentos que não estão nas anteriores\r\n    INSERT INTO @AnoMes (Ano, Mes)\r\n    SELECT DISTINCT YEAR(DataHora), MONTH(DataHora)\r\n    FROM Abastecimento\r\n    WHERE DataHora IS NOT NULL\r\n      AND MotoristaId IS NOT NULL\r\n      AND MotoristaId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM @AnoMes am\r\n          WHERE am.Ano = YEAR(DataHora) AND am.Mes = MONTH(DataHora)\r\n      );\r\n\r\n    DECLARE @Ano INT, @Mes INT;\r\n    DECLARE cur CURSOR FOR SELECT Ano, Mes FROM @AnoMes ORDER BY Ano, Mes;\r\n\r\n    OPEN cur;\r\n    FETCH NEXT FROM cur INTO @Ano, @Mes;\r\n\r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        PRINT \u0027Processando \u0027 + CAST(@Mes AS VARCHAR) + \u0027/\u0027 + CAST(@Ano AS VARCHAR) + \u0027...\u0027;\r\n        EXEC sp_RecalcularEstatisticasMotoristas @Ano, @Mes;\r\n        FETCH NEXT FROM cur INTO @Ano, @Mes;\r\n    END\r\n\r\n    CLOSE cur;\r\n    DEALLOCATE cur;\r\n\r\n    PRINT \u0027Todas as estatísticas foram recalculadas!\u0027;\r\nEND",
                          "sp_tr_ExistsInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_ExistsInSet \r\n\t@Key varchar(255) = 0, \r\n\t@Value varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tIF EXISTS (SELECT 1 FROM [dbo].[tr_Set] WHERE [Id] = @Key AND [Member] = @Value)\r\n\t\tRETURN 1\r\n\tELSE\r\n\t\tRETURN 0\r\nEND",
                          "sp_tr_GetString":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetString \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT Value \r\n\tFROM [dbo].[tr_String] \r\n\tWHERE Id = @Key\r\nEND",
                          "sp_RecalcularEstatisticasVeiculoModelo":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasVeiculoModelo\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        DELETE FROM EstatisticaVeiculoModelo;\r\n\r\n        INSERT INTO EstatisticaVeiculoModelo (\r\n            ModeloId, Modelo, TotalVeiculos, VeiculosAtivos, DataAtualizacao\r\n        )\r\n        SELECT\r\n            MIN(v.ModeloId), -- Pega o primeiro ModeloId encontrado para cada nome de modelo\r\n            ISNULL(m.DescricaoModelo, \u0027Não Informado\u0027),\r\n            COUNT(*),\r\n            SUM(CASE WHEN v.Status = 1 THEN 1 ELSE 0 END),\r\n            GETDATE()\r\n        FROM Veiculo v\r\n        LEFT JOIN ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\n        GROUP BY m.DescricaoModelo; -- Agrupa apenas pelo nome do modelo\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Estatísticas por modelo recalculadas com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_tr_DeleteLike":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_DeleteLike \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE \r\n\tFROM [dbo].[tr_String] \r\n\tWHERE [Id] LIKE @Key + \u0027%\u0027\r\n\t\r\n\tDELETE \r\n\tFROM [dbo].[tr_Object] \r\n\tWHERE [Id] LIKE @Key + \u0027%\u0027\r\n\r\n\tDELETE \r\n\tFROM [dbo].[tr_Set] \r\n\tWHERE [Id] LIKE @Key + \u0027%\u0027\r\nEND",
                          "sp_RecalcularCustosTodasViagens":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularCustosTodasViagens\r\n    @DataInicio DATE = NULL,\r\n    @DataFim DATE = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    -- Se não informou datas, pega TODA a base\r\n    IF @DataInicio IS NULL\r\n        SELECT @DataInicio = MIN(CAST(DataInicial AS DATE)) FROM Viagem WHERE Status = \u0027Realizada\u0027\r\n    \r\n    IF @DataFim IS NULL\r\n        SET @DataFim = CAST(GETDATE() AS DATE)\r\n    \r\n    DECLARE @ViagemId UNIQUEIDENTIFIER\r\n    DECLARE @Total INT = 0\r\n    DECLARE @Processadas INT = 0\r\n    DECLARE @Inicio DATETIME = GETDATE()\r\n    \r\n    SELECT @Total = COUNT(*)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) \u003e= @DataInicio\r\n      AND CAST(DataInicial AS DATE) \u003c= @DataFim\r\n      AND Status = \u0027Realizada\u0027\r\n    \r\n    PRINT \u0027  Recalculando custos de \u0027 + CAST(@Total AS VARCHAR) + \u0027 viagens...\u0027\r\n    PRINT \u0027  Período: \u0027 + CONVERT(VARCHAR, @DataInicio, 103) + \u0027 a \u0027 + CONVERT(VARCHAR, @DataFim, 103)\r\n    \r\n    -- Desabilita o trigger via CONTEXT_INFO\r\n    SET CONTEXT_INFO 0x1\r\n    \r\n    DECLARE viagem_cursor CURSOR LOCAL FAST_FORWARD FOR\r\n        SELECT ViagemId\r\n        FROM Viagem\r\n        WHERE CAST(DataInicial AS DATE) \u003e= @DataInicio\r\n          AND CAST(DataInicial AS DATE) \u003c= @DataFim\r\n          AND Status = \u0027Realizada\u0027\r\n    \r\n    OPEN viagem_cursor\r\n    FETCH NEXT FROM viagem_cursor INTO @ViagemId\r\n    \r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        EXEC dbo.sp_CalculaCustosViagem @ViagemId\r\n        SET @Processadas = @Processadas + 1\r\n        \r\n        IF @Processadas % 500 = 0\r\n            PRINT \u0027    Processadas \u0027 + CAST(@Processadas AS VARCHAR) + \u0027 de \u0027 + CAST(@Total AS VARCHAR)\r\n        \r\n        FETCH NEXT FROM viagem_cursor INTO @ViagemId\r\n    END\r\n    \r\n    CLOSE viagem_cursor\r\n    DEALLOCATE viagem_cursor\r\n    \r\n    SET CONTEXT_INFO 0x0\r\n    \r\n    DECLARE @Duracao INT = DATEDIFF(SECOND, @Inicio, GETDATE())\r\n    PRINT \u0027  ✓ Concluído! \u0027 + CAST(@Processadas AS VARCHAR) + \u0027 viagens em \u0027 + CAST(@Duracao AS VARCHAR) + \u0027s\u0027\r\nEND",
                          "sp_RecalcularRankingsVeiculoAnual":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularRankingsVeiculoAnual\r\n    @Ano INT\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\r\n\r\n        -- =====================================================\r\n        -- Ranking por KM Rodado\r\n        -- =====================================================\r\n        DELETE FROM EstatisticaVeiculoRankingKm WHERE Ano = @Ano;\r\n\r\n        INSERT INTO EstatisticaVeiculoRankingKm (\r\n            Ano, VeiculoId, Placa, Modelo, KmRodado, TotalViagens, DataAtualizacao\r\n        )\r\n        SELECT\r\n            @Ano,\r\n            vi.VeiculoId,\r\n            v.Placa,\r\n            m.DescricaoModelo,\r\n            SUM(ISNULL(vi.KmFinal, 0) - ISNULL(vi.KmInicial, 0)),\r\n            COUNT(*),\r\n            GETDATE()\r\n        FROM Viagem vi\r\n        INNER JOIN Veiculo v ON vi.VeiculoId = v.VeiculoId\r\n        LEFT JOIN ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\n        WHERE YEAR(vi.DataInicial) = @Ano\r\n          AND vi.VeiculoId IS NOT NULL AND vi.VeiculoId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n        GROUP BY vi.VeiculoId, v.Placa, m.DescricaoModelo;\r\n\r\n        -- =====================================================\r\n        -- Ranking por Litros Abastecidos\r\n        -- =====================================================\r\n        DELETE FROM EstatisticaVeiculoRankingLitros WHERE Ano = @Ano;\r\n\r\n        INSERT INTO EstatisticaVeiculoRankingLitros (\r\n            Ano, VeiculoId, Placa, Modelo, LitrosAbastecidos, ValorTotal, TotalAbastecimentos, DataAtualizacao\r\n        )\r\n        SELECT\r\n            @Ano,\r\n            a.VeiculoId,\r\n            v.Placa,\r\n            m.DescricaoModelo,\r\n            SUM(ISNULL(a.Litros, 0)),\r\n            SUM(ISNULL(a.Litros, 0) * ISNULL(a.ValorUnitario, 0)),\r\n            COUNT(*),\r\n            GETDATE()\r\n        FROM Abastecimento a\r\n        INNER JOIN Veiculo v ON a.VeiculoId = v.VeiculoId\r\n        LEFT JOIN ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\n        WHERE YEAR(a.DataHora) = @Ano\r\n          AND a.VeiculoId IS NOT NULL AND a.VeiculoId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n        GROUP BY a.VeiculoId, v.Placa, m.DescricaoModelo;\r\n\r\n        -- =====================================================\r\n        -- Ranking por Consumo (km/l)\r\n        -- =====================================================\r\n        DELETE FROM EstatisticaVeiculoRankingConsumo WHERE Ano = @Ano;\r\n\r\n        -- Primeiro, obter KM por veículo\r\n        WITH KmPorVeiculo AS (\r\n            SELECT\r\n                VeiculoId,\r\n                SUM(ISNULL(KmFinal, 0) - ISNULL(KmInicial, 0)) AS KmRodado\r\n            FROM Viagem\r\n            WHERE YEAR(DataInicial) = @Ano\r\n              AND VeiculoId IS NOT NULL AND VeiculoId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n            GROUP BY VeiculoId\r\n        ),\r\n        LitrosPorVeiculo AS (\r\n            SELECT\r\n                VeiculoId,\r\n                SUM(ISNULL(Litros, 0)) AS LitrosAbastecidos,\r\n                COUNT(*) AS TotalAbastecimentos\r\n            FROM Abastecimento\r\n            WHERE YEAR(DataHora) = @Ano\r\n              AND VeiculoId IS NOT NULL AND VeiculoId \u003c\u003e \u002700000000-0000-0000-0000-000000000000\u0027\r\n            GROUP BY VeiculoId\r\n        )\r\n        INSERT INTO EstatisticaVeiculoRankingConsumo (\r\n            Ano, VeiculoId, Placa, Modelo, KmRodado, LitrosAbastecidos,\r\n            ConsumoKmPorLitro, TotalAbastecimentos, DataAtualizacao\r\n        )\r\n        SELECT\r\n            @Ano,\r\n            COALESCE(k.VeiculoId, l.VeiculoId),\r\n            v.Placa,\r\n            m.DescricaoModelo,\r\n            ISNULL(k.KmRodado, 0),\r\n            ISNULL(l.LitrosAbastecidos, 0),\r\n            CASE WHEN ISNULL(l.LitrosAbastecidos, 0) \u003e 0\r\n                 THEN ROUND(ISNULL(k.KmRodado, 0) / l.LitrosAbastecidos, 2)\r\n                 ELSE 0 END,\r\n            ISNULL(l.TotalAbastecimentos, 0),\r\n            GETDATE()\r\n        FROM KmPorVeiculo k\r\n        FULL OUTER JOIN LitrosPorVeiculo l ON k.VeiculoId = l.VeiculoId\r\n        INNER JOIN Veiculo v ON COALESCE(k.VeiculoId, l.VeiculoId) = v.VeiculoId\r\n        LEFT JOIN ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\n        WHERE ISNULL(k.KmRodado, 0) \u003e 0 OR ISNULL(l.LitrosAbastecidos, 0) \u003e 0;\r\n\r\n        -- =====================================================\r\n        -- Atualizar Anos Disponíveis\r\n        -- =====================================================\r\n        DELETE FROM AnosDisponiveisVeiculo WHERE Ano = @Ano;\r\n\r\n        INSERT INTO AnosDisponiveisVeiculo (Ano, TotalViagens, TotalAbastecimentos, DataAtualizacao)\r\n        SELECT\r\n            @Ano,\r\n            (SELECT COUNT(*) FROM Viagem WHERE YEAR(DataInicial) = @Ano),\r\n            (SELECT COUNT(*) FROM Abastecimento WHERE YEAR(DataHora) = @Ano),\r\n            GETDATE();\r\n\r\n        COMMIT TRANSACTION;\r\n        PRINT \u0027Rankings anuais de veículos do ano \u0027 + CAST(@Ano AS VARCHAR) + \u0027 recalculados com sucesso.\u0027;\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        ROLLBACK TRANSACTION;\r\n        THROW;\r\n    END CATCH\r\nEND",
                          "sp_tr_GetBytes":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetBytes \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT Value \r\n\tFROM [dbo].[tr_Object] \r\n\tWHERE Id = @Key\r\nEND",
                          "sp_NormalizarAbastecimentos":  "CREATE OR ALTER PROCEDURE dbo.sp_NormalizarAbastecimentos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @TotalRegistros INT\r\n    DECLARE @OutliersDetectados INT\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION\r\n\r\n        -- STEP 1: Calcular consumo original\r\n        PRINT \u0027  [STEP 1] Calculando consumo original...\u0027\r\n        \r\n        UPDATE Abastecimento\r\n        SET ConsumoCalculado = CAST(KmRodado AS FLOAT) / Litros\r\n        WHERE Litros \u003e 0 AND KmRodado \u003e 0\r\n        \r\n        SELECT @TotalRegistros = @@ROWCOUNT\r\n        PRINT \u0027           \u0027 + CAST(@TotalRegistros AS VARCHAR) + \u0027 registros calculados\u0027\r\n\r\n        -- STEP 2: Calcular estatísticas e normalizar por veículo\r\n        PRINT \u0027  [STEP 2] Detectando outliers (método IQR)...\u0027\r\n        \r\n        ;WITH EstatisticasVeiculo AS (\r\n            SELECT DISTINCT\r\n                VeiculoId,\r\n                PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY ConsumoCalculado) OVER (PARTITION BY VeiculoId) AS Q1,\r\n                PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY ConsumoCalculado) OVER (PARTITION BY VeiculoId) AS Q3,\r\n                PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY ConsumoCalculado) OVER (PARTITION BY VeiculoId) AS Mediana,\r\n                PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY KmRodado) OVER (PARTITION BY VeiculoId) AS MedianaKm,\r\n                PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY Litros) OVER (PARTITION BY VeiculoId) AS MedianaLitros\r\n            FROM Abastecimento\r\n            WHERE Litros \u003e 0 AND KmRodado \u003e 0 AND ConsumoCalculado IS NOT NULL\r\n        ),\r\n        LimitesVeiculo AS (\r\n            SELECT \r\n                VeiculoId, Q1, Q3, Mediana, MedianaKm, MedianaLitros,\r\n                -- IQR com limites de sanidade (3 a 30 km/l)\r\n                CASE WHEN Q1 - 1.5 * (Q3 - Q1) \u003c 3 THEN 3 ELSE Q1 - 1.5 * (Q3 - Q1) END AS LimiteInf,\r\n                CASE WHEN Q3 + 1.5 * (Q3 - Q1) \u003e 30 THEN 30 ELSE Q3 + 1.5 * (Q3 - Q1) END AS LimiteSup\r\n            FROM EstatisticasVeiculo\r\n        )\r\n        UPDATE A\r\n        SET \r\n            A.EhOutlier = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN 1 ELSE 0 END,\r\n            A.KmRodadoNormalizado = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN CAST(L.MedianaKm AS INT) ELSE A.KmRodado END,\r\n            A.LitrosNormalizado = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN L.MedianaLitros ELSE A.Litros END,\r\n            A.ConsumoNormalizado = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN L.Mediana ELSE A.ConsumoCalculado END\r\n        FROM Abastecimento A\r\n        INNER JOIN LimitesVeiculo L ON A.VeiculoId = L.VeiculoId\r\n        WHERE A.Litros \u003e 0 AND A.KmRodado \u003e 0 AND A.ConsumoCalculado IS NOT NULL\r\n\r\n        SELECT @OutliersDetectados = COUNT(*) FROM Abastecimento WHERE EhOutlier = 1\r\n        PRINT \u0027           \u0027 + CAST(@OutliersDetectados AS VARCHAR) + \u0027 outliers detectados e normalizados\u0027\r\n\r\n        COMMIT TRANSACTION\r\n        \r\n        PRINT \u0027\u0027\r\n        PRINT \u0027  ✓ Normalização de abastecimentos concluída!\u0027\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT \u003e 0 ROLLBACK TRANSACTION\r\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE()\r\n        RAISERROR(@ErrorMessage, 16, 1)\r\n    END CATCH\r\nEND",
                          "sp_tr_AddInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_AddInSet \r\n\t@Key varchar(255) = 0, \r\n\t@Value varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tMERGE [dbo].[tr_Set] AS T \r\n\tUSING (SELECT @Key as [Id], @Value as [Member]) AS S \r\n\t\tON (T.Id = S.Id AND T.Member = S.Member) \r\n\tWHEN NOT MATCHED BY TARGET THEN \r\n\t\tINSERT(Id, Member) VALUES(S.Id, S.Member);\r\nEND",
                          "sp_AtualizarEstatisticasAbastecimentosMesAtual":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarEstatisticasAbastecimentosMesAtual\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    DECLARE @Ano INT = YEAR(GETDATE());\r\n    DECLARE @Mes INT = MONTH(GETDATE());\r\n\r\n    -- Recalcula mês atual\r\n    EXEC sp_RecalcularEstatisticasAbastecimentos @Ano, @Mes;\r\n    EXEC sp_RecalcularEstatisticasAbastecimentosAnuais @Ano;\r\n\r\n    -- Recalcula também mês anterior\r\n    IF @Mes = 1\r\n    BEGIN\r\n        SET @Ano = @Ano - 1;\r\n        SET @Mes = 12;\r\n    END\r\n    ELSE\r\n        SET @Mes = @Mes - 1;\r\n\r\n    EXEC sp_RecalcularEstatisticasAbastecimentos @Ano, @Mes;\r\n\r\n    PRINT \u0027Estatísticas de abastecimentos do mês atual e anterior atualizadas!\u0027;\r\nEND"
                      },
    "ModificadasProcedures":  [
                                  "usp_PreencheNulos_Motorista"
                              ],
    "NovasProcedures":  [
                            "DocGenerator",
                            "sp_AtualizarEstatisticasAbastecimentosMesAtual",
                            "sp_AtualizarEstatisticasMesAtual",
                            "sp_AtualizarEstatisticasVeiculosMesAtual",
                            "sp_RecalcularEstatisticasAbastecimentos",
                            "sp_RecalcularEstatisticasAbastecimentosAnuais",
                            "sp_RecalcularEstatisticasMotoristas",
                            "sp_RecalcularEstatisticasMotoristaUnico",
                            "sp_RecalcularEstatisticasVeiculoAnoFabricacao",
                            "sp_RecalcularEstatisticasVeiculoCategoria",
                            "sp_RecalcularEstatisticasVeiculoCombustivel",
                            "sp_RecalcularEstatisticasVeiculoGeral",
                            "sp_RecalcularEstatisticasVeiculoModelo",
                            "sp_RecalcularEstatisticasVeiculoStatus",
                            "sp_RecalcularEstatisticasVeiculoUnidade",
                            "sp_RecalcularEstatisticasVeiculoUsoMensal",
                            "sp_RecalcularRankingsVeiculoAnual",
                            "sp_RecalcularTodasEstatisticasAbastecimentos",
                            "sp_RecalcularTodasEstatisticasMotoristas",
                            "sp_RecalcularTodasEstatisticasVeiculos"
                        ],
    "ModificadasViews":  [
                             "ViewMotoristasMulta",
                             "ViewPatrimonioConferencia",
                             "ViewNoFichaVistoria",
                             "ViewCustosFinalidade",
                             "ViewAlocacaoMotorista",
                             "ViewFluxoEconomildo",
                             "ViewEmpenhos",
                             "ViewControleAcesso",
                             "ViewManutencao_Ultima",
                             "ViewVeiculos_Original",
                             "ViewCalculaMediana",
                             "ViewProcuraFicha",
                             "ViewVeiculoCompleto",
                             "ViewAbastecimentosPBI",
                             "ViewOcorrenciasViagem",
                             "ViewAbastecimentosPBIAta",
                             "ViewVeiculos",
                             "ViewVeiculosManutencaoReserva",
                             "ViewAbastecimentosPBIProprio",
                             "ViewMotoristasViagem",
                             "ViewAtaFornecedor",
                             "ViewMultas",
                             "ViewSabrina",
                             "ViewVeiculosManutencao",
                             "ViewEventos",
                             "ViewCustoAbastecimento",
                             "ViewMotoristas",
                             "ViewMotoristas_original",
                             "ViewCustosMotoristas_Individual",
                             "ViewLotacoes",
                             "ViewSetores",
                             "ViewViagens",
                             "ViewItensManutencao",
                             "ViewExisteItemContrato",
                             "ViewMediaConsumo",
                             "ViewAbastecimentosPBIContrato",
                             "ViewCustosViagem",
                             "ViewManutencao",
                             "ViewAbastecimentosItensPBI",
                             "ViewLotacaoMotorista",
                             "ViewViagensAgenda",
                             "ViewContratoFornecedor",
                             "ViewTeste",
                             "ViewContratoFornecedor_Veiculos",
                             "ViewVeiculos_Ultima",
                             "ViewManutencao_2025",
                             "ViewOcorrencia",
                             "ViewEmpenhoMulta",
                             "ViewRequisitantes",
                             "ViewManutencaoAberta_Base",
                             "ViewMotoristaFluxo",
                             "ViewEdocMultas",
                             "ViewCustosMotoristas",
                             "ViewViagens_Sergio",
                             "ViewFichaViagem",
                             "ViewPendenciasManutencao",
                             "ViewMotoristasViagem_Ultimo",
                             "ViewOcorrenciasAbertasVeiculo",
                             "ViewLavagem",
                             "ViewAlertasAtivos",
                             "ViewCustosVeiculos",
                             "ViewCustosTemporaria",
                             "ViewMotoristas_Ultimo",
                             "ViewViagensAgendaTodosMeses",
                             "ViewAbastecimentos"
                         ],
    "ProdViews":  {
                      "ViewMotoristasMulta":  "CREATE OR ALTER VIEW dbo.ViewMotoristasMulta \r\nAS SELECT TOP 1000000\r\n  Motorista.Nome\r\n ,SUM(Multa.ValorPago) AS \u0027Valor Pago\u0027\r\n ,SUM(Multa.ValorPosVencimento) AS \u0027Valor a Pagar\u0027\r\nFROM dbo.Multa\r\nINNER JOIN dbo.Motorista\r\n  ON Multa.MotoristaId = Motorista.MotoristaId\r\nGROUP BY Motorista.Nome\r\nORDER BY SUM(Multa.ValorPosVencimento) DESC",
                      "ViewPatrimonioConferencia":  "CREATE OR ALTER VIEW dbo.ViewPatrimonioConferencia \r\nAS SELECT\r\n  Patrimonio.PatrimonioId\r\n ,Patrimonio.NPR\r\n ,Patrimonio.Descricao\r\n ,Patrimonio.LocalizacaoAtual\r\n ,Patrimonio.Marca\r\n ,Patrimonio.Modelo\r\n ,SetorPatrimonial.NomeSetor\r\n ,SecaoPatrimonial.NomeSecao\r\n ,Patrimonio.Status\r\n ,Patrimonio.StatusConferencia\r\n ,Patrimonio.LocalizacaoConferencia\r\n ,Patrimonio.SetorConferenciaId\r\n ,Patrimonio.SecaoConferenciaId\r\n ,Patrimonio.Situacao\r\nFROM dbo.Patrimonio\r\nINNER JOIN dbo.SetorPatrimonial\r\n  ON Patrimonio.SetorId = SetorPatrimonial.SetorId\r\nINNER JOIN dbo.SecaoPatrimonial\r\n  ON Patrimonio.SecaoId = SecaoPatrimonial.SecaoId\r\n    AND SecaoPatrimonial.SetorId = SetorPatrimonial.SetorId",
                      "ViewNoFichaVistoria":  "CREATE OR ALTER VIEW dbo.ViewNoFichaVistoria \r\nAS SELECT NoFichaVistoria FROM Viagem",
                      "ViewCustosFinalidade":  "CREATE OR ALTER VIEW dbo.ViewCustosFinalidade \r\nAS SELECT\r\n  Viagem.Finalidade\r\n ,FORMAT(SUM(Viagem.CustoCombustivel), \u0027N2\u0027, \u0027pt-BR\u0027) AS Combustivel\r\n ,FORMAT(SUM(Viagem.CustoMotorista), \u0027N2\u0027, \u0027pt-BR\u0027) AS Motorista\r\n ,FORMAT(SUM(Viagem.CustoVeiculo), \u0027N2\u0027, \u0027pt-BR\u0027) AS Veiculo\r\n ,FORMAT(SUM(Viagem.KmFinal - Viagem.KmInicial), \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\r\nFROM dbo.Viagem\r\nWHERE Viagem.Status = \u0027Realizada\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\r\nAND MONTH(Viagem.DataInicial) = 12\r\nGROUP BY Viagem.Finalidade",
                      "ViewAlocacaoMotorista":  "CREATE OR ALTER VIEW dbo.ViewAlocacaoMotorista \r\nAS SELECT DISTINCT\r\n  COUNT(Motorista.MotoristaId) AS Motoristas\r\n ,Unidade.QtdMotoristas\r\n ,(COUNT(Motorista.MotoristaId) - Unidade.QtdMotoristas) AS Deficit\r\n ,Unidade.Descricao\r\nFROM dbo.Motorista\r\nINNER JOIN dbo.Unidade\r\n  ON Motorista.UnidadeId = Unidade.UnidadeId\r\nWHERE Motorista.Status = 1 AND Motorista.TipoCondutor = \u0027Terceirizado\u0027\r\nGROUP BY Unidade.QtdMotoristas\r\n        ,Unidade.Descricao",
                      "ViewFluxoEconomildo":  "CREATE OR ALTER VIEW dbo.ViewFluxoEconomildo \r\nAS SELECT TOP 10000000\r\n  ViagensEconomildo.Data\r\n ,Motorista.Nome AS NomeMotorista\r\n ,Motorista.TipoCondutor\r\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\r\n ,ViagensEconomildo.VIagemEconomildoId\r\n ,ViagensEconomildo.VeiculoId\r\n ,ViagensEconomildo.MotoristaId\r\n ,ViagensEconomildo.MOB\r\n ,ViagensEconomildo.Responsavel\r\n ,ViagensEconomildo.IdaVolta\r\n ,ViagensEconomildo.HoraInicio\r\n ,ViagensEconomildo.HoraFim\r\n ,ViagensEconomildo.QtdPassageiros\r\nFROM dbo.Veiculo\r\nINNER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nINNER JOIN dbo.ViagensEconomildo\r\n  ON ViagensEconomildo.VeiculoId = Veiculo.VeiculoId\r\nINNER JOIN dbo.Motorista\r\n  ON ViagensEconomildo.MotoristaId = Motorista.MotoristaId\r\nORDER BY Data DESC, MOB, HoraInicio DESC",
                      "ViewEmpenhos":  "CREATE OR ALTER VIEW dbo.ViewEmpenhos \r\nAS SELECT\r\n  Empenho.EmpenhoId,\r\n  Empenho.NotaEmpenho,\r\n  Empenho.DataEmissao,\r\n  Empenho.AnoVigencia,\r\n  Empenho.VigenciaInicial,\r\n  Empenho.VigenciaFinal,\r\n  Empenho.SaldoInicial,\r\n  Empenho.SaldoFinal,\r\n  Empenho.ContratoId,\r\n  Empenho.AtaId,\r\n  COUNT(DISTINCT MovimentacaoEmpenho.MovimentacaoId) AS Movimentacoes,\r\n  SUM(DISTINCT MovimentacaoEmpenho.Valor) AS SaldoMovimentacao,\r\n  SUM(DISTINCT NotaFiscal.ValorNF - NotaFiscal.ValorGlosa) AS SaldoNotas\r\nFROM dbo.Empenho\r\nLEFT OUTER JOIN dbo.MovimentacaoEmpenho\r\n  ON Empenho.EmpenhoId = MovimentacaoEmpenho.EmpenhoId\r\nLEFT OUTER JOIN dbo.NotaFiscal\r\n  ON Empenho.EmpenhoId = NotaFiscal.EmpenhoId\r\nGROUP BY Empenho.EmpenhoId, Empenho.NotaEmpenho, Empenho.DataEmissao, Empenho.AnoVigencia, Empenho.VigenciaInicial, Empenho.VigenciaFinal, Empenho.SaldoInicial, Empenho.SaldoFinal, Empenho.ContratoId, Empenho.AtaId",
                      "ViewControleAcesso":  "CREATE OR ALTER VIEW dbo.ViewControleAcesso \r\nAS SELECT TOP 100000000\r\n  ControleAcesso.UsuarioId\r\n ,Recurso.RecursoId\r\n ,ControleAcesso.Acesso\r\n ,Recurso.Nome\r\n ,Recurso.Descricao\r\n ,Recurso.Ordem\r\n ,AspNetUsers.NomeCompleto\r\n ,(ControleAcesso.UsuarioId + \u0027|\u0027 + CONVERT(NVARCHAR(MAX), ControleAcesso.RecursoId)) AS IDS\r\nFROM dbo.ControleAcesso\r\nINNER JOIN dbo.AspNetUsers\r\n  ON ControleAcesso.UsuarioId = AspNetUsers.Id\r\nINNER JOIN dbo.Recurso\r\n  ON ControleAcesso.RecursoId = Recurso.RecursoId\r\nORDER BY Recurso.Ordem",
                      "ViewManutencao_Ultima":  "CREATE OR ALTER VIEW dbo.ViewManutencao_Ultima \r\nAS SELECT \r\n    -- Campo inicial solicitado\r\n    ISNULL(v.Placa,\u0027\u0027) + \u0027 - \u0027 + ISNULL(ma.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(m.DescricaoModelo,\u0027\u0027) AS PlacaDescricao,\r\n\r\n    -- ===== Chaves e referência ao contrato (para filtrar na LINQ) =====\r\n    vc.ContratoId,\r\n\r\n    -- ===== Manutenção =====\r\n    b.ManutencaoId,\r\n    b.NumOS,\r\n    b.ResumoOS,\r\n\r\n    -- strings formatadas (dd/MM/yyyy)\r\n    CONVERT(CHAR(10), b.DataSolicitacao, 103)                                       AS DataSolicitacao,\r\n    CONVERT(CHAR(10), b.DataDisponibilidade, 103)                                   AS DataDisponibilidade,\r\n    CONVERT(CHAR(10), b.DataRecolhimento, 103)                                      AS DataRecolhimento,\r\n    CONVERT(CHAR(10), b.DataRecebimentoReserva, 103)                                AS DataRecebimentoReserva,\r\n    CONVERT(CHAR(10), b.DataDevolucaoReserva, 103)                                  AS DataDevolucaoReserva,\r\n    CONVERT(CHAR(10), b.DataEntrega, 103)                                           AS DataEntrega,\r\n    CONVERT(CHAR(10), b.DataDevolucao, 103)                                         AS DataDevolucao,\r\n\r\n    -- datas cruas\r\n    b.DataSolicitacao                                                               AS DataSolicitacaoRaw,\r\n    b.DataDevolucao                                                                 AS DataDevolucaoRaw,\r\n\r\n    b.StatusOS,\r\n    b.VeiculoId,\r\n\r\n    -- Derivado (Marca/Modelo) e informações auxiliares\r\n    ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo                                     AS DescricaoVeiculo,\r\n    u.Sigla                                                                          AS Sigla,\r\n    c.Descricao                                                                      AS CombustivelDescricao,\r\n    v.Placa                                                                          AS Placa,\r\n\r\n    -- Reserva como texto\r\n    CASE\r\n        WHEN b.ReservaEnviado = 1 THEN \u0027Enviado\u0027\r\n        WHEN b.ReservaEnviado = 0 THEN \u0027Ausente\u0027\r\n        ELSE \u0027\u0027\r\n    END                                                                              AS Reserva,\r\n\r\n    -- ===== Planilha de Glosa (Item do contrato, via Veiculo.ItemVeiculoId) =====\r\n    ivc.Descricao,\r\n    ivc.Quantidade,\r\n    ivc.ValorUnitario,\r\n\r\n    -- DiasGlosa (via APPLY)\r\n    d.DiasCalc                                                                       AS DiasGlosa,\r\n\r\n    -- ValorGlosa (trata NULLs e usa DECIMAL p/ precisão)\r\n    CAST(\r\n        d.DiasCalc\r\n        * COALESCE(CAST(ivc.ValorUnitario AS DECIMAL(18,2)), 0)\r\n        AS DECIMAL(18,2)\r\n    )                                                                                AS ValorGlosa,\r\n\r\n    -- Dias (0 quando sem devolução, senão diff Solicitação-\u003eDevolução)\r\n    CASE\r\n        WHEN b.DataDevolucao IS NULL THEN 0\r\n        ELSE DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\r\n    END                                                                              AS Dias,\r\n\r\n    -- Atributos de UI\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS Habilitado,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027fa-regular fa-lock\u0027 ELSE \u0027far fa-flag-checkered\u0027 END                 AS Icon,\r\n\r\n    -- Item do contrato\r\n    ivc.NumItem,\r\n\r\n    -- Campos \"montados\"\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoEditar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityEditar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Visualizar Manutenção\u0027 ELSE \u0027Edita a Ordem de Serviço!\u0027 END        AS OpacityTooltipEditarEditar,\r\n\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoBaixar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS ModalBaixarAttrs,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityBaixar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Desabilitado\u0027 ELSE \u0027Fecha a Ordem de Serviço!\u0027 END                 AS Tooltip,\r\n\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoCancelar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityCancelar,\r\n    CASE\r\n        WHEN b.StatusOS = \u0027Cancelada\u0027 THEN \u0027Manutenção Cancelada\u0027\r\n        WHEN b.StatusOS = \u0027Fechada\u0027   THEN \u0027OS Fechada/Baixada\u0027\r\n        ELSE \u0027Cancelar Manutenção\u0027\r\n    END                                                                                                                      AS TooltipCancelar\r\n\r\nFROM dbo.Manutencao               AS b\r\nLEFT JOIN dbo.Veiculo             AS v   ON v.VeiculoId       = b.VeiculoId\r\nLEFT JOIN dbo.VeiculoContrato     AS vc  ON vc.VeiculoId      = v.VeiculoId\r\nLEFT JOIN dbo.ModeloVeiculo       AS m   ON m.ModeloId        = v.ModeloId\r\nLEFT JOIN dbo.MarcaVeiculo        AS ma  ON ma.MarcaId        = v.MarcaId\r\nLEFT JOIN dbo.Combustivel         AS c   ON c.CombustivelId   = v.CombustivelId\r\nLEFT JOIN dbo.Unidade             AS u   ON u.UnidadeId       = v.UnidadeId\r\nLEFT JOIN dbo.ItemVeiculoContrato AS ivc ON ivc.ItemVeiculoId = v.ItemVeiculoId\r\nCROSS APPLY (\r\n  SELECT DiasCalc =\r\n    CASE\r\n      WHEN b.DataDevolucao IS NULL THEN 1\r\n      WHEN b.DataEntrega  IS NOT NULL THEN DATEDIFF(DAY, b.DataEntrega,  b.DataDevolucao)\r\n      ELSE                               DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\r\n    END\r\n) AS d\r\n\r\n--WHERE\r\n--    v.Status = 1\r\n--    AND b.DataDevolucao IS NOT NULL\r\n--    AND DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao) \u003e 0",
                      "ViewVeiculos_Original":  "CREATE OR ALTER VIEW dbo.ViewVeiculos_Original \r\nAS SELECT\r\n  Veiculo.VeiculoId\r\n ,Veiculo.Placa\r\n ,LEFT(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), LEN(SUBSTRING(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027))), LEN(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027)))) - 2) AS Quilometragem\r\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS MarcaModelo\r\n ,Unidade.Sigla\r\n ,Combustivel.Descricao\r\n ,CASE\r\n    WHEN CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) IS NULL THEN 0\r\n    ELSE CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2))\r\n  END AS Consumo\r\n ,CASE\r\n    WHEN ViewContratoFornecedor_Veiculos.ContratoVeiculo IS NOT NULL THEN ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n    WHEN ViewAtaFornecedor.AtaVeiculo IS NOT NULL THEN ViewAtaFornecedor.AtaVeiculo + \u0027 \u003cb\u003e(Ata)\u003c/b\u003e \u0027\r\n    ELSE \u0027\u003cb\u003e(Veículo Próprio)\u003c/b\u003e\u0027\r\n  END AS OrigemVeiculo\r\n ,CONVERT(VARCHAR, Veiculo.DataAlteracao, 103) AS DataAlteracao\r\n ,AspNetUsers.NomeCompleto\r\n ,CASE\r\n    WHEN Veiculo.Reserva = 0 THEN \u0027Efetivo\u0027\r\n    ELSE \u0027Reserva\u0027\r\n  END AS VeiculoReserva\r\n ,Veiculo.Status\r\n ,Veiculo.CombustivelId\r\n ,ROW_NUMBER() OVER (ORDER BY Veiculo.Placa) AS RowNum\r\n ,ViewContratoFornecedor_Veiculos.ContratoId\r\n ,ViewAtaFornecedor.AtaId\r\n ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n ,ViewAtaFornecedor.AtaVeiculo\r\n ,Veiculo.ValorMensal\r\nFROM dbo.Abastecimento\r\nRIGHT OUTER JOIN dbo.Veiculo\r\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nLEFT OUTER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Unidade.UnidadeId = Veiculo.UnidadeId\r\nLEFT OUTER JOIN dbo.Combustivel\r\n  ON Combustivel.CombustivelId = Veiculo.CombustivelId\r\nLEFT OUTER JOIN dbo.ViewContratoFornecedor_Veiculos\r\n  ON ViewContratoFornecedor_Veiculos.ContratoId = Veiculo.ContratoId\r\nLEFT OUTER JOIN dbo.ViewAtaFornecedor\r\n  ON ViewAtaFornecedor.AtaId = Veiculo.AtaId\r\nINNER JOIN dbo.AspNetUsers\r\n  ON AspNetUsers.Id = Veiculo.UsuarioIdAlteracao\r\nGROUP BY Veiculo.VeiculoId\r\n        ,Veiculo.Placa\r\n        ,Veiculo.Quilometragem\r\n        ,MarcaVeiculo.DescricaoMarca\r\n        ,ModeloVeiculo.DescricaoModelo\r\n        ,Unidade.Sigla\r\n        ,Combustivel.Descricao\r\n        ,ViewContratoFornecedor_Veiculos.ContratoId\r\n        ,Veiculo.DataAlteracao\r\n        ,AspNetUsers.NomeCompleto\r\n        ,Veiculo.Reserva\r\n        ,Veiculo.Status\r\n        ,Veiculo.CombustivelId\r\n        ,ViewAtaFornecedor.AtaId\r\n        ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n        ,ViewAtaFornecedor.AtaVeiculo\r\n        ,Veiculo.ValorMensal",
                      "ViewCalculaMediana":  "CREATE OR ALTER VIEW dbo.[ViewCalculaMediana (backup)] \r\nAS SELECT x.TempoEspera \r\nFROM   (SELECT TempoEspera, \r\n               Count(1) OVER (partition BY \u0027A\u0027)        AS TotalRows, \r\n               Row_number() OVER (ORDER BY TempoEspera ASC) AS AmountOrder \r\n        FROM   CorridasCanceladasTaxiLeg ft) x \r\nWHERE  x.AmountOrder = Round(x.TotalRows / 2.0, 0)",
                      "ViewProcuraFicha":  "CREATE OR ALTER VIEW dbo.ViewProcuraFicha \r\nAS SELECT \r\nMotoristaId, \r\nVeiculoId, \r\nDataInicial, \r\nDataFinal, \r\n(FORMAT(DATEPART(hour, HoraInicio), \u002700\u0027) + \u0027:\u0027 + FORMAT(DATEPART(minute, HoraInicio), \u002700\u0027)) AS HoraInicio,\r\n(FORMAT(DATEPART(hour, HoraFim), \u002700\u0027) + \u0027:\u0027 + FORMAT(DATEPART(minute, HoraFim), \u002700\u0027)) AS HoraFim,\r\nNoFichaVistoria\r\nFROM\r\nViagem\r\nWHERE Status NOT LIKE \u0027Cancelada\u0027 AND StatusAgendamento = 0",
                      "ViewVeiculoCompleto":  "CREATE OR ALTER VIEW dbo.ViewVeiculoCompleto \r\nAS SELECT\r\n    v.VeiculoId,\r\n    v.Status,\r\n    ISNULL(v.Placa, \u0027\u0027) AS Placa,\r\n    ISNULL(v.Placa, \u0027\u0027) + \u0027 - \u0027 +\r\n        ISNULL(m.DescricaoMarca, \u0027Sem Marca\u0027) + \u0027/\u0027 +\r\n        ISNULL(md.DescricaoModelo, \u0027Sem Modelo\u0027) AS VeiculoCompleto\r\nFROM\r\n    dbo.Veiculo v\r\nLEFT JOIN\r\n    dbo.MarcaVeiculo m ON v.MarcaId = m.MarcaId\r\nLEFT JOIN\r\n    dbo.ModeloVeiculo md ON v.ModeloId = md.ModeloId\r\nWHERE v.Status = 1",
                      "ViewAbastecimentosPBI":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBI \r\nAS SELECT\r\n  Abastecimento.AbastecimentoId\r\n ,ViewAbastecimentosItensPBI.VeiculoID\r\n ,CASE\r\n    WHEN ViewAbastecimentosItensPBI.Descricao IS NULL THEN \u0027Veículo Próprio\u0027\r\n    ELSE ViewAbastecimentosItensPBI.Descricao\r\n  END AS Descricao\r\n ,ViewAbastecimentosItensPBI.Categoria\r\n ,Abastecimento.Litros\r\n ,Abastecimento.ValorUnitario\r\n ,Abastecimento.KmRodado\r\n ,CONVERT(VARCHAR, Abastecimento.DataHora, 103) AS DataAbastecimento\r\n ,FORMAT(Abastecimento.DataHora, \u0027HH:mm\u0027) AS HoraAbastecimento\r\n ,Combustivel.Descricao AS DescricaoCombustivel\r\nFROM dbo.ViewAbastecimentosItensPBI\r\nRIGHT OUTER JOIN dbo.Abastecimento\r\n  ON ViewAbastecimentosItensPBI.VeiculoID = Abastecimento.VeiculoId\r\nINNER JOIN dbo.Combustivel\r\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId",
                      "ViewOcorrenciasViagem":  "CREATE OR ALTER VIEW dbo.ViewOcorrenciasViagem \r\nAS SELECT \r\n    oc.OcorrenciaViagemId,\r\n    oc.ViagemId,\r\n    oc.VeiculoId,\r\n    oc.MotoristaId,\r\n    ISNULL(oc.Resumo, \u0027\u0027) AS Resumo,\r\n    ISNULL(oc.Descricao, \u0027\u0027) AS Descricao,\r\n    ISNULL(oc.ImagemOcorrencia, \u0027\u0027) AS ImagemOcorrencia,\r\n    ISNULL(oc.Status, \u0027Aberta\u0027) AS Status,\r\n    oc.DataCriacao,\r\n    oc.DataBaixa,\r\n    ISNULL(oc.UsuarioCriacao, \u0027\u0027) AS UsuarioCriacao,\r\n    ISNULL(oc.UsuarioBaixa, \u0027\u0027) AS UsuarioBaixa,\r\n    oc.ItemManutencaoId,\r\n    ISNULL(oc.Observacoes, \u0027\u0027) AS Observacoes,\r\n    vi.DataInicial,\r\n    vi.DataFinal,\r\n    vi.HoraInicio,\r\n    vi.HoraFim,\r\n    vi.NoFichaVistoria,\r\n    ISNULL(vi.Origem, \u0027\u0027) AS Origem,\r\n    ISNULL(vi.Destino, \u0027\u0027) AS Destino,\r\n    ISNULL(vi.Finalidade, \u0027\u0027) AS FinalidadeViagem,\r\n    ISNULL(vi.Status, \u0027\u0027) AS StatusViagem,\r\n    ISNULL(ve.Placa, \u0027\u0027) AS Placa,\r\n    ISNULL(ma.DescricaoMarca, \u0027\u0027) AS DescricaoMarca,\r\n    ISNULL(mo.DescricaoModelo, \u0027\u0027) AS DescricaoModelo,\r\n    ISNULL(CONCAT(ve.Placa, \u0027 - \u0027, ma.DescricaoMarca, \u0027/\u0027, mo.DescricaoModelo), \u0027\u0027) AS VeiculoCompleto,\r\n    ISNULL(CONCAT(ma.DescricaoMarca, \u0027/\u0027, mo.DescricaoModelo), \u0027\u0027) AS MarcaModelo,\r\n    ISNULL(mt.Nome, \u0027\u0027) AS NomeMotorista,\r\n    CAST(\u0027\u0027 AS VARCHAR(1)) AS FotoMotorista,  -- Campo vazio como placeholder\r\n    DATEDIFF(DAY, oc.DataCriacao, GETDATE()) AS DiasEmAberto,\r\n    CASE \r\n        WHEN oc.Status = \u0027Baixada\u0027 THEN \u0027Resolvida\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027Crítica\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027Alta\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027Média\u0027\r\n        ELSE \u0027Normal\u0027\r\n    END AS Urgencia,\r\n    CASE \r\n        WHEN oc.Status = \u0027Baixada\u0027 THEN \u0027#28a745\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027#dc3545\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027#ffc107\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027#17a2b8\u0027\r\n        ELSE \u0027#6c757d\u0027\r\n    END AS CorUrgencia\r\nFROM dbo.OcorrenciaViagem oc\r\n    LEFT JOIN dbo.Viagem vi ON oc.ViagemId = vi.ViagemId\r\n    LEFT JOIN dbo.Veiculo ve ON oc.VeiculoId = ve.VeiculoId\r\n    LEFT JOIN dbo.MarcaVeiculo ma ON ve.MarcaId = ma.MarcaId\r\n    LEFT JOIN dbo.ModeloVeiculo mo ON ve.ModeloId = mo.ModeloId\r\n    LEFT JOIN dbo.Motorista mt ON oc.MotoristaId = mt.MotoristaId",
                      "ViewAbastecimentosPBIAta":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBIAta \r\nAS SELECT\r\n  Veiculo.VeiculoId\r\n ,Veiculo.Placa\r\n ,Veiculo.Categoria\r\n ,ItemVeiculoAta.Descricao\r\nFROM dbo.VeiculoAta\r\nINNER JOIN dbo.Veiculo\r\n  ON VeiculoAta.VeiculoId = Veiculo.VeiculoId\r\nINNER JOIN dbo.ItemVeiculoAta\r\n  ON Veiculo.ItemVeiculoAtaId = ItemVeiculoAta.ItemVeiculoAtaId\r\nINNER JOIN dbo.RepactuacaoAta\r\n  ON VeiculoAta.AtaId = RepactuacaoAta.AtaId",
                      "ViewVeiculos":  "CREATE OR ALTER VIEW dbo.ViewVeiculos \r\nAS SELECT\r\n  Veiculo.VeiculoId\r\n ,Veiculo.Placa\r\n ,Economildo\r\n ,Quilometragem\r\n ,Veiculo.Categoria\r\n ,Veiculo.Placa +  \u0027 (\u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo + \u0027)\u0027 AS VeiculoCompleto\r\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS MarcaModelo\r\n ,Unidade.Sigla\r\n ,Combustivel.Descricao\r\n ,CASE\r\n    WHEN CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) IS NULL THEN 0\r\n    ELSE CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2))\r\n  END AS Consumo\r\n ,CASE\r\n    WHEN ViewContratoFornecedor_Veiculos.ContratoVeiculo IS NOT NULL THEN ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n    WHEN ViewAtaFornecedor.AtaVeiculo IS NOT NULL THEN ViewAtaFornecedor.AtaVeiculo + \u0027 \u003cb\u003e(Ata)\u003c/b\u003e \u0027\r\n    WHEN Veiculo.VeiculoProprio = 1 THEN \u0027\u003cb\u003e\u003ci\u003e(Veículo Próprio)\u003c/i\u003e\u003c/b\u003e\u0027\r\n    ELSE \u0027\u003cb\u003e\u003ci style=\"color: #dc3545;\"\u003e(Sem Contrato/Ata)\u003c/i\u003e\u003c/b\u003e\u0027\r\n  END AS OrigemVeiculo\r\n ,CONVERT(VARCHAR, Veiculo.DataAlteracao, 103) AS DataAlteracao\r\n ,AspNetUsers.NomeCompleto\r\n ,CASE\r\n    WHEN Veiculo.Reserva = 0 THEN \u0027Efetivo\u0027\r\n    ELSE \u0027Reserva\u0027\r\n  END AS VeiculoReserva\r\n ,Veiculo.Status\r\n ,Veiculo.CombustivelId\r\n ,ROW_NUMBER() OVER (ORDER BY Veiculo.Placa) AS RowNum\r\n ,ViewContratoFornecedor_Veiculos.ContratoId\r\n ,ViewAtaFornecedor.AtaId\r\n ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n ,ViewAtaFornecedor.AtaVeiculo\r\n ,Veiculo.VeiculoProprio\r\n ,Veiculo.ItemVeiculoAtaId\r\n ,Veiculo.ItemVeiculoId\r\n ,Veiculo.ValorMensal\r\nFROM dbo.Abastecimento\r\nRIGHT OUTER JOIN dbo.Veiculo\r\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nLEFT OUTER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Unidade.UnidadeId = Veiculo.UnidadeId\r\nLEFT OUTER JOIN dbo.Combustivel\r\n  ON Combustivel.CombustivelId = Veiculo.CombustivelId\r\nLEFT OUTER JOIN dbo.ViewContratoFornecedor_Veiculos\r\n  ON ViewContratoFornecedor_Veiculos.ContratoId = Veiculo.ContratoId\r\nLEFT OUTER JOIN dbo.ViewAtaFornecedor\r\n  ON ViewAtaFornecedor.AtaId = Veiculo.AtaId\r\nINNER JOIN dbo.AspNetUsers\r\n  ON AspNetUsers.Id = Veiculo.UsuarioIdAlteracao\r\nGROUP BY Veiculo.VeiculoId\r\n        ,Veiculo.Placa\r\n        ,Veiculo.Quilometragem\r\n        ,MarcaVeiculo.DescricaoMarca\r\n        ,ModeloVeiculo.DescricaoModelo\r\n        ,Unidade.Sigla\r\n        ,Combustivel.Descricao\r\n        ,ViewContratoFornecedor_Veiculos.ContratoId\r\n        ,Veiculo.DataAlteracao\r\n        ,AspNetUsers.NomeCompleto\r\n        ,Veiculo.Reserva\r\n        ,Veiculo.Status\r\n        ,Veiculo.CombustivelId\r\n        ,ViewAtaFornecedor.AtaId\r\n        ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n        ,ViewAtaFornecedor.AtaVeiculo\r\n        ,Veiculo.VeiculoProprio\r\n        ,Veiculo.ItemVeiculoAtaId\r\n        ,Veiculo.ItemVeiculoId\r\n        ,Veiculo.ValorMensal\r\n        ,Economildo\r\n        ,Veiculo.Categoria",
                      "ViewVeiculosManutencaoReserva":  "CREATE OR ALTER VIEW dbo.ViewVeiculosManutencaoReserva \r\nAS SELECT TOP 1000\r\n    v.VeiculoId,\r\n    (v.Placa + \u0027 - \u0027 + ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo) AS Descricao\r\nFROM \r\n    dbo.Veiculo v\r\nINNER JOIN \r\n    dbo.ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\nINNER JOIN \r\n    dbo.MarcaVeiculo ma ON v.MarcaId = ma.MarcaId\r\nWHERE \r\n    v.Status = 1 AND v.Reserva = 1\r\nORDER BY \r\n    Descricao",
                      "ViewAbastecimentosPBIProprio":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBIProprio \r\nAS SELECT\r\n  Veiculo.VeiculoId\r\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS Descricao\r\n ,Veiculo.Categoria\r\nFROM dbo.Veiculo\r\nLEFT OUTER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nLEFT OUTER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nWHERE VeiculoProprio = 1\r\nGROUP BY Veiculo.VeiculoId\r\n        ,Veiculo.Categoria\r\n        ,MarcaVeiculo.DescricaoMarca\r\n        ,ModeloVeiculo.DescricaoModelo",
                      "ViewMotoristasViagem":  "CREATE OR ALTER VIEW dbo.ViewMotoristasViagem \r\nAS SELECT TOP 10000\r\n    m.MotoristaId,\r\n    m.Nome,\r\n    m.TipoCondutor,\r\n    m.Status,\r\n    m.Foto,\r\n    CAST(m.Nome + \u0027 (\u0027 + m.TipoCondutor + \u0027)\u0027 AS NVARCHAR(300)) AS MotoristaCondutor\r\nFROM dbo.Motorista AS m\r\nWHERE m.Status = 1\r\nORDER BY m.Nome",
                      "ViewAtaFornecedor":  "CREATE OR ALTER VIEW dbo.ViewAtaFornecedor \r\nAS SELECT\r\n  AtaRegistroPrecos.AtaId\r\n  ,(AtaRegistroPrecos.AnoAta+ \u0027/\u0027 + AtaRegistroPrecos.NumeroAta + \u0027 - \u0027 + Fornecedor.DescricaoFornecedor) AS AtaVeiculo\r\n\r\nFROM dbo.Fornecedor\r\nINNER JOIN dbo.AtaRegistroPrecos\r\n  ON Fornecedor.FornecedorId = AtaRegistroPrecos.FornecedorId",
                      "ViewMultas":  "CREATE OR ALTER VIEW dbo.ViewMultas \r\nAS SELECT TOP 100000\r\n  Multa.MultaId\r\n ,Multa.NumInfracao\r\n ,Multa.Data AS DataOriginal\r\n ,CONVERT(VARCHAR, Multa.Data, 103) AS Data\r\n ,FORMAT(Multa.Hora, \u0027HH:mm\u0027) AS Hora\r\n ,(Motorista.Nome + \u0027 - (\u0027 + Motorista.TipoCondutor + \u0027)\u0027) AS Nome\r\n ,Motorista.MotoristaId\r\n ,CASE\r\n    WHEN Motorista.Celular02 IS NULL THEN Motorista.Celular01\r\n    ELSE (Motorista.Celular01 + \u0027 / \u0027 + Motorista.Celular02) \r\n  END AS Telefone\r\n ,Veiculo.Placa\r\n ,Veiculo.VeiculoId\r\n ,OrgaoAutuante.Sigla\r\n ,OrgaoAutuante.OrgaoAutuanteId\r\n ,Multa.Localizacao\r\n ,TipoMulta.Artigo\r\n ,CONVERT(VARCHAR, Multa.Vencimento, 103) AS Vencimento\r\n ,Multa.AutuacaoPDF\r\n ,Multa.PenalidadePDF\r\n ,Multa.ValorAteVencimento\r\n ,Multa.ComprovantePDF\r\n ,Multa.ValorPosVencimento\r\n ,Multa.ProcessoEDoc\r\n ,Multa.Status\r\n ,Multa.Fase\r\n ,TipoMulta.Descricao\r\n ,Multa.Observacao\r\n ,Multa.Paga\r\n ,Multa.ValorPago\r\n ,Multa.TipoMultaId\r\n ,CONVERT(VARCHAR, Multa.DataPagamento, 103) AS DataPagamento\r\nFROM dbo.Multa\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON Multa.MotoristaId = Motorista.MotoristaId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Multa.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.OrgaoAutuante\r\n  ON Multa.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\r\nLEFT OUTER JOIN dbo.TipoMulta\r\n  ON Multa.TipoMultaId = TipoMulta.TipoMultaId\r\nLEFT OUTER JOIN dbo.EmpenhoMulta\r\n  ON Multa.EmpenhoMultaId = EmpenhoMulta.EmpenhoMultaId\r\n    AND EmpenhoMulta.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\r\nORDER BY DataOriginal DESC",
                      "ViewSabrina":  "CREATE OR ALTER VIEW dbo.ViewSabrina \r\nAS SELECT\r\n  Combustivel.Descricao\r\n ,Veiculo.Placa\r\n ,Abastecimento.Litros\r\n ,Abastecimento.ValorUnitario\r\n ,Abastecimento.DataHora\r\nFROM dbo.Abastecimento\r\nINNER JOIN dbo.Combustivel\r\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\r\nINNER JOIN dbo.Veiculo\r\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId",
                      "ViewVeiculosManutencao":  "CREATE OR ALTER VIEW dbo.ViewVeiculosManutencao \r\nAS SELECT TOP 1000\r\n    v.VeiculoId,\r\n    (v.Placa + \u0027 - \u0027 + ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo) AS Descricao\r\nFROM \r\n    dbo.Veiculo v\r\nINNER JOIN \r\n    dbo.ModeloVeiculo m ON v.ModeloId = m.ModeloId\r\nINNER JOIN \r\n    dbo.MarcaVeiculo ma ON v.MarcaId = ma.MarcaId\r\nWHERE \r\n    v.Status = 1 -- BIT: TRUE\r\nORDER BY \r\n    Descricao",
                      "ViewEventos":  "CREATE OR ALTER VIEW dbo.ViewEventos\r\nAS\r\nSELECT \r\n    e.EventoId,\r\n    e.Nome,\r\n    e.Descricao,\r\n    e.QtdParticipantes,\r\n    e.DataInicial,\r\n    e.DataFinal,\r\n    r.Nome AS NomeRequisitante,\r\n    s.Nome AS NomeSetor,\r\n    s.Sigla AS SiglaSetor,\r\n    ISNULL(cv.CustoViagem, 0) AS CustoViagem,\r\n    e.Status\r\nFROM dbo.Evento e\r\nLEFT JOIN dbo.Requisitante r \r\n    ON e.RequisitanteId = r.RequisitanteId\r\nLEFT JOIN dbo.SetorSolicitante s \r\n    ON e.SetorSolicitanteId = s.SetorSolicitanteId\r\n-- ✅ SUBQUERY AGREGADA: Executa 1x para TODOS os eventos\r\nLEFT JOIN (\r\n    SELECT \r\n        EventoId,\r\n        ROUND(\r\n            SUM(\r\n                ISNULL(CustoCombustivel, 0) + \r\n                ISNULL(CustoMotorista, 0) + \r\n                ISNULL(CustoVeiculo, 0) + \r\n                ISNULL(CustoOperador, 0) + \r\n                ISNULL(CustoLavador, 0)\r\n            ), 2\r\n        ) AS CustoViagem\r\n    FROM dbo.Viagem\r\n    WHERE EventoId IS NOT NULL\r\n    GROUP BY EventoId\r\n) cv ON e.EventoId = cv.EventoId;",
                      "ViewCustoAbastecimento":  "CREATE OR ALTER VIEW dbo.ViewCustoAbastecimento \r\nAS SELECT\r\n  Combustivel.Descricao\r\n ,DAY(Abastecimento.DataHora) AS Dia\r\n ,SUM(Abastecimento.Litros * Abastecimento.ValorUnitario) AS Valor\r\nFROM dbo.Abastecimento\r\nINNER JOIN dbo.Combustivel\r\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\r\nWHERE MONTH(Abastecimento.DataHora) = 07\r\nAND YEAR(Abastecimento.DataHora) = 2022\r\nGROUP BY Combustivel.Descricao\r\n        ,Abastecimento.DataHora",
                      "ViewMotoristas":  "CREATE OR ALTER VIEW dbo.ViewMotoristas \r\nAS SELECT TOP 10000\r\n  Motorista.MotoristaId\r\n ,Motorista.Nome\r\n ,Motorista.Ponto\r\n ,Motorista.CNH\r\n ,Motorista.CategoriaCNH\r\n ,Motorista.Celular01\r\n ,Motorista.Status\r\n ,Unidade.Sigla\r\n ,Contrato.AnoContrato\r\n ,Contrato.NumeroContrato\r\n ,Fornecedor.DescricaoFornecedor\r\n ,AspNetUsers.NomeCompleto\r\n ,Motorista.DataAlteracao\r\n ,Motorista.ContratoId\r\n ,Motorista.TipoCondutor \r\n ,Motorista.Foto\r\n ,Motorista.EfetivoFerista   \r\n,Motorista.Nome + \u0027 (\u0027 + Motorista.TipoCondutor + \u0027)\u0027 AS MotoristaCondutor\r\n ,ROW_NUMBER() OVER (ORDER BY Motorista.Nome) AS RowNum\r\nFROM dbo.Motorista\r\nLEFT OUTER JOIN dbo.Contrato\r\n  ON Motorista.ContratoId = Contrato.ContratoId\r\nLEFT OUTER JOIN dbo.Fornecedor\r\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\r\nINNER JOIN dbo.AspNetUsers\r\n  ON Motorista.UsuarioIdAlteracao = AspNetUsers.Id\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Motorista.UnidadeId = Unidade.UnidadeId\r\nORDER BY Motorista.Nome",
                      "ViewMotoristas_original":  "CREATE OR ALTER VIEW dbo.ViewMotoristas_original \r\nAS SELECT\r\n  Motorista.MotoristaId\r\n ,Motorista.Nome\r\n ,Motorista.Ponto\r\n ,Motorista.CNH\r\n ,Motorista.CategoriaCNH\r\n ,Motorista.Celular01\r\n ,Motorista.Status\r\n ,Unidade.Sigla\r\n ,Contrato.AnoContrato\r\n ,Contrato.NumeroContrato\r\n ,Fornecedor.DescricaoFornecedor\r\n ,AspNetUsers.NomeCompleto\r\n ,Motorista.DataAlteracao\r\n ,Motorista.ContratoId\r\n ,Motorista.CondutorId\r\n ,Motorista.Foto\r\n ,CondutorApoio.Descricao\r\n ,CASE\r\n    WHEN CondutorApoio.Descricao IS NULL THEN (Motorista.Nome + \u0027(Terceirizado)\u0027) \r\n    ELSE Motorista.Nome + \u0027(\u0027 + CondutorApoio.Descricao + \u0027)\u0027 \r\n    END AS MotoristaCondutor\r\n  ,ROW_NUMBER() OVER (ORDER BY Motorista.Nome) AS RowNum\r\nFROM dbo.Motorista\r\nLEFT OUTER JOIN dbo.Contrato\r\n  ON Motorista.ContratoId = Contrato.ContratoId\r\nLEFT OUTER JOIN dbo.Fornecedor\r\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\r\nINNER JOIN dbo.AspNetUsers\r\n  ON Motorista.UsuarioIdAlteracao = AspNetUsers.Id\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Motorista.UnidadeId = Unidade.UnidadeId\r\nLEFT OUTER JOIN dbo.CondutorApoio\r\n  ON Motorista.CondutorId = CondutorApoio.CondutorId",
                      "ViewCustosMotoristas_Individual":  "CREATE OR ALTER VIEW dbo.ViewCustosMotoristas_Individual \r\nAS SELECT\r\n  Viagem.NoFichaVistoria\r\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\r\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS DataFinal\r\n ,FORMAT(Viagem.KmFinal - Viagem.KmInicial, \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\r\nFROM dbo.Viagem\r\nINNER JOIN dbo.Motorista\r\n  ON Viagem.MotoristaId = Motorista.MotoristaId\r\nWHERE Viagem.Status = \u0027Realizada\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\r\nAND Motorista.TipoCondutor = \u0027Terceirizado\u0027\r\nAND Motorista.MotoristaId = \u002700a5ece9-1735-47c0-5eb5-08d97c53518f\u0027\r\nAND MONTH(Viagem.DataInicial) = 06",
                      "ViewLotacoes":  "CREATE OR ALTER VIEW dbo.ViewLotacoes \r\nAS SELECT\r\n  Unidade.Categoria AS NomeCategoria\r\n ,Unidade.Descricao + \u0027 (\u0027+ Unidade.Sigla + \u0027)\u0027 AS Unidade\r\n ,Motorista.Nome AS Motorista\r\n ,CONVERT(VARCHAR, LotacaoMotorista.DataInicio, 103) AS DataInicio\r\n ,LotacaoMotorista.LotacaoMotoristaId\r\n ,LotacaoMotorista.Lotado\r\n ,Motorista.MotoristaId\r\n ,Unidade.UnidadeId\r\nFROM dbo.LotacaoMotorista\r\nINNER JOIN dbo.Unidade\r\n  ON LotacaoMotorista.UnidadeId = Unidade.UnidadeId\r\nINNER JOIN dbo.Motorista\r\n  ON LotacaoMotorista.MotoristaId = Motorista.MotoristaId",
                      "ViewSetores":  "CREATE OR ALTER VIEW dbo.ViewSetores \r\nAS SELECT\r\n  SetorSolicitante.SetorSolicitanteId\r\n  ,CASE\r\n    WHEN SetorSolicitante.Sigla IS NULL THEN (SetorSolicitante.Nome) \r\n    ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027 \r\n    END AS Nome\r\n ,SetorSolicitante.SetorPaiId\r\n ,SetorSolicitante.Status\r\nFROM dbo.SetorSolicitante\r\nWHERE SetorSolicitante.Status = 1",
                      "ViewViagens":  "CREATE OR ALTER VIEW dbo.ViewViagens \r\nAS SELECT\r\n    Viagem.ViagemId,\r\n    Viagem.DataInicial,\r\n    Viagem.DataFinal,\r\n    Viagem.HoraInicio,\r\n    Viagem.HoraFim,\r\n    Viagem.Descricao,\r\n    Viagem.Status,\r\n    Viagem.KmInicial,\r\n    Viagem.KmFinal,\r\n    Viagem.CombustivelInicial,\r\n    Viagem.CombustivelFinal,\r\n    Viagem.MotoristaId,\r\n    Viagem.VeiculoId,\r\n    Viagem.ResumoOcorrencia,\r\n    Viagem.DescricaoOcorrencia,\r\n    Viagem.StatusOcorrencia,\r\n    Viagem.StatusDocumento,\r\n    Viagem.StatusCartaoAbastecimento,\r\n    Viagem.StatusAgendamento,\r\n    Viagem.NoFichaVistoria,\r\n    Viagem.Finalidade,\r\n    Veiculo.Placa,\r\n    Motorista.CNH,\r\n    Motorista.Foto,\r\n    Motorista.Ponto,\r\n    convert(nvarchar(36), Viagem.ViagemId) AS ViagemIDStr,\r\n    CASE\r\n        WHEN Requisitante.Ramal IS NULL THEN Requisitante.Nome\r\n        ELSE Requisitante.Nome + \u0027 - (\u0027 + CONVERT(VARCHAR, Requisitante.Ramal) + \u0027)\u0027\r\n    END AS NomeRequisitante,\r\n    CASE\r\n        WHEN SetorSolicitante.Sigla IS NULL THEN SetorSolicitante.Nome\r\n        ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027\r\n    END AS NomeSetor,\r\n    Requisitante.RequisitanteId,\r\n    SetorSolicitante.SetorSolicitanteId,\r\n    Motorista.Nome AS NomeMotorista,\r\n    \u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo,\r\n    Veiculo.UnidadeId,\r\n    ROW_NUMBER() OVER (ORDER BY Viagem.DataInicial, Viagem.HoraInicio) AS RowNum,\r\n    Veiculo.CombustivelId,\r\n    Viagem.DescricaoSolucaoOcorrencia,\r\n    Viagem.FichaVistoria,\r\n    Viagem.Origem,\r\n    Viagem.Destino,\r\n    Viagem.Minutos,\r\n    Viagem.NomeEvento,\r\n    Viagem.RamalRequisitante,\r\n    Viagem.ImagemOcorrencia,\r\n    Viagem.ItemManutencaoId,\r\n    ROUND((Viagem.CustoCombustivel + Viagem.CustoMotorista + Viagem.CustoVeiculo + Viagem.CustoOperador + Viagem.CustoLavador), 2) AS CustoViagem,\r\n    Viagem.EventoId,\r\n\r\n    -- NOVAS COLUNAS: Lógica de cor do evento\r\n    CorEvento = CASE\r\n        WHEN Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027 AND Viagem.Finalidade = \u0027Evento\u0027 THEN \u0027#E99B63\u0027\r\n        WHEN Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027 THEN \u0027#29B3FF\u0027\r\n        WHEN Viagem.Status = \u0027Cancelada\u0027 THEN \u0027#E34234\u0027\r\n        WHEN Viagem.Status = \u0027Aberta\u0027 AND ISNULL(Viagem.StatusAgendamento, 0) = 0 THEN \u0027#FFD774\u0027\r\n        WHEN Viagem.Status = \u0027Realizada\u0027 AND ISNULL(Viagem.FoiAgendamento, 0) = 1 THEN \u0027#52688F\u0027\r\n        WHEN Viagem.Status = \u0027Realizada\u0027 THEN \u0027#75B390\u0027\r\n        WHEN Viagem.Finalidade = \u0027Evento\u0027 THEN \u0027#E99B63\u0027\r\n        ELSE \u0027#29B3FF\u0027\r\n    END,\r\n\r\n    CorTexto = CASE\r\n        WHEN (Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027)\r\n          OR (Viagem.Status = \u0027Realizada\u0027)\r\n          OR (Viagem.Finalidade = \u0027Evento\u0027)\r\n          OR (Viagem.Status = \u0027Cancelada\u0027)\r\n          THEN \u0027white\u0027\r\n        WHEN (Viagem.Status = \u0027Aberta\u0027 AND ISNULL(Viagem.StatusAgendamento, 0) = 0)\r\n          THEN \u0027#2B6670\u0027\r\n        ELSE \u0027white\u0027\r\n    END,\r\n\r\n    -- Descrição Montada\r\n    DescricaoMontada = \r\n        (\r\n            ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n            + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n            + CASE \r\n                WHEN Viagem.Descricao IS NOT NULL AND LEN(LTRIM(RTRIM(Viagem.Descricao))) \u003e 0\r\n                THEN \u0027 - \u0027 + Viagem.Descricao\r\n                ELSE \u0027\u0027\r\n              END\r\n        ),\r\n\r\n    -- Descrição especial para eventos (seguindo a mesma lógica do C#)\r\n    DescricaoEvento =\r\n        CASE\r\n            WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Viagem.NomeEvento IS NOT NULL AND Viagem.Status = \u0027Cancelada\u0027\r\n                THEN \u0027Evento CANCELADO: \u0027 + Viagem.NomeEvento + \u0027 / \u0027\r\n                    + ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n                    + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n                    + CASE WHEN Viagem.Descricao IS NOT NULL AND LEN(LTRIM(RTRIM(Viagem.Descricao))) \u003e 0\r\n                        THEN \u0027 - \u0027 + Viagem.Descricao\r\n                        ELSE \u0027\u0027 END\r\n            WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Viagem.NomeEvento IS NOT NULL\r\n                THEN \u0027Evento: \u0027 + Viagem.NomeEvento + \u0027 / \u0027\r\n                    + ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n                    + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n                    + CASE WHEN Viagem.Descricao IS NOT NULL AND LEN(LTRIM(RTRIM(Viagem.Descricao))) \u003e 0\r\n                        THEN \u0027 - \u0027 + Viagem.Descricao\r\n                        ELSE \u0027\u0027 END\r\n            ELSE NULL\r\n        END,\r\n\r\n    -- Título do Evento\r\n    Titulo = \r\n        CASE\r\n            WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Viagem.NomeEvento IS NOT NULL THEN \u0027Evento : \u0027 + Viagem.NomeEvento\r\n            ELSE Viagem.Finalidade\r\n        END\r\n\r\nFROM dbo.SetorSolicitante\r\nRIGHT OUTER JOIN dbo.Viagem\r\n    ON SetorSolicitante.SetorSolicitanteId = Viagem.SetorSolicitanteId\r\nLEFT OUTER JOIN dbo.Requisitante\r\n    ON Requisitante.RequisitanteId = Viagem.RequisitanteId\r\nLEFT OUTER JOIN dbo.Motorista\r\n    ON Motorista.MotoristaId = Viagem.MotoristaId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n    ON Veiculo.VeiculoId = Viagem.VeiculoId\r\nINNER JOIN dbo.ModeloVeiculo\r\n    ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n    ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId",
                      "ViewItensManutencao":  "CREATE OR ALTER VIEW dbo.ViewItensManutencao \r\nAS SELECT\r\n   im.ItemManutencaoId,\r\n   im.ManutencaoId,\r\n   im.TipoItem,\r\n   im.NumFicha,\r\n   CONVERT(varchar(10), im.DataItem, 103) AS DataItem,  -- dd/MM/yyyy\r\n   im.Resumo,\r\n   im.Descricao,\r\n   im.Status,\r\n   im.ImagemOcorrencia,\r\n   m.Nome AS NomeMotorista,\r\n   im.MotoristaId,\r\n   im.ViagemId\r\nFROM dbo.ItensManutencao AS im\r\nLEFT JOIN dbo.Motorista  AS m\r\n  ON m.MotoristaId = im.MotoristaId",
                      "ViewExisteItemContrato":  "CREATE OR ALTER VIEW dbo.ViewExisteItemContrato \r\nAS SELECT\r\n  ItemVeiculoContrato.ItemVeiculoId\r\n ,ItemVeiculoContrato.NumItem\r\n ,ItemVeiculoContrato.Descricao\r\n ,ItemVeiculoContrato.Quantidade\r\n ,ItemVeiculoContrato.ValorUnitario AS ValUnitario\r\n ,ItemVeiculoContrato.RepactuacaoContratoId\r\n ,(SELECT DISTINCT ItemVeiculoId FROM Veiculo WHERE Veiculo.ItemVeiculoId = ItemVeiculoContrato.ItemVeiculoId) AS ExisteVeiculo\r\nFROM dbo.ItemVeiculoContrato",
                      "ViewMediaConsumo":  "CREATE OR ALTER VIEW dbo.ViewMediaConsumo \r\nAS SELECT\r\n  Abastecimento.VeiculoId\r\n ,CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) AS ConsumoGeral\r\nFROM dbo.Abastecimento\r\nGROUP BY Abastecimento.VeiculoId",
                      "ViewAbastecimentosPBIContrato":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBIContrato \r\nAS SELECT\r\n  Veiculo.VeiculoId\r\n ,Veiculo.Placa\r\n ,Veiculo.Categoria\r\n ,ItemVeiculoContrato.Descricao\r\nFROM dbo.VeiculoContrato\r\nINNER JOIN dbo.Veiculo\r\n  ON VeiculoContrato.VeiculoId = Veiculo.VeiculoId\r\nINNER JOIN dbo.ItemVeiculoContrato\r\n  ON Veiculo.ItemVeiculoId = ItemVeiculoContrato.ItemVeiculoId\r\nINNER JOIN dbo.RepactuacaoContrato\r\n  ON ItemVeiculoContrato.RepactuacaoContratoId = RepactuacaoContrato.RepactuacaoContratoId\r\n    AND VeiculoContrato.ContratoId = RepactuacaoContrato.ContratoId",
                      "ViewCustosViagem":  "CREATE OR ALTER VIEW dbo.ViewCustosViagem \r\nAS SELECT\r\n  Viagem.NoFichaVistoria\r\n ,Viagem.ViagemId\r\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\r\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS DataFinal\r\n ,FORMAT(Viagem.HoraInicio, \u0027HH:mm\u0027) AS HoraInicio\r\n ,FORMAT(Viagem.HoraFim, \u0027HH:mm\u0027) AS HoraFim\r\n ,Viagem.Finalidade\r\n ,Viagem.Status\r\n ,Viagem.KmInicial\r\n ,Viagem.KmFinal\r\n ,Viagem.KmFinal - Viagem.KmInicial AS Quilometragem\r\n ,FORMAT(Viagem.CustoMotorista, \u0027N2\u0027, \u0027pt-BR\u0027) AS CustoMotorista\r\n ,FORMAT(Viagem.CustoCombustivel, \u0027N2\u0027, \u0027pt-BR\u0027) AS CustoCombustivel\r\n ,FORMAT(Viagem.CustoVeiculo, \u0027N2\u0027, \u0027pt-BR\u0027) AS CustoVeiculo\r\n ,CONVERT(varchar, CAST(Viagem.CustoMotorista AS money), 1) AS CustoMotoristaFormatado\r\n ,Motorista.Nome AS NomeMotorista\r\n ,Motorista.MotoristaId\r\n ,Viagem.VeiculoId\r\n ,Viagem.StatusAgendamento\r\n ,Viagem.SetorSolicitanteId \r\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\r\n ,ROW_NUMBER() OVER (ORDER BY Viagem.DataInicial, Viagem.HoraInicio) AS RowNum\r\nFROM dbo.Viagem\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON Motorista.MotoristaId = Viagem.MotoristaId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\r\nINNER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nWHERE Viagem.Status = \u0027Realizada\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027",
                      "ViewManutencao":  "CREATE OR ALTER VIEW dbo.[ViewManutencao.OLD] \r\nAS SELECT\r\n  Manutencao.ManutencaoId\r\n ,Manutencao.NumOS\r\n ,CONVERT(VARCHAR, Manutencao.DataSolicitacao, 103) AS DataSolicitacao\r\n ,Manutencao.ResumoOS\r\n ,CONVERT(VARCHAR, Manutencao.DataRecolhimento, 103) AS DataRecolhimento\r\n ,CONVERT(VARCHAR, Manutencao.DataRecebimentoReserva, 103) AS DataRecebimentoReserva\r\n ,CONVERT(VARCHAR, Manutencao.DataDevolucaoReserva, 103) AS DataDevolucaoReserva\r\n ,CONVERT(VARCHAR, Manutencao.DataEntrega, 103) AS DataEntrega\r\n ,Manutencao.StatusOS\r\n ,Manutencao.VeiculoId\r\n ,\u0027(\u0027 + ViewVeiculos.Placa + \u0027) \u0027 + ViewVeiculos.MarcaModelo AS DescricaoVeiculo\r\n ,CASE\r\n    WHEN Manutencao.ReservaEnviado IS NULL THEN \u0027\u0027\r\n    WHEN Manutencao.ReservaEnviado = 1 THEN \u0027Enviado\u0027\r\n    ELSE \u0027Ausente\u0027\r\n  END AS Reserva\r\n ,CASE\r\n    WHEN Manutencao.DataDevolucao IS NULL THEN \u002701/01/2001\u0027\r\n    ELSE CONVERT(VARCHAR, Manutencao.DataDevolucao, 103)\r\n  END AS DataDevolucao\r\n ,CASE\r\n    WHEN Manutencao.DataDevolucao IS NULL THEN \u002701\u0027\r\n    WHEN Manutencao.DataEntrega IS NOT NULL THEN DATEDIFF(DAY, Manutencao.DataEntrega, Manutencao.DataDevolucao)\r\n    ELSE DATEDIFF(DAY, Manutencao.DataSolicitacao, Manutencao.DataDevolucao)\r\n  END AS DiasGlosa\r\n ,ItemVeiculoContrato.NumItem\r\nFROM dbo.ViewVeiculos\r\nRIGHT OUTER JOIN dbo.Manutencao\r\n  ON ViewVeiculos.VeiculoId = Manutencao.VeiculoId\r\nLEFT OUTER JOIN dbo.ItemVeiculoContrato\r\n  ON ItemVeiculoContrato.ItemVeiculoId = ViewVeiculos.ItemVeiculoId",
                      "ViewAbastecimentosItensPBI":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosItensPBI \r\nAS SELECT\r\n  ViewAbastecimentosPBIAta.VeiculoID,\r\n  ViewAbastecimentosPBIAta.Descricao,\r\n  ViewAbastecimentosPBIAta.Categoria\r\nFROM dbo.ViewAbastecimentosPBIAta\r\n\r\nUNION\r\n\r\nSELECT\r\n  ViewAbastecimentosPBIContrato.VeiculoID,\r\n  ViewAbastecimentosPBIContrato.Descricao,\r\n  ViewAbastecimentosPBIContrato.Categoria \r\nFROM dbo.ViewAbastecimentosPBIContrato\r\n  \r\nUNION \r\n\r\nSELECT\r\n  ViewAbastecimentosPBIProprio.VeiculoID,\r\n  ViewAbastecimentosPBIProprio.Descricao,\r\n  ViewAbastecimentosPBIProprio.Categoria \r\nFROM dbo.ViewAbastecimentosPBIProprio",
                      "ViewLotacaoMotorista":  "CREATE OR ALTER VIEW dbo.ViewLotacaoMotorista \r\nAS SELECT TOP 1000000\r\n  Unidade.UnidadeId\r\n ,LotacaoMotorista.LotacaoMotoristaId\r\n ,Motorista.MotoristaId\r\n ,LotacaoMotorista.Lotado\r\n ,LotacaoMotorista.Motivo\r\n ,Unidade.Descricao AS Unidade\r\n ,CONVERT(VARCHAR, LotacaoMotorista.DataInicio, 103) AS DataInicial\r\n ,CONVERT(VARCHAR, LotacaoMotorista.DataFim, 103) AS DataFim\r\n ,Motorista_1.Nome AS MotoristaCobertura\r\nFROM dbo.LotacaoMotorista\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON LotacaoMotorista.UnidadeId = Unidade.UnidadeId\r\nINNER JOIN dbo.Motorista\r\n  ON LotacaoMotorista.MotoristaId = Motorista.MotoristaId\r\nLEFT OUTER JOIN dbo.Motorista Motorista_1\r\n  ON Motorista_1.MotoristaId = LotacaoMotorista.MotoristaCoberturaId\r\nORDER BY LotacaoMotorista.DataInicio DESC",
                      "ViewViagensAgenda":  "CREATE OR ALTER VIEW dbo.ViewViagensAgenda \r\nWITH SCHEMABINDING\r\nAS --SELECT\r\n--  Viagem.ViagemId\r\n-- ,Viagem.DataInicial\r\n-- ,Viagem.HoraInicio\r\n-- ,Viagem.MotoristaId\r\n-- ,Viagem.VeiculoId\r\n-- ,Viagem.Descricao\r\n-- ,Viagem.Status\r\n-- ,Viagem.Finalidade\r\n-- ,Viagem.StatusAgendamento\r\n-- ,Viagem.FoiAgendamento\r\n-- ,Viagem.NomeEvento\r\n-- ,Viagem.EventoId\r\n--FROM dbo.Viagem\r\n--WHERE Viagem.Status = \u0027Agendada\u0027 OR Viagem.Status =\u0027Aberta\u0027\r\n\r\n--WHERE Viagem.DataInicial BETWEEN DATEADD(month, -2, GETDATE()) AND DATEADD(month, 2, GETDATE())\r\n\r\nSELECT\r\n    Viagem.ViagemId,\r\n    Viagem.DataInicial,\r\n    Viagem.HoraInicio,\r\n\r\n    CONVERT(\r\n        DATETIME,\r\n        CONVERT(VARCHAR(10), Viagem.DataInicial, 120) + \u0027 \u0027 + CONVERT(VARCHAR(8), Viagem.HoraInicio, 108),\r\n        120\r\n    ) AS Start,\r\n\r\n    -- Campo End (use DataFinal/HoraFim se existir, ou DataInicial/HoraFim)\r\n--    CASE \r\n--        WHEN Viagem.DataFinal IS NOT NULL AND Viagem.HoraFim IS NOT NULL\r\n--        THEN CONVERT(\r\n--            DATETIME,\r\n--            CONVERT(VARCHAR(10), Viagem.DataFinal, 120) + \u0027 \u0027 + CONVERT(VARCHAR(8), Viagem.HoraFim, 108),\r\n--            120\r\n--        )\r\n--        WHEN Viagem.DataInicial IS NOT NULL AND Viagem.HoraFim IS NOT NULL\r\n--        THEN CONVERT(\r\n--            DATETIME,\r\n--            CONVERT(VARCHAR(10), Viagem.DataInicial, 120) + \u0027 \u0027 + CONVERT(VARCHAR(8), Viagem.HoraFim, 108),\r\n--            120\r\n--        )\r\n--        ELSE NULL\r\n--    END AS [End],\r\n\r\n    Viagem.DataFinal,\r\n    Viagem.HoraFim,\r\n    Viagem.HoraFim AS [End],\r\n    Viagem.MotoristaId,\r\n    Viagem.VeiculoId,\r\n    Viagem.Status,\r\n    Viagem.Finalidade,\r\n    Viagem.StatusAgendamento,\r\n    Viagem.FoiAgendamento,\r\n    Viagem.NomeEvento,\r\n    Viagem.EventoId,\r\n\r\n    -- Nome do motorista (pode ser NULL)\r\n    Motorista.Nome AS NomeMotorista,\r\n\r\n    -- Placa do veículo (pode ser NULL)\r\n    Veiculo.Placa AS Placa,\r\n\r\n    -- Nome do evento (pode ser NULL)\r\n    Evento.Nome AS NomeEventoFull,\r\n\r\n    -- Título do evento (igual ao C#)\r\n    Titulo = CASE\r\n        WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Evento.Nome IS NOT NULL THEN \u0027Evento : \u0027 + Evento.Nome\r\n        ELSE Viagem.Finalidade\r\n    END,\r\n\r\n    -- Cor do evento (igual ao C#)\r\n    CorEvento = CASE\r\n        WHEN Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027 AND Viagem.Finalidade = \u0027Evento\u0027 THEN \u0027#E99B63\u0027\r\n        WHEN Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027 THEN \u0027#29B3FF\u0027\r\n        WHEN Viagem.Status = \u0027Cancelada\u0027 THEN \u0027#E34234\u0027\r\n        WHEN Viagem.Status = \u0027Aberta\u0027 AND ISNULL(Viagem.StatusAgendamento, 0) = 0 THEN \u0027#FFD774\u0027\r\n        WHEN Viagem.Status = \u0027Realizada\u0027 AND ISNULL(Viagem.FoiAgendamento, 0) = 1 THEN \u0027#52688F\u0027\r\n        WHEN Viagem.Status = \u0027Realizada\u0027 THEN \u0027#75B390\u0027\r\n        WHEN Viagem.Finalidade = \u0027Evento\u0027 THEN \u0027#E99B63\u0027\r\n        ELSE \u0027#29B3FF\u0027\r\n    END,\r\n\r\n    -- Cor do texto (igual ao C#)\r\n    CorTexto = CASE\r\n        WHEN (Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027)\r\n          OR (Viagem.Status = \u0027Realizada\u0027)\r\n          OR (Viagem.Finalidade = \u0027Evento\u0027)\r\n          OR (Viagem.Status = \u0027Cancelada\u0027)\r\n          THEN \u0027white\u0027\r\n        WHEN (Viagem.Status = \u0027Aberta\u0027 AND ISNULL(Viagem.StatusAgendamento, 0) = 0)\r\n          THEN \u0027#2B6670\u0027\r\n        ELSE \u0027white\u0027\r\n    END,\r\n\r\n    -- Descrição genérica (sem HTML)\r\n    DescricaoMontada =\r\n        ISNULL(Motorista.Nome, \u0027(Motorista Não Informado)\u0027)\r\n        + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n        + CASE\r\n            WHEN Viagem.DescricaoSemFormato IS NOT NULL\r\n            THEN \u0027 - \u0027 + \r\n                REPLACE(\r\n                    REPLACE(\r\n                        REPLACE(\r\n                            CAST(Viagem.DescricaoSemFormato AS VARCHAR(MAX)), \r\n                            CHAR(13), \u0027\u0027\r\n                        ), \r\n                        CHAR(10), \u0027 \u0027\r\n                    ), \r\n                    CHAR(9), \u0027 \u0027\r\n                )\r\n            ELSE \u0027\u0027\r\n          END,\r\n        \r\n        -- Descrição especial para eventos (seguindo a mesma lógica do C#)\r\n        DescricaoEvento =\r\n            CASE\r\n                WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Evento.Nome IS NOT NULL AND Viagem.Status = \u0027Cancelada\u0027\r\n                    THEN \u0027Evento CANCELADO: \u0027 + Evento.Nome + \u0027 / \u0027\r\n                        + ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n                        + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n                        + CASE WHEN Viagem.DescricaoSemFormato IS NOT NULL\r\n                            THEN \u0027 - \u0027 + \r\n                                REPLACE(\r\n                                    REPLACE(\r\n                                        REPLACE(\r\n                                            CAST(Viagem.DescricaoSemFormato AS VARCHAR(MAX)), \r\n                                            CHAR(13), \u0027\u0027\r\n                                        ), \r\n                                        CHAR(10), \u0027 \u0027\r\n                                    ), \r\n                                    CHAR(9), \u0027 \u0027\r\n                                )\r\n                            ELSE \u0027\u0027 END\r\n                WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Evento.Nome IS NOT NULL\r\n                    THEN \u0027Evento: \u0027 + Evento.Nome + \u0027 / \u0027\r\n                        + ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n                        + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n                        + CASE WHEN Viagem.DescricaoSemFormato IS NOT NULL\r\n                            THEN \u0027 - \u0027 + \r\n                                REPLACE(\r\n                                    REPLACE(\r\n                                        REPLACE(\r\n                                            CAST(Viagem.DescricaoSemFormato AS VARCHAR(MAX)), \r\n                                            CHAR(13), \u0027\u0027\r\n                                        ), \r\n                                        CHAR(10), \u0027 \u0027\r\n                                    ), \r\n                                    CHAR(9), \u0027 \u0027\r\n                                )\r\n                            ELSE \u0027\u0027 END\r\n                ELSE NULL\r\n            END,\r\n\r\nViagem.DescricaoSemFormato,\r\nViagem.Descricao\r\n\r\nFROM dbo.Viagem\r\nLEFT JOIN dbo.Motorista\r\n    ON Motorista.MotoristaId = Viagem.MotoristaId\r\nLEFT JOIN dbo.Veiculo\r\n    ON Veiculo.VeiculoId = Viagem.VeiculoId\r\nLEFT JOIN dbo.Evento\r\n    ON Evento.EventoId = Viagem.EventoId",
                      "ViewContratoFornecedor":  "CREATE OR ALTER VIEW dbo.ViewContratoFornecedor \r\nAS SELECT TOP 100000\r\n  Contrato.ContratoId\r\n ,Contrato.AnoContrato + \u0027/\u0027 + Contrato.NumeroContrato + \u0027 - \u0027 + Fornecedor.DescricaoFornecedor AS Descricao\r\n ,Contrato.TipoContrato\r\nFROM dbo.Fornecedor\r\nINNER JOIN dbo.Contrato\r\n  ON Fornecedor.FornecedorId = Contrato.FornecedorId\r\nORDER BY Contrato.AnoContrato DESC",
                      "ViewTeste":  "CREATE OR ALTER VIEW dbo.ViewTeste \r\nAS SELECT\r\n  Abastecimento.AbastecimentoId\r\n ,Abastecimento.Litros\r\n ,Abastecimento.ValorUnitario\r\n ,Abastecimento.DataHora\r\n ,Abastecimento.KmRodado\r\n ,Abastecimento.Hodometro\r\n ,Veiculo.Placa\r\n ,ModeloVeiculo.DescricaoModelo\r\n ,MarcaVeiculo.DescricaoMarca\r\n ,Combustivel.Descricao\r\n ,Motorista.Nome\r\n ,Unidade.Sigla\r\nFROM dbo.Abastecimento\r\nINNER JOIN dbo.Veiculo\r\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\r\nINNER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nINNER JOIN dbo.Combustivel\r\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\r\nINNER JOIN dbo.Motorista\r\n  ON Abastecimento.MotoristaId = Motorista.MotoristaId\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Unidade.UnidadeId = Motorista.UnidadeId",
                      "ViewContratoFornecedor_Veiculos":  "CREATE OR ALTER VIEW dbo.ViewContratoFornecedor_Veiculos \r\nAS SELECT TOP 100000\r\n  Contrato.ContratoId\r\n ,Contrato.AnoContrato + \u0027/\u0027 + Contrato.NumeroContrato + \u0027 - \u0027 + Fornecedor.DescricaoFornecedor AS ContratoVeiculo\r\n ,Contrato.TipoContrato\r\nFROM dbo.Fornecedor\r\nINNER JOIN dbo.Contrato\r\n  ON Fornecedor.FornecedorId = Contrato.FornecedorId\r\nORDER BY Contrato.AnoContrato DESC",
                      "ViewVeiculos_Ultima":  "CREATE OR ALTER VIEW dbo.ViewVeiculos_Ultima \r\nAS SELECT\r\n  Veiculo.VeiculoId\r\n ,Veiculo.Placa\r\n ,LEFT(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), LEN(SUBSTRING(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027))), LEN(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027)))) - 2) AS Quilometragem\r\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS MarcaModelo\r\n ,Unidade.Sigla\r\n ,Combustivel.Descricao\r\n ,CASE\r\n    WHEN CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) IS NULL THEN 0\r\n    ELSE CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2))\r\n  END AS Consumo\r\n ,CASE\r\n    WHEN ViewContratoFornecedor_Veiculos.ContratoVeiculo IS NOT NULL THEN ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n    WHEN ViewAtaFornecedor.AtaVeiculo IS NOT NULL THEN ViewAtaFornecedor.AtaVeiculo + \u0027 \u003cb\u003e(Ata)\u003c/b\u003e \u0027\r\n    ELSE \u0027\u003cb\u003e(Veículo Próprio)\u003c/b\u003e\u0027\r\n  END AS OrigemVeiculo\r\n ,CONVERT(VARCHAR, Veiculo.DataAlteracao, 103) AS DataAlteracao\r\n ,AspNetUsers.NomeCompleto\r\n ,CASE\r\n    WHEN Veiculo.Reserva = 0 THEN \u0027Efetivo\u0027\r\n    ELSE \u0027Reserva\u0027\r\n  END AS VeiculoReserva\r\n ,Veiculo.Status\r\n ,Veiculo.CombustivelId\r\n ,ROW_NUMBER() OVER (ORDER BY Veiculo.Placa) AS RowNum\r\n ,ViewContratoFornecedor_Veiculos.ContratoId\r\n ,ViewAtaFornecedor.AtaId\r\n ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n ,ViewAtaFornecedor.AtaVeiculo\r\n ,Veiculo.VeiculoProprio\r\n ,Veiculo.ItemVeiculoAtaId\r\n ,Veiculo.ItemVeiculoId\r\n ,Veiculo.ValorMensal\r\nFROM dbo.Abastecimento\r\nRIGHT OUTER JOIN dbo.Veiculo\r\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nLEFT OUTER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Unidade.UnidadeId = Veiculo.UnidadeId\r\nLEFT OUTER JOIN dbo.Combustivel\r\n  ON Combustivel.CombustivelId = Veiculo.CombustivelId\r\nLEFT OUTER JOIN dbo.ViewContratoFornecedor_Veiculos\r\n  ON ViewContratoFornecedor_Veiculos.ContratoId = Veiculo.ContratoId\r\nLEFT OUTER JOIN dbo.ViewAtaFornecedor\r\n  ON ViewAtaFornecedor.AtaId = Veiculo.AtaId\r\nINNER JOIN dbo.AspNetUsers\r\n  ON AspNetUsers.Id = Veiculo.UsuarioIdAlteracao\r\nGROUP BY Veiculo.VeiculoId\r\n        ,Veiculo.Placa\r\n        ,Veiculo.Quilometragem\r\n        ,MarcaVeiculo.DescricaoMarca\r\n        ,ModeloVeiculo.DescricaoModelo\r\n        ,Unidade.Sigla\r\n        ,Combustivel.Descricao\r\n        ,ViewContratoFornecedor_Veiculos.ContratoId\r\n        ,Veiculo.DataAlteracao\r\n        ,AspNetUsers.NomeCompleto\r\n        ,Veiculo.Reserva\r\n        ,Veiculo.Status\r\n        ,Veiculo.CombustivelId\r\n        ,ViewAtaFornecedor.AtaId\r\n        ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\r\n        ,ViewAtaFornecedor.AtaVeiculo\r\n        ,Veiculo.VeiculoProprio\r\n        ,Veiculo.ItemVeiculoAtaId\r\n        ,Veiculo.ItemVeiculoId\r\n        ,Veiculo.ValorMensal",
                      "ViewManutencao_2025":  "CREATE OR ALTER VIEW dbo.[ViewManutencao_2025.11.04] \r\nAS SELECT \r\n    -- Campo inicial solicitado\r\n    ISNULL(v.Placa,\u0027\u0027) + \u0027 - \u0027 + ISNULL(ma.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(m.DescricaoModelo,\u0027\u0027) AS PlacaDescricao,\r\n\r\n    -- ===== Chaves e referência ao contrato (para filtrar na LINQ) =====\r\n    vc.ContratoId,\r\n\r\n    -- ===== Manutenção =====\r\n    b.ManutencaoId,\r\n    b.NumOS,\r\n    b.ResumoOS,\r\n\r\n    -- strings formatadas (dd/MM/yyyy)\r\n    CONVERT(CHAR(10), b.DataSolicitacao,     103) AS DataSolicitacao,\r\n    CONVERT(CHAR(10), b.DataDisponibilidade, 103) AS DataDisponibilidade,\r\n    CONVERT(CHAR(10), b.DataRecolhimento,    103) AS DataRecolhimento,\r\n    CONVERT(CHAR(10), b.DataRecebimentoReserva, 103) AS DataRecebimentoReserva,\r\n    CONVERT(CHAR(10), b.DataDevolucaoReserva,   103) AS DataDevolucaoReserva,\r\n    CONVERT(CHAR(10), b.DataEntrega,         103) AS DataEntrega,\r\n    CONVERT(CHAR(10), b.DataDevolucao,       103) AS DataDevolucao,\r\n\r\n    -- datas cruas\r\n    b.DataSolicitacao AS DataSolicitacaoRaw,\r\n    b.DataDevolucao   AS DataDevolucaoRaw,\r\n\r\n    b.StatusOS,\r\n    b.VeiculoId,\r\n\r\n    -- Derivado (Marca/Modelo) e informações auxiliares\r\n    ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo AS DescricaoVeiculo,\r\n    u.Sigla                                    AS Sigla,\r\n    c.Descricao                                AS CombustivelDescricao,\r\n    v.Placa                                    AS Placa,\r\n\r\n    -- Reserva em texto (compatibilidade)\r\n    CASE\r\n        WHEN b.ReservaEnviado = 1 THEN \u0027Enviado\u0027\r\n        WHEN b.ReservaEnviado = 0 THEN \u0027Ausente\u0027\r\n        ELSE \u0027\u0027\r\n    END AS Reserva,\r\n\r\n    -- Novo: ReservaEnviado (Sim/Não)\r\n    CASE WHEN b.ReservaEnviado = 1 THEN \u0027Sim\u0027 ELSE \u0027Não\u0027 END AS ReservaEnviado,\r\n\r\n    b.VeiculoReservaId,\r\n\r\n    -- ===== Planilha de Glosa (Item do contrato, via Veiculo.ItemVeiculoId) =====\r\n    ivc.Descricao,\r\n    ivc.Quantidade,\r\n    ivc.ValorUnitario,\r\n\r\n    -- DiasGlosa (via APPLY)\r\n    d.DiasCalc AS DiasGlosa,\r\n\r\n    -- ValorGlosa (trata NULLs e usa DECIMAL p/ precisão)\r\n    CAST(\r\n        d.DiasCalc * COALESCE(CAST(ivc.ValorUnitario AS DECIMAL(18,2)), 0)\r\n        AS DECIMAL(18,2)\r\n    ) AS ValorGlosa,\r\n\r\n    -- Dias (0 quando sem devolução, senão diff Solicitação-\u003eDevolução)\r\n    CASE\r\n        WHEN b.DataDevolucao IS NULL THEN 0\r\n        ELSE DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\r\n    END AS Dias,\r\n\r\n    -- Atributos de UI\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS Habilitado,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027fa-regular fa-lock\u0027 ELSE \u0027far fa-flag-checkered\u0027 END                 AS Icon,\r\n\r\n    -- Item do contrato\r\n    ivc.NumItem,\r\n\r\n    -- Campos \"montados\"\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoEditar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityEditar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Visualizar Manutenção\u0027 ELSE \u0027Edita a Ordem de Serviço!\u0027 END        AS OpacityTooltipEditarEditar,\r\n\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoBaixar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS ModalBaixarAttrs,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityBaixar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Desabilitado\u0027 ELSE \u0027Fecha a Ordem de Serviço!\u0027 END                 AS Tooltip,\r\n\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoCancelar,\r\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityCancelar,\r\n    CASE\r\n        WHEN b.StatusOS = \u0027Cancelada\u0027 THEN \u0027Manutenção Cancelada\u0027\r\n        WHEN b.StatusOS = \u0027Fechada\u0027   THEN \u0027OS Fechada/Baixada\u0027\r\n        ELSE \u0027Cancelar Manutenção\u0027\r\n    END AS TooltipCancelar,\r\n\r\n    -- ========= Novos campos no formato solicitado =========\r\n    -- Veiculo principal: \"Placa - (Marca/Modelo)\"\r\n    ISNULL(v.Placa,\u0027\u0027) + \u0027 - (\u0027 + ISNULL(ma.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(m.DescricaoModelo,\u0027\u0027) + \u0027)\u0027 AS Veiculo,\r\n\r\n    -- Carro de reserva (quando houver): \"Placa - (Marca/Modelo)\"\r\n    CASE\r\n        WHEN b.VeiculoReservaId IS NULL THEN NULL\r\n        ELSE ISNULL(vr.Placa,\u0027\u0027) + \u0027 - (\u0027 + ISNULL(mar.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(mr.DescricaoModelo,\u0027\u0027) + \u0027)\u0027\r\n    END AS CarroReserva\r\n\r\nFROM dbo.Manutencao               AS b\r\nLEFT JOIN dbo.Veiculo             AS v   ON v.VeiculoId       = b.VeiculoId\r\nLEFT JOIN dbo.VeiculoContrato     AS vc  ON vc.VeiculoId      = v.VeiculoId\r\nLEFT JOIN dbo.ModeloVeiculo       AS m   ON m.ModeloId        = v.ModeloId\r\nLEFT JOIN dbo.MarcaVeiculo        AS ma  ON ma.MarcaId        = v.MarcaId\r\nLEFT JOIN dbo.Combustivel         AS c   ON c.CombustivelId   = v.CombustivelId\r\nLEFT JOIN dbo.Unidade             AS u   ON u.UnidadeId       = v.UnidadeId\r\nLEFT JOIN dbo.ItemVeiculoContrato AS ivc ON ivc.ItemVeiculoId = v.ItemVeiculoId\r\n\r\n-- === Inclusão pedida: veículo de reserva ===\r\nLEFT JOIN dbo.Veiculo             AS vr  ON vr.VeiculoId      = b.VeiculoReservaId\r\nLEFT JOIN dbo.MarcaVeiculo        AS mar ON mar.MarcaId       = vr.MarcaId\r\nLEFT JOIN dbo.ModeloVeiculo       AS mr  ON mr.ModeloId       = vr.ModeloId\r\n\r\nCROSS APPLY (\r\n  SELECT DiasCalc =\r\n    CASE\r\n      WHEN b.DataDevolucao IS NULL THEN 1\r\n      WHEN b.DataEntrega  IS NOT NULL THEN DATEDIFF(DAY, b.DataEntrega,  b.DataDevolucao)\r\n      ELSE                               DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\r\n    END\r\n) AS d\r\n\r\n--WHERE\r\n--    v.Status = 1\r\n--    AND b.DataDevolucao IS NOT NULL\r\n--    AND DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao) \u003e 0",
                      "ViewOcorrencia":  "CREATE OR ALTER VIEW dbo.ViewOcorrencia \r\nWITH SCHEMABINDING\r\nAS SELECT\r\n  Viagem.VeiculoId\r\n ,Viagem.ViagemId\r\n ,Viagem.NoFichaVistoria\r\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\r\n ,Motorista.Nome AS NomeMotorista\r\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\r\n ,Viagem.ResumoOcorrencia\r\n ,Viagem.StatusOcorrencia\r\n ,Viagem.MotoristaId\r\n ,Viagem.ImagemOcorrencia\r\n ,Viagem.ItemManutencaoId\r\n ,Viagem.DescricaoOcorrencia\r\n ,Viagem.DescricaoSolucaoOcorrencia\r\nFROM dbo.Viagem\r\nINNER JOIN dbo.Motorista\r\n  ON Motorista.MotoristaId = Viagem.MotoristaId\r\nINNER JOIN dbo.Veiculo\r\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\r\nINNER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId",
                      "ViewEmpenhoMulta":  "CREATE OR ALTER VIEW dbo.ViewEmpenhoMulta \r\nAS SELECT\r\n  EmpenhoMulta.EmpenhoMultaId,\r\n  EmpenhoMulta.NotaEmpenho,\r\n  EmpenhoMulta.AnoVigencia,\r\n  EmpenhoMulta.SaldoInicial,\r\n  EmpenhoMulta.SaldoAtual,\r\n  EmpenhoMulta.OrgaoAutuanteId,\r\n  COUNT(DISTINCT MovimentacaoEmpenhoMulta.MovimentacaoId) AS Movimentacoes,\r\n  SUM(DISTINCT MovimentacaoEmpenhoMulta.Valor) AS SaldoMovimentacao,\r\n  SUM(DISTINCT Multa.ValorPago) AS SaldoMultas\r\nFROM dbo.EmpenhoMulta\r\nLEFT OUTER JOIN dbo.MovimentacaoEmpenhoMulta\r\n  ON EmpenhoMulta.EmpenhoMultaId = MovimentacaoEmpenhoMulta.EmpenhoMultaId \r\nLEFT OUTER JOIN dbo.Multa\r\n  ON EmpenhoMulta.EmpenhoMultaId = Multa.EmpenhoMultaId\r\nGROUP BY EmpenhoMulta.EmpenhoMultaId, EmpenhoMulta.NotaEmpenho, EmpenhoMulta.AnoVigencia, EmpenhoMulta.SaldoInicial, EmpenhoMulta.SaldoAtual, EmpenhoMulta.OrgaoAutuanteId",
                      "ViewRequisitantes":  "CREATE OR ALTER VIEW dbo.ViewRequisitantes \r\nAS SELECT\r\n  Requisitante.RequisitanteId\r\n ,CASE WHEN Requisitante.Ponto IS NULL AND SetorSolicitante.Sigla IS NULL THEN Requisitante.Nome + \u0027  - (\u0027 + SetorSolicitante.Nome + \u0027)\u0027 \r\n       WHEN Requisitante.Ponto IS NOT NULL AND SetorSolicitante.Sigla IS NULL THEN Requisitante.Nome  + \u0027 (\u0027 + Requisitante.Ponto + \u0027)\u0027 + \u0027 -  (\u0027 + SetorSolicitante.Nome + \u0027)\u0027 \r\n       WHEN Requisitante.Ponto IS NOT NULL AND SetorSolicitante.Sigla IS NOT NULL THEN Requisitante.Nome  + \u0027 (\u0027 + Requisitante.Ponto + \u0027)\u0027 + \u0027 -  (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027 \r\n  END AS Requisitante\r\n ,Requisitante.Status\r\n ,SetorSolicitante.Nome\r\n ,SetorSolicitante.Sigla\r\nFROM dbo.Requisitante\r\nINNER JOIN dbo.SetorSolicitante\r\n  ON Requisitante.SetorSolicitanteId = SetorSolicitante.SetorSolicitanteId\r\nWHERE Requisitante.Status = 1",
                      "ViewManutencaoAberta_Base":  "CREATE OR ALTER VIEW dbo.ViewManutencaoAberta_Base \r\nAS SELECT\r\n    m.ManutencaoId,\r\n    m.NumOS,\r\n    m.DataSolicitacao,\r\n    m.ResumoOS,\r\n    m.DataRecolhimento,\r\n    m.DataRecebimentoReserva,\r\n    m.DataDevolucaoReserva,\r\n    m.DataDisponibilidade,\r\n    m.DataEntrega,\r\n    m.StatusOS,\r\n    m.VeiculoId,\r\n    v.ItemVeiculoId,  -- leva para a UI fazer LEFT JOIN\r\n    -- Concatenação determinística para descrição:\r\n    \u0027(\u0027 + v.Placa + \u0027) \u0027 + ma.DescricaoMarca + \u0027 / \u0027 + mo.DescricaoModelo AS DescricaoVeiculo,\r\n    CAST(ISNULL(m.ReservaEnviado, 0) AS bit) AS ReservaEnviado,\r\n    m.DataDevolucao,\r\n    -- Cálculo determinístico/preciso:\r\n    DATEDIFF(DAY, ISNULL(m.DataEntrega, m.DataSolicitacao), ISNULL(m.DataDevolucao, m.DataSolicitacao)) AS DiasGlosa\r\nFROM dbo.Manutencao      AS m\r\nJOIN dbo.Veiculo         AS v  ON m.VeiculoId = v.VeiculoId\r\nJOIN dbo.ModeloVeiculo   AS mo ON v.ModeloId  = mo.ModeloId       -- ajuste se o nome for diferente\r\nJOIN dbo.MarcaVeiculo    AS ma ON mo.MarcaId  = ma.MarcaId\r\nWHERE m.StatusOS = \u0027Aberta\u0027",
                      "ViewMotoristaFluxo":  "CREATE OR ALTER VIEW dbo.ViewMotoristaFluxo \r\nAS SELECT DISTINCT\r\n  convert(nvarchar(50), ViewFluxoEconomildo.MotoristaId) AS MotoristaId,\r\n  ViewFluxoEconomildo.NomeMotorista\r\nFROM dbo.ViewFluxoEconomildo",
                      "ViewEdocMultas":  "CREATE OR ALTER VIEW dbo.ViewEdocMultas \r\nAS SELECT\r\n  Multa.MultaId\r\n ,Multa.NumInfracao\r\n ,CONVERT(VARCHAR, Multa.Data, 103) AS Data\r\n ,FORMAT(Multa.Hora, \u0027HH:mm\u0027) AS Hora\r\n ,Motorista.Nome\r\n ,Motorista.MotoristaId\r\n ,CASE\r\n    WHEN Motorista.Celular02 IS NULL THEN Motorista.Celular01\r\n    ELSE Motorista.Celular01 + \u0027 / \u0027 + Motorista.Celular02\r\n  END AS Telefone\r\n ,Veiculo.Placa\r\n ,Veiculo.VeiculoId\r\n ,OrgaoAutuante.Sigla\r\n ,OrgaoAutuante.OrgaoAutuanteId\r\n ,Multa.Localizacao\r\n ,TipoMulta.Artigo\r\n ,CONVERT(VARCHAR, Multa.Vencimento, 103) AS Vencimento\r\n ,Multa.ValorAteVencimento\r\n ,Multa.ValorPosVencimento\r\n ,Multa.ProcessoEDoc\r\n ,Multa.Status\r\n ,Multa.Fase\r\n ,TipoMulta.Descricao\r\n ,Multa.Observacao\r\n ,Multa.Paga\r\n ,Motorista.Ponto\r\n ,Contrato.AnoContrato + \u0027/\u0027 + Contrato.NumeroContrato AS NumContrato\r\n ,CASE\r\n    WHEN Multa.Paga = -1 THEN \u0027Pago\u0027\r\n  END AS Pago\r\n ,Fornecedor.DescricaoFornecedor\r\nFROM dbo.Multa\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON Multa.MotoristaId = Motorista.MotoristaId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Multa.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.OrgaoAutuante\r\n  ON Multa.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\r\nLEFT OUTER JOIN dbo.TipoMulta\r\n  ON Multa.TipoMultaId = TipoMulta.TipoMultaId\r\nLEFT OUTER JOIN dbo.EmpenhoMulta\r\n  ON Multa.EmpenhoMultaId = EmpenhoMulta.EmpenhoMultaId\r\n    AND EmpenhoMulta.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\r\nLEFT OUTER JOIN dbo.Contrato\r\n  ON Multa.ContratoMotoristaId = Contrato.ContratoId\r\nLEFT OUTER JOIN dbo.Fornecedor\r\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId",
                      "ViewCustosMotoristas":  "CREATE OR ALTER VIEW dbo.ViewCustosMotoristas \r\nAS SELECT\r\n  Motorista.Nome\r\n ,FORMAT(SUM(Viagem.CustoCombustivel), \u0027N2\u0027, \u0027pt-BR\u0027) AS Combustivel\r\n ,FORMAT(SUM(Viagem.CustoMotorista), \u0027N2\u0027, \u0027pt-BR\u0027) AS Motorista\r\n ,FORMAT(SUM(Viagem.CustoVeiculo), \u0027N2\u0027, \u0027pt-BR\u0027) AS Veiculo\r\n ,FORMAT(SUM(Viagem.KmFinal - Viagem.KmInicial), \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\r\nFROM dbo.Viagem\r\nINNER JOIN dbo.Motorista\r\n  ON Viagem.MotoristaId = Motorista.MotoristaId\r\nWHERE Viagem.Status = \u0027Realizada\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\r\nAND Motorista.TipoCondutor = \u0027Terceirizado\u0027\r\nAND MONTH(Viagem.DataInicial) = 05\r\nGROUP BY Motorista.Nome",
                      "ViewViagens_Sergio":  "CREATE OR ALTER VIEW dbo.ViewViagens_Sergio \r\nAS SELECT\r\n  Viagem.ViagemId\r\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\r\n ,FORMAT(Viagem.HoraInicio, \u0027HH:mm\u0027) AS HoraInicio\r\n ,Viagem.Descricao\r\n ,Viagem.KmInicial\r\n ,Viagem.KmFinal\r\n ,Viagem.CombustivelInicial\r\n ,Viagem.CombustivelFinal\r\n ,Viagem.NoFichaVistoria\r\n ,Viagem.Finalidade\r\n,CASE\r\n    WHEN Requisitante.Ramal IS NULL THEN Requisitante.Nome\r\n    ELSE Requisitante.Nome + \u0027 - (\u0027 + CONVERT(VARCHAR, Requisitante.Ramal) + \u0027)\u0027\r\n  END AS NomeRequisitante\r\n ,CASE\r\n    WHEN SetorSolicitante.Sigla IS NULL THEN SetorSolicitante.Nome\r\n    ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027\r\n  END AS NomeSetor\r\n ,Motorista.Nome AS NomeMotorista\r\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\r\n ,Veiculo.CombustivelId\r\n ,Viagem.FichaVistoria\r\n ,Viagem.Origem\r\n ,Viagem.Destino\r\n ,Viagem.Minutos\r\n ,Viagem.NomeEvento\r\nFROM dbo.SetorSolicitante\r\nRIGHT OUTER JOIN dbo.Viagem\r\n  ON SetorSolicitante.SetorSolicitanteId = Viagem.SetorSolicitanteId\r\nLEFT OUTER JOIN dbo.Requisitante\r\n  ON Requisitante.RequisitanteId = Viagem.RequisitanteId\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON Motorista.MotoristaId = Viagem.MotoristaId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\r\nINNER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId",
                      "ViewFichaViagem":  "CREATE OR ALTER VIEW dbo.ViewFichaViagem \r\nAS SELECT\r\n  CONVERT(NVARCHAR(100), Viagem.ViagemId) AS ViagemId\r\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\r\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS DataFinal\r\n ,FORMAT(Viagem.HoraInicio, \u0027HH:mm\u0027) AS HoraInicio\r\n ,FORMAT(Viagem.HoraFim, \u0027HH:mm\u0027) AS HoraFim\r\n ,Viagem.DescricaoSemFormato\r\n ,Viagem.KmInicial\r\n ,Viagem.KmFinal\r\n ,Viagem.ResumoOcorrencia\r\n ,Viagem.DescricaoOcorrencia\r\n ,Viagem.StatusOcorrencia\r\n ,Viagem.NoFichaVistoria\r\n ,Viagem.Finalidade\r\n ,Viagem.Origem\r\n ,Viagem.Destino\r\n ,Viagem.Status\r\n ,Viagem.EventoId\r\n ,Viagem.StatusAgendamento\r\n ,CASE\r\n    WHEN Requisitante.Ramal IS NULL THEN Requisitante.Nome\r\n    ELSE Requisitante.Nome + \u0027 - (\u0027 + CONVERT(VARCHAR, Requisitante.Ramal) + \u0027)\u0027\r\n  END AS NomeRequisitante\r\n ,CASE\r\n    WHEN SetorSolicitante.Sigla IS NULL THEN SetorSolicitante.Nome\r\n    ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027\r\n  END AS NomeSetor\r\n ,Motorista.Nome AS NomeMotorista\r\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\r\n ,Veiculo.UnidadeId\r\n ,Evento.Nome AS NomeEvento\r\n ,Viagem.FichaVistoria\r\n ,Viagem.Minutos\r\n ,Viagem.Descricao\r\n ,Viagem.CombustivelInicial\r\n ,Viagem.CombustivelFinal\r\n ,Viagem.RamalRequisitante\r\nFROM dbo.SetorSolicitante\r\nLEFT OUTER JOIN dbo.Viagem\r\n  ON SetorSolicitante.SetorSolicitanteId = Viagem.SetorSolicitanteId\r\nLEFT OUTER JOIN dbo.Requisitante\r\n  ON Requisitante.RequisitanteId = Viagem.RequisitanteId\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON Motorista.MotoristaId = Viagem.MotoristaId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\r\nLEFT OUTER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nLEFT OUTER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nLEFT OUTER JOIN dbo.Evento\r\n  ON Viagem.EventoId = Evento.EventoId",
                      "ViewPendenciasManutencao":  "CREATE OR ALTER VIEW dbo.ViewPendenciasManutencao \r\nAS SELECT\r\n  ItensManutencao.ItemManutencaoId\r\n ,ItensManutencao.ManutencaoId\r\n ,ItensManutencao.TipoItem\r\n ,ItensManutencao.NumFicha\r\n ,CONVERT(VARCHAR, ItensManutencao.DataItem, 103) AS DataItem\r\n ,ItensManutencao.Resumo\r\n ,ItensManutencao.Descricao\r\n ,ItensManutencao.Status\r\n ,ItensManutencao.MotoristaId\r\n ,ItensManutencao.ViagemId\r\n ,ItensManutencao.ImagemOcorrencia\r\n ,Motorista.Nome\r\n ,Manutencao.VeiculoId\r\nFROM dbo.ItensManutencao\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON ItensManutencao.MotoristaId = Motorista.MotoristaId\r\nLEFT OUTER JOIN dbo.Viagem\r\n  ON ItensManutencao.ViagemId = Viagem.ViagemId\r\nINNER JOIN dbo.Manutencao\r\n  ON ItensManutencao.ManutencaoId = Manutencao.ManutencaoId",
                      "ViewMotoristasViagem_Ultimo":  "CREATE OR ALTER VIEW dbo.ViewMotoristasViagem_Ultimo \r\nAS SELECT TOP 10000\r\n    m.MotoristaId,\r\n    m.Nome,\r\n    m.TipoCondutor,\r\n    m.Status,\r\n    m.Foto,\r\n    CAST(m.Nome + \u0027 (\u0027 + m.TipoCondutor + \u0027)\u0027 AS NVARCHAR(300)) AS MotoristaCondutor\r\nFROM dbo.Motorista AS m\r\nWHERE m.Status = 1\r\nORDER BY m.Nome",
                      "ViewOcorrenciasAbertasVeiculo":  "CREATE OR ALTER VIEW dbo.ViewOcorrenciasAbertasVeiculo\r\nAS\r\nSELECT \r\n    oc.OcorrenciaViagemId,\r\n    oc.ViagemId,\r\n    oc.VeiculoId,\r\n    oc.MotoristaId,\r\n    oc.Resumo,\r\n    oc.Descricao,\r\n    oc.ImagemOcorrencia,\r\n    oc.DataCriacao,\r\n    oc.UsuarioCriacao,\r\n    \r\n    -- Dados do Veículo\r\n    ve.Placa,\r\n    ma.DescricaoMarca,\r\n    mo.DescricaoModelo,\r\n    CONCAT(ve.Placa, \u0027 - \u0027, ma.DescricaoMarca, \u0027/\u0027, mo.DescricaoModelo) AS VeiculoCompleto,\r\n    \r\n    -- Dados da Viagem de Origem\r\n    vi.DataInicial AS DataViagem,\r\n    vi.NoFichaVistoria,\r\n    \r\n    -- Dados do Motorista que registrou\r\n    mt.Nome AS NomeMotorista,\r\n    \r\n    -- Campos de Urgência\r\n    DATEDIFF(DAY, oc.DataCriacao, GETDATE()) AS DiasEmAberto,\r\n    \r\n    CASE \r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027Crítica\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027Alta\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027Média\u0027\r\n        ELSE \u0027Normal\u0027\r\n    END AS Urgencia,\r\n    \r\n    CASE \r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027#dc3545\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027#ffc107\u0027\r\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027#17a2b8\u0027\r\n        ELSE \u0027#6c757d\u0027\r\n    END AS CorUrgencia\r\n\r\nFROM dbo.OcorrenciaViagem oc\r\n    INNER JOIN dbo.Viagem vi ON oc.ViagemId = vi.ViagemId\r\n    INNER JOIN dbo.Veiculo ve ON oc.VeiculoId = ve.VeiculoId\r\n    INNER JOIN dbo.MarcaVeiculo ma ON ve.MarcaId = ma.MarcaId\r\n    INNER JOIN dbo.ModeloVeiculo mo ON ve.ModeloId = mo.ModeloId\r\n    LEFT JOIN dbo.Motorista mt ON oc.MotoristaId = mt.MotoristaId\r\n\r\nWHERE oc.Status = \u0027Aberta\u0027",
                      "ViewLavagem":  "CREATE OR ALTER VIEW dbo.ViewLavagem \r\nAS SELECT\r\n  Lavagem.LavagemId\r\n  ,Lavagem.VeiculoId\r\n  ,Lavagem.MotoristaId\r\n ,CONVERT(VARCHAR, Lavagem.Data, 103) AS Data\r\n ,CONVERT(VARCHAR, Lavagem.Horario, 8) AS Horario\r\n ,STRING_AGG(Lavador.Nome, \u0027,\u0027) AS Lavadores\r\n ,STRING_AGG(convert(nvarchar(50),Lavador.LavadorId), \u0027,\u0027) AS LavadoresId\r\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\r\n ,Motorista.Nome\r\nFROM dbo.LavadoresLavagem\r\nLEFT OUTER JOIN dbo.Lavador\r\n  ON LavadoresLavagem.LavadorId = Lavador.LavadorId\r\nRIGHT OUTER JOIN dbo.Lavagem\r\n  ON LavadoresLavagem.LavagemId = Lavagem.LavagemId\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Lavagem.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nLEFT OUTER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nLEFT OUTER JOIN dbo.Motorista\r\n  ON Lavagem.MotoristaId = Motorista.MotoristaId\r\nGROUP BY Lavagem.LavagemId\r\n        ,Lavagem.VeiculoId\r\n        ,Lavagem.MotoristaId\r\n        ,Lavagem.Data\r\n        ,Lavagem.Horario\r\n        ,Veiculo.Placa\r\n        ,MarcaVeiculo.DescricaoMarca\r\n        ,ModeloVeiculo.DescricaoModelo\r\n        ,Motorista.Nome",
                      "ViewAlertasAtivos":  "CREATE OR ALTER VIEW dbo.ViewAlertasAtivos \r\nAS SELECT \r\n    a.AlertasFrotiXId,\r\n    a.Titulo,\r\n    a.Descricao,\r\n    a.TipoAlerta,\r\n    CASE a.TipoAlerta\r\n        WHEN 1 THEN \u0027Agendamento\u0027\r\n        WHEN 2 THEN \u0027Manutenção\u0027\r\n        WHEN 3 THEN \u0027Motorista\u0027\r\n        WHEN 4 THEN \u0027Veículo\u0027\r\n        WHEN 5 THEN \u0027Anúncio\u0027\r\n        ELSE \u0027Diversos\u0027\r\n    END AS TipoAlertaTexto,\r\n    a.Prioridade,\r\n    CASE a.Prioridade\r\n        WHEN 1 THEN \u0027Baixa\u0027\r\n        WHEN 2 THEN \u0027Média\u0027\r\n        WHEN 3 THEN \u0027Alta\u0027\r\n    END AS PrioridadeTexto,\r\n    a.DataInsercao,\r\n    a.DataExibicao,\r\n    a.DataExpiracao,\r\n    a.ViagemId,\r\n    a.ManutencaoId,\r\n    a.MotoristaId,\r\n    a.VeiculoId,\r\n    a.TipoExibicao,\r\n    a.HorarioExibicao,\r\n    a.UsuarioCriadorId,\r\n    a.Ativo,\r\n    au.UsuarioId,\r\n    au.Lido,\r\n    au.DataLeitura,\r\n    au.Notificado,\r\n    u.UserName,\r\n    u.Email\r\nFROM AlertasFrotiX a\r\nINNER JOIN AlertasUsuario au ON a.AlertasFrotiXId = au.AlertasFrotiXId\r\nINNER JOIN AspNetUsers u ON au.UsuarioId = u.Id\r\nWHERE a.Ativo = 1",
                      "ViewCustosVeiculos":  "CREATE OR ALTER VIEW dbo.ViewCustosVeiculos \r\nAS SELECT\r\n  ItemVeiculoContrato.Descricao\r\n ,FORMAT(SUM(Viagem.CustoCombustivel), \u0027N2\u0027, \u0027pt-BR\u0027) AS Combustivel\r\n ,FORMAT(SUM(Viagem.CustoMotorista), \u0027N2\u0027, \u0027pt-BR\u0027) AS Motorista\r\n ,FORMAT(SUM(Viagem.CustoVeiculo), \u0027N2\u0027, \u0027pt-BR\u0027) AS Veiculo\r\n ,FORMAT(SUM(Viagem.KmFinal - Viagem.KmInicial), \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\r\nFROM dbo.Viagem\r\nLEFT OUTER JOIN dbo.Veiculo\r\n  ON Viagem.VeiculoId = Veiculo.VeiculoId\r\nLEFT OUTER JOIN dbo.ItemVeiculoContrato\r\n  ON Veiculo.ItemVeiculoId = ItemVeiculoContrato.ItemVeiculoId\r\nWHERE Viagem.Status = \u0027Realizada\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\r\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\r\nAND MONTH(Viagem.DataInicial) = 12\r\nGROUP BY ItemVeiculoContrato.Descricao",
                      "ViewCustosTemporaria":  "CREATE OR ALTER VIEW dbo.ViewCustosTemporaria \r\nAS SELECT\r\n Viagem.NoFichaVistoria\r\n ,SetorSolicitante.Sigla\r\n ,SetorSolicitante.Nome\r\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS \u0027Data Inicial\u0027\r\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS \u0027Data Final\u0027\r\n ,FORMAT((Viagem.HoraFim - Viagem.HoraInicio), \u0027HH:mm\u0027) AS Duração\r\n ,(Viagem.KmFinal - Viagem.KmInicial) AS Quilometragem\r\n ,CONVERT(DECIMAL(10,2),Viagem.CustoCombustivel) AS Combustivel\r\n ,CONVERT(DECIMAL(10,2),Viagem.CustoMotorista) AS Motorista\r\n ,Viagem.Finalidade \r\nFROM dbo.Viagem\r\nINNER JOIN dbo.SetorSolicitante\r\n  ON Viagem.SetorSolicitanteId = SetorSolicitante.SetorSolicitanteId\r\nWHERE SetorSolicitante.Sigla = \u0027CTRAN\u0027 AND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027 AND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027",
                      "ViewMotoristas_Ultimo":  "CREATE OR ALTER VIEW dbo.ViewMotoristas_Ultimo \r\nAS SELECT TOP 10000\r\n  Motorista.MotoristaId\r\n ,Motorista.Nome\r\n ,Motorista.Ponto\r\n ,Motorista.CNH\r\n ,Motorista.CategoriaCNH\r\n ,Motorista.Celular01\r\n ,Motorista.Status\r\n ,Unidade.Sigla\r\n ,Contrato.AnoContrato\r\n ,Contrato.NumeroContrato\r\n ,Fornecedor.DescricaoFornecedor\r\n ,AspNetUsers.NomeCompleto\r\n ,Motorista.DataAlteracao\r\n ,Motorista.ContratoId\r\n ,Motorista.TipoCondutor \r\n ,Motorista.Foto\r\n ,Motorista.EfetivoFerista   \r\n,Motorista.Nome + \u0027 (\u0027 + Motorista.TipoCondutor + \u0027)\u0027 AS MotoristaCondutor\r\n ,ROW_NUMBER() OVER (ORDER BY Motorista.Nome) AS RowNum\r\nFROM dbo.Motorista\r\nLEFT OUTER JOIN dbo.Contrato\r\n  ON Motorista.ContratoId = Contrato.ContratoId\r\nLEFT OUTER JOIN dbo.Fornecedor\r\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\r\nINNER JOIN dbo.AspNetUsers\r\n  ON Motorista.UsuarioIdAlteracao = AspNetUsers.Id\r\nLEFT OUTER JOIN dbo.Unidade\r\n  ON Motorista.UnidadeId = Unidade.UnidadeId\r\nORDER BY Motorista.Nome",
                      "ViewViagensAgendaTodosMeses":  "CREATE OR ALTER VIEW dbo.ViewViagensAgendaTodosMeses \r\nAS SELECT\r\n  Viagem.DataInicial\r\n ,Viagem.HoraInicio\r\n ,Viagem.MotoristaId\r\n ,Viagem.VeiculoId\r\n ,Viagem.Descricao\r\n ,Viagem.Status\r\n ,Viagem.ViagemId\r\n ,Viagem.Finalidade\r\n ,Viagem.StatusAgendamento\r\n ,Viagem.NomeEvento\r\nFROM dbo.Viagem",
                      "ViewAbastecimentos":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentos \r\nAS SELECT TOP (100) PERCENT\r\n  Abastecimento.AbastecimentoId\r\n ,Abastecimento.DataHora\r\n ,CONVERT(VARCHAR, Abastecimento.DataHora, 103) AS Data\r\n ,FORMAT(Abastecimento.DataHora, \u0027HH:mm\u0027) AS Hora\r\n ,Veiculo.Placa\r\n ,MarcaVeiculo.DescricaoMarca + \u0027 / \u0027 + ModeloVeiculo.DescricaoModelo AS TipoVeiculo\r\n ,Motorista.Nome\r\n ,Combustivel.Descricao AS TipoCombustivel\r\n ,Unidade.Sigla\r\n ,FORMAT(Abastecimento.Litros, \u0027N2\u0027) AS Litros\r\n ,FORMAT(Abastecimento.ValorUnitario, \u0027N2\u0027) AS ValorUnitario\r\n ,FORMAT(Abastecimento.Litros * Abastecimento.ValorUnitario, \u0027N2\u0027) AS ValorTotal\r\n ,FORMAT(Abastecimento.KmRodado / Abastecimento.Litros, \u0027N2\u0027) AS Consumo\r\n ,ViewMediaConsumo.ConsumoGeral\r\n ,Abastecimento.KmRodado\r\n ,Veiculo.VeiculoId\r\n ,Combustivel.CombustivelId\r\n ,Unidade.UnidadeId\r\n ,Motorista.MotoristaId\r\n  ,ROW_NUMBER() OVER (ORDER BY Abastecimento.DataHora DESC) AS RowNum\r\n ,Motorista.Nome + \u0027 (\u0027 + Motorista.TipoCondutor + \u0027)\u0027 AS MotoristaCondutor\r\nFROM dbo.Abastecimento\r\nINNER JOIN dbo.Veiculo\r\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\r\nINNER JOIN dbo.ModeloVeiculo\r\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\r\nINNER JOIN dbo.MarcaVeiculo\r\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\r\nINNER JOIN dbo.Motorista\r\n  ON Abastecimento.MotoristaId = Motorista.MotoristaId\r\nINNER JOIN dbo.Combustivel\r\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\r\nINNER JOIN dbo.Unidade\r\n  ON Motorista.UnidadeId = Unidade.UnidadeId\r\nLEFT OUTER JOIN dbo.ViewMediaConsumo\r\n  ON ViewMediaConsumo.VeiculoId = Abastecimento.VeiculoId\r\nLEFT OUTER JOIN dbo.CondutorApoio\r\n  ON CondutorApoio.CondutorId = Motorista.CondutorId"
                  },
    "ProdTables":  {
                       "tr_String":  "CREATE TABLE dbo.tr_String (\r\n  Id varchar(255) NOT NULL,\r\n  Value nvarchar(4000) NOT NULL,\r\n  CONSTRAINT pk_strng_9912B79F PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                       "sysdiagrams":  "CREATE TABLE dbo.sysdiagrams (\r\n  name sysname NOT NULL,\r\n  principal_id int NOT NULL,\r\n  diagram_id int IDENTITY,\r\n  version int NULL,\r\n  definition varbinary(max) NULL,\r\n  PRIMARY KEY CLUSTERED (diagram_id),\r\n  CONSTRAINT UK_principal_name UNIQUE (principal_id, name)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "MediaCombustivel":  "CREATE TABLE dbo.MediaCombustivel (\r\n  NotaFiscalId uniqueidentifier NOT NULL,\r\n  CombustivelId uniqueidentifier NOT NULL,\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  PrecoMedio float NULL,\r\n  CONSTRAINT PK_PrecoCombustivel PRIMARY KEY CLUSTERED (NotaFiscalId, CombustivelId, Ano, Mes)\r\n)\r\nON [PRIMARY]",
                       "OcorrenciaViagem":  "CREATE TABLE dbo.OcorrenciaViagem (\r\n  OcorrenciaViagemId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  ViagemId uniqueidentifier NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  Resumo nvarchar(200) NOT NULL DEFAULT (\u0027\u0027),\r\n  Descricao nvarchar(max) NOT NULL DEFAULT (\u0027\u0027),\r\n  ImagemOcorrencia nvarchar(max) NOT NULL DEFAULT (\u0027\u0027),\r\n  Status nvarchar(20) NOT NULL DEFAULT (\u0027Aberta\u0027),\r\n  DataCriacao datetime NOT NULL DEFAULT (getdate()),\r\n  DataBaixa datetime NULL,\r\n  UsuarioCriacao nvarchar(100) NOT NULL DEFAULT (\u0027\u0027),\r\n  UsuarioBaixa nvarchar(100) NOT NULL DEFAULT (\u0027\u0027),\r\n  ItemManutencaoId uniqueidentifier NULL,\r\n  Observacoes nvarchar(500) NOT NULL DEFAULT (\u0027\u0027),\r\n  StatusOcorrencia bit NULL DEFAULT (1),\r\n  Solucao varchar(500) NULL DEFAULT (\u0027\u0027),\r\n  CONSTRAINT PK_OcorrenciaViagem PRIMARY KEY CLUSTERED (OcorrenciaViagemId),\r\n  CONSTRAINT CK_OcorrenciaViagem_Status CHECK ([Status]=\u0027Pendente\u0027 OR [Status]=\u0027Baixada\u0027 OR [Status]=\u0027Aberta\u0027)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "LotacaoMotorista":  "CREATE TABLE dbo.LotacaoMotorista (\r\n  LotacaoMotoristaId uniqueidentifier NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  UnidadeId uniqueidentifier NULL,\r\n  DataInicio date NULL,\r\n  DataFim date NULL,\r\n  Lotado bit NULL,\r\n  Motivo varchar(50) NULL,\r\n  MotoristaCoberturaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_LotacaoMotorista_LotacaoMotoristaId PRIMARY KEY CLUSTERED (LotacaoMotoristaId)\r\n)\r\nON [PRIMARY]",
                       "Viagem":  "CREATE TABLE dbo.Viagem (\r\n  ViagemId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataInicial datetime NULL,\r\n  DataFinal datetime NULL,\r\n  HoraInicio datetime NULL,\r\n  HoraFim datetime NULL,\r\n  CombustivelInicial varchar(50) NULL CONSTRAINT DF_Viagem_CombustivelInicial DEFAULT (\u0027\u0027),\r\n  CombustivelFinal varchar(50) NULL CONSTRAINT DF_Viagem_CombustivelFinal DEFAULT (\u0027\u0027),\r\n  KmAtual int NOT NULL DEFAULT (0),\r\n  KmInicial int NULL CONSTRAINT DF_Viagem_KmInicial DEFAULT (0),\r\n  KmFinal int NULL CONSTRAINT DF_Viagem_KmFinal DEFAULT (0),\r\n  Descricao varchar(max) NULL CONSTRAINT DF_Viagem_Descricao DEFAULT (\u0027\u0027),\r\n  RamalRequisitante varchar(50) NULL CONSTRAINT DF_Viagem_RamalRequisitante DEFAULT (\u0027\u0027),\r\n  Finalidade varchar(200) NULL CONSTRAINT DF_Viagem_Finalidade DEFAULT (\u0027\u0027),\r\n  NoFichaVistoria int NULL CONSTRAINT DF_Viagem_NoFichaVistoria DEFAULT (0),\r\n  Status varchar(50) NULL CONSTRAINT DF_Viagem_Status DEFAULT (\u0027\u0027),\r\n  RequisitanteId uniqueidentifier NULL,\r\n  SetorSolicitanteId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  UsuarioIdCriacao nvarchar(450) NULL,\r\n  DataCriacao datetime NULL,\r\n  UsuarioIdFinalizacao varchar(100) NULL,\r\n  DataFinalizacao datetime NULL,\r\n  ResumoOcorrencia varchar(100) NULL CONSTRAINT DF_Viagem_ResumoOcorrencia DEFAULT (\u0027\u0027),\r\n  DescricaoOcorrencia varchar(max) NULL CONSTRAINT DF_Viagem_DescricaoOcorrencia DEFAULT (\u0027\u0027),\r\n  StatusOcorrencia varchar(50) NULL CONSTRAINT DF_Viagem_StatusOcorrencia DEFAULT (\u0027\u0027),\r\n  StatusDocumento varchar(50) NULL CONSTRAINT DF_Viagem_StatusDocumento DEFAULT (\u0027\u0027),\r\n  StatusCartaoAbastecimento varchar(50) NULL CONSTRAINT DF_Viagem_StatusCartaoAbastecimento DEFAULT (\u0027\u0027),\r\n  StatusAgendamento bit NULL DEFAULT (0),\r\n  Origem varchar(max) NULL CONSTRAINT DF_Viagem_Origem DEFAULT (\u0027\u0027),\r\n  Destino varchar(max) NULL CONSTRAINT DF_Viagem_Destino DEFAULT (\u0027\u0027),\r\n  DescricaoSemFormato varchar(max) NULL CONSTRAINT DF_Viagem_DescricaoSemFormato DEFAULT (\u0027\u0027),\r\n  FichaVistoria varbinary(max) NULL,\r\n  CustoCombustivel float NULL CONSTRAINT DF_Viagem_CustoCombustivel DEFAULT (0),\r\n  CustoMotorista float NULL CONSTRAINT DF_Viagem_CustoMotorista DEFAULT (0),\r\n  CustoVeiculo float NULL CONSTRAINT DF_Viagem_CustoVeiculo DEFAULT (0),\r\n  CustoOperador float NULL CONSTRAINT DF_Viagem_CustoOperador DEFAULT (0),\r\n  CustoLavador float NULL CONSTRAINT DF_Viagem_CustoLavador DEFAULT (0),\r\n  Minutos int NULL CONSTRAINT DF_Viagem_Minutos DEFAULT (0),\r\n  NomeEvento varchar(max) NULL CONSTRAINT DF_Viagem_NomeEvento DEFAULT (\u0027\u0027),\r\n  DescricaoSolucaoOcorrencia varchar(max) NULL CONSTRAINT DF_Viagem_DescricaoSolucaoOcorrencia DEFAULT (\u0027\u0027),\r\n  ImagemOcorrencia varchar(500) NULL DEFAULT (\u0027semimagem.jpg\u0027),\r\n  ItemManutencaoId uniqueidentifier NULL,\r\n  EventoId uniqueidentifier NULL,\r\n  FoiAgendamento bit NULL DEFAULT (0),\r\n  Recorrente varchar(50) NULL CONSTRAINT DF_Viagem_Recorrente DEFAULT (\u0027\u0027),\r\n  RecorrenciaViagemId uniqueidentifier NULL,\r\n  Intervalo varchar(50) NULL CONSTRAINT DF_Viagem_Intervalo DEFAULT (\u0027\u0027),\r\n  DataFinalRecorrencia date NULL,\r\n  Monday bit NULL CONSTRAINT DF_Viagem_Monday DEFAULT (0),\r\n  Tuesday bit NULL CONSTRAINT DF_Viagem_Tuesday DEFAULT (0),\r\n  Wednesday bit NULL CONSTRAINT DF_Viagem_Wednesday DEFAULT (0),\r\n  Thursday bit NULL CONSTRAINT DF_Viagem_Thursday DEFAULT (0),\r\n  Friday bit NULL CONSTRAINT DF_Viagem_Friday DEFAULT (0),\r\n  Saturday bit NULL CONSTRAINT DF_Viagem_Saturday DEFAULT (0),\r\n  Sunday bit NULL CONSTRAINT DF_Viagem_Sunday DEFAULT (0),\r\n  AgendamentoTMP varchar(max) NULL CONSTRAINT DF_Viagem_AgendamentoTMP DEFAULT (\u0027\u0027),\r\n  DatasSelecionadas varchar(50) NULL CONSTRAINT DF_Viagem_DatasSelecionadas DEFAULT (\u0027\u0027),\r\n  DiaMesRecorrencia int NULL CONSTRAINT DF_Viagem_DiaMesRecorrencia DEFAULT (0),\r\n  UsuarioIdAgendamento varchar(100) NULL,\r\n  DataAgendamento datetime NULL,\r\n  DescricaoViagemWord varbinary(max) NULL,\r\n  DescricaoViagemImagem varbinary(max) NULL,\r\n  UsuarioIdCancelamento varchar(100) NULL,\r\n  DataCancelamento datetime NULL,\r\n  Rubrica nvarchar(max) NULL CONSTRAINT DF_Viagem_Rubrica DEFAULT (\u0027\u0027),\r\n  DanoAvaria varchar(max) NULL CONSTRAINT DF_Viagem_DanoAvaria DEFAULT (\u0027\u0027),\r\n  StatusDocumentoFinal varchar(50) NULL CONSTRAINT DF_Viagem_StatusDocumentoFinal DEFAULT (\u0027\u0027),\r\n  StatusCartaoAbastecimentoFinal varchar(50) NULL CONSTRAINT DF_Viagem_StatusCartaoAbastecimentoFinal DEFAULT (\u0027\u0027),\r\n  RubricaFinal nvarchar(max) NULL CONSTRAINT DF_Viagem_RubricaFinal DEFAULT (\u0027\u0027),\r\n  DanoAvariaFinal varchar(max) NULL CONSTRAINT DF_Viagem_DanoAvariaFinal DEFAULT (\u0027\u0027),\r\n  FotosBase64 varbinary(max) NULL,\r\n  VideosBase64 varbinary(max) NULL,\r\n  FotosFinaisBase64 varbinary(max) NULL,\r\n  VideosFinaisBase64 varbinary(max) NULL,\r\n  VistoriadorInicialId varchar(50) NULL,\r\n  VistoriadorFinalId varchar(50) NULL,\r\n  CintaEntregue bit NULL DEFAULT (0),\r\n  CintaDevolvida bit NULL DEFAULT (0),\r\n  DataInicialNormalizada datetime2 NULL,\r\n  DataFinalNormalizada datetime2 NULL,\r\n  HoraInicioNormalizada time NULL,\r\n  HoraFimNormalizada time NULL,\r\n  MinutosNormalizado int NULL,\r\n  KmInicialNormalizado int NULL,\r\n  KmFinalNormalizado int NULL,\r\n  FoiNormalizada bit NULL DEFAULT (0),\r\n  TipoNormalizacao nvarchar(500) NULL,\r\n  DataNormalizacao datetime2 NULL,\r\n  KmRodadoNormalizado int NULL,\r\n  KmRodado int NULL,\r\n  Id int IDENTITY,\r\n  TabletEntregue bit NULL DEFAULT (0),\r\n  TabletDevolvido bit NULL DEFAULT (0),\r\n  CONSTRAINT PK_Viagem_ViagemId PRIMARY KEY CLUSTERED (ViagemId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "MovimentacaoEmpenho":  "CREATE TABLE dbo.MovimentacaoEmpenho (\r\n  MovimentacaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(100) NULL,\r\n  TipoMovimentacao char(1) NULL,\r\n  Valor float NULL,\r\n  DataMovimentacao date NULL,\r\n  EmpenhoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_table1_MovimentacaoId PRIMARY KEY CLUSTERED (MovimentacaoId)\r\n)\r\nON [PRIMARY]",
                       "AspNetRoleClaims":  "CREATE TABLE dbo.AspNetRoleClaims (\r\n  Id int NOT NULL,\r\n  RoleId nvarchar(450) NOT NULL,\r\n  ClaimType nvarchar(max) NULL,\r\n  ClaimValue nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Patrimonio":  "CREATE TABLE dbo.Patrimonio (\r\n  PatrimonioId uniqueidentifier NOT NULL,\r\n  NPR varchar(50) NOT NULL,\r\n  Marca varchar(50) NULL,\r\n  Modelo varchar(50) NULL,\r\n  Descricao varchar(100) NOT NULL,\r\n  NumeroSerie varchar(50) NULL,\r\n  SecaoId uniqueidentifier NOT NULL,\r\n  Situacao varchar(50) NOT NULL,\r\n  SetorId uniqueidentifier NOT NULL,\r\n  LocalizacaoAtual varchar(150) NOT NULL,\r\n  Status bit NULL,\r\n  ImageUrl varchar(500) NULL,\r\n  Imagem varbinary(max) NULL,\r\n  StatusConferencia int NULL,\r\n  LocalizacaoConferencia varchar(150) NULL,\r\n  SetorConferenciaId uniqueidentifier NULL,\r\n  SecaoConferenciaId uniqueidentifier NULL,\r\n  DataEntrada date NULL,\r\n  DataSaida date NULL,\r\n  CONSTRAINT PK_Patrimonio_PatrimonioId PRIMARY KEY CLUSTERED (PatrimonioId),\r\n  CONSTRAINT KEY_PatrimonioNPR UNIQUE (NPR)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "WhatsAppFilaMensagens":  "CREATE TABLE dbo.WhatsAppFilaMensagens (\r\n  Id int IDENTITY,\r\n  MensagemId int NOT NULL,\r\n  Status int NOT NULL DEFAULT (0),\r\n  Prioridade int NOT NULL DEFAULT (5),\r\n  DataAgendamento datetime NOT NULL,\r\n  DataProcessamento datetime NULL,\r\n  Tentativas int NULL DEFAULT (0),\r\n  ErroUltimaTentativa nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Combustivel":  "CREATE TABLE dbo.Combustivel (\r\n  CombustivelId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(50) NOT NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_Combustiveis_id_combustivel PRIMARY KEY CLUSTERED (CombustivelId)\r\n)\r\nON [PRIMARY]",
                       "WhatsAppInstancias":  "CREATE TABLE dbo.WhatsAppInstancias (\r\n  Id int IDENTITY,\r\n  NomeInstancia nvarchar(100) NOT NULL,\r\n  NumeroConectado nvarchar(50) NULL,\r\n  Status int NOT NULL DEFAULT (0),\r\n  DataConexao datetime NULL,\r\n  DataCriacao datetime NOT NULL DEFAULT (getdate()),\r\n  UltimaVerificacao datetime NULL,\r\n  QRCode nvarchar(max) NULL,\r\n  Ativa bit NOT NULL DEFAULT (1),\r\n  Principal bit NOT NULL DEFAULT (0),\r\n  ConfiguracoesJson nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  UNIQUE (NomeInstancia)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Contatos":  "CREATE TABLE dbo.Contatos (\r\n  ContatoId uniqueidentifier NOT NULL,\r\n  Nome nvarchar(200) NOT NULL,\r\n  Celular nvarchar(20) NULL,\r\n  Telefone nvarchar(20) NULL,\r\n  Email nvarchar(200) NULL,\r\n  Cargo nvarchar(100) NULL,\r\n  Departamento nvarchar(100) NULL,\r\n  Ativo bit NOT NULL DEFAULT (1),\r\n  DataCadastro datetime NOT NULL DEFAULT (getdate()),\r\n  DataAtualizacao datetime NULL,\r\n  Observacoes nvarchar(500) NULL,\r\n  RecebeWhatsApp bit NOT NULL DEFAULT (1),\r\n  OptOutWhatsApp bit NOT NULL DEFAULT (0),\r\n  PRIMARY KEY CLUSTERED (ContatoId)\r\n)\r\nON [PRIMARY]",
                       "NotaFiscal":  "CREATE TABLE dbo.NotaFiscal (\r\n  NotaFiscalId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumeroNF int NULL,\r\n  DataEmissao date NULL,\r\n  ValorNF float NULL,\r\n  TipoNF varchar(20) NULL,\r\n  Objeto varchar(100) NULL,\r\n  ValorGlosa float NULL,\r\n  MotivoGlosa varchar(150) NULL,\r\n  EmpenhoId uniqueidentifier NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  AnoReferencia int NULL,\r\n  MesReferencia int NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_NotaFiscal_NotaFiscaId PRIMARY KEY CLUSTERED (NotaFiscalId)\r\n)\r\nON [PRIMARY]",
                       "RepactuacaoContrato":  "CREATE TABLE dbo.RepactuacaoContrato (\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataRepactuacao date NULL,\r\n  Descricao varchar(100) NULL,\r\n  Valor float NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  Vigencia int NULL,\r\n  Prorrogacao int NULL,\r\n  Percentual float NULL,\r\n  CONSTRAINT PK_RepactuacaoItemVeiculo_RepactuacaoItemVeiculoId PRIMARY KEY CLUSTERED (RepactuacaoContratoId)\r\n)\r\nON [PRIMARY]",
                       "AtaRegistroPrecos":  "CREATE TABLE dbo.AtaRegistroPrecos (\r\n  AtaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumeroAta varchar(50) NULL,\r\n  AnoAta varchar(50) NULL,\r\n  AnoProcesso int NULL,\r\n  NumeroProcesso varchar(50) NULL,\r\n  Objeto varchar(max) NULL,\r\n  Valor float NULL,\r\n  DataInicio date NULL,\r\n  DataFim date NULL,\r\n  FornecedorId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  DataAlteracao datetime NULL,\r\n  CONSTRAINT PK_AtaRegistroPrecos_ContratoId PRIMARY KEY CLUSTERED (AtaId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "EncarregadoContrato":  "CREATE TABLE dbo.EncarregadoContrato (\r\n  EncarregadoId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_EncarregadoContrato PRIMARY KEY CLUSTERED (EncarregadoId, ContratoId)\r\n)\r\nON [PRIMARY]",
                       "Contrato":  "CREATE TABLE dbo.Contrato (\r\n  ContratoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumeroContrato varchar(10) NULL,\r\n  AnoContrato varchar(10) NULL,\r\n  Vigencia int NULL,\r\n  Prorrogacao int NULL,\r\n  AnoProcesso int NULL,\r\n  NumeroProcesso varchar(50) NULL,\r\n  Objeto varchar(max) NULL,\r\n  Valor float NULL,\r\n  TipoContrato varchar(50) NULL,\r\n  DataInicio date NULL,\r\n  DataFim date NULL,\r\n  ContratoOperadores bit NULL DEFAULT (0),\r\n  ContratoMotoristas bit NULL DEFAULT (0),\r\n  ContratoLavadores bit NULL DEFAULT (0),\r\n  FornecedorId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  DataAlteracao datetime NULL,\r\n  CustoMensalOperador float NULL,\r\n  CustoMensalMotorista float NULL,\r\n  CustoMensalLavador float NULL,\r\n  QuantidadeOperador int NULL,\r\n  QuantidadeMotorista int NULL,\r\n  QuantidadeLavador int NULL,\r\n  CustoMensalEncarregado float NULL,\r\n  QuantidadeEncarregado int NULL,\r\n  ContratoEncarregados bit NULL,\r\n  DataRepactuacao date NULL,\r\n  CONSTRAINT PK_Contrato_ContratoId PRIMARY KEY CLUSTERED (ContratoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "DocumentoContrato":  "CREATE TABLE dbo.DocumentoContrato (\r\n  DocumentoContratoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  TipoDocumento varchar(50) NULL,\r\n  Descricao varchar(150) NULL,\r\n  DocumentoPDF varbinary(max) NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_DocumentoContrato_DocumentoContratoId PRIMARY KEY CLUSTERED (DocumentoContratoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "LavadorContrato":  "CREATE TABLE dbo.LavadorContrato (\r\n  LavadorId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_LavadorContrato PRIMARY KEY CLUSTERED (LavadorId, ContratoId)\r\n)\r\nON [PRIMARY]",
                       "RepactuacaoAta":  "CREATE TABLE dbo.RepactuacaoAta (\r\n  RepactuacaoAtaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataRepactuacao date NULL,\r\n  Descricao varchar(100) NULL,\r\n  Valor float NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_RepactuacaoItemVeiculo_Ata_RepactuacaoItemVeiculoId PRIMARY KEY CLUSTERED (RepactuacaoAtaId)\r\n)\r\nON [PRIMARY]",
                       "AspNetUserRoles":  "CREATE TABLE dbo.AspNetUserRoles (\r\n  UserId nvarchar(450) NOT NULL,\r\n  RoleId nvarchar(450) NOT NULL\r\n)\r\nON [PRIMARY]",
                       "Unidade":  "CREATE TABLE dbo.Unidade (\r\n  UnidadeId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Sigla varchar(50) NULL,\r\n  Descricao varchar(100) NOT NULL,\r\n  PontoPrimeiroContato varchar(50) NULL,\r\n  PrimeiroContato varchar(100) NULL,\r\n  PrimeiroRamal bigint NULL,\r\n  PontoSegundoContato varchar(50) NULL,\r\n  SegundoContato varchar(100) NULL,\r\n  SegundoRamal bigint NULL,\r\n  PontoTerceiroContato varchar(50) NULL,\r\n  TerceiroContato varchar(100) NULL,\r\n  TerceiroRamal bigint NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  Categoria varchar(100) NULL,\r\n  QtdMotoristas int NULL DEFAULT (0),\r\n  CONSTRAINT PK_Unidades_id_unidade PRIMARY KEY CLUSTERED (UnidadeId)\r\n)\r\nON [PRIMARY]",
                       "AspNetUserLogins":  "CREATE TABLE dbo.AspNetUserLogins (\r\n  LoginProvider nvarchar(450) NOT NULL,\r\n  ProviderKey nvarchar(450) NOT NULL,\r\n  ProviderDisplayName nvarchar(max) NULL,\r\n  UserId nvarchar(450) NOT NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "tr_AppLock":  "CREATE TABLE dbo.tr_AppLock (\r\n  Id nvarchar(255) NOT NULL,\r\n  CONSTRAINT PK_tr_AppLock PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                       "WhatsAppWebhookLogs":  "CREATE TABLE dbo.WhatsAppWebhookLogs (\r\n  Id int IDENTITY,\r\n  Evento nvarchar(100) NULL,\r\n  Payload nvarchar(max) NULL,\r\n  DataRecebimento datetime NOT NULL DEFAULT (getdate()),\r\n  Processado bit NULL DEFAULT (0),\r\n  ErroProcessamento nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "AlertasFrotiX":  "CREATE TABLE dbo.AlertasFrotiX (\r\n  AlertasFrotiXId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Titulo nvarchar(200) NOT NULL,\r\n  Descricao nvarchar(1000) NOT NULL,\r\n  TipoAlerta int NOT NULL,\r\n  Prioridade int NOT NULL,\r\n  DataInsercao datetime2 NOT NULL DEFAULT (getdate()),\r\n  DataExibicao datetime2 NULL,\r\n  DataExpiracao datetime2 NULL,\r\n  ViagemId uniqueidentifier NULL,\r\n  ManutencaoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  TipoExibicao int NOT NULL,\r\n  HorarioExibicao time NULL,\r\n  UsuarioCriadorId nvarchar(450) NOT NULL,\r\n  Ativo bit NOT NULL DEFAULT (1),\r\n  DataDesativacao datetime NULL,\r\n  DesativadoPor varchar(100) NULL CONSTRAINT DF_AlertasFrotiX_DesativadoPor2 DEFAULT (\u0027\u0027),\r\n  MotivoDesativacao varchar(500) NULL CONSTRAINT DF_AlertasFrotiX_MotivoDesativacao2 DEFAULT (\u0027\u0027),\r\n  Recorrente char(1) NULL DEFAULT (\u0027N\u0027),\r\n  Intervalo char(1) NULL,\r\n  Monday bit NULL DEFAULT (0),\r\n  Tuesday bit NULL DEFAULT (0),\r\n  Wednesday bit NULL DEFAULT (0),\r\n  Thursday bit NULL DEFAULT (0),\r\n  Friday bit NULL DEFAULT (0),\r\n  Saturday bit NULL DEFAULT (0),\r\n  Sunday bit NULL DEFAULT (0),\r\n  DiaMesRecorrencia int NULL CONSTRAINT DF_AlertasFrotiX_DiaMesRecorrencia2 DEFAULT (0),\r\n  DataFinalRecorrencia datetime2 NULL,\r\n  DatasSelecionadas nvarchar(max) NULL CONSTRAINT DF_AlertasFrotiX_DatasSelecionadas DEFAULT (\u0027\u0027),\r\n  RecorrenciaAlertaId uniqueidentifier NULL,\r\n  DiasSemana varchar(500) NULL CONSTRAINT DF_AlertasFrotiX_DiasSemana DEFAULT (\u0027\u0027),\r\n  CONSTRAINT PK_AlertasFrotiX PRIMARY KEY CLUSTERED (AlertasFrotiXId),\r\n  CONSTRAINT CK_AlertasFrotiX_DiaMes CHECK ([DiaMesRecorrencia]\u003e=(1) AND [DiaMesRecorrencia]\u003c=(31) OR [DiaMesRecorrencia] IS NULL),\r\n  CONSTRAINT CK_AlertasFrotiX_Intervalo CHECK ([Intervalo]=\u0027V\u0027 OR [Intervalo]=\u0027M\u0027 OR [Intervalo]=\u0027Q\u0027 OR [Intervalo]=\u0027S\u0027 OR [Intervalo]=\u0027D\u0027 OR [Intervalo] IS NULL),\r\n  CONSTRAINT CK_AlertasFrotiX_Recorrente CHECK ([Recorrente]=\u0027N\u0027 OR [Recorrente]=\u0027S\u0027)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "VeiculoAta":  "CREATE TABLE dbo.VeiculoAta (\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  AtaId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_AtaContrato PRIMARY KEY CLUSTERED (VeiculoId, AtaId)\r\n)\r\nON [PRIMARY]",
                       "TipoMulta":  "CREATE TABLE dbo.TipoMulta (\r\n  TipoMultaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Artigo varchar(100) NULL,\r\n  Descricao varchar(max) NULL,\r\n  Infracao varchar(50) NULL,\r\n  CodigoDenatran varchar(50) NULL,\r\n  Desdobramento varchar(50) NULL,\r\n  CONSTRAINT PK_table1_TipoMultaId PRIMARY KEY CLUSTERED (TipoMultaId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "OrgaoAutuante":  "CREATE TABLE dbo.OrgaoAutuante (\r\n  OrgaoAutuanteId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Sigla varchar(50) NOT NULL,\r\n  Nome varchar(100) NULL,\r\n  CONSTRAINT PK_Orgaos_emissores_id_orgao PRIMARY KEY CLUSTERED (OrgaoAutuanteId)\r\n)\r\nON [PRIMARY]",
                       "CustoMensalItensContrato":  "CREATE TABLE dbo.CustoMensalItensContrato (\r\n  NotaFiscalId uniqueidentifier NOT NULL,\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  CustoMensalOperador float NULL,\r\n  CustoMensalMotorista float NULL,\r\n  CustoMensalLavador float NULL,\r\n  CONSTRAINT PK_ValorMensalItensContrato PRIMARY KEY CLUSTERED (NotaFiscalId, Ano, Mes)\r\n)\r\nON [PRIMARY]",
                       "Abastecimento":  "CREATE TABLE dbo.Abastecimento (\r\n  AbastecimentoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  CombustivelId uniqueidentifier NOT NULL,\r\n  MotoristaId uniqueidentifier NOT NULL,\r\n  Litros float NOT NULL,\r\n  ValorUnitario float NOT NULL,\r\n  DataHora datetime NOT NULL,\r\n  KmRodado int NOT NULL,\r\n  Hodometro int NOT NULL,\r\n  AutorizacaoQCard int NULL DEFAULT (0),\r\n  KmRodadoNormalizado int NULL,\r\n  LitrosNormalizado float NULL,\r\n  ConsumoCalculado decimal(18, 2) NULL,\r\n  ConsumoNormalizado decimal(18, 2) NULL,\r\n  EhOutlier bit NULL DEFAULT (0),\r\n  CONSTRAINT PK_Abastecimento_AbastecimentoId PRIMARY KEY CLUSTERED (AbastecimentoId)\r\n)\r\nON [PRIMARY]",
                       "Requisitante":  "CREATE TABLE dbo.Requisitante (\r\n  RequisitanteId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NOT NULL,\r\n  Ponto varchar(50) NOT NULL,\r\n  Ramal int NULL,\r\n  Email varchar(100) NULL,\r\n  SetorSolicitanteId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(50) NOT NULL,\r\n  DataAlteracao datetime NULL,\r\n  CONSTRAINT PK_Requisitantes_id_requisitante PRIMARY KEY CLUSTERED (RequisitanteId)\r\n)\r\nON [PRIMARY]",
                       "Lavador":  "CREATE TABLE dbo.Lavador (\r\n  LavadorId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NULL CONSTRAINT DF_Lavador_Nome2 DEFAULT (\u0027\u0027),\r\n  Ponto varchar(50) NULL CONSTRAINT DF_Lavador_Ponto2 DEFAULT (\u0027\u0027),\r\n  DataNascimento date NULL,\r\n  CPF varchar(50) NULL CONSTRAINT DF_Lavador_CPF2 DEFAULT (\u0027\u0027),\r\n  Celular01 varchar(50) NULL CONSTRAINT DF_Lavador_Celular012 DEFAULT (\u0027\u0027),\r\n  Celular02 varchar(50) NULL CONSTRAINT DF_Lavador_Celular022 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(50) NULL,\r\n  DataAlteracao datetime NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_Lavador_OperadorId PRIMARY KEY CLUSTERED (LavadorId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "RegistroCupomAbastecimento":  "CREATE TABLE dbo.RegistroCupomAbastecimento (\r\n  RegistroCupomId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataRegistro date NOT NULL,\r\n  Observacoes varchar(max) NULL,\r\n  RegistroPDF varchar(100) NOT NULL,\r\n  CONSTRAINT PK_RegistroCupomAbastecimento_RegistroCupomId PRIMARY KEY CLUSTERED (RegistroCupomId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Motorista":  "CREATE TABLE dbo.Motorista (\r\n  MotoristaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NOT NULL CONSTRAINT DF_Motorista_Nome2 DEFAULT (\u0027\u0027),\r\n  Ponto varchar(50) NOT NULL CONSTRAINT DF_Motorista_Ponto2 DEFAULT (\u0027\u0027),\r\n  DataNascimento date NULL,\r\n  CPF varchar(20) NULL CONSTRAINT DF_Motorista_CPF2 DEFAULT (\u0027\u0027),\r\n  CNH varchar(20) NULL CONSTRAINT DF_Motorista_CNH2 DEFAULT (\u0027\u0027),\r\n  CategoriaCNH varchar(10) NULL CONSTRAINT DF_Motorista_CategoriaCNH2 DEFAULT (\u0027\u0027),\r\n  DataVencimentoCNH date NULL,\r\n  Celular01 varchar(50) NULL CONSTRAINT DF_Motorista_Celular012 DEFAULT (\u0027\u0027),\r\n  Celular02 varchar(50) NULL CONSTRAINT DF_Motorista_Celular022 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  OrigemIndicacao varchar(150) NULL,\r\n  Foto varbinary(max) NULL DEFAULT (0xFFD8FFE000104A46494600010101006000600000FFDB0043000201010201010202020202020202030503030303030604040305070607070706070708090B0908080A0807070A0D0A0A0B0C0C0C0C07090E0F0D0C0E0B0C0C0CFFDB004301020202030303060303060C0807080C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0CFFC000110800EF00F603012200021101031101FFC4001F0000010501010101010100000000000000000102030405060708090A0BFFC400B5100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FAFFC4001F0100030101010101010101010000000000000102030405060708090A0BFFC400B51100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00FDFCA28A2800A28A2800A28A2800A28A2800A28A2800A28A2800A28A4271400B452039A0B6280168A4DC29739A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A29375002D2039A42E00AF1CFDA2FF006B4D0FE0CE99A8092E0CD2DA461245B4DB34F04F2711298B21981CE485F980ED8E6A2A548C23CD234A54A5525CB147ABDD7892CAC2FD2DAE2E62B79A5FF56B2B6CF33827E5CF5E013C7A571DF137F696F087C29B049755D5ED22324AB12C66544639708DF7881F2725875014F15F0AFC67FDA0FE2EFC7BB1B84F09F872E6E341BD0185878918590B691245C3A395123A32E4A82A08C9CF615F3CF8D7FE09C5F193F6814B17F1BFC5BB1D1EDADAEDA55B2D3EDE7D4E45C904112CAD18473F36E001425F38CA8AF9CC5713E0E968E6BF3FC8FA3C370C62AA24F95FE5F99FA829FB70F8224D4DD66F10E99A73D8CA63BAB29AE6333329E8CAA3E624651B0B9E18F3915CFF008C3FE0A85F0A7C0F772C1A9788ECAC5D1D22559DFF00793B3739894644CB8E7F76C4E01E0D7E72E9FF00F0476F09AEA315D6B5E39F895ACCF6D2168C8BF86CA307A745889E800E1AAF6A9FF0485F84FAFEA6B25C5DF8DF744A638646F106FF002B39CB28319DA4F7C63EE8E38AF1E5C7384D95FEE3DB8701E2E4AFA7DE7D89E3FF00F82CAFC3AD0EFAEEC747D7ECB5ABBB291433DADB4CC922144725576E4B2EFF0099494185601B7E16BD5FE177FC1493E17FC4BF045DEA916BB6F6F77A6DB2DC5EE9F9324B0025549C81CA06382C40DA012C14735F97B7BFF045AF869A4BDCCD61AE7C41B2BDB8411ADC7F6A4772C80307F97CC8F00E7BF5E4F35C37863FE0911E22F837ADEA575E09F8AF7B6EDA842F6F2C3AAE9BB9EE21906258A4923605D6452C18107208E9B453A5C6F83E6B4E76F54554F0FF001FCB78453F46BF5B1FB4FE0DFDAF7C1DE2EB7865FED186D23B82C63323821D7E6657057236B46ACF9CE30AD9E86BD3ADEF61BB85248A58E48E450EACAC08653C820F71EF5FCF7F8F7F648FDA3BE179D324D14E95E2AD1F4F8AE545AE8D7E2D260ED2075758A60A325328407E9EA49AD2F837FF00055AF8D5FB20EA5A49F1DF873C45141696D3DBCF65AC7996103C64FCBB25CF901A3DAA54AFDEC1073C57B986E22C2D67684D3F99E062F8631941DA74E4ADE5A7DFB1FD00C332DC461D183AB0C860720D3ABF35FF00649FF82F5780FC4FE19B1D0F5DF36CB5F06794E4C4609C34AD227CC1810E518E542FF0AE07CDB57EFAF865F19F45F8A1A2DA5D595C206BC89268E3DEAFE62B2090146524302A7230738CE40C1AF6A9622153E16785570D529EE8EBA8A40734B5B9CE14514500145145001451450014514500145145001451450014514500145149B86680027158FE33F1859F837467B9BA942658246A0A8695CF451B88193F5ACBF88FF156CFC0B1AC607DAEFDC8DB6C8C01C1EE4F61D2BC97C59E3ED43C5B721A6895E552442A17F7719F503FC724D7CC671C4F87C15E943DEA9DBB7A9EF65790D7C535392B43B9625FDA27C49E2AB5BBB586CEDB47F2E5DB15D310D2CD0F38768F9F2D8FF7727BF22BCFEFFE14E87A778A6FBC5434AB0FF84975B60D77A88B6DD73380000A09C903000C671C02735A773A3195226DFF00BC84979910908C78E3F3E7D6AB98AF66805D5D4E12363B826CCFD001D49FD2BF31CC33BC6E31B555BB744B447E8980CA70D85B4A8DBF529AF86C456AF3FDB3CB79C87CECE483D320F7AA7AA4F6D1C0B17DA1DB68E72E7713EA4F6FA54B6D13EBFA817984A61886C42DF20240E723D7FC6926B38756790348B047191E5F5CE38FA64D7832D763E921EEB4E6EF631F4DD46709B8219999F6AE530001F5A6EB334E6D77B1444279D89F37E55ABADF88B4AD02D80D42E21B4B44C12F249B73EE49E959371AEE99E2A8A49346BFB4BE09F3BF9328700763C1AA707CBABD8F4694DB9A938D97730A4F0BCBBCCFB57ECFBB92CA18FE02AFC36D6490A81B25E70323193F4354AC66B887CC525F8E1413EFEDEF5971C73C9A9B09328A1F3B7AF3EBF4AE35CD1E9AB3DB509D4BF34B635357B6B3424790F1BE325E36C71F4AE635FD12CB5EB7920BC11EA16932F96F1DC2093703C60AB7047D6B7356D31A7833E7AAFF00B321E0FF005ACEB3D123863915418DD9B04939073DF39C56536DCB5475E1D414757A9F38FC51FF0082627C30F1ECB7377A2E983C21ABCE1945DE8E7C8405810D98798C1218F2AAAC339073835E317307ED13FB03EB5A75F78677EBFE1CB29537CFA64AC45AC31B215636AC090E761CBA6EC067C01BDABEE5BDB5974E94AC61FE618272319FA1ACBD46EE58ADFC99809623FC4570457AF97F136370B249CAF1ECFF00CCF3F30E0FCBF31D5C545BEAB4FBD6CCEAFF00670FF8381BC1BF183C19A77F6B68C34AF12DCDC4364F6C93130798F2AC65C1C12B1AEE19DDC8EFD6BF422CB59B5D47CB305C432F98A5936383B8038247B03C57E22FED67FB0D691F16ED5FC49E1BC68FE32814C8B2443641A97FB13018CE703E71871C72718AF3DF82FF00F0574F89BFB21F89341F09F8FEE352B07B2B95BA1F6B855CBC2C64793CA6C92518328601B194E7E6095FAC643C554B1D1E5BFBDDBFADCFC4B89F81713964B9E2AF0FE65B7CFB33FA0656DC296BC97F630FDA12D7F68DF80DA1F8845D5A3DF5EDB896E2088B66DF71255486553903009C6090704E2BD6ABEC632525747C0CA2E2F9585145154485145140051451400514514005145140051452668011E4118C9381EB5E5DF14FE3E5AF8763B98E0D46CB4DB7B60567D42EE648A25F94E76962012304FE150FED13F18EDBC1DE1CBEDD3882CACA3692F2656E485EB18FAF43F5C7AD7E0C7FC151BF6DAD63E33F8ED2C6D276834CB04731C1BFE4DCDB86E23BB638E9C0FA9AF85CF3881CEB7D4B08F5EAD7E47E85C2FC23F5AA2F1D89D20B63F66F43BDB1F1ADB43ACE8DAC58EB1A64EF2336A314E27FB4C81B6B7CC0E38391EBF4ADB9615D16D9EE1E70004C818FBB8FA9AF88BFE086DFDAF1FF00C13AB4BD4354B8856DF57F126A5756A0BE08B749562E067FBF0C9F98AFB3D6E2D352D1CCEF1E639DCAB6481BF1CE7E83A57E7F5A9A8D49536F547D1CA9B495BE1BD8C24F1208A451014904B2B6597A13DF1DBA0AD28FC4A2E6DA479606CC6DB519970318FE11F9F359C0DAEA1AA19A28DFC8B78FCB8D718563C6481FA7E758825BAD77C4840056DA36C671B801CFDDC7EB5E74653B5D6AFF0003D78E1A9D45B5ACAECEBDEFA216C8B02FEE47CEC5980CE7B9AE17E36FC5FB1F873E09BED6F53B816B6B628CE155C0DC3FAE49ADAF13EB163E16D255DA15966DD82A41E79C126BF2F3FE0ADDFB5A492D99F0F35C37CA1A5B85898E2207FD5A9C77FE557CAE55634A3BB3D2CA32B8CE32C554D210EFD4F97FFE0A13FF000534F127C60F185D5A41A8DCD9E8F6D2958EDA27C2CB8FE26C7535C5FEC1DFF051FF0013FC08F8CB67AA43AA4EF6D24889736B2B1305C440F2ACBE9F857C8FF143C5CDA9EA92BE5B0CD9E4F3F5AC2F086B92E97ADC322B38DCDC1AFD2F0592518D0B5B56B73E5331E26AB2C568FDDBEDD2C7F53F77E288FE27F84B46F1369C5ADA0D66259C2237080F51F40735674FD4AD6CAEC07264F9769EA49E73CD793FFC13B7C59FF09E7EC15F0EAFA772EE6D0A127A80AC47F8FE75E8B37878AEB3E65A7CFC9241278AFCAF1D4E54F11251EE7E9980942AE1D45E8BA7E8696B53DAEBCE422C91B43CA1008DC46314D92EECEF3405B7D8AD2FF08039FA7B62A95E6B1368F2FEFA190165DAA71903DEA3D3ADE5D56ED2F20658EE3A3237438AE573BCAD2DD9DAA85A0AFB2DB52878AC3241972E1970A73C607AE6B3A4B191F4FDEB224C9B0B72792315D06ADADDD4774DF68B42F160AB6CF9B3EF8AC4BB36A58B40444244E49EDE9C572558FBCD1EA61A73E5517FE667792F02AA48A446E3721CF4F6E3A7B1AE13F680FD9C3C3DF1FF00C17FD9FAFD8C1702D9BCEB1BD11235CE9B3E30248C90707F43F8576EDE228AF74A65C60F287EBED5CB6A5F18346F08DE7D8AEB508E396642C11837418EA7181D6AB0DED14D3A2DDD763B3134613A3286252E57A3BEC784FEC27FB6078AFF00E09A5F1FF55F0C78BAC750D7B457B40DA70B467788C225204D1073F2615E50C85C8DCDC64906BF70BE19FC53D27E2B787AD752D26759A0BAB68AE800C18A2C80E031048C82AC08CF5535F859FB6CC7E19F1F69B6B75737A74AD47C38C2E6D6ED27314BBC901E239C0DACA470C71903A3609F63FF00823B7ED8579F0E7E377FC21D7DAA94D2F5DB23069897930585AE5596411EF271924C993C9D880292D85AFDCB86B35AF5B0F1FAC2B4BA9FCC7C6D91E1F0B8D9FD565CD1DD5BF23F657345321904A9B958303C820E41A7D7D91F9F8514514005145140051451400514514009B8572FF157C769E0AF0D48EBF35DCEA56141D7DCFE19AD8D77C4763E19B16B9BFBA86D604FBCF23600E09FE86BC33E38FC48B7B7D1752F10B48AF1C10B7D911860051F749CF424E4FE5E95F3BC499A2C1E125CAED27FD367B9906592C662E30B5D5D7CFC8F8BBFE0A5DFB4E3E97E096F0EDA3492B4D96BB31124EEFAF5E01FD49AFC60FDA2F56B99FC512493B6FDB11762A7A0EBCFBE2BED1FDABFE206A1E23F13DFEA17132B2B33F2D9E067939E8739AF8DB47F00EA3FB457ED21E1FF000959234875DD6ED34A91979D904B3470B3FD07983F3AFCBB247294DD599FD1D9DE129603070C253D96FE6FA9FBA5FB08FC39B7F855FB12FC24F0C496EEAD1F862CE4997382D3DC27DAA66C0E33BE63CD7BDC30C1636205DFDF00B204FB910F7F5AE5756B6369E20FB1D947E543A3411471851B844A78550071F7540ABDE2BBC9757B2B530398239087753C9718C607A0CD715577AB39B3E3BD873AA70BD93D49759B39A6856512F97032858A311F1CF4E476FAD41A6DDC6D9B5B7909F2F891C80367AD45712CF7764F6F248FB2DD5488D00F9BD89C741C564FEFB64BD3CE99FCD6CFCBC0E958A52525CA7652A0DC395BD8E13F692F19DB780BC3535ECB34B23AC8A8A09CF0580CF5AFC32FDBBFE25CBE2EF18EB571BCEF9EEA577639C1EC17E83B57EA77FC14B7C6F2693E0F8E32EF1BCB3A7C8BD8673D735F8BFF00B53EB6CF777AA8CC55A76C64F2497E79AEEE1EA0EAE31CFB1F439EBFA9E4D1A77D65A9E05A8C4750BD95DC65223CFA13D854DA6E9F35ECC8CF90A9CA7006D1D71572DEDFF7490951973E638CF7E82BA4D074916B64D2CABFBB2A770C8F9060F4AFD63DA4631B23F1395294A7CCCFDEEFF825189ECFFE09B1F0BD0BAAC971652DC02C3908669001F5E3F5AF7AD36DEE2E6EC476BB8BAAF393F8D713FB1FF822DFE197EC57F08341DA5A6B6F0969F2371C8796112B74F773D6BD574FD5E2D2418EDB6B3ED1BB3D01EF5F8C66094B192E6EACFDB701370C1C792377632AF61BDB6E2E937E0718C715833EA77105D092DD3CB18272C301B15D4EB3ACABEE3348BBE51B4283D3DF1590D3417574B16E1BA31923B1FAD7975E9A52B5CF570B37CBEFC48EC75C9EE641E65BAA71867DDBBF4C566EADA6E5DE446183F786DFBBEF5A5A8DD456C8445D40E401D2B2EE6433C3D71B87237573B56D1EA77E1B47CD15632678E196CC9F2C348A486DA3F957CCFF00F0505F0CCCBF0764D4FCCB7823864563348DE59B603F88B0E80FA9CF6FA8FA7F5146B5B2F353E6E0EEC71835E49FB4AC136B3F0A753716F1CFE4AEF6591C46076C92411C7F3C1C8ADB2F9F26329B5DD1D58DA7EDF015A1D1C5FE47C19E2FF89D2EAD6DA4AC9A7DDDCDADCCB0BA25C5A16921B07B7DD3E5981259024841E76E58F1F2565E8BE35D723D0A0D7F4E16BA6DEDADF25B41E5CAAC21644461F669032E70007DEA30372F4E408F4686F343F1B699A9E990E8103D8AB4713FDAE6316F7769646D872260D864E0E1B2410183679EB8BDD5A2D6A4B896586659248E1BC86D616F22DDCB1F2F6290AA248F214613682CC0B64E2BF73A765EF23F96AAB973B8C9DEC7F46BFF0004C1FDA6B4EFDA6BF656D0757B67C5DC3024379165BE4954147E1B91B9E377C7FB55F46039AFC18FF823FF00EDB4BFB367ED03169FAC3A49A37886D9ED112D836C7B8466512602E43C85946081828D92BC93FBBBA3EA6BABE9B05CAA941346B26D3D5723383EE3A1AF7F075B9E167BA3E6B1941D39DFA32D514515D67205145140051451400536462A848058E0E00C734EAA7ADEA8BA469535C1595C4485B6C4BB9CE013C0E9D01A00F8F3E327ED13AD7C7AFDA1EC7C0DA4E9D77A5F87B458DB53D6AEDA76596E912528902E0EC31BC89F3942FF00229071B883CB7ED85E28FECBF80D7B13CA15A771130C72401B88FE5D2BA8F0078C2CFC7FE23F14F8BACF434D1D7C4BAB35AC4258956E678EDC15919C827ACA5C0E9D09C0CE4F8E7FC14BEF1B4EF869A75AF9B1C0ED13C926E6C1DC481F8F02BF1BE2BC4CAAD6A8FB69F79FB7787F82846BD04D6EF9BEE4D9F971F1C7C489ABDCDC12675B6576531B1E148EA33D0FE15ED9FF0006E37C1EB0F893FB4D7C4AF1D6A96A9369DE15D22182DA59570915DCF7426523238655B407F1AF98BE3F6A2FA369777BA50CB6E851594FDD3D00C7AF3F4E2BF50FFE0DCDF83DFF000817FC13E6EBC52D0990F8FB5FBDBEDC172C62B7C5A46BF4CC521FF815639453B513E9B8D31977CADDAECFAEFC2BF68B9F12BDE3279DE619199CA615D70AAAB8F6EDF4A725BC7AAEB51CD2C6D15AF97B184432A854E0FD012456E4F606CECA1F319647110489BEEAE7764A9E339C76FAD2FD99F42F09C2F1A2978E275950FCBB972481ED8C6335BCF08942CD9F25F5B4E49C16AF4470BE29BFBAD1AE1675477688E369201C1EBF8114E835E3AFC37174B6E079111662570231C0FC6A4BB79E5804D382D6536DFB3394DDB4FF001038FA9E3E959D6F6771A75DCA403B241F7F18C28EC474208AF29A9C365A1F45494254D5D2E65D4FCF9FF82A7F88AE4DA5B4AF2308269731A11D0823FA57E417C75B97D4352604E7328007A73CD7EBA7FC15ADD6FEC2C404DAFE7B6D3938C07C1FE79AFC82F8891FDB35E99403B8484919F435E9F08C6D76F7B9DFC6F52D87A71DB4460693A6869B3B47071C0E7038AF43F01F817FE130F1368FA3C304AF36B777058C43B334B2AC63DBF88D71DA2C07F77C677FCD81CE726BEB7FF825D7C1B97E2C7ED95F0F2C65B5792C6D7526D5AE9B19548ECE279FE6FF0081A47F89AFB5C44B929CE7D933F36C25253AB18BEE7ED1DDA2F868416D6EAA2DACA18ED1370DBB16340800F4031E958BAEF899AC114326DDC73BE339C0EB935435BD46EE7D4DE42C678E491A4DAA3A024F045526D59A5BB0CC768070171C0FC2BF0FAD5B9A6E4DEE7F4160B2F50845B57D0D48AFD6F211264C8EE3099EBEF4B75A4CF716A4C6CD01519CE7249AA97134F2CB14AACCB120F94E06DCE2B6ADF5248F4B092E4FFBA3903BF3D6A7E27FBC35AAA50B4A08AFA3DD17D39B767793F336DDC49AA124335E2B889F2EB9C900707B55CD4354B678C4F0DC30800E513D3EB5534AD61049398D0157FE1E85876A9766ADD10E9A96B38C49ECED5A0B511CAEB238E581FBABEFF5AE77E21E9D6E6D18120EF428AAA0E5890456BDDEB2D21589BE55C617E520E29BE20B68AE74A666C328E8DD08A86D387BAF53A68734669CBA9F995FB497818FC32F8FA23962B9BEB2D488B88E1B70DF20122C843A81B405750EA546438EE188AF32D3EC1F4E7D5C8B3FB7C5E208AF6FEDE3B8B7CC32A6E16FE76573F33C9B5429624B1E842D7D3DFF000522F0DD9F8C1348B191AC2DEF8892457BB67845C90322DDA54C326F38008E738AF9C06ACDA679DA4C2F75A9D90BE904B3DD4DE4DAE9EA4EC015D0E517731D8DF29C82C028271FB2F0F62255F2F8559EFB1FCEBC6781A784CE2AC29EDBFDE4775A23E8761A36BA974E354B69BED7677D07C85BCB954C980BC46C8A30413B8E09C67A7F4B5FB0AF89DBC6BFB2C783F5737115DFF6858AC9E626D2C0AFC85246500348A50866C0C91CF39AFE67746BA9218A495A7B6FEDB9E4B59D2D8CE1D62DB088412CDCCF2326C2EA0E46E1BB3BABF70BFE082DFB48DFFC4DFD9F2EBC35A8097CBD065CD8B48AA8620555EE20033B9B64CE4E4827F79D4F15F4D80ACA35791F53E2332A2E54F9D743EFDA2937734B5EE1E00514514005145140057CF5FB7DFED496BFB3D7C16D626124516B5756B245616D3158DA7765233BD8845419CB3161800E3915F42D7CD9FF00051BF85DE08F1F7C1CFB1F89AEAD74B175751451BA4BE5CF79BDD15A0550407F33210862400C4E2B9B16DC69392E87560E2A555268F3CFD9F7C173F873E05F84ADAE4C1F6CD334F80DD8B740B135CCEC5E4DB8278DCCFCE483D726BE75FF0082B3092F35EB269FCCFB2DBD82BC71452843236E6393DF009FD2BE9FB6D6C687A99B38B0B0492AFDDE83EF0518F4E2BE5BFF0082BFE897975E1AD275085479D7164226901204615D830CF4CE08FCABF10C74D55A739BEE9FE27F4270AD1787CC29296DCB2B7DDFF019F8FDFB42F882E2F635B1B7873757B71B506EDFB9FA20FC58815FD1C7ECB3F0562FD9A7F676F02781EC999AD3C23A0DB697384F9564B958D5A59303A9690C84FBB1AFC3EFF82717ECDE3F6A9FF829AF807C337F6BFDA1A1F848BF89B580A8CC9E45AB6F895FD9E710273D77115FD03DD68B77671092426169A463142A4120B73BDCFD7B671835F5181C3F2D04D23E738A318AA637D9C99475FD5AD23B8B48258B6C92C89739FBAA3A64B7A7F9159FE22D4029FB5CDBFC87CC214F5979CE71EC71526A96726BDE2C96DA6316C991232D8EDD78F4C9E734CF1BADBD9DA3AACE24952648A304E563180491EFC13F856F5ACE32BF43C8A118C6508A5ABFD4E6EFF464B9D3C43332C28B2348154711FF00B4DE9599ABC96DA8DB2C04BA315FDDB8076A01C7EBFE34DF135F5D6B52CB1584EEB0B10AECEA1B2BC13C568E8F6F6765A136264DE8BB420E4903D735E24A9464D9F4F152A708CE4F5ECBA1F9E7FF000553F024FA8784A2962FF973BBE582E06D62076F702BF17BE203FD83C5378AEA37A33027DFFF00D75FD14FED55F04EF7E297C3FB9864758ADE7B9578140E557786E7EA41FD3D6BF9FDFDB47E1D5EFC17F8DDAB691A95B4B6F289F2A2418DCA5B1B87A8CD1C313E4C4CA84BAEABCCF5F8C1AAD9653AF1D79746701A14CB2BA6F246CC0FC2BF587FE0DF1F8797371AC7C41F1CDD89A7D2748B08B46B77745DA67B86F31C83D4958D0027D24F7AFC98F0EDB5C788B5EB2D3AD209AEAFEEA616F6F6B6E85E5B891982471AA8EACC48007539AFE877F623F8003F640FD917C29F0FF559117C552A1D57C42B137C9F6B9467CBC8EA2350883FDC27BD7D2711626387C2B8B7ACB447C4F0E61A58AC5454765AB3ACD55A3649F6C80E6424311DBD2B0356B07B19B79DA3901553919F7C56C6B90A5D5E490617EC6832C54E082474AC1D4AEFFB26E57CA7CA953CBB1F5AFC72A47DD6DFFC31FD098252B251DCD1B5BFC59299158B638C630B8FAD58B4BC8357B73E5CC639173F291F7EB0A3B9FED68DD37379920DAA7B0A6CCB25BDDF959D8FD5580C8AC94925666FF564DB4DD997352D7E6B49BC8F28B4C0FC841DB8FAF4CD1A27DAA0B79A599C4D7127CDB481F27E354AE2010DDC5348E27206DE491CF6AD58ADE482D7CD392AE382B8E94352B5FA1A4D4230B24B5296B7ADC92C00ECFDE02372923B7A557975F92E13ECD2C6E8E5490A3B8FAD57D574E60D2E1DF7E7763BE6ACE8BA348119E77DFC10AB8C56519B72E5E87472D2842E7CA7FF000530F065CEA7F0FAD3528E11235903F310A76B01B829F4CE383D01C1AF9BFE2DF8074ED234ABD8ACA3B781AD341B6BFB69029586ED4EF5F337A9C8CDBCA19406C60E78C367EDFF00DB5ECA5D63E086BB63B2159A58B00C80954078E71CE075E3D2BE2AD2F5A4F14F86F4CD0752B7BF644B596EF4DB9797718144AD0490C6AC0AEC21891B9BEEB9C0E2BF52E10AEE581707F65B3F0AF11B0508E670AB6FE225E9D8E6F5ED47FE121B1B5D66249984622DB0B5D42896EF1C406F08AB9F9C0DA7AB305DFF007B81FA25FF000428F10BCBF1FA67D26DA1B3B8B9D3648AE45E82590472C6ECD0EEE504B193B8E0905578CE6BE09FED1D3BE1699A65D32F3FB3A1BBB732205C3850A1245284670C8C0151F206C83838AFB6BFE09CDA16A769FB51F85BC3FA56A51F9F3EFB55BDB646DF6D66D0BCEF8453932EC4541BBE51E665B2057D1AC4726269249D9B3E23EA0A583AFCCF58AFD4FDB785BCC50D8C6477A7D436831120DA576A0182738A9ABEDD1F9C0514514C028A28A00AFA8BCA901F2B8E0E580CB2FA60773F5AFCF2FF0082C178EEC3C00DA16A3A96A9A78F10C37F6D7FA458CAE0DCA2DB90EE3CC1C246EC0650292EDCE405AFB73E3CF8E17C09E09BDBD5BB6B2BA86D9DEDDDA2DD1BBF00024B2A8E481CB0FBDD6BF087F6F6F1AEBDE3EF1F26B32DA9D4753BCBE7564BCBD81DBCB8D84A41442338DB2AA062C300939C035E4E655172724BA9EBE554FF0079CFD8FA83F641FDB7E6FDA13E2C5CF87F516B379E28BED76E6D50A83B090548273D33C9EB8AFA87E397C18D2BF69AF836BE1DD5AEE4D3E24BC711DDA2E7CB2791CF6F51DABF187E1578F5FF00659F8CFA7EABA1DE1D4B5A862FED3D4919361B6819C02B26402198C98084E5463E5CE4D7EBC7C07FDA134DF8CFE158754D32458D35148E52B21CB40C57A30E8719E7F0F5AFCD71981A746A72DBDD99FB0E031957194A35A0F96A53FF0086BFDC68FEC3BFB13F823F621D3FC4CBE1FD4353D575DF155CC12EADAA5D2279D74B18290C51AA01E5C2A59DB6F3966624F4C7B9F89F5D8E2892E1DE79C9908532B79614632C46DEB8C0183E9F5AF36D7BC484F892CD612EF64C9E65D4E84AED73941D3D49AF08FDA3BFE0A13A7783ECEDED3C26D6D7A2D55A4D43CC6CB98002309BBEFB1C7400F38F5AF530F525ECFD947A1E5E2F01EFAC4D796FABDBFAFF00807D3FA3EB5A778975DB8BE5FF004C5B14DF1846600B1270001D78CF5E0560EBBE20D22FFC4446C6FBA1E38D646DAAB8EA7DF07BD7E75693FF00054AD6FC31E29FB49B816DA2CD0490EA3A6790B03DB4CA32B22B11FEA76E0E41C67208054E76FE35FF00C150F56D13E1BC777E1DB5FECC8268C2ACD7015EE2EA503FD5056CED6CE0631D3D0B2D1570988A915151D7A9A52C5E069CA5579DD96895CFB8F46BCD36FB54B949AE04D04926E508C41FA641AD5BE5D2DD0796AB6BE4E461642011DF39EBFCEBE1BFD9E7F6F487C64F696F75A74B0EB5232C173F2AC6A66E0B91DB033D8771935F4B9F146A3A86A521920B47F9088C1941C630304F3DFF00957875633A0BD9D58EA7D5D1C1D3C5A55F0F52F1B77FD0E93C55AC49A85A4C20BC85103A80506E6C7A63F01F957CDDFB45FF00C132FE167ED89A5DC9F1BE9625BB89B65B6A56D3B5B5D41CF6907BF6208ED5EC965E31D32CF4B78EEAC98DC3487CF65076993A9031D8638FCFAD727E3AF101D5AD6CC5B1920FDF18B2CC563C13BB95FF000F6AF16B62146A2A90934D6DAB47D0E132C9D483C2B5683DEE93BFC8F2BFD9E7FE0975F02BFE09F1E2F4F14691A75EEBDE2C8D8BD9EA1AB5F7DBA5B6638FF5518558E327272FB7760601E6BD2BE2478B9F55F12BEABE52F9970A03846EAC4019EB9FE95A1A7CF0B2B4B341F244864323BEE690F002819CFF00FAEBCB3E29F8820F0C5C8D52FEF20D2AD8A34AB148C173805B2075391CE00F7AE7C7E2F118CF764DBD74EA7A79365183CBD4A4D5AC9DDEC8BDF10FE2945A6581CAC891283E611F2951C8EA7D7B7BE2BC1FC5BFB464FAFF0088A4B0D1E69B315CFD9634DA4BCAD83B70C7E5085B6EE76E150331E833C4FC7EFDA213C6569A869F0EBA34FB3804B3D94D7319306A2A140996218DCA307AB0C37CD8218103C6AE3C65A3EACD6905A5E457FA5087CB8668035959C8CEA049B2378D4A8DD88C16F9CEC27E6079FA5CB786A2A9A9E2136D9F159EF1C54757D86026A30EE7AE27ED43E22D2FC49AEE9F73E23D27EDBA7BE3EC3672BDCBC7128C4AC4C6AE0B44CEB9019771563F2A839F5BF875FB55C7E24D173AA6E8A182DC4FE7F9996908CF1C76C82063A9071C60D7C8FA2F84EC6F7C7767A7DEC8D6363788863BA9267962B7C1675D927DCC80A498C7CDC0C8C9C1DFF14EBFA4E816C8C2EECED098E4CADD9616CF204220791973B2269193FDD217D6BA31F92E1AACA34A30B33CFC9789F1F878CF1156AFB45D9BDFEF3EBFF097ED39A7DEEA6F6DAA412598F31228D8BA9F28BB3040E339072ADF97E27D3FFB5C5E69AAF1CB85E4643715F9991EA034FD6FCED4DF4BD3D350D0F31C725F029A5DDB4896ECCE53276E1199304B1DC320A8AF7AFD9A3E296A92F886D6D74E9EEE4D1EEDD6058EF41F3A58D4E4CB8276AEFDC08030402B919CE3C8CE38623463EDA93B25D0FA5E19E3B962EAAA38B8DDB7BAE9F23EA2D22F2EA3D567324BBAD8B6F04F5CF19FE55D4E97761DC8DF9F419AE15F52FB74CB6D07FAA8DBCB95FA156F4C1E793C55FD32E8C1706489DA6F2F865CF047B1E991FD6BE1A099FAAD6853A91BA657F8E9E128FC4DE1DB81BC879632800C1049E3041E3BF7F4AF897C4FE0CB5F0278DF448A1901B683CCC4601DAA5A5C190EECB22863271C8E78E0E07DCDAADC49AED83BEC021183F7B818E7AD7CAFF1075FF0B4BE2157B509693477EA44AF219228E3DDBCCAC09E198646D18DC71C6057D8F0DD7AB49CB95371EB63F3BE37C061ABD0A7ED649496D7384D53E1DE8D77A2F862DA7B6D4B4DBEB893CC9750B89F79C34C048648CEE0EA47E5C1ED91F48FEC1F75A6FC25FDB0FE1F6AE6E274B38B5382C649AFE493F7523C2F6E64271908EA8BC9EFD700923CA3C79F16B4C7D02CD2F2EE0B9D334F225BD92C2221DA455244484E58A7F7867835BBF087C53A9E9FFB43FC3EB7D1343766B6D774E8DAC220B34AE54CA5E30324162BBF1904361477AFACC155AB3AD0938B5AFEA7E799BD2C2D1C2D6A49A7EEAB35BDEDE47EFF00A75FC29F589E00F14D978C3C2F697B632C7244F126E087FD53145628C3AAB0C8C83823B8ADBAFD42E7E15B051451400514507A50079F7ED0DA8E8EDE04BEB2D596CDE29EDD8FFA4C4D2A4782087D83EF1040207192A32475AFE7B7E3B7ED3BE1EF85BFB48AD8E9718D3FC3D6972E90A5C45E5B5AE015665978F90E07983A1CB6D038AFE8AFE22FC3A8FC7BA6BDBCF717114124652548563DD22E412A1CA965CF4382320D7F3F7FF05C5FD8B27F851F15357D6AE7EC72699E24B97B7F9C8B7922648D0B22851BA44FDE28042807078DA067CDC753E6DD1E9E02A72EDB9C4784BF6629244D52F654FB45EDC286BD8C3AF9840DAE1DCBB1DAC739DCCD851B80E4D5FF0085FF00B4478C3F67EBCB0B7D2350B316C5D84569395FB3C3291865924DC7CE3C8FB8A39520608C577FFB33EA507C67D23E1F785AEB504B3B7F8ADA0C16B6172F324024D4E18CA6C2E083B8CD0040AC76162A304E2BDC7E2AFF00C114B5DF82A3FE1294BE8B5FBBB6B09AFAE923668E1D2E34E7CC5676F9E4404101B73392E7AE01F9EA3416229FEF15EDF99F5D88C4D4C1564A94B96EAEBCEE708FFF00050EF11787BE1D786965D667BDD46EE268D83DAAC26EC82C5A555272B1A8030F8C0FBB9DC0D78978EBE2DA78DFC3F06AD286BABE91CACC66B975124723CC1536B95D9BCC2E594AEDFB876E4B653E237ECCBF12F4886F357F15DA6A36890C72E9F318523B7B881FC840D0BB203B5C208F0B196405D82F28C079A787BC0B731EB76765FDAD7AD696D2C6805DDA98A3937EDDD10DFB5BAA9DABC0DAC7B935AD1C2D2A2F4566CC7139962B151F7DDD22C7C45D4F47F0EF8E25D0AD2779BC412DC32DCDBAA2A851212BBBCCCB048DD2328102E4A20002024D5BBABA4D43C092DDDE5DDDFF006CDA68F68963A7E9F6C1AF2CECEF2EA58A7BE6799938DEAABE603B984BBF05768AA5A978321F0C598D422D3A6BD974B2A88FA9C6A3ED1E5F9A9FBC0DB5891BE28F2EE400CC01C922B998EC7C417D6DAB6ADAC5C7DAF5CF14DE7DB2F269A53998C2E6436C8EBF2AB968D155776D558DB00EE15D3789E6FBEB4B1EA1F07E287528ED64D0D2F348D2ED25922B996EE66371149B6342E590672375B4431FC66438E09ADFF09FED6BE27D3FC0FA4EBF26B3A8C7A7CD7D35835B6F320CC6DB140007618249200DC3825B23C8AD74AD47C2861B2B71BF489B74535D1DC55A0130BE863CE482769F9DCE0B188A90326B43E22F84E4B9F03787E1763FD97A0CF756F74CC821794CF2F99E618CE49332C9247E67213686232EA2B8EA616954D248F628E6189C3461EC9B47D6137FC149750F0CFC38B7BE6D1C5FC4974C8F752C8A2461D063767E5C14C7196C9206D5245BD57F6DAFF849AD639E0B48BFB496E88B7D3CB73267257763A0006E3923D7A0CD7C7F7BE0FBCF887ACF843C3F231961D6219F5ABE9121212FE7788618BE18AA442310AC7B720C639EC353C1DADDAC9F14D22B3BF926B881E4BE5D49124F2A6990A82B1A00C7CA50595E57E1C938185E7C3C46418693565A23EB307C6B98528B77D5EDA1F4E4DFB6A59CBF0E63D66196E1EE241261262A23900214B0C1E465801C639EB8AF0AFDA17E31EB7A9F88BC63A56AB3B5EAC308B217CEA008A406274840EDE6C60907A32BB63A1AE76FBE156ABE0BD546913DBCFF00D9C935D269F1005E49A0DC244640389181DBB42673851B4834B6DE01F14F88E2D77EDB62CFAC788AC2D3ED221B47DB24B0CA1ADEE5237242CC550865C6DF9D9801F329D3019561E849C97F999677C458EC728C2A3E9AAE9F338AB9D38EABA6436F3C364BAA5AD9AFDA99F5195D44A5B16E64831B32D191B933CA1195DC2B4757B0BED12CA4D2FC3BA6E91AA6873CBF649358D6AC648E2B0B95DACE628B77EF542C8A633B7707E70A3207B741FB2B5EEA5E3886E34AD0F55B9BF3E45B5D5C04CA49E5204494B1C06B82B957900C1EA39635ED2FFF0004EFF88DE3EBAB5B5FEC5D2742D261F921B6B897CF48C3B29C98D460B36C40C49C903078E2BD7E7C449DA9536D7A1F3B1C161D53E6AF56316FCCF923C07F0F6E7C4C678ADF50D42EA2823B76375079CF0DCDE217494342D8486D50011A2A664DC0B13805475D3FC247B0D32E0CB6D616D7D205315ECF7725B14CC615A39515B63C7D71D1832AB6EE063EF7F837FF00048CD5F4BB511EBDE209EDAD0A24CF6BA340B6A18761B8EE238F4C63B0AF63F0CFFC13DBE1BF8574669A1F0DC5A85DB312D3DFEEBB9481D397271D3B62B279563EAD4F692B412F9B3A29E6B92E1287B25CD565F72B9F8D9A97C35D3EC6F66FEDABD59EE2E239A196EA091A4499A42CC9B8AE721493F7586558824E05761F0F59B4C54598DBE966CADC5C5C1FB5790648B7190322B60ECC65147CCCC0F000E6BEDBFF0082AB687E13FD9EFF0064BD7B57BDB7B5D296CAC261024482166948C468A3FBCCD8007D7DEBF34BF61CD5AE7E2C7ECDB7971E24D42596EBC3DB638EE64883CC8876A8E40DCC405039249C0CD4E6583F6547F78F993D0DF22C547138B4F0D0E46937BDF63DAEDFF69CD7B5BF12343A2DE5B0B296D96578AEA6F27CA9CB7CE924878895B076C8DFBB0C8159973CFB47C27F8FB1F896C6E9F51D4C4D1594881C3C4609ADB7E766F1928558AB60AB9EC0E0D7C66FAAC5F123C75636774E3C1BE22B695AE6C750D3A302CE59252ED3ACCBB880240242ACADE5E58E4287C26D7C349F52F1478ACD88630691696727F6898360851A549B6A9501049955F40373A0EAB93E66278730B5296D6F33D6CBB8E331C3E2B9B9B9A37F85EC7E8078F7C7DA78F849757F6CF14F17D98C8764AA8814A927E7C803A1E4F18AF8ABC71713789BC19143149FDAD1EB5AA497570208B6B471189B6AC7BC6F651C125BA818C004553BBF8AF736BE15F136836B28D412D657927B3690112C6BF3C926EC00553EE94E06D555190403C778EFC5F77632E89A75947259DE5F3DC5CA29949611BA0545918632E7A6D0383C573651944F08A5677BBFC0EBE25E25A79854846A2B28A77F537EEA4FF84BE0F223786FA2D9F635FB35C2B3DB3103619D490CA0E554BE39C8E735EA9FB01F8F957F6F5F076BD7163FDAD12F89A38E29A26D86CE740E76C8157728C31DB90771EBCD783698267F0E5DDECB18FF008A7A57B1B536AC8D7B7B63F2C50CC5BB0126E0CC416DA00E4E08FA87FE08B3A25DD8FED97E1E58B46B4D4AD750BD7B9DF2C685ED7727C92FCEC772A3E73CEEC12572C307E9E8D2B4E3DCFCEB135DFB3693DCFDECF03783ACFC1F6573F648BCA6D4EE5EFEE40006E9A40379E3E82B72A2B499A6811993612A0953FC27D2A5AFAB8AD0F8F77BEA14514558828A28A002BF1EBFE0E54F0B58EAB6DA0B086F25D90B5C5ECB6A079D96223545918E76F4DCA9C92EB9ED8FD85AF8E7FE0AE7E1DD3FC51F0456CED2C5EE75EB65786C0C502BF94CEB8E4B0F97601B830E5481D33918625374DD8E8C3492A8AE7E0F780B465F177EC553DB69D713DBDF7C32F14CD04B1C4E37D85B5E2ADD44C1971B4ACA971F7402AC08072335FAEFFF00047AFF0082C7E85FB66784ACBE107C5EBDB28BE275BC06D6D2EEE18476FE3289571B90F18BADBF7E31F7F05D38DCA9F929FB2078823F097ED17E28F86FAAC4D1699F123449B46D3A2DBB4AEAB196B8B303D725658BAE0998019CD789FC5DF095DF8475A9ECA759E09ECA7CC2EA5A2923756E08230559594608E41039AF91A18A785C5CE1D1EA97F5E67E8988C2D3CC32CA551FC51F76FDADB7E163FAE4F0E7C2DD03C3312259E9F027952CB32E46E65795D9DDB279C96663C9FE42B93F8A3FB23FC3EF8B53432EB7E13D1AFA68A613094C0A926E0081965C161C9F94E47B57E14FFC13EBFE0E76F8A1FB2FDB5BF863E33585D7C58F09DA811C5AAACAB1788ECA3040C348D88EEC019FF59B243DE46AFD82FD967FE0B29FB367ED7FE1EB7BCF0BFC55F0CD85F4EC236D1F5FBA4D2354864254796609CA973965198F7A92C304E6BEAE954A55A3A7DC7C156C3E2284BAFAA2A7C5BFF82437C1CF88F0CB2C1E185D2AE662ADBAD6E25409B4EFF957760127BE38CE792057CF3AFF00FC10E3C19AE59DADA47AB6B76D70F0CF7CD2DC386856ED61550BE5E0854196524F3C0E497C8FD308E649E157560C8C32ACA73907D291ED629C7CE8B2718F986720FF00914DE128BFB2898E63898FDB7F33F32E6FF8216E97AAE8EF8F10EA502DFD9179AD6582268CCAC776D2001C659F383D188F4C731F127FE0897043E0CD1EC74892FEF1ADF4CB913587998925705323CDEE18C6806718F931CE4D7EAD0B55576217EF1C9C9CD43169B14372EFE5A969392C793F4A8FECFC3FF29ABCDB152D272B9F970DFF00046C8AF51A681B535B2BD013CA4B9683CA8D398D04600002838E80FAE4D75DF0EBFE0897E12D275FD32E6EECE5FB3CC863B84133A6F0A08E70475E7F135FA3D169F1431612351CE692480074E0639AD3EA5875F644F36C5DACA6CF90F51FF8261F803C277D60DA16896B651C971E64AA9BBE67CEEDE79E4E4647A55CD1BF623D37C3576161B3924F2A5F2A27B83E6BC484E76AB124EDE4F53DEBEA5D62F2CF4D30BDC4D1424380BBDB19FF003CD79CFC69FDB13E147ECFD612DF78CFC7DE14F0DC513072750D4E180FE019813F857453A54A3AA8A3278AC4D4D1C9B30F4BFD94F4EF0869CD3436B0993CE49090BC81BB9AE87C47A059F87EE256C27C92467AF515F09FED61FF00074AFECF1F0B34DB9B0F04DC6B5F12754E554E936A52D011EB3CBB571EEA1ABF30FF006B6FF83917E3A7ED032DD5B785574BF871A64E3024B35FB66A2476FDF480221FF763CFBD4CB154E2ACBF034A582AD37CD33F7F3E30FED05E15F829E1A935BF116B7A3E85A6C302896E6FEF12DE2007FB4E40AFCCAFDB3BFE0E92F863F0A61974EF85DA55C7C42D5EDD0A24D07FA36961F279699D773AE7FB8873FDE15F895F1B3E3778DBF683F1036ADE37F156BFE2ED458E44BAADE34E221E88A4EC41ECA057976AD2379FB493C76F7AE6FAC73EC767D55533DF7F6B2FF828AFC5BFF828D7C459756F88BAF0B8B4B2C8D3F45B2430E9D61E636DCAA7F136DC8DEE59BAF20715F54FEC71A34DE04FD953C4B28B38E796E8C10A348A4A190B12338F61F4AF85FE00F835F5DD42102324DC5C8CFF00B61785FF00C798FE55FA81E28F0B47F067F64EF0DE8BB961BBD73515D41FCC6DABE42BC719DD93D0AF998E79C1AF9ACF3109D5850F33ECF84B0AE34AB629E89459E3DA7780B439355D360B1D264D091F5097EC4268D5DE5B746027830AC7CC8585CB90E49718240C1AC0D1E687C2B7D793477AF368DA45CC514D1468D6C6F2E248F74780DF33919E38C2E19B1C56E78AE78F43D1604D45756D3BC41E17D70A4770D69BEE61628583C90F0CD04A862762BB861DFCBC8C2561F887E1EB5C69BADEA33CB65AC6912DBDB7D8B50B39FCC16FE534ED348D183BD190B28DACA0B79919FBA41AE9E4EC7CCDDAD4CDF86DA1FF0064F897C5A90DE306D4A19934F9E7E678435B4170F2A3679405D72C72A4000E09AE83C6835D9BC476575E2B682F2C162B5B98EE2C06C9621E70170C800CB7FA859954F03B7DD7DD81A4EA572FAB6976B6655AEF46921562045BD4AC6F146C198E12450AE8DD898C6E53F293DFE97F11B4FF001369D19F11E83069DE208AE228A3BDB75FB3DADD2452AB02F093B2290AEF2F84C139C8CE6870B25617B5937A985F10238345F0BEBD6B25A5BBDAEB36B235A4B14DE524534572850BE060E705F2DF290E318E83F413FE0839E119ACFF0068686E2F2CE296E2E7C3B10B98E35D861691D8CBD094287E53B467800673D7F3AFE2AA3F8C2E7478A2314D73A5DD5CC97565800A2F971E77BA131C9952A1411DCB119040FD5DFF00837BFE174973E1D97C432CBAA8B86816249A6986405DE08DA465F1C2B76240279C13AD085EA44C3112B41B67EACDB422DFE55185FAE6A6A8E00C07CC413EC315257D11F3EC28A28A041451450015C97C69D0E7D5FE156BF6B616D6D737B73672A411DC3110995C6D05F1CED04E5B1CE0102BADA4650E3919FAD26AEAC34ECEE7F2D9FF000535F833AC7C0BFDA72FB584BED43EDFA46B4977632CE3CBBE86E512094DD24430A228A49542104824F56539ABDFB5E7F66FED0DE09F0A7C5AF0F5A456BA678D2D84F796F08F92C7528C6CBCB527D5650587AABA9E86BF537FE0BDFF00B22E8BE3DF0F43E33D334AB68F5FB10B36A1750BB799751C68556195114EE5C3E7E7E319EC0E3F1F7F669F88963F0CBC6DABFC2AF19DD4165E10F1EDC471D9DDDC4984D235807CBB7BA2013B63976B43201C0431B9385AF95CDF08F4A94D6B1FC8FBCE18CC6316E857F827A7A3E8CF9CBC596DB09574F98821BE5AE3A4D3EC8DBCF67A95AFDAADE7042767B690E40910E3A804F1D0F19E95F4CFED23FB3DEA1F09FC6FA8E91A8412C17761298E48E55DB8F707B8F435E27AFF0087CAC84B2ED7E47D6B1C163538DD1E8E6797384F944F815FB7F7C7CFD8EAE63D3BC19F15BE2078520B2C18EC2D75999EC0A9195616F21688A90723E4EF5F5FFC26FF0083A4BF6B8F02DBC51DF78A3C23E304880006B5E1D855DC0F57B6F2493F5E79AF86757F0A2F89AD16CE79160B882361657246467AF97277DA79C1EC48EC4D708565D275192DAE2378268CFCC8E30457AFED652578B3CAA54A93972D6827F23F657C37FF00077D7C71FB2A8BEF865F0A6E65DA0168E4BE8013C738F35EB525FF0083BE3E302A607C28F865BF1FF3FD7C47F3AFC6BD3B50C38DC4FB56BC1A947E84374393927E9DAA1622AAEA76BC9F04F58C11FAB5E23FF83B8BF683BC19B1F02FC2AD3958F00C57B70547E32AD794FC4EFF00839B3F6B1F8816CF0DBF88BC25E1C8D8EE56D2F4141221E3A34ACFFCABE02F39668F712E074C629A595F81F99347D6AB7561FD8F855B411EDFF167FE0A73FB44FC74DFFF000927C61F1E5E249C3C56FA91B28CFF00C060082BC2B56BAB8D73527BAD427B8BFBA93EFCF752B4F2B7D598927F3A7BB7964F3F91A89CEE6CD2F6D27B99BC1421F0E822AE4F53F9F4A7E06DA825B8F24FF2AAF2EA6533C8FCBA53898CA9A5A12EA0E210A41E33CD72AFA7CDAE6B896B082D2DC385503B1F5FA71FA5696AFA979AB95232A3919C57B57ECD7FB306A9E20D6E396EE064BDBB01766DF9ADD0F453E8EDDFD071D4F173AAA9479A6732C3CEBD554A9AB9ECDFF04F5FD99AEBE237C43D06DA186478DA58A28C018C46A416627A0EEDCFAD7BFF00FC147BC7DF6FF8910E91630FDA34DF0F3C1A6BB47C94851595153B191A419C772C33F2835ECDF05BC17A3FEC43FB325E78A75295A1D735E89ECB4E8F6ED29101F3C8A7B678507DABE36BDF8DD0DCFC460BE22B38AE747F155B4B298C398EE942BB2C5229E9200EA4BC6C0AC8A3B1E6BE4B0F2962F31759FC313EF7358432AC9BEAC9FEF2674B36A5A643F03AD6E35231F88DE2692D748BAF36449AD62906FBBB190924848F67991090660666504C6EB8E7F534B9F0DF81351D36CEF566B258F2DAAEA512C935C1674F9BE4211B6A1951B920A155CA1EBAF15E697E0CF0FC3A4497A2E1754BE9675B58FF0074B1F951C8F09690A379A8C4C89927FD5BA608318CF8DF863C11AFF896C2779EE60B74B8F3A4B69D665B8B688A45F345BF2F1C60BA479CB20C4EE73C1AFA8B58FCC75B16BC77A07FC24FF11B5ABB8269608ECB4EFB54E6F668D92297967818E414911DCA2EE23181CE0EE296FA92EBBA6CB6F786DCDECEF6EF66B673C854C931667525BE6DADE43004E3E6E87613567E31783AF2DF59B6875AB53A645E31820B8F3AD161BAC5D1855A5564C65E094C7B7E46EAE0E48016BADFF8456C6F7418EF86A3A76A73C111B7782DB123E9F3C5E6496E049F2302385E7A962090C4D4D848EC7F647D1E5F8EBE39D1346F22EEFB5A8AE8C56DAA47BB6A2A1DF134D1A9DB24670D19C2963B8E3AE0FF00441FB077ECCD67FB37FC0AB0D191313F98679548F96391B9217201DB9C9048DD8201E95F953FF0444FD96B57F8D5E3ED2FC7BAFE9D3D8D87CF73FE8F9FB18B82A70AAEA7742A719084FCACD8395618FDC0D32C134CB28A0891523891515546028030001E800AEDC1D0F7DD467063AB2FE1A270B8A5A28AF50F3428A28A0028A28A0028A28A00E07E3EFC228BE2F780EFF499A213C376159E063B52774E5039EA50300703AF4E99AFE797FE0A33FF0004DAD43E14789B57D46FF4C9A3B1B0716526E9772B170092B248C23624E4B609DBC0E8463FA58AF17FDB3FF666F0CFED09F0BAF6CB5CD36DEE5B6130CED08964B49328C24453C6F213603D70F8C804D72E228F36A75E1B10E9BB1FCFCFC0AF8896DFB5FF00C35B2F85FE287857E27F8660FB3F8675AB9601BC536718E2CA591B86BA8957E423EFA003EF0E7C23E2A7C1BB9F0B6B777697F65716D756D23472C4CBB5E161D5594F22BA2FDAB3E12EA7A17C68F12C434B1E146D235973A6A09DACDAD8452BF2240094C48B1E1C00728D803191EC5F0BFF006A8F02FED27A75BF853E3C6A90F853E2369D6BE5D9F8AA3B7DB0EBD1EEF255EF06331B2B91FBC7003AA3B6062BE2F1D829E1E6EB61D5E3D52E8CFD3F27CDE963292C3E29DA6B6977F267C4BA9783D9257CA9D873CFA0AC0D73C1F6BAB598B4D4A1DFE5A95B6BC887FA45B1EC0FF7D3FD93F8115F6E7ED19FB0CF887E10CECD3D9452E9F2AEFB5BFB693CDB4BA4EBB95C7078C7E75F3D7887E184B14B200863231B7DCFF856982C7A9AB958FC9A54E5AA3E6CF14782751F078134C9E769EE7115D44A7CA73E849FBADFEC9E7D33D6AA596AA5795E7B722BDFE4F0DDE693BBCD042EDC323A87471D30CBC823D88AE4BC43F07B47D5049243E769176C42A24081ED33FDE2A4EE5CFA29C0EC3B57AD0A909EE791FBCA5A743CE97532E73BC6EEE076FE9563CEE3756E4BFB3DF8A2273F608ECF5819C06B19D59B1EA51B0DFA567DF7C2EF16E9AEA971E1DD753270BFE832107F10B8AD542FB14F1892D4A9F69DF1E7EEFB66A29EE318F97EBCD6959FC2FF0016DDCC513C31E217751923FB3E5181EA72BD2BA6B1FD977C677578B15F5AD9E83B86E65D46E9524418CE4C6BB9C76FE11D69BA76F88CBEB0E4ED1D4F3BBCBEDA07F4352786BC2DAB78FF0059163A3D9CD753B73211854857BB3B9C2A0F762057BE783BF644D174EBB83FB567BFD76EA460C21881B3B6C77CF0D2B0FF00BE3F0AFA17E0BFC09FED5FB3D95B6931DBDB236F1676F12C509EBB4E39C9F76CB7E35CF5B1B4A8C799BD8E8A197D7C54D452B1E09FB3DFEC9B2693A95B5E5D4516AFAF67746A0F9969A73103073CACB2007AF28A7A6EC66BF49BF641FD93743F85DE0C97C7BE359841A1693996E1DCFCF7F37510A03C9663E9F526BA5FD9E3F639D23C21E0C97C65E33957C35E1CB242CF231C493E1788E3C9C1638EC3D7A578AFEDBFFB695BFC65BB5F0F6953DBF877C2DA45BCB2D858162008A35049C28CB4D27006E2A0938C8CD7CB62B32AD8DA8A9D2D8FAFC0E59432CA4EBD4D65FD69EBF91C77ED65F1FEEFF6B3F8B36BBCFF0063F8716416B6D0A1CEC823059BCB41FC2A8BE9CB32FB91F3F7C63D77FE164698F638FECFD51A11FD996E6D0456DA7AAAB9778AE4E163568C24214139740F8C9DD5E89A0CFE1CD506BFA149A9BACFA3B5B4BA76B96C648E78E5440D66A916EDAB1869DD8A637972B8CE003E4DF16B568B45F15D828D422BEF0C4374EB74B75A77916F2C72C8AFBFCAC131AE24EC11F24B05F9B27E9B0583850A694773F39CE333AB8DACEA547E8BC8A3E17F88D6FA0C179A8DCC116A3AFDF59C969A75A451B27941891713CAB8DB26079A91AB8F99932493B6BA293C117BF0826FB7F8662874CB68ED2444B2B66FB458C5296F9D264390D9899D983820AC83D0566FC49D17C396EDA2FF00C230E66B9B9844934AC1BF725554C854900B42CAB1B86002E769C64B11D17C3FF14C50EAFA3E95672EB1777F676D776ED25E223AC8EDFBD8C22E4966FDE6CC9C9FDE9EC2BA99E62663F8AB45D1F50F89934D36A71E970CD6E97D0C3B372A347179863548B2A0231F2911906522009C035E89F033E103FC79F10CBA0785A2935CD6B547B39E48ADA42C93618129B8A7980B2EF186DC4155C018AE23C23E12B9D63E2935EC56D692E8F78B25D24D2BBDC476D7725BAA94C03B9544C5D553924ED1C8E6BF563FE085DFB096B7E07F1BD8FC46D4F4B32D9DCCF2431C52848CAA16919655E7736C60AC08CE33C104105C21CEEC4CE7CAAE7E8F7EC59FB3CC1FB3C7C20D23C390C689FD916AD692BADBF92B724B821F6E48E00C0E4F1DF1803DA6A3B78FCA8554F2546093DEA4AF6A9C145591E1CE4E52BB0A28A2B42428A28A0028A28A0028A28A002A1BDB51796EC87BFA8CD4D4526AFB81F0FF00FC1423FE095BE1AF8EDE1CBDD5349D1AC46B37B334F76F25C345E6B34864762CC481C7627686DA40FBD9FC3FFDA67F64CBEF873E21BDB5BE48EE63B8582EA57B80C8615684EC91A3C6E74099DB9254201D599ABFA9E96159D0AB80CA46083D08AF37F897FB2EF83BE24447EDFE1DD16E64685EDFCD9ED95E4457EB8623240EC84ED1E95C95F0CA6B43AE862793491FCD2FECD3FB6F78DFF65EB2D6BC397D6969E36F8451468CFA26BA5BCD86360C4C9039CBC476A9383F27A0E01AF70F0BF817E157EDC119D43E14EBB1DBEA291EE97C29A9325B6A566DCFC91EE2165008C0C1AF7BFF008289FF00C127AC3E19F8775AF11E876BE57DBA692F2EADED205DB32868C44B1C6178DBB1F2BFECAF18241FCB5F8B3F0235BF847E0FD065B19B50D335DB4BC0DA85E42A61680A6E28B1B8E7392739C0C9F506BE63199346A3E783E497E1F347DC651C555682F655573C3B3DD7A33DCFE21FECBBAC785F52920D4B4EBBD3663CB45759464FAA9C7A7E95C44DF071BED73218D664840DF853B493CFE3DFA576FF00083FE0A3BF137C29E217D07C61A3DBFC52D02C108F37506C5CC512AA8E66193CE7F46EC39F61F0CFEDA9FB33FC6BD26157D3BC4BE03D52E63DED6E664B981F2482537609C107F01C57913FAE61DFBF1BAEE8FB2A35F29C6B4A94F95F696963E528FE10431C92CAC1A18339CA96DA9F4CF5FC2AC69BF0D355BA72D6D717925B478643F7772E71F28EA2BED54D3FE05CFE0E1369FF0013A0B6B846063FB65A146018F2095DC33DEAEAE8FF00046EADD1DFE24DBCB7322AA136D10DFB88E3392A00EFCD64F389A5F0BFB8ED5C3D425AA9AB7A9F21E9BF08B50BAB632DE49A8470BBEF7F325624A8E31824D77DE0EFD9BBEDB6F0DC2A2EC490310CA3793C1E4F423A6735EFBAA7ED01FB3FF8134EDF73AA6B1E2496DD3C8F96286049769EBD491F5E3A572FAD7FC1557C31E05B49BFE10AF87560D36E511DC5C31BB9559802A318D809C82A3AF3EF50B1D8AACED08317F67E5F867CF5AA2FBCE97E17FEC23AA5FDABEA3771DBE9D63BCCB717B78CB144148F56E3B0E7AFA75AE9B5EFDA93E10FEC676F70639AC7C55E25B74C3111E6D519790403CB638ED8F6AF903E2AFEDD3F147F6C0F125CDB5CEA12E91A7AC2F335C2C6CF0C089C36D8C71DBB7271C67A5703A17C31D2AC7C63ABEA9AD6B573776DE1FB585D649B625C992E62F385CCC03B4707CA0F951B393911E412715AD1CA7135DDF132B2EC7062F8AF03858B86123CCFFAFEBA1EC5F1DBF6D9F17FEDD3F16F48D127BD7D03C292AB5C46A1C24569631EEDF2A45951B723032324E07522BC1F48D334A86EA78751D43CCB9F13343E53342D27905A5DD6F6B1B6D6DCD9659642060189179C8AEDFC67AC2E99A769577A5DD595BBDF698E6DB5670971706C12785DD64208087CE556C290CC1BAA80A2B86D5F4B9FC6B6FA6F886182F74A81B56B87B152034DF64B54F38DE961951F322AB718DF8038AFA6C2E0A8D08DA08FCF71F9B6231536EA3D3B2D121B2E91A8783FE1D4B77F6657BC86F6E64D4C2069D11E26587E629BB1C8057A8C479E08C5711E33F0B5E789B48CC174BAB2CF752CD750DDDC117171E62C667667C90D8090AAB4791823E5DD907DBFE0CFC678F53D1EE6E34DD0B4BBDFB7C329D4B4EBE412411CAEBFBC0B93BF61DF952A031E57EF05CE37C7B9BC0FA869F7B6DE11D2E7B0B1D46D925B0BA97519EEAE2DD9247568E44906028F99720EE6F97270307A6F63CDB2E8606B8A35AF055A597DB2CC22594366CD0A63EC500C4321DBC8DCCAA910233B40C923380DF87FA85FEBA2E2DADB4D47D5ACAF63B8B449E2C989D515832100123E6627E604360E0AE6BD9BF634FF00827EEB9FB607C50D174DD0AD64974ED5E548EE669008EDE06F2B127EF00CA8108126319E4000915FB3BFB267FC1083E15FECE5FD97A96A2F75E27F13D848F2CB7B39D91C8FE68646541F7488D44679390CDEB5A4694A7AC48A95A14D5A5B9F3AFF00C124BFE094F65E32BE5F887E30D06C3EC170A1CD9EFF00DD8B89115EE2131636B20731C892A9043A942B8193FAADE0FF0002699E03D256C74AB386CED5092B1C68AA01249278F524D68E99A641A45A886DE18A0897A246A140FCAACD7A74A82823CAAB5A537A8514515B9885145140051451400514514005145140051451400523207EA334B450064F89FC1BA7F8BAD7C8BEB68AE23E70B22060338CF07E95F257EDA9FF00048AF01FED1FE19D4E76B7960D5259DAE21B8462ED006DC762213B00DEDB89E49E7D057D9748E8245C1E878A8942325665C6728BBA3F9DAFDA7FFE0973E32F829E1EB0B896CEEBED5E294FECED4ADE25C8B77F302860990DB4A16393FDEEB9CE3E2EBCFD9E25F0B5F9D4EEB4737705A3DB69D1C2AF88DE5952551927E6C2AA4AEC78237738DA6BFAD8F1AFC35D23C7D0A0D46CE19CC4B22296456CABAED60410411D0F3D08046315F137ED2FFF000473F0A7C50B9D4278ECDE6B0B7B48960B24215A79B2DE6461C8F915B79DCE4B70ED9202D704F0AD691D8F4296313F88FC06D0FE1AD9EA3A2C6C9386B7BFBEB8136617587CA50BE5C71F209C3AB3138E018C0C8DD5497E08FF00C27B7D6167A6ACDA7CB3C99BB6791414B4876EF6DDD15A5FC8046C71923F62FE297FC10F2E64F85FA7B6870CD7770D0BC8D2595A2C2D2C935C09B795DDCC6119D1464B0C26781CFCB9F13BFE0955F143C0DE07D403D95BE9F6B6B6F0C1A82F124C6323FD4952A0E11A36638277614927A560F0CD2D4EB8E31CB4523E24D4BC2DA45BDFEB7AD0B327C39A3CEEB77A9163E56A73E0225B4249F9608F0C59829694A37280AE76BC27E0E5D4B4A8B4AFB7491DE5B4BFDADAA5E6140B4BA572CB0A2B0C1296A0B93C8241DA7E4E7E93D3FF00E09B9F11468979FDB5A0DF6A9611C93D8B34A6312DD3B0E6323EEF9849E33C2EEC6E1815CEF847F628F885F0FF005AD5AEE6D2B57363A859452BDADD5A3C535E69EC4AC720DC4EE8CC8CAACCA4B1193D2A153B6C83DAB6F5679C7C3DF0F689A86926CF464B987C9B174BDBCF29C2C76A55C02D23B6362898BB11F2E4E0738AE2FC4B0FFC245E21D6E1D3205BEF0FACE6F63821E2DE611BC5129380BBE54883202DB8A966C60735F5AF85FF00E09FFF00163C5F6DA7E91A1E8EB16837C26B8B37B38B62CF1DBBC6AD6F21C7EF1C619D63936A15DD9E4AE619FF00E0933F1566D52696D7C2D3E9D770B4AB3C102F9913300AECC9C8C0C88C8EA0EE0323032D527D88BC5753E51B5BAFECFB2B68BCC58ADA1F384F6772B931C4DE5B88F18CB6EDAA83271C1F4E22D5B4AD627D1EDDD22DB3C76325BDC30BD6C0973E63246A5803BF0493CE3233C707F48FF66BFF00820378A7C5FA741ABEBD75258EA176B235DC135BA8F3832B14521B20AA09148008CB023383C7D6DFB39FFC10CBC35F093C4FA45EEA176FA80B13E73DB48886349410FE6860031DCCA80C6490029C11C0AD63426CCE55A08FC70F835FB19EBDE3FBDB2874BD0446F3DC9FB3F9EA13ECF2FCD888C876E46DE46391CAF51CFDCFF0A3FE0827E2AF16EB3A45FF008DA4B7B2B5BAB577FB3DD209258F79F9A371BC159159980C82000849C96DBFB27E1CF863A1785B468B4FD3F48D3ECACE17691628605452CC58B3600EA77B67FDE35B91DA469185D80055DA07B574470ABA9C8F16DEC78AFEC87FB17F85FF00652F0E7D97C3F632D9A38855ADD8A345198E111ABA607DEC6ECB0C121C839C0C7B7018A51C515D708282B2396537277614514559214514500145145001451450014514500145145001451450014514500145145001515DDA25E5BBC522EE4906D65F5152D1400C8E208300003D0551D53C27A76B5E67DAAD229C4A30E1875E315A3450062FFC203A57F659B3FB15B881A33090100F9339DBFCA96F3C05A4EA1A7595B4D616B2C7A700B6C248C39846369009CE015E0FB56CD14AC87CCCC2D2FE1D691A2C70ADAD8DBC22079248F620010BAED6C7D5401F856847A25BC4D16215FDC7FAB39FBB5768A39505D91880039C007A53B6714EA2988451814B4514005145140051451400514514005145140051451401FFD9),\r\n  CNHDigital varbinary(max) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  DataAlteracao datetime NULL DEFAULT (getdate()),\r\n  UnidadeId uniqueidentifier NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  CondutorId uniqueidentifier NULL,\r\n  TipoCondutor varchar(50) NULL CONSTRAINT DF_Motorista_TipoCondutor2 DEFAULT (\u0027\u0027),\r\n  EfetivoFerista varchar(50) NULL CONSTRAINT DF_Motorista_EfetivoFerista2 DEFAULT (\u0027\u0027),\r\n  CodMotoristaQCard int NULL,\r\n  CONSTRAINT PK_Motorista_bkp_MotoristaId PRIMARY KEY CLUSTERED (MotoristaId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Perfis":  "CREATE TABLE dbo.Perfis (\r\n  id_perfil int IDENTITY,\r\n  descricao varchar(50) NOT NULL,\r\n  CONSTRAINT PK_Perfis_cod_perfil PRIMARY KEY CLUSTERED (id_perfil)\r\n)\r\nON [PRIMARY]",
                       "ViagemEstatistica":  "CREATE TABLE dbo.ViagemEstatistica (\r\n  Id int IDENTITY,\r\n  DataReferencia datetime2 NOT NULL,\r\n  TotalViagens int NOT NULL DEFAULT (0),\r\n  ViagensFinalizadas int NOT NULL DEFAULT (0),\r\n  ViagensEmAndamento int NOT NULL DEFAULT (0),\r\n  ViagensAgendadas int NOT NULL DEFAULT (0),\r\n  ViagensCanceladas int NOT NULL DEFAULT (0),\r\n  CustoTotal decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoMedioPorViagem decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoVeiculo decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoMotorista decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoOperador decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoLavador decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoCombustivel decimal(18, 2) NOT NULL DEFAULT (0),\r\n  QuilometragemTotal decimal(18, 2) NOT NULL DEFAULT (0),\r\n  QuilometragemMedia decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ViagensPorStatusJson nvarchar(max) NULL,\r\n  ViagensPorMotoristaJson nvarchar(max) NULL,\r\n  ViagensPorVeiculoJson nvarchar(max) NULL,\r\n  ViagensPorFinalidadeJson nvarchar(max) NULL,\r\n  ViagensPorRequisitanteJson nvarchar(max) NULL,\r\n  ViagensPorSetorJson nvarchar(max) NULL,\r\n  CustosPorMotoristaJson nvarchar(max) NULL,\r\n  CustosPorVeiculoJson nvarchar(max) NULL,\r\n  KmPorVeiculoJson nvarchar(max) NULL,\r\n  CustosPorTipoJson nvarchar(max) NULL,\r\n  DataCriacao datetime2 NOT NULL DEFAULT (getdate()),\r\n  DataAtualizacao datetime2 NULL,\r\n  KmTotal int NULL,\r\n  KmMedio decimal(18, 2) NULL,\r\n  MinutosTotal int NULL,\r\n  MinutosMedio int NULL,\r\n  CONSTRAINT PK_ViagemEstatistica PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Usuarios":  "CREATE TABLE dbo.Usuarios (\r\n  UsuarioId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ponto varchar(10) NOT NULL,\r\n  PontoUpper varchar(10) NOT NULL,\r\n  Nome varchar(100) NOT NULL,\r\n  Email varchar(100) NOT NULL,\r\n  EmailUpper varchar(100) NULL,\r\n  EmailNaoConfirmado varchar(100) NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NOT NULL,\r\n  SenhaHash varchar(100) NOT NULL,\r\n  SenhaCamaraNetHash varchar(100) NULL,\r\n  PrecisaMudarSenha bit NULL,\r\n  EmailConfirmado bit NULL,\r\n  SecurityStamp varchar(50) NULL,\r\n  AuthenticatorKey varchar(50) NULL,\r\n  RecoveryCodes varchar(200) NULL,\r\n  AccessFailedCount int NULL,\r\n  LockoutEndDate datetime NULL,\r\n  AdministratorRole bit NULL,\r\n  LastLoginDate datetime NULL,\r\n  CreatedDate datetime NULL,\r\n  RowVersion timestamp NULL,\r\n  CONSTRAINT PK_Usuarios_id_usuario PRIMARY KEY CLUSTERED (UsuarioId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "MovimentacaoEmpenhoMulta":  "CREATE TABLE dbo.MovimentacaoEmpenhoMulta (\r\n  MovimentacaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(500) NULL,\r\n  TipoMovimentacao char(1) NULL,\r\n  Valor float NULL,\r\n  DataMovimentacao datetime NULL,\r\n  MultaId uniqueidentifier NULL,\r\n  EmpenhoMultaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_MovimentacaoEmpenhoMulta_MovimentacaoId PRIMARY KEY CLUSTERED (MovimentacaoId)\r\n)\r\nON [PRIMARY]",
                       "LavadoresLavagem":  "CREATE TABLE dbo.LavadoresLavagem (\r\n  LavagemId uniqueidentifier NOT NULL,\r\n  LavadorId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_LavadoresLavagem PRIMARY KEY CLUSTERED (LavagemId, LavadorId)\r\n)\r\nON [PRIMARY]",
                       "ItensManutencao":  "CREATE TABLE dbo.ItensManutencao (\r\n  ItemManutencaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  ManutencaoId uniqueidentifier NOT NULL,\r\n  TipoItem varchar(100) NULL,\r\n  NumFicha varchar(50) NULL,\r\n  DataItem datetime NULL,\r\n  Resumo varchar(max) NULL,\r\n  Descricao varchar(max) NULL,\r\n  Status varchar(100) NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  ViagemId uniqueidentifier NULL,\r\n  ImagemOcorrencia varchar(500) NULL,\r\n  CONSTRAINT PK_ItensManutencao PRIMARY KEY CLUSTERED (ItemManutencaoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "SetorSolicitante":  "CREATE TABLE dbo.SetorSolicitante (\r\n  SetorSolicitanteId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(200) NOT NULL,\r\n  Sigla varchar(50) NULL,\r\n  Ramal int NULL,\r\n  SetorPaiId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  DataAlteracao datetime NULL DEFAULT (getdate()),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  CONSTRAINT PK_Setores_id_setor PRIMARY KEY CLUSTERED (SetorSolicitanteId)\r\n)\r\nON [PRIMARY]",
                       "tr_Object":  "CREATE TABLE dbo.tr_Object (\r\n  Id varchar(255) NOT NULL,\r\n  Value image NOT NULL,\r\n  CONSTRAINT pk_tr_Object PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "WhatsAppMensagens":  "CREATE TABLE dbo.WhatsAppMensagens (\r\n  Id int IDENTITY,\r\n  NumeroDestino nvarchar(50) NOT NULL,\r\n  Mensagem nvarchar(max) NOT NULL,\r\n  Tipo int NOT NULL DEFAULT (0),\r\n  Status int NOT NULL DEFAULT (0),\r\n  DataCriacao datetime NOT NULL DEFAULT (getdate()),\r\n  DataEnvio datetime NULL,\r\n  DataLeitura datetime NULL,\r\n  InstanciaId int NULL,\r\n  ContatoId int NULL,\r\n  UsuarioId int NULL,\r\n  ErroDetalhes nvarchar(max) NULL,\r\n  TentativasEnvio int NULL DEFAULT (0),\r\n  IdWhatsApp nvarchar(100) NULL,\r\n  RespostaJson nvarchar(max) NULL,\r\n  UrlMidia nvarchar(500) NULL,\r\n  TipoMidia nvarchar(50) NULL,\r\n  NomeArquivo nvarchar(255) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "RepactuacaoTerceirizacao":  "CREATE TABLE dbo.RepactuacaoTerceirizacao (\r\n  RepactuacaoTerceirizacaoId uniqueidentifier NOT NULL,\r\n  DataRepactuacao date NULL,\r\n  ValorEncarregado float NULL,\r\n  QtdEncarregados int NULL,\r\n  ValorOperador float NULL,\r\n  QtdOperadores int NULL,\r\n  ValorMotorista float NULL,\r\n  QtdMotoristas int NULL,\r\n  ValorLavador float NULL,\r\n  QtdLavadores int NULL,\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_RepactuacaoTerceirizacao_RepactuacaoTerceirizacaoId PRIMARY KEY CLUSTERED (RepactuacaoTerceirizacaoId)\r\n)\r\nON [PRIMARY]",
                       "tr_Set":  "CREATE TABLE dbo.tr_Set (\r\n  Id varchar(255) NOT NULL,\r\n  Member varchar(255) NOT NULL,\r\n  CONSTRAINT pk_st_DE59633C PRIMARY KEY CLUSTERED (Id, Member)\r\n)\r\nON [PRIMARY]",
                       "ModeloVeiculo":  "CREATE TABLE dbo.ModeloVeiculo (\r\n  ModeloId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  MarcaId uniqueidentifier NOT NULL,\r\n  DescricaoModelo varchar(100) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_ModeloVeiculo_ModeloId PRIMARY KEY CLUSTERED (ModeloId)\r\n)\r\nON [PRIMARY]",
                       "CorridasCanceladasTaxiLeg":  "CREATE TABLE dbo.CorridasCanceladasTaxiLeg (\r\n  CorridaCanceladaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Origem varchar(100) NULL,\r\n  Setor varchar(500) NULL,\r\n  SetorExtra varchar(500) NULL,\r\n  Unidade varchar(500) NULL,\r\n  UnidadeExtra varchar(500) NULL,\r\n  QtdPassageiros int NULL,\r\n  MotivoUso varchar(500) NULL,\r\n  DataAgenda datetime NULL,\r\n  HoraAgenda varchar(5) NULL,\r\n  DataHoraCancelamento datetime NULL,\r\n  HoraCancelamento varchar(5) NULL,\r\n  TipoCancelamento varchar(500) NULL,\r\n  MotivoCancelamento varchar(500) NULL,\r\n  TempoEspera int NULL,\r\n  CONSTRAINT PK_CorridasCanceladasTaxiLeg_CorridaCanceladaId PRIMARY KEY CLUSTERED (CorridaCanceladaId)\r\n)\r\nON [PRIMARY]",
                       "Recurso":  "CREATE TABLE dbo.Recurso (\r\n  RecursoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(250) NULL,\r\n  Descricao varchar(250) NULL,\r\n  NomeMenu varchar(250) NULL,\r\n  Ordem float NOT NULL,\r\n  ParentId uniqueidentifier NULL,\r\n  Icon nvarchar(200) NULL,\r\n  Href nvarchar(500) NULL,\r\n  Ativo bit NOT NULL DEFAULT (1),\r\n  Nivel int NOT NULL DEFAULT (0),\r\n  CONSTRAINT PK_Recurso_RecursoId PRIMARY KEY CLUSTERED (RecursoId)\r\n)\r\nON [PRIMARY]",
                       "SecaoPatrimonial":  "CREATE TABLE dbo.SecaoPatrimonial (\r\n  SecaoId uniqueidentifier NOT NULL,\r\n  NomeSecao varchar(50) NOT NULL,\r\n  SetorId uniqueidentifier NOT NULL,\r\n  Status bit NOT NULL,\r\n  CONSTRAINT PK_Secao_SecaoId PRIMARY KEY CLUSTERED (SecaoId)\r\n)\r\nON [PRIMARY]",
                       "ViagensEconomildo":  "CREATE TABLE dbo.ViagensEconomildo (\r\n  VIagemEconomildoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Data date NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  MOB varchar(50) NULL,\r\n  Responsavel varchar(50) NULL,\r\n  IdaVolta varchar(5) NULL,\r\n  Trajeto varchar(500) NULL,\r\n  HoraInicio varchar(5) NULL,\r\n  HoraFim varchar(5) NULL,\r\n  Duracao int NULL,\r\n  QtdPassageiros int NULL,\r\n  CONSTRAINT PK_table1_VIagemEconomildoId PRIMARY KEY CLUSTERED (VIagemEconomildoId)\r\n)\r\nON [PRIMARY]",
                       "Operador":  "CREATE TABLE dbo.Operador (\r\n  OperadorId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NULL CONSTRAINT DF_Operador_Nome2 DEFAULT (\u0027\u0027),\r\n  Ponto varchar(50) NULL CONSTRAINT DF_Operador_Ponto2 DEFAULT (\u0027\u0027),\r\n  DataNascimento date NULL,\r\n  CPF varchar(50) NULL CONSTRAINT DF_Operador_CPF2 DEFAULT (\u0027\u0027),\r\n  Celular01 varchar(50) NULL CONSTRAINT DF_Operador_Celular012 DEFAULT (\u0027\u0027),\r\n  Celular02 varchar(50) NULL CONSTRAINT DF_Operador_Celular022 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(50) NULL,\r\n  DataAlteracao datetime NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_Operadores_OperadorId PRIMARY KEY CLUSTERED (OperadorId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Lavagem":  "CREATE TABLE dbo.Lavagem (\r\n  LavagemId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  Horario datetime NULL,\r\n  Data datetime NULL,\r\n  CONSTRAINT PK_Lavagem_LavagemId PRIMARY KEY CLUSTERED (LavagemId)\r\n)\r\nON [PRIMARY]",
                       "CorridasTaxiLeg":  "CREATE TABLE dbo.CorridasTaxiLeg (\r\n  CorridaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  QRU int NULL,\r\n  Origem varchar(200) NULL,\r\n  Setor varchar(200) NULL,\r\n  DescSetor varchar(300) NULL,\r\n  Unidade varchar(200) NULL,\r\n  DescUnidade varchar(200) NULL,\r\n  QtdPassageiros int NULL,\r\n  MotivoUso varchar(200) NULL,\r\n  DataAgenda date NULL,\r\n  HoraAgenda varchar(5) NULL,\r\n  HoraAceite varchar(5) NULL,\r\n  HoraLocal varchar(5) NULL,\r\n  HoraInicio varchar(5) NULL,\r\n  HoraFinal varchar(5) NULL,\r\n  DataFinal date NULL,\r\n  KmReal float NULL,\r\n  Valor float NULL,\r\n  QtdEstrelas int NULL,\r\n  Avaliacao varchar(50) NULL,\r\n  Duracao int NULL,\r\n  Espera int NULL,\r\n  OrigemCorrida varchar(150) NULL,\r\n  DestinoCorrida varchar(150) NULL,\r\n  Glosa bit NULL,\r\n  ValorGlosa float NULL,\r\n  CONSTRAINT PK_CorridasTaxiLeg_CorridaId PRIMARY KEY CLUSTERED (CorridaId)\r\n)\r\nON [PRIMARY]",
                       "AbastecimentoPendente":  "CREATE TABLE dbo.AbastecimentoPendente (\r\n  AbastecimentoPendenteId uniqueidentifier NOT NULL,\r\n  AutorizacaoQCard int NULL,\r\n  Placa nvarchar(20) NULL,\r\n  CodMotorista int NULL,\r\n  NomeMotorista nvarchar(200) NULL,\r\n  Produto nvarchar(100) NULL,\r\n  DataHora datetime2 NULL,\r\n  KmAnterior int NULL,\r\n  Km int NULL,\r\n  KmRodado int NULL,\r\n  Litros float NULL,\r\n  ValorUnitario float NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  CombustivelId uniqueidentifier NULL,\r\n  DescricaoPendencia nvarchar(2000) NULL,\r\n  TipoPendencia nvarchar(50) NULL,\r\n  TemSugestao bit NOT NULL DEFAULT (0),\r\n  CampoCorrecao nvarchar(20) NULL,\r\n  ValorAtualErrado int NULL,\r\n  ValorSugerido int NULL,\r\n  JustificativaSugestao nvarchar(500) NULL,\r\n  MediaConsumoVeiculo float NULL,\r\n  DataImportacao datetime2 NOT NULL,\r\n  NumeroLinhaOriginal int NOT NULL DEFAULT (0),\r\n  ArquivoOrigem nvarchar(255) NULL,\r\n  Status int NOT NULL DEFAULT (0),\r\n  CONSTRAINT PK_AbastecimentoPendente PRIMARY KEY CLUSTERED (AbastecimentoPendenteId)\r\n)\r\nON [PRIMARY]",
                       "ItemVeiculoContrato":  "CREATE TABLE dbo.ItemVeiculoContrato (\r\n  ItemVeiculoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumItem int NULL,\r\n  Descricao varchar(100) NULL,\r\n  Quantidade int NULL,\r\n  ValorUnitario float NULL,\r\n  RepactuacaoContratoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_ItemVeiculoContrato_ItemVeiculoId PRIMARY KEY CLUSTERED (ItemVeiculoId)\r\n)\r\nON [PRIMARY]",
                       "AspNetUserTokens":  "CREATE TABLE dbo.AspNetUserTokens (\r\n  UserId nvarchar(450) NOT NULL,\r\n  LoginProvider nvarchar(450) NOT NULL,\r\n  Name nvarchar(450) NOT NULL,\r\n  Value nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Encarregado":  "CREATE TABLE dbo.Encarregado (\r\n  EncarregadoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome nvarchar(100) NOT NULL,\r\n  Ponto nvarchar(20) NOT NULL,\r\n  DataNascimento datetime2 NOT NULL,\r\n  CPF nvarchar(20) NOT NULL,\r\n  Celular01 nvarchar(50) NOT NULL,\r\n  Celular02 nvarchar(50) NULL,\r\n  DataIngresso datetime2 NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NOT NULL DEFAULT (1),\r\n  DataAlteracao datetime2 NULL,\r\n  UsuarioIdAlteracao nvarchar(450) NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_Encarregado PRIMARY KEY CLUSTERED (EncarregadoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "AspNetUsers":  "CREATE TABLE dbo.AspNetUsers (\r\n  Id nvarchar(450) NOT NULL,\r\n  UserName nvarchar(256) NULL,\r\n  NormalizedUserName nvarchar(256) NULL,\r\n  Email nvarchar(256) NULL,\r\n  NormalizedEmail nvarchar(256) NULL,\r\n  EmailConfirmed bit NULL,\r\n  PasswordHash nvarchar(max) NULL,\r\n  SecurityStamp nvarchar(max) NULL,\r\n  ConcurrencyStamp nvarchar(max) NULL,\r\n  PhoneNumber nvarchar(max) NULL,\r\n  PhoneNumberConfirmed bit NULL,\r\n  TwoFactorEnabled bit NULL,\r\n  LockoutEnd datetimeoffset NULL,\r\n  LockoutEnabled bit NULL,\r\n  AccessFailedCount int NULL,\r\n  Discriminator nvarchar(max) NULL,\r\n  NomeCompleto nvarchar(max) NULL,\r\n  Ponto nvarchar(max) NULL,\r\n  PrecisaMudarSenha bit NULL,\r\n  Ramal int NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  Foto varbinary(max) NULL,\r\n  Criacao datetime NULL,\r\n  UltimoLogin datetime NULL,\r\n  DetentorCargaPatrimonial bit NULL,\r\n  UsuarioIdAlteracao varchar(150) NULL,\r\n  Vistoriador bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_AspNetUsers_Id PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Fornecedor":  "CREATE TABLE dbo.Fornecedor (\r\n  FornecedorId uniqueidentifier NOT NULL CONSTRAINT DF_Fornecedor_FornecedorId DEFAULT (newid()),\r\n  DescricaoFornecedor varchar(100) NULL,\r\n  CNPJ varchar(50) NULL,\r\n  Endereco varchar(150) NULL,\r\n  Contato01 varchar(100) NULL,\r\n  Telefone01 varchar(50) NULL,\r\n  Contato02 varchar(100) NULL,\r\n  Telefone02 varchar(50) NULL,\r\n  Status bit NULL,\r\n  CONSTRAINT PK_Fornecedor_FornecedorId PRIMARY KEY CLUSTERED (FornecedorId)\r\n)\r\nON [PRIMARY]",
                       "Empenho":  "CREATE TABLE dbo.Empenho (\r\n  EmpenhoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NotaEmpenho varchar(12) NOT NULL,\r\n  DataEmissao date NOT NULL,\r\n  AnoVigencia int NOT NULL,\r\n  SaldoInicial float NOT NULL,\r\n  SaldoFinal float NOT NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  VigenciaInicial date NULL,\r\n  VigenciaFinal date NULL,\r\n  CONSTRAINT PK_Empenho_EmpenhoId PRIMARY KEY CLUSTERED (EmpenhoId)\r\n)\r\nON [PRIMARY]",
                       "MovimentacaoPatrimonio":  "CREATE TABLE dbo.MovimentacaoPatrimonio (\r\n  MovimentacaoPatrimonioId uniqueidentifier NOT NULL,\r\n  DataMovimentacao datetime NOT NULL,\r\n  ResponsavelMovimentacao nvarchar(450) NOT NULL,\r\n  SecaoOrigemId uniqueidentifier NOT NULL,\r\n  SecaoDestinoId uniqueidentifier NOT NULL,\r\n  SetorOrigemId uniqueidentifier NOT NULL,\r\n  SetorDestinoId uniqueidentifier NOT NULL,\r\n  PatrimonioId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_MovimentacaoPatrimonio_MovimentacaoPatrimonioId PRIMARY KEY CLUSTERED (MovimentacaoPatrimonioId)\r\n)\r\nON [PRIMARY]",
                       "Veiculo":  "CREATE TABLE dbo.Veiculo (\r\n  VeiculoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Placa varchar(10) NOT NULL,\r\n  Quilometragem int NULL CONSTRAINT DF_Veiculo_Quilometragem2 DEFAULT (0),\r\n  Renavam varchar(20) NULL CONSTRAINT DF_Veiculo_Renavam2 DEFAULT (\u0027\u0027),\r\n  PlacaVinculada varchar(50) NULL CONSTRAINT DF_Veiculo_PlacaVinculada2 DEFAULT (\u0027\u0027),\r\n  AnoFabricacao int NULL CONSTRAINT DF_Veiculo_AnoFabricacao2 DEFAULT (0),\r\n  AnoModelo int NULL CONSTRAINT DF_Veiculo_AnoModelo2 DEFAULT (0),\r\n  Reserva bit NULL DEFAULT (0),\r\n  VeiculoProprio bit NULL DEFAULT (0),\r\n  Status bit NULL DEFAULT (1),\r\n  CRLV varbinary(max) NULL,\r\n  DataAlteracao datetime NOT NULL DEFAULT (getdate()),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  UnidadeId uniqueidentifier NULL,\r\n  MarcaId uniqueidentifier NOT NULL,\r\n  ModeloId uniqueidentifier NOT NULL,\r\n  CombustivelId uniqueidentifier NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  PlacaBronzeId uniqueidentifier NULL,\r\n  ItemVeiculoId uniqueidentifier NULL,\r\n  Patrimonio varchar(10) NULL CONSTRAINT DF_Veiculo_Patrimonio2 DEFAULT (\u0027\u0027),\r\n  ItemVeiculoAtaId uniqueidentifier NULL,\r\n  Categoria varchar(50) NULL CONSTRAINT DF_Veiculo_Categoria2 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  Economildo bit NULL CONSTRAINT DF_Veiculo_Economildo2 DEFAULT (0),\r\n  ValorMensal float NULL DEFAULT (0),\r\n  Consumo float NULL DEFAULT (0),\r\n  CONSTRAINT PK_Veiculos_id_Veiculo PRIMARY KEY CLUSTERED (VeiculoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "WhatsAppContatos":  "CREATE TABLE dbo.WhatsAppContatos (\r\n  Id int IDENTITY,\r\n  Numero nvarchar(50) NOT NULL,\r\n  Nome nvarchar(100) NULL,\r\n  NomeWhatsApp nvarchar(100) NULL,\r\n  FotoUrl nvarchar(500) NULL,\r\n  Verificado bit NULL DEFAULT (0),\r\n  Bloqueado bit NULL DEFAULT (0),\r\n  UltimaMensagem datetime NULL,\r\n  DataCadastro datetime NOT NULL DEFAULT (getdate()),\r\n  TotalMensagensEnviadas int NULL DEFAULT (0),\r\n  TotalMensagensRecebidas int NULL DEFAULT (0),\r\n  ObservacoesJson nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  UNIQUE (Numero)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "CondutorApoio":  "CREATE TABLE dbo.CondutorApoio (\r\n  CondutorId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(50) NULL,\r\n  Status bit NULL,\r\n  CONSTRAINT PK_CondutorApoio_CondutorId PRIMARY KEY CLUSTERED (CondutorId)\r\n)\r\nON [PRIMARY]",
                       "MotoristaContrato":  "CREATE TABLE dbo.MotoristaContrato (\r\n  MotoristaId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_MotoristaContrato PRIMARY KEY CLUSTERED (MotoristaId, ContratoId)\r\n)\r\nON [PRIMARY]",
                       "Evento":  "CREATE TABLE dbo.Evento (\r\n  EventoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(200) NULL,\r\n  Descricao varchar(max) NULL,\r\n  QtdParticipantes int NOT NULL,\r\n  DataInicial datetime NULL,\r\n  DataFinal datetime NULL,\r\n  SetorSolicitanteId uniqueidentifier NOT NULL,\r\n  RequisitanteId uniqueidentifier NOT NULL,\r\n  Status varchar(1) NULL,\r\n  CONSTRAINT PK_Evento_EventoId PRIMARY KEY CLUSTERED (EventoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "EmpenhoMulta":  "CREATE TABLE dbo.EmpenhoMulta (\r\n  EmpenhoMultaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NotaEmpenho varchar(50) NOT NULL,\r\n  AnoVigencia int NULL,\r\n  SaldoInicial float NULL,\r\n  SaldoAtual float NULL,\r\n  OrgaoAutuanteId uniqueidentifier NULL,\r\n  Status bit NULL,\r\n  CONSTRAINT PK_Empenhos_multas PRIMARY KEY CLUSTERED (EmpenhoMultaId)\r\n)\r\nON [PRIMARY]",
                       "SetorPatrimonial":  "CREATE TABLE dbo.SetorPatrimonial (\r\n  SetorId uniqueidentifier NOT NULL,\r\n  NomeSetor varchar(50) NOT NULL,\r\n  DetentorId nvarchar(450) NOT NULL,\r\n  Status bit NOT NULL DEFAULT (1),\r\n  SetorBaixa bit NULL,\r\n  CONSTRAINT PK_Setor_SetorId PRIMARY KEY CLUSTERED (SetorId)\r\n)\r\nON [PRIMARY]",
                       "ItemVeiculoAta":  "CREATE TABLE dbo.ItemVeiculoAta (\r\n  ItemVeiculoAtaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumItem int NULL,\r\n  Descricao varchar(100) NULL,\r\n  Quantidade int NULL,\r\n  ValorUnitario float NULL,\r\n  RepactuacaoAtaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_ItemVeiculoAta_ItemVeiculoId PRIMARY KEY CLUSTERED (ItemVeiculoAtaId)\r\n)\r\nON [PRIMARY]",
                       "VeiculoPadraoViagem":  "CREATE TABLE dbo.VeiculoPadraoViagem (\r\n  VeiculoPadraoViagemId int IDENTITY,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  AvgDuracaoMinutos decimal(18, 2) NULL,\r\n  DesvioPadraoDuracaoMinutos decimal(18, 2) NULL,\r\n  MinDuracaoMinutos int NULL,\r\n  MaxDuracaoNormalMinutos int NULL,\r\n  MedianaDuracaoMinutos int NULL,\r\n  AvgKmPorViagem decimal(18, 2) NULL,\r\n  DesvioPadraoKm decimal(18, 2) NULL,\r\n  MaxKmNormalPorViagem decimal(18, 2) NULL,\r\n  MedianaKm decimal(18, 2) NULL,\r\n  Q1Km decimal(18, 2) NULL,\r\n  Q3Km decimal(18, 2) NULL,\r\n  IQRKm decimal(18, 2) NULL,\r\n  LimiteInferiorKm decimal(18, 2) NULL,\r\n  LimiteSuperiorKm decimal(18, 2) NULL,\r\n  MedianaMinutos decimal(18, 2) NULL,\r\n  AvgKmPorDia decimal(18, 2) NULL,\r\n  MediaKmEntreAbastecimentos decimal(18, 2) NULL,\r\n  MediaDiasEntreAbastecimentos decimal(18, 2) NULL,\r\n  TotalAbastecimentosAnalisados int NULL DEFAULT (0),\r\n  TotalViagensAnalisadas int NULL DEFAULT (0),\r\n  TotalViagensRealizadas int NULL DEFAULT (0),\r\n  Percentil95Duracao int NULL,\r\n  Percentil99Duracao int NULL,\r\n  TipoUso varchar(50) NULL,\r\n  DataCriacao datetime2 NULL DEFAULT (getdate()),\r\n  DataAtualizacao datetime2 NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (VeiculoPadraoViagemId)\r\n)\r\nON [PRIMARY]",
                       "MarcaVeiculo":  "CREATE TABLE dbo.MarcaVeiculo (\r\n  MarcaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DescricaoMarca varchar(50) NOT NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_MarcaVeiculo_MarcaId PRIMARY KEY CLUSTERED (MarcaId)\r\n)\r\nON [PRIMARY]",
                       "VeiculoContrato":  "CREATE TABLE dbo.VeiculoContrato (\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_VeiculoContrato PRIMARY KEY CLUSTERED (VeiculoId, ContratoId)\r\n)\r\nON [PRIMARY]",
                       "PlacaBronze":  "CREATE TABLE dbo.PlacaBronze (\r\n  PlacaBronzeId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DescricaoPlaca varchar(100) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_PlacaBronze_PlacaId PRIMARY KEY CLUSTERED (PlacaBronzeId)\r\n)\r\nON [PRIMARY]",
                       "OperadorContrato":  "CREATE TABLE dbo.OperadorContrato (\r\n  OperadorId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_OperadorContrato PRIMARY KEY CLUSTERED (OperadorId, ContratoId)\r\n)\r\nON [PRIMARY]",
                       "AlertasUsuario":  "CREATE TABLE dbo.AlertasUsuario (\r\n  AlertasUsuarioId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  AlertasFrotiXId uniqueidentifier NOT NULL,\r\n  UsuarioId nvarchar(450) NOT NULL,\r\n  Lido bit NOT NULL DEFAULT (0),\r\n  DataLeitura datetime2 NULL,\r\n  Notificado bit NOT NULL DEFAULT (0),\r\n  Apagado bit NULL CONSTRAINT DF_AlertasUsuario_Apagado DEFAULT (0),\r\n  DataApagado datetime NULL,\r\n  DataNotificacao datetime NULL,\r\n  CONSTRAINT PK_AlertasUsuario PRIMARY KEY CLUSTERED (AlertasUsuarioId),\r\n  CONSTRAINT UK_AlertasUsuario_Alerta_Usuario UNIQUE (AlertasFrotiXId, UsuarioId)\r\n)\r\nON [PRIMARY]",
                       "AspNetUserClaims":  "CREATE TABLE dbo.AspNetUserClaims (\r\n  Id int NOT NULL,\r\n  UserId nvarchar(450) NOT NULL,\r\n  ClaimType nvarchar(max) NULL,\r\n  ClaimValue nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "ControleAcesso":  "CREATE TABLE dbo.ControleAcesso (\r\n  UsuarioId nvarchar(450) NOT NULL,\r\n  RecursoId uniqueidentifier NOT NULL,\r\n  Acesso bit NOT NULL DEFAULT (1),\r\n  CONSTRAINT PK_ControleAcesso PRIMARY KEY CLUSTERED (UsuarioId, RecursoId)\r\n)\r\nON [PRIMARY]",
                       "AspNetRoles":  "CREATE TABLE dbo.AspNetRoles (\r\n  Id nvarchar(450) NOT NULL,\r\n  Name nvarchar(256) NULL,\r\n  NormalizedName nvarchar(256) NULL,\r\n  ConcurrencyStamp nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "Manutencao":  "CREATE TABLE dbo.Manutencao (\r\n  ManutencaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumOS varchar(50) NOT NULL,\r\n  DataSolicitacao datetime NOT NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  ResumoOS varchar(500) NULL CONSTRAINT DF_Manutencao_ResumoOS DEFAULT (\u0027\u0027),\r\n  DataDevolucao datetime NULL,\r\n  StatusOS varchar(50) NULL CONSTRAINT DF_Manutencao_StatusOS DEFAULT (\u0027\u0027),\r\n  DataRecolhimento datetime NULL,\r\n  ReservaEnviado bit NULL CONSTRAINT DF_Manutencao_ReservaEnviado DEFAULT (0),\r\n  VeiculoReservaId uniqueidentifier NULL,\r\n  DataRecebimentoReserva datetime NULL,\r\n  DataDevolucaoReserva datetime NULL,\r\n  ManutencaoPreventiva bit NULL CONSTRAINT DF_Manutencao_ManutencaoPreventiva DEFAULT (0),\r\n  QuilometragemManutencao int NULL CONSTRAINT DF_Manutencao_QuilometragemManutencao DEFAULT (0),\r\n  DataEntrega date NULL,\r\n  IdUsuarioAlteracao nvarchar(450) NULL,\r\n  DataAlteracao datetime NULL,\r\n  IdUsuarioCancelamento nvarchar(450) NULL,\r\n  DataCancelamento datetime NULL,\r\n  IdUsuarioCriacao nvarchar(450) NULL,\r\n  DataCriacao datetime NULL,\r\n  IdUsuarioFinalizacao nvarchar(450) NULL,\r\n  DataFinalizacao datetime NULL,\r\n  DataDisponibilidade date NULL,\r\n  CONSTRAINT PK_Manutencao_ManutencaoId PRIMARY KEY CLUSTERED (ManutencaoId)\r\n)\r\nON [PRIMARY]",
                       "Multa":  "CREATE TABLE dbo.Multa (\r\n  MultaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Data datetime NOT NULL,\r\n  Hora datetime NOT NULL,\r\n  Localizacao varchar(200) NOT NULL,\r\n  Vencimento datetime NULL,\r\n  ValorAteVencimento float NULL CONSTRAINT DF_Multa_ValorAteVencimento2 DEFAULT (0),\r\n  ValorPosVencimento float NULL CONSTRAINT DF_Multa_ValorPosVencimento2 DEFAULT (0),\r\n  Observacao varchar(max) NULL CONSTRAINT DF_Multa_Observacao2 DEFAULT (\u0027\u0027),\r\n  AutuacaoPDF varchar(max) NULL CONSTRAINT DF_Multa_AutuacaoPDF2 DEFAULT (\u0027\u0027),\r\n  PenalidadePDF varchar(max) NULL CONSTRAINT DF_Multa_PenalidadePDF2 DEFAULT (\u0027\u0027),\r\n  Paga bit NOT NULL,\r\n  EnviadaSecle bit NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  OrgaoAutuanteId uniqueidentifier NULL,\r\n  TipoMultaId uniqueidentifier NULL,\r\n  EmpenhoMultaId uniqueidentifier NULL,\r\n  Fase varchar(50) NULL CONSTRAINT DF_Multa_Fase2 DEFAULT (\u0027\u0027),\r\n  ProcessoEDoc varchar(50) NULL CONSTRAINT DF_Multa_ProcessoEDoc2 DEFAULT (\u0027\u0027),\r\n  NumInfracao varchar(50) NULL,\r\n  Status varchar(50) NULL CONSTRAINT DF_Multa_Status2 DEFAULT (\u0027\u0027),\r\n  DataNotificacao datetime NULL,\r\n  DataLimite datetime NULL,\r\n  ContratoVeiculoId uniqueidentifier NULL,\r\n  ContratoMotoristaId uniqueidentifier NULL,\r\n  NoFichaVistoria int NULL CONSTRAINT DF_Multa_NoFichaVistoria2 DEFAULT (0),\r\n  ComprovantePDF varchar(max) NULL CONSTRAINT DF_Multa_ComprovantePDF2 DEFAULT (\u0027\u0027),\r\n  DataPagamento datetime NULL,\r\n  ValorPago float NULL CONSTRAINT DF_Multa_ValorPago2 DEFAULT (0),\r\n  FormaPagamento varchar(50) NULL CONSTRAINT DF_Multa_FormaPagamento2 DEFAULT (\u0027\u0027),\r\n  AtaVeiculoId uniqueidentifier NULL,\r\n  ProcessoEdocPDF varchar(max) NULL,\r\n  OutrosDocumentosPDF varchar(max) NULL,\r\n  CONSTRAINT PK_Multas_id_multa PRIMARY KEY CLUSTERED (MultaId),\r\n  CONSTRAINT KEY_NumInfracao UNIQUE (NumInfracao)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                       "RepactuacaoServicos":  "CREATE TABLE dbo.RepactuacaoServicos (\r\n  RepactuacaoServicoId uniqueidentifier NOT NULL,\r\n  DataRepactuacao date NULL,\r\n  Valor float NULL,\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_RepactuacaoServicos_RepactuacaoTerceirizacaoId PRIMARY KEY CLUSTERED (RepactuacaoServicoId)\r\n)\r\nON [PRIMARY]"
                   },
    "DevTables":  {
                      "tr_String":  "CREATE TABLE dbo.tr_String (\r\n  Id varchar(255) NOT NULL,\r\n  Value nvarchar(4000) NOT NULL,\r\n  CONSTRAINT pk_strng_9912B79F PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "sysdiagrams":  "CREATE TABLE dbo.sysdiagrams (\r\n  name sysname NOT NULL,\r\n  principal_id int NOT NULL,\r\n  diagram_id int IDENTITY,\r\n  version int NULL,\r\n  definition varbinary(max) NULL,\r\n  PRIMARY KEY CLUSTERED (diagram_id),\r\n  CONSTRAINT UK_principal_name UNIQUE (principal_id, name)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "MediaCombustivel":  "CREATE TABLE dbo.MediaCombustivel (\r\n  NotaFiscalId uniqueidentifier NOT NULL,\r\n  CombustivelId uniqueidentifier NOT NULL,\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  PrecoMedio float NULL,\r\n  CONSTRAINT PK_PrecoCombustivel PRIMARY KEY CLUSTERED (NotaFiscalId, CombustivelId, Ano, Mes)\r\n)\r\nON [PRIMARY]",
                      "AnosDisponiveisAbastecimento":  "CREATE TABLE dbo.AnosDisponiveisAbastecimento (\r\n  Ano int NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Ano)\r\n)\r\nON [PRIMARY]",
                      "OcorrenciaViagem":  "CREATE TABLE dbo.OcorrenciaViagem (\r\n  OcorrenciaViagemId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  ViagemId uniqueidentifier NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  Resumo nvarchar(200) NOT NULL DEFAULT (\u0027\u0027),\r\n  Descricao nvarchar(max) NOT NULL DEFAULT (\u0027\u0027),\r\n  ImagemOcorrencia nvarchar(max) NOT NULL DEFAULT (\u0027\u0027),\r\n  Status nvarchar(20) NOT NULL DEFAULT (\u0027Aberta\u0027),\r\n  DataCriacao datetime NOT NULL DEFAULT (getdate()),\r\n  DataBaixa datetime NULL,\r\n  UsuarioCriacao nvarchar(100) NOT NULL DEFAULT (\u0027\u0027),\r\n  UsuarioBaixa nvarchar(100) NOT NULL DEFAULT (\u0027\u0027),\r\n  ItemManutencaoId uniqueidentifier NULL,\r\n  Observacoes nvarchar(500) NOT NULL DEFAULT (\u0027\u0027),\r\n  StatusOcorrencia bit NULL DEFAULT (1),\r\n  Solucao varchar(500) NULL DEFAULT (\u0027\u0027),\r\n  CONSTRAINT PK_OcorrenciaViagem PRIMARY KEY CLUSTERED (OcorrenciaViagemId),\r\n  CONSTRAINT CK_OcorrenciaViagem_Status CHECK ([Status]=\u0027Pendente\u0027 OR [Status]=\u0027Baixada\u0027 OR [Status]=\u0027Aberta\u0027)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaVeiculoGeral":  "CREATE TABLE dbo.EstatisticaVeiculoGeral (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  VeiculosAtivos int NOT NULL DEFAULT (0),\r\n  VeiculosInativos int NOT NULL DEFAULT (0),\r\n  VeiculosProprios int NOT NULL DEFAULT (0),\r\n  VeiculosLocados int NOT NULL DEFAULT (0),\r\n  IdadeMediaAnos decimal(10, 2) NOT NULL DEFAULT (0),\r\n  KmMedioRodado decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ValorMensalLocacao decimal(18, 2) NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "LotacaoMotorista":  "CREATE TABLE dbo.LotacaoMotorista (\r\n  LotacaoMotoristaId uniqueidentifier NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  UnidadeId uniqueidentifier NULL,\r\n  DataInicio date NULL,\r\n  DataFim date NULL,\r\n  Lotado bit NULL,\r\n  Motivo varchar(50) NULL,\r\n  MotoristaCoberturaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_LotacaoMotorista_LotacaoMotoristaId PRIMARY KEY CLUSTERED (LotacaoMotoristaId)\r\n)\r\nON [PRIMARY]",
                      "Viagem":  "CREATE TABLE dbo.Viagem (\r\n  ViagemId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataInicial datetime NULL,\r\n  DataFinal datetime NULL,\r\n  HoraInicio datetime NULL,\r\n  HoraFim datetime NULL,\r\n  CombustivelInicial varchar(50) NULL CONSTRAINT DF_Viagem_CombustivelInicial DEFAULT (\u0027\u0027),\r\n  CombustivelFinal varchar(50) NULL CONSTRAINT DF_Viagem_CombustivelFinal DEFAULT (\u0027\u0027),\r\n  KmAtual int NOT NULL DEFAULT (0),\r\n  KmInicial int NULL CONSTRAINT DF_Viagem_KmInicial DEFAULT (0),\r\n  KmFinal int NULL CONSTRAINT DF_Viagem_KmFinal DEFAULT (0),\r\n  Descricao varchar(max) NULL CONSTRAINT DF_Viagem_Descricao DEFAULT (\u0027\u0027),\r\n  RamalRequisitante varchar(50) NULL CONSTRAINT DF_Viagem_RamalRequisitante DEFAULT (\u0027\u0027),\r\n  Finalidade varchar(200) NULL CONSTRAINT DF_Viagem_Finalidade DEFAULT (\u0027\u0027),\r\n  NoFichaVistoria int NULL CONSTRAINT DF_Viagem_NoFichaVistoria DEFAULT (0),\r\n  Status varchar(50) NULL CONSTRAINT DF_Viagem_Status DEFAULT (\u0027\u0027),\r\n  RequisitanteId uniqueidentifier NULL,\r\n  SetorSolicitanteId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  UsuarioIdCriacao varchar(100) NULL,\r\n  DataCriacao datetime NULL,\r\n  UsuarioIdFinalizacao varchar(100) NULL,\r\n  DataFinalizacao datetime NULL,\r\n  ResumoOcorrencia varchar(100) NULL CONSTRAINT DF_Viagem_ResumoOcorrencia DEFAULT (\u0027\u0027),\r\n  DescricaoOcorrencia varchar(max) NULL CONSTRAINT DF_Viagem_DescricaoOcorrencia DEFAULT (\u0027\u0027),\r\n  StatusOcorrencia varchar(50) NULL CONSTRAINT DF_Viagem_StatusOcorrencia DEFAULT (\u0027\u0027),\r\n  StatusDocumento varchar(50) NULL CONSTRAINT DF_Viagem_StatusDocumento DEFAULT (\u0027\u0027),\r\n  StatusCartaoAbastecimento varchar(50) NULL CONSTRAINT DF_Viagem_StatusCartaoAbastecimento DEFAULT (\u0027\u0027),\r\n  StatusAgendamento bit NULL DEFAULT (0),\r\n  Origem varchar(max) NULL CONSTRAINT DF_Viagem_Origem DEFAULT (\u0027\u0027),\r\n  Destino varchar(max) NULL CONSTRAINT DF_Viagem_Destino DEFAULT (\u0027\u0027),\r\n  DescricaoSemFormato varchar(max) NULL CONSTRAINT DF_Viagem_DescricaoSemFormato DEFAULT (\u0027\u0027),\r\n  FichaVistoria varbinary(max) NULL,\r\n  CustoCombustivel float NULL CONSTRAINT DF_Viagem_CustoCombustivel DEFAULT (0),\r\n  CustoMotorista float NULL CONSTRAINT DF_Viagem_CustoMotorista DEFAULT (0),\r\n  CustoVeiculo float NULL CONSTRAINT DF_Viagem_CustoVeiculo DEFAULT (0),\r\n  CustoOperador float NULL CONSTRAINT DF_Viagem_CustoOperador DEFAULT (0),\r\n  CustoLavador float NULL CONSTRAINT DF_Viagem_CustoLavador DEFAULT (0),\r\n  Minutos int NULL CONSTRAINT DF_Viagem_Minutos DEFAULT (0),\r\n  NomeEvento varchar(max) NULL CONSTRAINT DF_Viagem_NomeEvento DEFAULT (\u0027\u0027),\r\n  DescricaoSolucaoOcorrencia varchar(max) NULL CONSTRAINT DF_Viagem_DescricaoSolucaoOcorrencia DEFAULT (\u0027\u0027),\r\n  ImagemOcorrencia varchar(500) NULL DEFAULT (\u0027semimagem.jpg\u0027),\r\n  ItemManutencaoId uniqueidentifier NULL,\r\n  EventoId uniqueidentifier NULL,\r\n  FoiAgendamento bit NULL DEFAULT (0),\r\n  Recorrente varchar(50) NULL CONSTRAINT DF_Viagem_Recorrente DEFAULT (\u0027\u0027),\r\n  RecorrenciaViagemId uniqueidentifier NULL,\r\n  Intervalo varchar(50) NULL CONSTRAINT DF_Viagem_Intervalo DEFAULT (\u0027\u0027),\r\n  DataFinalRecorrencia date NULL,\r\n  Monday bit NULL CONSTRAINT DF_Viagem_Monday DEFAULT (0),\r\n  Tuesday bit NULL CONSTRAINT DF_Viagem_Tuesday DEFAULT (0),\r\n  Wednesday bit NULL CONSTRAINT DF_Viagem_Wednesday DEFAULT (0),\r\n  Thursday bit NULL CONSTRAINT DF_Viagem_Thursday DEFAULT (0),\r\n  Friday bit NULL CONSTRAINT DF_Viagem_Friday DEFAULT (0),\r\n  Saturday bit NULL CONSTRAINT DF_Viagem_Saturday DEFAULT (0),\r\n  Sunday bit NULL CONSTRAINT DF_Viagem_Sunday DEFAULT (0),\r\n  AgendamentoTMP varchar(max) NULL CONSTRAINT DF_Viagem_AgendamentoTMP DEFAULT (\u0027\u0027),\r\n  DatasSelecionadas varchar(50) NULL CONSTRAINT DF_Viagem_DatasSelecionadas DEFAULT (\u0027\u0027),\r\n  DiaMesRecorrencia int NULL CONSTRAINT DF_Viagem_DiaMesRecorrencia DEFAULT (0),\r\n  UsuarioIdAgendamento varchar(100) NULL,\r\n  DataAgendamento datetime NULL,\r\n  DescricaoViagemWord varbinary(max) NULL,\r\n  DescricaoViagemImagem varbinary(max) NULL,\r\n  UsuarioIdCancelamento varchar(100) NULL,\r\n  DataCancelamento datetime NULL,\r\n  Rubrica nvarchar(max) NULL CONSTRAINT DF_Viagem_Rubrica DEFAULT (\u0027\u0027),\r\n  DanoAvaria varchar(max) NULL CONSTRAINT DF_Viagem_DanoAvaria DEFAULT (\u0027\u0027),\r\n  StatusDocumentoFinal varchar(50) NULL CONSTRAINT DF_Viagem_StatusDocumentoFinal DEFAULT (\u0027\u0027),\r\n  StatusCartaoAbastecimentoFinal varchar(50) NULL CONSTRAINT DF_Viagem_StatusCartaoAbastecimentoFinal DEFAULT (\u0027\u0027),\r\n  RubricaFinal nvarchar(max) NULL CONSTRAINT DF_Viagem_RubricaFinal DEFAULT (\u0027\u0027),\r\n  DanoAvariaFinal varchar(max) NULL CONSTRAINT DF_Viagem_DanoAvariaFinal DEFAULT (\u0027\u0027),\r\n  FotosBase64 varbinary(max) NULL,\r\n  VideosBase64 varbinary(max) NULL,\r\n  FotosFinaisBase64 varbinary(max) NULL,\r\n  VideosFinaisBase64 varbinary(max) NULL,\r\n  VistoriadorInicialId varchar(50) NULL,\r\n  VistoriadorFinalId varchar(50) NULL,\r\n  CintaEntregue bit NULL DEFAULT (0),\r\n  CintaDevolvida bit NULL DEFAULT (0),\r\n  DataInicialNormalizada datetime2 NULL,\r\n  DataFinalNormalizada datetime2 NULL,\r\n  HoraInicioNormalizada time NULL,\r\n  HoraFimNormalizada time NULL,\r\n  MinutosNormalizado int NULL,\r\n  KmInicialNormalizado int NULL,\r\n  KmFinalNormalizado int NULL,\r\n  FoiNormalizada bit NULL DEFAULT (0),\r\n  TipoNormalizacao nvarchar(500) NULL,\r\n  DataNormalizacao datetime2 NULL,\r\n  KmRodadoNormalizado int NULL,\r\n  KmRodado int NULL,\r\n  Id int IDENTITY,\r\n  TabletEntregue bit NULL DEFAULT (0),\r\n  TabletDevolvido bit NULL DEFAULT (0),\r\n  TemFichaVistoriaReal bit NULL,\r\n  CaboEntregue bit NULL,\r\n  CaboDevolvido bit NULL,\r\n  ArlaEntregue bit NULL,\r\n  ArlaDevolvido bit NULL,\r\n  CONSTRAINT PK_Viagem_ViagemId PRIMARY KEY CLUSTERED (ViagemId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "MovimentacaoEmpenho":  "CREATE TABLE dbo.MovimentacaoEmpenho (\r\n  MovimentacaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(100) NULL,\r\n  TipoMovimentacao char(1) NULL,\r\n  Valor float NULL,\r\n  DataMovimentacao date NULL,\r\n  EmpenhoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_table1_MovimentacaoId PRIMARY KEY CLUSTERED (MovimentacaoId)\r\n)\r\nON [PRIMARY]",
                      "RepactuacaoVeiculo":  "CREATE TABLE dbo.RepactuacaoVeiculo (\r\n  RepactuacaoVeiculoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  Valor float NULL,\r\n  Observacao nvarchar(500) NULL,\r\n  CONSTRAINT PK_RepactuacaoVeiculo PRIMARY KEY CLUSTERED (RepactuacaoVeiculoId)\r\n)\r\nON [PRIMARY]",
                      "LogErros":  "CREATE TABLE dbo.LogErros (\r\n  LogErroId bigint IDENTITY,\r\n  DataHora datetime2(3) NOT NULL DEFAULT (getdate()),\r\n  Tipo nvarchar(50) NOT NULL,\r\n  Origem nvarchar(20) NOT NULL,\r\n  Nivel nvarchar(20) NULL,\r\n  Categoria nvarchar(100) NULL,\r\n  Mensagem nvarchar(max) NOT NULL,\r\n  MensagemCurta AS (case when len([Mensagem])\u003e(200) then left([Mensagem],(200))+\u0027...\u0027 else [Mensagem] end) PERSISTED,\r\n  Arquivo nvarchar(500) NULL,\r\n  Metodo nvarchar(200) NULL,\r\n  Linha int NULL,\r\n  Coluna int NULL,\r\n  ExceptionType nvarchar(200) NULL,\r\n  ExceptionMessage nvarchar(max) NULL,\r\n  StackTrace nvarchar(max) NULL,\r\n  InnerException nvarchar(max) NULL,\r\n  Url nvarchar(1000) NULL,\r\n  HttpMethod nvarchar(10) NULL,\r\n  StatusCode int NULL,\r\n  UserAgent nvarchar(500) NULL,\r\n  IpAddress nvarchar(45) NULL,\r\n  Usuario nvarchar(100) NULL,\r\n  SessionId nvarchar(100) NULL,\r\n  DadosAdicionais nvarchar(max) NULL,\r\n  Resolvido bit NOT NULL DEFAULT (0),\r\n  DataResolucao datetime2(3) NULL,\r\n  ResolvidoPor nvarchar(100) NULL,\r\n  Observacoes nvarchar(max) NULL,\r\n  HashErro AS (CONVERT([nvarchar](64),hashbytes(\u0027SHA2_256\u0027,concat(isnull([Tipo],\u0027\u0027),\u0027|\u0027,isnull([Arquivo],\u0027\u0027),\u0027|\u0027,isnull(CONVERT([nvarchar](10),[Linha]),\u00270\u0027),\u0027|\u0027,left(isnull([Mensagem],\u0027\u0027),(200)))),(2))) PERSISTED,\r\n  CriadoEm datetime2(3) NOT NULL DEFAULT (getdate()),\r\n  CONSTRAINT PK_LogErros PRIMARY KEY CLUSTERED (LogErroId DESC)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Manutencao":  "CREATE TABLE dbo.Manutencao (\r\n  ManutencaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumOS varchar(50) NOT NULL,\r\n  DataSolicitacao datetime NOT NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  ResumoOS varchar(500) NULL CONSTRAINT DF_Manutencao_ResumoOS DEFAULT (\u0027\u0027),\r\n  DataDevolucao datetime NULL,\r\n  StatusOS varchar(50) NULL CONSTRAINT DF_Manutencao_StatusOS DEFAULT (\u0027\u0027),\r\n  DataRecolhimento datetime NULL,\r\n  ReservaEnviado bit NULL CONSTRAINT DF_Manutencao_ReservaEnviado DEFAULT (0),\r\n  VeiculoReservaId uniqueidentifier NULL,\r\n  DataRecebimentoReserva datetime NULL,\r\n  DataDevolucaoReserva datetime NULL,\r\n  ManutencaoPreventiva bit NULL CONSTRAINT DF_Manutencao_ManutencaoPreventiva DEFAULT (0),\r\n  QuilometragemManutencao int NULL CONSTRAINT DF_Manutencao_QuilometragemManutencao DEFAULT (0),\r\n  DataEntrega date NULL,\r\n  IdUsuarioAlteracao nvarchar(450) NULL,\r\n  DataAlteracao datetime NULL,\r\n  IdUsuarioCancelamento varchar(100) NULL,\r\n  DataCancelamento datetime NULL,\r\n  IdUsuarioCriacao varchar(100) NULL,\r\n  DataCriacao datetime NULL,\r\n  IdUsuarioFinalizacao varchar(100) NULL,\r\n  DataFinalizacao datetime NULL,\r\n  DataDisponibilidade date NULL,\r\n  CONSTRAINT PK_Manutencao_ManutencaoId PRIMARY KEY CLUSTERED (ManutencaoId)\r\n)\r\nON [PRIMARY]",
                      "Patrimonio":  "CREATE TABLE dbo.Patrimonio (\r\n  PatrimonioId uniqueidentifier NOT NULL,\r\n  NPR varchar(50) NOT NULL,\r\n  Marca varchar(50) NULL,\r\n  Modelo varchar(50) NULL,\r\n  Descricao varchar(100) NOT NULL,\r\n  NumeroSerie varchar(50) NULL,\r\n  SecaoId uniqueidentifier NOT NULL,\r\n  Situacao varchar(50) NOT NULL,\r\n  SetorId uniqueidentifier NOT NULL,\r\n  LocalizacaoAtual varchar(150) NOT NULL,\r\n  Status bit NULL,\r\n  ImageUrl varchar(500) NULL,\r\n  Imagem varbinary(max) NULL,\r\n  StatusConferencia int NULL,\r\n  LocalizacaoConferencia varchar(150) NULL,\r\n  SetorConferenciaId uniqueidentifier NULL,\r\n  SecaoConferenciaId uniqueidentifier NULL,\r\n  DataEntrada date NULL,\r\n  DataSaida date NULL,\r\n  CONSTRAINT PK_Patrimonio_PatrimonioId PRIMARY KEY CLUSTERED (PatrimonioId),\r\n  CONSTRAINT KEY_PatrimonioNPR UNIQUE (NPR)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "WhatsAppFilaMensagens":  "CREATE TABLE dbo.WhatsAppFilaMensagens (\r\n  Id int IDENTITY,\r\n  MensagemId int NOT NULL,\r\n  Status int NOT NULL DEFAULT (0),\r\n  Prioridade int NOT NULL DEFAULT (5),\r\n  DataAgendamento datetime NOT NULL,\r\n  DataProcessamento datetime NULL,\r\n  Tentativas int NULL DEFAULT (0),\r\n  ErroUltimaTentativa nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Combustivel":  "CREATE TABLE dbo.Combustivel (\r\n  CombustivelId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(50) NOT NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_Combustiveis_id_combustivel PRIMARY KEY CLUSTERED (CombustivelId)\r\n)\r\nON [PRIMARY]",
                      "WhatsAppInstancias":  "CREATE TABLE dbo.WhatsAppInstancias (\r\n  Id int IDENTITY,\r\n  NomeInstancia nvarchar(100) NOT NULL,\r\n  NumeroConectado nvarchar(50) NULL,\r\n  Status int NOT NULL DEFAULT (0),\r\n  DataConexao datetime NULL,\r\n  DataCriacao datetime NOT NULL DEFAULT (getdate()),\r\n  UltimaVerificacao datetime NULL,\r\n  QRCode nvarchar(max) NULL,\r\n  Ativa bit NOT NULL DEFAULT (1),\r\n  Principal bit NOT NULL DEFAULT (0),\r\n  ConfiguracoesJson nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  UNIQUE (NomeInstancia)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaVeiculoUnidade":  "CREATE TABLE dbo.EstatisticaVeiculoUnidade (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  UnidadeId uniqueidentifier NULL,\r\n  Unidade nvarchar(200) NOT NULL,\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  VeiculosAtivos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicUnidade UNIQUE (Unidade)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoRankingConsumo":  "CREATE TABLE dbo.EstatisticaVeiculoRankingConsumo (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  Placa nvarchar(20) NULL,\r\n  Modelo nvarchar(100) NULL,\r\n  KmRodado decimal(18, 2) NOT NULL DEFAULT (0),\r\n  LitrosAbastecidos decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ConsumoKmPorLitro decimal(10, 2) NOT NULL DEFAULT (0),\r\n  TotalAbastecimentos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicRankConsumo UNIQUE (Ano, VeiculoId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoStatus":  "CREATE TABLE dbo.EstatisticaVeiculoStatus (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Status nvarchar(50) NOT NULL,\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicStatus UNIQUE (Status)\r\n)\r\nON [PRIMARY]",
                      "NotaFiscal":  "CREATE TABLE dbo.NotaFiscal (\r\n  NotaFiscalId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumeroNF int NULL,\r\n  DataEmissao date NULL,\r\n  ValorNF float NULL,\r\n  TipoNF varchar(20) NULL,\r\n  Objeto varchar(100) NULL,\r\n  ValorGlosa float NULL,\r\n  MotivoGlosa varchar(150) NULL,\r\n  EmpenhoId uniqueidentifier NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  AnoReferencia int NULL,\r\n  MesReferencia int NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_NotaFiscal_NotaFiscaId PRIMARY KEY CLUSTERED (NotaFiscalId)\r\n)\r\nON [PRIMARY]",
                      "Recurso_BACKUP":  "CREATE TABLE dbo.Recurso_BACKUP (\r\n  RecursoId uniqueidentifier NOT NULL,\r\n  Nome nvarchar(200) NOT NULL,\r\n  Descricao varchar(250) NULL,\r\n  NomeMenu nvarchar(200) NOT NULL,\r\n  Ordem float NOT NULL,\r\n  ParentId uniqueidentifier NULL,\r\n  Icon nvarchar(200) NOT NULL,\r\n  Href nvarchar(500) NOT NULL,\r\n  Ativo bit NOT NULL,\r\n  Nivel int NOT NULL,\r\n  HasChild bit NOT NULL\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoCategoria":  "CREATE TABLE dbo.EstatisticaVeiculoCategoria (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Categoria nvarchar(100) NOT NULL,\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  VeiculosAtivos int NOT NULL DEFAULT (0),\r\n  VeiculosProprios int NOT NULL DEFAULT (0),\r\n  VeiculosLocados int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicCategoria UNIQUE (Categoria)\r\n)\r\nON [PRIMARY]",
                      "RepactuacaoContrato":  "CREATE TABLE dbo.RepactuacaoContrato (\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataRepactuacao date NULL,\r\n  Descricao varchar(100) NULL,\r\n  Valor float NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  Vigencia int NULL,\r\n  Prorrogacao int NULL,\r\n  Percentual float NULL,\r\n  CONSTRAINT PK_RepactuacaoItemVeiculo_RepactuacaoItemVeiculoId PRIMARY KEY CLUSTERED (RepactuacaoContratoId)\r\n)\r\nON [PRIMARY]",
                      "AtaRegistroPrecos":  "CREATE TABLE dbo.AtaRegistroPrecos (\r\n  AtaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumeroAta varchar(50) NULL,\r\n  AnoAta varchar(50) NULL,\r\n  AnoProcesso int NULL,\r\n  NumeroProcesso varchar(50) NULL,\r\n  Objeto varchar(max) NULL,\r\n  Valor float NULL,\r\n  DataInicio date NULL,\r\n  DataFim date NULL,\r\n  FornecedorId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  DataAlteracao datetime NULL,\r\n  CONSTRAINT PK_AtaRegistroPrecos_ContratoId PRIMARY KEY CLUSTERED (AtaId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Perfis":  "CREATE TABLE dbo.Perfis (\r\n  id_perfil int IDENTITY,\r\n  descricao varchar(50) NOT NULL,\r\n  CONSTRAINT PK_Perfis_cod_perfil PRIMARY KEY CLUSTERED (id_perfil)\r\n)\r\nON [PRIMARY]",
                      "DocGenerator":  "CREATE TABLE DocGenerator.DocumentationAlerts (\r\n  Id int IDENTITY,\r\n  FilePath nvarchar(500) NOT NULL,\r\n  AlertType nvarchar(50) NOT NULL,\r\n  AlertMessage nvarchar(500) NOT NULL,\r\n  Priority int NULL DEFAULT (1),\r\n  AssignedToUserId int NULL,\r\n  Status nvarchar(50) NULL DEFAULT (\u0027PENDING\u0027),\r\n  CreatedAt datetime2 NULL DEFAULT (getdate()),\r\n  ResolvedAt datetime2 NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "EncarregadoContrato":  "CREATE TABLE dbo.EncarregadoContrato (\r\n  EncarregadoId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_EncarregadoContrato PRIMARY KEY CLUSTERED (EncarregadoId, ContratoId)\r\n)\r\nON [PRIMARY]",
                      "Contrato":  "CREATE TABLE dbo.Contrato (\r\n  ContratoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumeroContrato varchar(10) NULL,\r\n  AnoContrato varchar(10) NULL,\r\n  Vigencia int NULL,\r\n  Prorrogacao int NULL,\r\n  AnoProcesso int NULL,\r\n  NumeroProcesso varchar(50) NULL,\r\n  Objeto varchar(max) NULL,\r\n  Valor float NULL,\r\n  TipoContrato varchar(50) NULL,\r\n  DataInicio date NULL,\r\n  DataFim date NULL,\r\n  ContratoOperadores bit NULL DEFAULT (0),\r\n  ContratoMotoristas bit NULL DEFAULT (0),\r\n  ContratoLavadores bit NULL DEFAULT (0),\r\n  FornecedorId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  DataAlteracao datetime NULL,\r\n  CustoMensalOperador float NULL,\r\n  CustoMensalMotorista float NULL,\r\n  CustoMensalLavador float NULL,\r\n  QuantidadeOperador int NULL,\r\n  QuantidadeMotorista int NULL,\r\n  QuantidadeLavador int NULL,\r\n  CustoMensalEncarregado float NULL,\r\n  QuantidadeEncarregado int NULL,\r\n  ContratoEncarregados bit NULL,\r\n  DataRepactuacao date NULL,\r\n  CONSTRAINT PK_Contrato_ContratoId PRIMARY KEY CLUSTERED (ContratoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "DocumentoContrato":  "CREATE TABLE dbo.DocumentoContrato (\r\n  DocumentoContratoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  TipoDocumento varchar(50) NULL,\r\n  Descricao varchar(150) NULL,\r\n  DocumentoPDF varbinary(max) NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_DocumentoContrato_DocumentoContratoId PRIMARY KEY CLUSTERED (DocumentoContratoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "ControleAcesso_BACKUP":  "CREATE TABLE dbo.ControleAcesso_BACKUP (\r\n  UsuarioId nvarchar(450) NOT NULL,\r\n  RecursoId uniqueidentifier NOT NULL,\r\n  Acesso bit NOT NULL\r\n)\r\nON [PRIMARY]",
                      "LavadorContrato":  "CREATE TABLE dbo.LavadorContrato (\r\n  LavadorId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_LavadorContrato PRIMARY KEY CLUSTERED (LavadorId, ContratoId)\r\n)\r\nON [PRIMARY]",
                      "RepactuacaoAta":  "CREATE TABLE dbo.RepactuacaoAta (\r\n  RepactuacaoAtaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataRepactuacao date NULL,\r\n  Descricao varchar(100) NULL,\r\n  Valor float NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_RepactuacaoItemVeiculo_Ata_RepactuacaoItemVeiculoId PRIMARY KEY CLUSTERED (RepactuacaoAtaId)\r\n)\r\nON [PRIMARY]",
                      "AspNetUserRoles":  "CREATE TABLE dbo.AspNetUserRoles (\r\n  UserId nvarchar(450) NOT NULL,\r\n  RoleId nvarchar(450) NOT NULL\r\n)\r\nON [PRIMARY]",
                      "Unidade":  "CREATE TABLE dbo.Unidade (\r\n  UnidadeId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Sigla varchar(50) NULL,\r\n  Descricao varchar(100) NOT NULL,\r\n  PontoPrimeiroContato varchar(50) NULL,\r\n  PrimeiroContato varchar(100) NULL,\r\n  PrimeiroRamal bigint NULL,\r\n  PontoSegundoContato varchar(50) NULL,\r\n  SegundoContato varchar(100) NULL,\r\n  SegundoRamal bigint NULL,\r\n  PontoTerceiroContato varchar(50) NULL,\r\n  TerceiroContato varchar(100) NULL,\r\n  TerceiroRamal bigint NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  Categoria varchar(100) NULL,\r\n  QtdMotoristas int NULL DEFAULT (0),\r\n  CONSTRAINT PK_Unidades_id_unidade PRIMARY KEY CLUSTERED (UnidadeId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaGeralMensal":  "CREATE TABLE dbo.EstatisticaGeralMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TotalMotoristas int NULL DEFAULT (0),\r\n  MotoristasAtivos int NULL DEFAULT (0),\r\n  MotoristasInativos int NULL DEFAULT (0),\r\n  Efetivos int NULL DEFAULT (0),\r\n  Feristas int NULL DEFAULT (0),\r\n  Cobertura int NULL DEFAULT (0),\r\n  TotalViagens int NULL DEFAULT (0),\r\n  KmTotal decimal(18, 2) NULL DEFAULT (0),\r\n  HorasTotais decimal(18, 2) NULL DEFAULT (0),\r\n  TotalMultas int NULL DEFAULT (0),\r\n  ValorTotalMultas decimal(18, 2) NULL DEFAULT (0),\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatGeralMensal UNIQUE (Ano, Mes)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoModelo":  "CREATE TABLE dbo.EstatisticaVeiculoModelo (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  ModeloId uniqueidentifier NULL,\r\n  Modelo nvarchar(100) NOT NULL,\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  VeiculosAtivos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicModelo UNIQUE (Modelo)\r\n)\r\nON [PRIMARY]",
                      "AspNetUserLogins":  "CREATE TABLE dbo.AspNetUserLogins (\r\n  LoginProvider nvarchar(450) NOT NULL,\r\n  ProviderKey nvarchar(450) NOT NULL,\r\n  ProviderDisplayName nvarchar(max) NULL,\r\n  UserId nvarchar(450) NOT NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "tr_AppLock":  "CREATE TABLE dbo.tr_AppLock (\r\n  Id nvarchar(255) NOT NULL,\r\n  CONSTRAINT PK_tr_AppLock PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "HeatmapAbastecimentoMensal":  "CREATE TABLE dbo.HeatmapAbastecimentoMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  TipoVeiculo nvarchar(100) NULL,\r\n  DiaSemana int NOT NULL,\r\n  Hora int NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "WhatsAppWebhookLogs":  "CREATE TABLE dbo.WhatsAppWebhookLogs (\r\n  Id int IDENTITY,\r\n  Evento nvarchar(100) NULL,\r\n  Payload nvarchar(max) NULL,\r\n  DataRecebimento datetime NOT NULL DEFAULT (getdate()),\r\n  Processado bit NULL DEFAULT (0),\r\n  ErroProcessamento nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaAbastecimentoMensal":  "CREATE TABLE dbo.EstatisticaAbastecimentoMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatAbastMensal UNIQUE (Ano, Mes)\r\n)\r\nON [PRIMARY]",
                      "AspNetRoleClaims":  "CREATE TABLE dbo.AspNetRoleClaims (\r\n  Id int NOT NULL,\r\n  RoleId nvarchar(450) NOT NULL,\r\n  ClaimType nvarchar(max) NULL,\r\n  ClaimValue nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "AlertasFrotiX":  "CREATE TABLE dbo.AlertasFrotiX (\r\n  AlertasFrotiXId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Titulo nvarchar(200) NOT NULL,\r\n  Descricao nvarchar(1000) NOT NULL,\r\n  TipoAlerta int NOT NULL,\r\n  Prioridade int NOT NULL,\r\n  DataInsercao datetime2 NOT NULL DEFAULT (getdate()),\r\n  DataExibicao datetime2 NULL,\r\n  DataExpiracao datetime2 NULL,\r\n  ViagemId uniqueidentifier NULL,\r\n  ManutencaoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  TipoExibicao int NOT NULL,\r\n  HorarioExibicao time NULL,\r\n  UsuarioCriadorId nvarchar(450) NOT NULL,\r\n  Ativo bit NOT NULL DEFAULT (1),\r\n  DataDesativacao datetime NULL,\r\n  DesativadoPor varchar(100) NULL CONSTRAINT DF_AlertasFrotiX_DesativadoPor2 DEFAULT (\u0027\u0027),\r\n  MotivoDesativacao varchar(500) NULL CONSTRAINT DF_AlertasFrotiX_MotivoDesativacao2 DEFAULT (\u0027\u0027),\r\n  Recorrente char(1) NULL DEFAULT (\u0027N\u0027),\r\n  Intervalo char(1) NULL,\r\n  Monday bit NULL DEFAULT (0),\r\n  Tuesday bit NULL DEFAULT (0),\r\n  Wednesday bit NULL DEFAULT (0),\r\n  Thursday bit NULL DEFAULT (0),\r\n  Friday bit NULL DEFAULT (0),\r\n  Saturday bit NULL DEFAULT (0),\r\n  Sunday bit NULL DEFAULT (0),\r\n  DiaMesRecorrencia int NULL CONSTRAINT DF_AlertasFrotiX_DiaMesRecorrencia2 DEFAULT (0),\r\n  DataFinalRecorrencia datetime2 NULL,\r\n  DatasSelecionadas nvarchar(max) NULL CONSTRAINT DF_AlertasFrotiX_DatasSelecionadas DEFAULT (\u0027\u0027),\r\n  RecorrenciaAlertaId uniqueidentifier NULL,\r\n  DiasSemana varchar(500) NULL CONSTRAINT DF_AlertasFrotiX_DiasSemana DEFAULT (\u0027\u0027),\r\n  CONSTRAINT PK_AlertasFrotiX PRIMARY KEY CLUSTERED (AlertasFrotiXId),\r\n  CONSTRAINT CK_AlertasFrotiX_DiaMes CHECK ([DiaMesRecorrencia]\u003e=(1) AND [DiaMesRecorrencia]\u003c=(31) OR [DiaMesRecorrencia] IS NULL),\r\n  CONSTRAINT CK_AlertasFrotiX_Intervalo CHECK ([Intervalo]=\u0027V\u0027 OR [Intervalo]=\u0027M\u0027 OR [Intervalo]=\u0027Q\u0027 OR [Intervalo]=\u0027S\u0027 OR [Intervalo]=\u0027D\u0027 OR [Intervalo] IS NULL),\r\n  CONSTRAINT CK_AlertasFrotiX_Recorrente CHECK ([Recorrente]=\u0027N\u0027 OR [Recorrente]=\u0027S\u0027)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "VeiculoAta":  "CREATE TABLE dbo.VeiculoAta (\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  AtaId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_AtaContrato PRIMARY KEY CLUSTERED (VeiculoId, AtaId)\r\n)\r\nON [PRIMARY]",
                      "TipoMulta":  "CREATE TABLE dbo.TipoMulta (\r\n  TipoMultaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Artigo varchar(100) NULL,\r\n  Descricao varchar(max) NULL,\r\n  Infracao varchar(50) NULL,\r\n  CodigoDenatran varchar(50) NULL,\r\n  Desdobramento varchar(50) NULL,\r\n  CONSTRAINT PK_table1_TipoMultaId PRIMARY KEY CLUSTERED (TipoMultaId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EvolucaoViagensDiaria":  "CREATE TABLE dbo.EvolucaoViagensDiaria (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Data date NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  TotalViagens int NULL DEFAULT (0),\r\n  KmTotal decimal(18, 2) NULL DEFAULT (0),\r\n  MinutosTotais int NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "OrgaoAutuante":  "CREATE TABLE dbo.OrgaoAutuante (\r\n  OrgaoAutuanteId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Sigla varchar(50) NOT NULL,\r\n  Nome varchar(100) NULL,\r\n  CONSTRAINT PK_Orgaos_emissores_id_orgao PRIMARY KEY CLUSTERED (OrgaoAutuanteId)\r\n)\r\nON [PRIMARY]",
                      "CustoMensalItensContrato":  "CREATE TABLE dbo.CustoMensalItensContrato (\r\n  NotaFiscalId uniqueidentifier NOT NULL,\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  CustoMensalOperador float NULL,\r\n  CustoMensalMotorista float NULL,\r\n  CustoMensalLavador float NULL,\r\n  CONSTRAINT PK_ValorMensalItensContrato PRIMARY KEY CLUSTERED (NotaFiscalId, Ano, Mes)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaAbastecimentoCategoria":  "CREATE TABLE dbo.EstatisticaAbastecimentoCategoria (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  Categoria nvarchar(100) NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatAbastCat UNIQUE (Ano, Mes, Categoria)\r\n)\r\nON [PRIMARY]",
                      "Abastecimento":  "CREATE TABLE dbo.Abastecimento (\r\n  AbastecimentoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  CombustivelId uniqueidentifier NOT NULL,\r\n  MotoristaId uniqueidentifier NOT NULL,\r\n  Litros float NOT NULL,\r\n  ValorUnitario float NOT NULL,\r\n  DataHora datetime NOT NULL,\r\n  KmRodado int NOT NULL,\r\n  Hodometro int NOT NULL,\r\n  AutorizacaoQCard int NULL DEFAULT (0),\r\n  KmRodadoNormalizado int NULL,\r\n  LitrosNormalizado float NULL,\r\n  ConsumoCalculado decimal(18, 2) NULL,\r\n  ConsumoNormalizado decimal(18, 2) NULL,\r\n  EhOutlier bit NULL DEFAULT (0),\r\n  CONSTRAINT PK_Abastecimento_AbastecimentoId PRIMARY KEY CLUSTERED (AbastecimentoId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoUsoMensal":  "CREATE TABLE dbo.EstatisticaVeiculoUsoMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TotalViagens int NOT NULL DEFAULT (0),\r\n  KmTotalRodado decimal(18, 2) NOT NULL DEFAULT (0),\r\n  TotalAbastecimentos int NOT NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ValorAbastecimento decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ConsumoMedio decimal(10, 2) NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicUsoMensal UNIQUE (Ano, Mes)\r\n)\r\nON [PRIMARY]",
                      "Requisitante":  "CREATE TABLE dbo.Requisitante (\r\n  RequisitanteId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NOT NULL,\r\n  Ponto varchar(50) NOT NULL,\r\n  Ramal int NULL,\r\n  Email varchar(100) NULL,\r\n  SetorSolicitanteId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(50) NOT NULL,\r\n  DataAlteracao datetime NULL,\r\n  CONSTRAINT PK_Requisitantes_id_requisitante PRIMARY KEY CLUSTERED (RequisitanteId)\r\n)\r\nON [PRIMARY]",
                      "Lavador":  "CREATE TABLE dbo.Lavador (\r\n  LavadorId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NULL CONSTRAINT DF_Lavador_Nome2 DEFAULT (\u0027\u0027),\r\n  Ponto varchar(50) NULL CONSTRAINT DF_Lavador_Ponto2 DEFAULT (\u0027\u0027),\r\n  DataNascimento date NULL,\r\n  CPF varchar(50) NULL CONSTRAINT DF_Lavador_CPF2 DEFAULT (\u0027\u0027),\r\n  Celular01 varchar(50) NULL CONSTRAINT DF_Lavador_Celular012 DEFAULT (\u0027\u0027),\r\n  Celular02 varchar(50) NULL CONSTRAINT DF_Lavador_Celular022 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(50) NULL,\r\n  DataAlteracao datetime NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_Lavador_OperadorId PRIMARY KEY CLUSTERED (LavadorId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "RegistroCupomAbastecimento":  "CREATE TABLE dbo.RegistroCupomAbastecimento (\r\n  RegistroCupomId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DataRegistro date NOT NULL,\r\n  Observacoes varchar(max) NULL,\r\n  RegistroPDF varchar(100) NOT NULL,\r\n  CONSTRAINT PK_RegistroCupomAbastecimento_RegistroCupomId PRIMARY KEY CLUSTERED (RegistroCupomId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaVeiculoAnoFabricacao":  "CREATE TABLE dbo.EstatisticaVeiculoAnoFabricacao (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  AnoFabricacao int NOT NULL,\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicAnoFab UNIQUE (AnoFabricacao)\r\n)\r\nON [PRIMARY]",
                      "Motorista":  "CREATE TABLE dbo.Motorista (\r\n  MotoristaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NOT NULL CONSTRAINT DF_Motorista_Nome2 DEFAULT (\u0027\u0027),\r\n  Ponto varchar(50) NOT NULL CONSTRAINT DF_Motorista_Ponto2 DEFAULT (\u0027\u0027),\r\n  DataNascimento date NULL,\r\n  CPF varchar(20) NULL CONSTRAINT DF_Motorista_CPF2 DEFAULT (\u0027\u0027),\r\n  CNH varchar(20) NULL CONSTRAINT DF_Motorista_CNH2 DEFAULT (\u0027\u0027),\r\n  CategoriaCNH varchar(10) NULL CONSTRAINT DF_Motorista_CategoriaCNH2 DEFAULT (\u0027\u0027),\r\n  DataVencimentoCNH date NULL,\r\n  Celular01 varchar(50) NULL CONSTRAINT DF_Motorista_Celular012 DEFAULT (\u0027\u0027),\r\n  Celular02 varchar(50) NULL CONSTRAINT DF_Motorista_Celular022 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  OrigemIndicacao varchar(150) NULL,\r\n  Foto varbinary(max) NULL DEFAULT (0xFFD8FFE000104A46494600010101006000600000FFDB0043000201010201010202020202020202030503030303030604040305070607070706070708090B0908080A0807070A0D0A0A0B0C0C0C0C07090E0F0D0C0E0B0C0C0CFFDB004301020202030303060303060C0807080C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0CFFC000110800EF00F603012200021101031101FFC4001F0000010501010101010100000000000000000102030405060708090A0BFFC400B5100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FAFFC4001F0100030101010101010101010000000000000102030405060708090A0BFFC400B51100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00FDFCA28A2800A28A2800A28A2800A28A2800A28A2800A28A2800A28A4271400B452039A0B6280168A4DC29739A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A29375002D2039A42E00AF1CFDA2FF006B4D0FE0CE99A8092E0CD2DA461245B4DB34F04F2711298B21981CE485F980ED8E6A2A548C23CD234A54A5525CB147ABDD7892CAC2FD2DAE2E62B79A5FF56B2B6CF33827E5CF5E013C7A571DF137F696F087C29B049755D5ED22324AB12C66544639708DF7881F2725875014F15F0AFC67FDA0FE2EFC7BB1B84F09F872E6E341BD0185878918590B691245C3A395123A32E4A82A08C9CF615F3CF8D7FE09C5F193F6814B17F1BFC5BB1D1EDADAEDA55B2D3EDE7D4E45C904112CAD18473F36E001425F38CA8AF9CC5713E0E968E6BF3FC8FA3C370C62AA24F95FE5F99FA829FB70F8224D4DD66F10E99A73D8CA63BAB29AE6333329E8CAA3E624651B0B9E18F3915CFF008C3FE0A85F0A7C0F772C1A9788ECAC5D1D22559DFF00793B3739894644CB8E7F76C4E01E0D7E72E9FF00F0476F09AEA315D6B5E39F895ACCF6D2168C8BF86CA307A745889E800E1AAF6A9FF0485F84FAFEA6B25C5DF8DF744A638646F106FF002B39CB28319DA4F7C63EE8E38AF1E5C7384D95FEE3DB8701E2E4AFA7DE7D89E3FF00F82CAFC3AD0EFAEEC747D7ECB5ABBB291433DADB4CC922144725576E4B2EFF0099494185601B7E16BD5FE177FC1493E17FC4BF045DEA916BB6F6F77A6DB2DC5EE9F9324B0025549C81CA06382C40DA012C14735F97B7BFF045AF869A4BDCCD61AE7C41B2BDB8411ADC7F6A4772C80307F97CC8F00E7BF5E4F35C37863FE0911E22F837ADEA575E09F8AF7B6EDA842F6F2C3AAE9BB9EE21906258A4923605D6452C18107208E9B453A5C6F83E6B4E76F54554F0FF001FCB78453F46BF5B1FB4FE0DFDAF7C1DE2EB7865FED186D23B82C63323821D7E6657057236B46ACF9CE30AD9E86BD3ADEF61BB85248A58E48E450EACAC08653C820F71EF5FCF7F8F7F648FDA3BE179D324D14E95E2AD1F4F8AE545AE8D7E2D260ED2075758A60A325328407E9EA49AD2F837FF00055AF8D5FB20EA5A49F1DF873C45141696D3DBCF65AC7996103C64FCBB25CF901A3DAA54AFDEC1073C57B986E22C2D67684D3F99E062F8631941DA74E4ADE5A7DFB1FD00C332DC461D183AB0C860720D3ABF35FF00649FF82F5780FC4FE19B1D0F5DF36CB5F06794E4C4609C34AD227CC1810E518E542FF0AE07CDB57EFAF865F19F45F8A1A2DA5D595C206BC89268E3DEAFE62B2090146524302A7230738CE40C1AF6A9622153E16785570D529EE8EBA8A40734B5B9CE14514500145145001451450014514500145145001451450014514500145149B86680027158FE33F1859F837467B9BA942658246A0A8695CF451B88193F5ACBF88FF156CFC0B1AC607DAEFDC8DB6C8C01C1EE4F61D2BC97C59E3ED43C5B721A6895E552442A17F7719F503FC724D7CC671C4F87C15E943DEA9DBB7A9EF65790D7C535392B43B9625FDA27C49E2AB5BBB586CEDB47F2E5DB15D310D2CD0F38768F9F2D8FF7727BF22BCFEFFE14E87A778A6FBC5434AB0FF84975B60D77A88B6DD73380000A09C903000C671C02735A773A3195226DFF00BC84979910908C78E3F3E7D6AB98AF66805D5D4E12363B826CCFD001D49FD2BF31CC33BC6E31B555BB744B447E8980CA70D85B4A8DBF529AF86C456AF3FDB3CB79C87CECE483D320F7AA7AA4F6D1C0B17DA1DB68E72E7713EA4F6FA54B6D13EBFA817984A61886C42DF20240E723D7FC6926B38756790348B047191E5F5CE38FA64D7832D763E921EEB4E6EF631F4DD46709B8219999F6AE530001F5A6EB334E6D77B1444279D89F37E55ABADF88B4AD02D80D42E21B4B44C12F249B73EE49E959371AEE99E2A8A49346BFB4BE09F3BF9328700763C1AA707CBABD8F4694DB9A938D97730A4F0BCBBCCFB57ECFBB92CA18FE02AFC36D6490A81B25E70323193F4354AC66B887CC525F8E1413EFEDEF5971C73C9A9B09328A1F3B7AF3EBF4AE35CD1E9AB3DB509D4BF34B635357B6B3424790F1BE325E36C71F4AE635FD12CB5EB7920BC11EA16932F96F1DC2093703C60AB7047D6B7356D31A7833E7AAFF00B321E0FF005ACEB3D123863915418DD9B04939073DF39C56536DCB5475E1D414757A9F38FC51FF0082627C30F1ECB7377A2E983C21ABCE1945DE8E7C8405810D98798C1218F2AAAC339073835E317307ED13FB03EB5A75F78677EBFE1CB29537CFA64AC45AC31B215636AC090E761CBA6EC067C01BDABEE5BDB5974E94AC61FE618272319FA1ACBD46EE58ADFC99809623FC4570457AF97F136370B249CAF1ECFF00CCF3F30E0FCBF31D5C545BEAB4FBD6CCEAFF00670FF8381BC1BF183C19A77F6B68C34AF12DCDC4364F6C93130798F2AC65C1C12B1AEE19DDC8EFD6BF422CB59B5D47CB305C432F98A5936383B8038247B03C57E22FED67FB0D691F16ED5FC49E1BC68FE32814C8B2443641A97FB13018CE703E71871C72718AF3DF82FF00F0574F89BFB21F89341F09F8FEE352B07B2B95BA1F6B855CBC2C64793CA6C92518328601B194E7E6095FAC643C554B1D1E5BFBDDBFADCFC4B89F81713964B9E2AF0FE65B7CFB33FA0656DC296BC97F630FDA12D7F68DF80DA1F8845D5A3DF5EDB896E2088B66DF71255486553903009C6090704E2BD6ABEC632525747C0CA2E2F9585145154485145140051451400514514005145140051452668011E4118C9381EB5E5DF14FE3E5AF8763B98E0D46CB4DB7B60567D42EE648A25F94E76962012304FE150FED13F18EDBC1DE1CBEDD3882CACA3692F2656E485EB18FAF43F5C7AD7E0C7FC151BF6DAD63E33F8ED2C6D276834CB04731C1BFE4DCDB86E23BB638E9C0FA9AF85CF3881CEB7D4B08F5EAD7E47E85C2FC23F5AA2F1D89D20B63F66F43BDB1F1ADB43ACE8DAC58EB1A64EF2336A314E27FB4C81B6B7CC0E38391EBF4ADB9615D16D9EE1E70004C818FBB8FA9AF88BFE086DFDAF1FF00C13AB4BD4354B8856DF57F126A5756A0BE08B749562E067FBF0C9F98AFB3D6E2D352D1CCEF1E639DCAB6481BF1CE7E83A57E7F5A9A8D49536F547D1CA9B495BE1BD8C24F1208A451014904B2B6597A13DF1DBA0AD28FC4A2E6DA479606CC6DB519970318FE11F9F359C0DAEA1AA19A28DFC8B78FCB8D718563C6481FA7E758825BAD77C4840056DA36C671B801CFDDC7EB5E74653B5D6AFF0003D78E1A9D45B5ACAECEBDEFA216C8B02FEE47CEC5980CE7B9AE17E36FC5FB1F873E09BED6F53B816B6B628CE155C0DC3FAE49ADAF13EB163E16D255DA15966DD82A41E79C126BF2F3FE0ADDFB5A492D99F0F35C37CA1A5B85898E2207FD5A9C77FE557CAE55634A3BB3D2CA32B8CE32C554D210EFD4F97FFE0A13FF000534F127C60F185D5A41A8DCD9E8F6D2958EDA27C2CB8FE26C7535C5FEC1DFF051FF0013FC08F8CB67AA43AA4EF6D24889736B2B1305C440F2ACBE9F857C8FF143C5CDA9EA92BE5B0CD9E4F3F5AC2F086B92E97ADC322B38DCDC1AFD2F0592518D0B5B56B73E5331E26AB2C568FDDBEDD2C7F53F77E288FE27F84B46F1369C5ADA0D66259C2237080F51F40735674FD4AD6CAEC07264F9769EA49E73CD793FFC13B7C59FF09E7EC15F0EAFA772EE6D0A127A80AC47F8FE75E8B37878AEB3E65A7CFC9241278AFCAF1D4E54F11251EE7E9980942AE1D45E8BA7E8696B53DAEBCE422C91B43CA1008DC46314D92EECEF3405B7D8AD2FF08039FA7B62A95E6B1368F2FEFA190165DAA71903DEA3D3ADE5D56ED2F20658EE3A3237438AE573BCAD2DD9DAA85A0AFB2DB52878AC3241972E1970A73C607AE6B3A4B191F4FDEB224C9B0B72792315D06ADADDD4774DF68B42F160AB6CF9B3EF8AC4BB36A58B40444244E49EDE9C572558FBCD1EA61A73E5517FE667792F02AA48A446E3721CF4F6E3A7B1AE13F680FD9C3C3DF1FF00C17FD9FAFD8C1702D9BCEB1BD11235CE9B3E30248C90707F43F8576EDE228AF74A65C60F287EBED5CB6A5F18346F08DE7D8AEB508E396642C11837418EA7181D6AB0DED14D3A2DDD763B3134613A3286252E57A3BEC784FEC27FB6078AFF00E09A5F1FF55F0C78BAC750D7B457B40DA70B467788C225204D1073F2615E50C85C8DCDC64906BF70BE19FC53D27E2B787AD752D26759A0BAB68AE800C18A2C80E031048C82AC08CF5535F859FB6CC7E19F1F69B6B75737A74AD47C38C2E6D6ED27314BBC901E239C0DACA470C71903A3609F63FF00823B7ED8579F0E7E377FC21D7DAA94D2F5DB23069897930585AE5596411EF271924C993C9D880292D85AFDCB86B35AF5B0F1FAC2B4BA9FCC7C6D91E1F0B8D9FD565CD1DD5BF23F657345321904A9B958303C820E41A7D7D91F9F8514514005145140051451400514514009B8572FF157C769E0AF0D48EBF35DCEA56141D7DCFE19AD8D77C4763E19B16B9BFBA86D604FBCF23600E09FE86BC33E38FC48B7B7D1752F10B48AF1C10B7D911860051F749CF424E4FE5E95F3BC499A2C1E125CAED27FD367B9906592C662E30B5D5D7CFC8F8BBFE0A5DFB4E3E97E096F0EDA3492B4D96BB31124EEFAF5E01FD49AFC60FDA2F56B99FC512493B6FDB11762A7A0EBCFBE2BED1FDABFE206A1E23F13DFEA17132B2B33F2D9E067939E8739AF8DB47F00EA3FB457ED21E1FF000959234875DD6ED34A91979D904B3470B3FD07983F3AFCBB247294DD599FD1D9DE129603070C253D96FE6FA9FBA5FB08FC39B7F855FB12FC24F0C496EEAD1F862CE4997382D3DC27DAA66C0E33BE63CD7BDC30C1636205DFDF00B204FB910F7F5AE5756B6369E20FB1D947E543A3411471851B844A78550071F7540ABDE2BBC9757B2B530398239087753C9718C607A0CD715577AB39B3E3BD873AA70BD93D49759B39A6856512F97032858A311F1CF4E476FAD41A6DDC6D9B5B7909F2F891C80367AD45712CF7764F6F248FB2DD5488D00F9BD89C741C564FEFB64BD3CE99FCD6CFCBC0E958A52525CA7652A0DC395BD8E13F692F19DB780BC3535ECB34B23AC8A8A09CF0580CF5AFC32FDBBFE25CBE2EF18EB571BCEF9EEA577639C1EC17E83B57EA77FC14B7C6F2693E0F8E32EF1BCB3A7C8BD8673D735F8BFF00B53EB6CF777AA8CC55A76C64F2497E79AEEE1EA0EAE31CFB1F439EBFA9E4D1A77D65A9E05A8C4750BD95DC65223CFA13D854DA6E9F35ECC8CF90A9CA7006D1D71572DEDFF7490951973E638CF7E82BA4D074916B64D2CABFBB2A770C8F9060F4AFD63DA4631B23F1395294A7CCCFDEEFF825189ECFFE09B1F0BD0BAAC971652DC02C3908669001F5E3F5AF7AD36DEE2E6EC476BB8BAAF393F8D713FB1FF822DFE197EC57F08341DA5A6B6F0969F2371C8796112B74F773D6BD574FD5E2D2418EDB6B3ED1BB3D01EF5F8C66094B192E6EACFDB701370C1C792377632AF61BDB6E2E937E0718C715833EA77105D092DD3CB18272C301B15D4EB3ACABEE3348BBE51B4283D3DF1590D3417574B16E1BA31923B1FAD7975E9A52B5CF570B37CBEFC48EC75C9EE641E65BAA71867DDBBF4C566EADA6E5DE446183F786DFBBEF5A5A8DD456C8445D40E401D2B2EE6433C3D71B87237573B56D1EA77E1B47CD15632678E196CC9F2C348A486DA3F957CCFF00F0505F0CCCBF0764D4FCCB7823864563348DE59B603F88B0E80FA9CF6FA8FA7F5146B5B2F353E6E0EEC71835E49FB4AC136B3F0A753716F1CFE4AEF6591C46076C92411C7F3C1C8ADB2F9F26329B5DD1D58DA7EDF015A1D1C5FE47C19E2FF89D2EAD6DA4AC9A7DDDCDADCCB0BA25C5A16921B07B7DD3E5981259024841E76E58F1F2565E8BE35D723D0A0D7F4E16BA6DEDADF25B41E5CAAC21644461F669032E70007DEA30372F4E408F4686F343F1B699A9E990E8103D8AB4713FDAE6316F7769646D872260D864E0E1B2410183679EB8BDD5A2D6A4B896586659248E1BC86D616F22DDCB1F2F6290AA248F214613682CC0B64E2BF73A765EF23F96AAB973B8C9DEC7F46BFF0004C1FDA6B4EFDA6BF656D0757B67C5DC3024379165BE4954147E1B91B9E377C7FB55F46039AFC18FF823FF00EDB4BFB367ED03169FAC3A49A37886D9ED112D836C7B8466512602E43C85946081828D92BC93FBBBA3EA6BABE9B05CAA941346B26D3D5723383EE3A1AF7F075B9E167BA3E6B1941D39DFA32D514515D67205145140051451400536462A848058E0E00C734EAA7ADEA8BA469535C1595C4485B6C4BB9CE013C0E9D01A00F8F3E327ED13AD7C7AFDA1EC7C0DA4E9D77A5F87B458DB53D6AEDA76596E912528902E0EC31BC89F3942FF00229071B883CB7ED85E28FECBF80D7B13CA15A771130C72401B88FE5D2BA8F0078C2CFC7FE23F14F8BACF434D1D7C4BAB35AC4258956E678EDC15919C827ACA5C0E9D09C0CE4F8E7FC14BEF1B4EF869A75AF9B1C0ED13C926E6C1DC481F8F02BF1BE2BC4CAAD6A8FB69F79FB7787F82846BD04D6EF9BEE4D9F971F1C7C489ABDCDC12675B6576531B1E148EA33D0FE15ED9FF0006E37C1EB0F893FB4D7C4AF1D6A96A9369DE15D22182DA59570915DCF7426523238655B407F1AF98BE3F6A2FA369777BA50CB6E851594FDD3D00C7AF3F4E2BF50FFE0DCDF83DFF000817FC13E6EBC52D0990F8FB5FBDBEDC172C62B7C5A46BF4CC521FF815639453B513E9B8D31977CADDAECFAEFC2BF68B9F12BDE3279DE619199CA615D70AAAB8F6EDF4A725BC7AAEB51CD2C6D15AF97B184432A854E0FD012456E4F606CECA1F319647110489BEEAE7764A9E339C76FAD2FD99F42F09C2F1A2978E275950FCBB972481ED8C6335BCF08942CD9F25F5B4E49C16AF4470BE29BFBAD1AE1675477688E369201C1EBF8114E835E3AFC37174B6E079111662570231C0FC6A4BB79E5804D382D6536DFB3394DDB4FF001038FA9E3E959D6F6771A75DCA403B241F7F18C28EC474208AF29A9C365A1F45494254D5D2E65D4FCF9FF82A7F88AE4DA5B4AF2308269731A11D0823FA57E417C75B97D4352604E7328007A73CD7EBA7FC15ADD6FEC2C404DAFE7B6D3938C07C1FE79AFC82F8891FDB35E99403B8484919F435E9F08C6D76F7B9DFC6F52D87A71DB4460693A6869B3B47071C0E7038AF43F01F817FE130F1368FA3C304AF36B777058C43B334B2AC63DBF88D71DA2C07F77C677FCD81CE726BEB7FF825D7C1B97E2C7ED95F0F2C65B5792C6D7526D5AE9B19548ECE279FE6FF0081A47F89AFB5C44B929CE7D933F36C25253AB18BEE7ED1DDA2F868416D6EAA2DACA18ED1370DBB16340800F4031E958BAEF899AC114326DDC73BE339C0EB935435BD46EE7D4DE42C678E491A4DAA3A024F045526D59A5BB0CC768070171C0FC2BF0FAD5B9A6E4DEE7F4160B2F50845B57D0D48AFD6F211264C8EE3099EBEF4B75A4CF716A4C6CD01519CE7249AA97134F2CB14AACCB120F94E06DCE2B6ADF5248F4B092E4FFBA3903BF3D6A7E27FBC35AAA50B4A08AFA3DD17D39B767793F336DDC49AA124335E2B889F2EB9C900707B55CD4354B678C4F0DC30800E513D3EB5534AD61049398D0157FE1E85876A9766ADD10E9A96B38C49ECED5A0B511CAEB238E581FBABEFF5AE77E21E9D6E6D18120EF428AAA0E5890456BDDEB2D21589BE55C617E520E29BE20B68AE74A666C328E8DD08A86D387BAF53A68734669CBA9F995FB497818FC32F8FA23962B9BEB2D488B88E1B70DF20122C843A81B405750EA546438EE188AF32D3EC1F4E7D5C8B3FB7C5E208AF6FEDE3B8B7CC32A6E16FE76573F33C9B5429624B1E842D7D3DFF000522F0DD9F8C1348B191AC2DEF8892457BB67845C90322DDA54C326F38008E738AF9C06ACDA679DA4C2F75A9D90BE904B3DD4DE4DAE9EA4EC015D0E517731D8DF29C82C028271FB2F0F62255F2F8559EFB1FCEBC6781A784CE2AC29EDBFDE4775A23E8761A36BA974E354B69BED7677D07C85BCB954C980BC46C8A30413B8E09C67A7F4B5FB0AF89DBC6BFB2C783F5737115DFF6858AC9E626D2C0AFC85246500348A50866C0C91CF39AFE67746BA9218A495A7B6FEDB9E4B59D2D8CE1D62DB088412CDCCF2326C2EA0E46E1BB3BABF70BFE082DFB48DFFC4DFD9F2EBC35A8097CBD065CD8B48AA8620555EE20033B9B64CE4E4827F79D4F15F4D80ACA35791F53E2332A2E54F9D743EFDA2937734B5EE1E00514514005145140057CF5FB7DFED496BFB3D7C16D626124516B5756B245616D3158DA7765233BD8845419CB3161800E3915F42D7CD9FF00051BF85DE08F1F7C1CFB1F89AEAD74B175751451BA4BE5CF79BDD15A0550407F33210862400C4E2B9B16DC69392E87560E2A555268F3CFD9F7C173F873E05F84ADAE4C1F6CD334F80DD8B740B135CCEC5E4DB8278DCCFCE483D726BE75FF0082B3092F35EB269FCCFB2DBD82BC71452843236E6393DF009FD2BE9FB6D6C687A99B38B0B0492AFDDE83EF0518F4E2BE5BFF0082BFE897975E1AD275085479D7164226901204615D830CF4CE08FCABF10C74D55A739BEE9FE27F4270AD1787CC29296DCB2B7DDFF019F8FDFB42F882E2F635B1B7873757B71B506EDFB9FA20FC58815FD1C7ECB3F0562FD9A7F676F02781EC999AD3C23A0DB697384F9564B958D5A59303A9690C84FBB1AFC3EFF82717ECDE3F6A9FF829AF807C337F6BFDA1A1F848BF89B580A8CC9E45AB6F895FD9E710273D77115FD03DD68B77671092426169A463142A4120B73BDCFD7B671835F5181C3F2D04D23E738A318AA637D9C99475FD5AD23B8B48258B6C92C89739FBAA3A64B7A7F9159FE22D4029FB5CDBFC87CC214F5979CE71EC71526A96726BDE2C96DA6316C991232D8EDD78F4C9E734CF1BADBD9DA3AACE24952648A304E563180491EFC13F856F5ACE32BF43C8A118C6508A5ABFD4E6EFF464B9D3C43332C28B2348154711FF00B4DE9599ABC96DA8DB2C04BA315FDDB8076A01C7EBFE34DF135F5D6B52CB1584EEB0B10AECEA1B2BC13C568E8F6F6765A136264DE8BB420E4903D735E24A9464D9F4F152A708CE4F5ECBA1F9E7FF000553F024FA8784A2962FF973BBE582E06D62076F702BF17BE203FD83C5378AEA37A33027DFFF00D75FD14FED55F04EF7E297C3FB9864758ADE7B9578140E557786E7EA41FD3D6BF9FDFDB47E1D5EFC17F8DDAB691A95B4B6F289F2A2418DCA5B1B87A8CD1C313E4C4CA84BAEABCCF5F8C1AAD9653AF1D79746701A14CB2BA6F246CC0FC2BF587FE0DF1F8797371AC7C41F1CDD89A7D2748B08B46B77745DA67B86F31C83D4958D0027D24F7AFC98F0EDB5C788B5EB2D3AD209AEAFEEA616F6F6B6E85E5B891982471AA8EACC48007539AFE877F623F8003F640FD917C29F0FF559117C552A1D57C42B137C9F6B9467CBC8EA2350883FDC27BD7D2711626387C2B8B7ACB447C4F0E61A58AC5454765AB3ACD55A3649F6C80E6424311DBD2B0356B07B19B79DA3901553919F7C56C6B90A5D5E490617EC6832C54E082474AC1D4AEFFB26E57CA7CA953CBB1F5AFC72A47DD6DFFC31FD098252B251DCD1B5BFC59299158B638C630B8FAD58B4BC8357B73E5CC639173F291F7EB0A3B9FED68DD37379920DAA7B0A6CCB25BDDF959D8FD5580C8AC94925666FF564DB4DD997352D7E6B49BC8F28B4C0FC841DB8FAF4CD1A27DAA0B79A599C4D7127CDB481F27E354AE2010DDC5348E27206DE491CF6AD58ADE482D7CD392AE382B8E94352B5FA1A4D4230B24B5296B7ADC92C00ECFDE02372923B7A557975F92E13ECD2C6E8E5490A3B8FAD57D574E60D2E1DF7E7763BE6ACE8BA348119E77DFC10AB8C56519B72E5E87472D2842E7CA7FF000530F065CEA7F0FAD3528E11235903F310A76B01B829F4CE383D01C1AF9BFE2DF8074ED234ABD8ACA3B781AD341B6BFB69029586ED4EF5F337A9C8CDBCA19406C60E78C367EDFF00DB5ECA5D63E086BB63B2159A58B00C80954078E71CE075E3D2BE2AD2F5A4F14F86F4CD0752B7BF644B596EF4DB9797718144AD0490C6AC0AEC21891B9BEEB9C0E2BF52E10AEE581707F65B3F0AF11B0508E670AB6FE225E9D8E6F5ED47FE121B1B5D66249984622DB0B5D42896EF1C406F08AB9F9C0DA7AB305DFF007B81FA25FF000428F10BCBF1FA67D26DA1B3B8B9D3648AE45E82590472C6ECD0EEE504B193B8E0905578CE6BE09FED1D3BE1699A65D32F3FB3A1BBB732205C3850A1245284670C8C0151F206C83838AFB6BFE09CDA16A769FB51F85BC3FA56A51F9F3EFB55BDB646DF6D66D0BCEF8453932EC4541BBE51E665B2057D1AC4726269249D9B3E23EA0A583AFCCF58AFD4FDB785BCC50D8C6477A7D436831120DA576A0182738A9ABEDD1F9C0514514C028A28A00AFA8BCA901F2B8E0E580CB2FA60773F5AFCF2FF0082C178EEC3C00DA16A3A96A9A78F10C37F6D7FA458CAE0DCA2DB90EE3CC1C246EC0650292EDCE405AFB73E3CF8E17C09E09BDBD5BB6B2BA86D9DEDDDA2DD1BBF00024B2A8E481CB0FBDD6BF087F6F6F1AEBDE3EF1F26B32DA9D4753BCBE7564BCBD81DBCB8D84A41442338DB2AA062C300939C035E4E655172724BA9EBE554FF0079CFD8FA83F641FDB7E6FDA13E2C5CF87F516B379E28BED76E6D50A83B090548273D33C9EB8AFA87E397C18D2BF69AF836BE1DD5AEE4D3E24BC711DDA2E7CB2791CF6F51DABF187E1578F5FF00659F8CFA7EABA1DE1D4B5A862FED3D4919361B6819C02B26402198C98084E5463E5CE4D7EBC7C07FDA134DF8CFE158754D32458D35148E52B21CB40C57A30E8719E7F0F5AFCD71981A746A72DBDD99FB0E031957194A35A0F96A53FF0086BFDC68FEC3BFB13F823F621D3FC4CBE1FD4353D575DF155CC12EADAA5D2279D74B18290C51AA01E5C2A59DB6F3966624F4C7B9F89F5D8E2892E1DE79C9908532B79614632C46DEB8C0183E9F5AF36D7BC484F892CD612EF64C9E65D4E84AED73941D3D49AF08FDA3BFE0A13A7783ECEDED3C26D6D7A2D55A4D43CC6CB98002309BBEFB1C7400F38F5AF530F525ECFD947A1E5E2F01EFAC4D796FABDBFAFF00807D3FA3EB5A778975DB8BE5FF004C5B14DF1846600B1270001D78CF5E0560EBBE20D22FFC4446C6FBA1E38D646DAAB8EA7DF07BD7E75693FF00054AD6FC31E29FB49B816DA2CD0490EA3A6790B03DB4CA32B22B11FEA76E0E41C67208054E76FE35FF00C150F56D13E1BC777E1DB5FECC8268C2ACD7015EE2EA503FD5056CED6CE0631D3D0B2D1570988A915151D7A9A52C5E069CA5579DD96895CFB8F46BCD36FB54B949AE04D04926E508C41FA641AD5BE5D2DD0796AB6BE4E461642011DF39EBFCEBE1BFD9E7F6F487C64F696F75A74B0EB5232C173F2AC6A66E0B91DB033D8771935F4B9F146A3A86A521920B47F9088C1941C630304F3DFF00957875633A0BD9D58EA7D5D1C1D3C5A55F0F52F1B77FD0E93C55AC49A85A4C20BC85103A80506E6C7A63F01F957CDDFB45FF00C132FE167ED89A5DC9F1BE9625BB89B65B6A56D3B5B5D41CF6907BF6208ED5EC965E31D32CF4B78EEAC98DC3487CF65076993A9031D8638FCFAD727E3AF101D5AD6CC5B1920FDF18B2CC563C13BB95FF000F6AF16B62146A2A90934D6DAB47D0E132C9D483C2B5683DEE93BFC8F2BFD9E7FE0975F02BFE09F1E2F4F14691A75EEBDE2C8D8BD9EA1AB5F7DBA5B6638FF5518558E327272FB7760601E6BD2BE2478B9F55F12BEABE52F9970A03846EAC4019EB9FE95A1A7CF0B2B4B341F244864323BEE690F002819CFF00FAEBCB3E29F8820F0C5C8D52FEF20D2AD8A34AB148C173805B2075391CE00F7AE7C7E2F118CF764DBD74EA7A79365183CBD4A4D5AC9DDEC8BDF10FE2945A6581CAC891283E611F2951C8EA7D7B7BE2BC1FC5BFB464FAFF0088A4B0D1E69B315CFD9634DA4BCAD83B70C7E5085B6EE76E150331E833C4FC7EFDA213C6569A869F0EBA34FB3804B3D94D7319306A2A140996218DCA307AB0C37CD8218103C6AE3C65A3EACD6905A5E457FA5087CB8668035959C8CEA049B2378D4A8DD88C16F9CEC27E6079FA5CB786A2A9A9E2136D9F159EF1C54757D86026A30EE7AE27ED43E22D2FC49AEE9F73E23D27EDBA7BE3EC3672BDCBC7128C4AC4C6AE0B44CEB9019771563F2A839F5BF875FB55C7E24D173AA6E8A182DC4FE7F9996908CF1C76C82063A9071C60D7C8FA2F84EC6F7C7767A7DEC8D6363788863BA9267962B7C1675D927DCC80A498C7CDC0C8C9C1DFF14EBFA4E816C8C2EECED098E4CADD9616CF204220791973B2269193FDD217D6BA31F92E1AACA34A30B33CFC9789F1F878CF1156AFB45D9BDFEF3EBFF097ED39A7DEEA6F6DAA412598F31228D8BA9F28BB3040E339072ADF97E27D3FFB5C5E69AAF1CB85E4643715F9991EA034FD6FCED4DF4BD3D350D0F31C725F029A5DDB4896ECCE53276E1199304B1DC320A8AF7AFD9A3E296A92F886D6D74E9EEE4D1EEDD6058EF41F3A58D4E4CB8276AEFDC08030402B919CE3C8CE38623463EDA93B25D0FA5E19E3B962EAAA38B8DDB7BAE9F23EA2D22F2EA3D567324BBAD8B6F04F5CF19FE55D4E97761DC8DF9F419AE15F52FB74CB6D07FAA8DBCB95FA156F4C1E793C55FD32E8C1706489DA6F2F865CF047B1E991FD6BE1A099FAAD6853A91BA657F8E9E128FC4DE1DB81BC879632800C1049E3041E3BF7F4AF897C4FE0CB5F0278DF448A1901B683CCC4601DAA5A5C190EECB22863271C8E78E0E07DCDAADC49AED83BEC021183F7B818E7AD7CAFF1075FF0B4BE2157B509693477EA44AF219228E3DDBCCAC09E198646D18DC71C6057D8F0DD7AB49CB95371EB63F3BE37C061ABD0A7ED649496D7384D53E1DE8D77A2F862DA7B6D4B4DBEB893CC9750B89F79C34C048648CEE0EA47E5C1ED91F48FEC1F75A6FC25FDB0FE1F6AE6E274B38B5382C649AFE493F7523C2F6E64271908EA8BC9EFD700923CA3C79F16B4C7D02CD2F2EE0B9D334F225BD92C2221DA455244484E58A7F7867835BBF087C53A9E9FFB43FC3EB7D1343766B6D774E8DAC220B34AE54CA5E30324162BBF1904361477AFACC155AB3AD0938B5AFEA7E799BD2C2D1C2D6A49A7EEAB35BDEDE47EFF00A75FC29F589E00F14D978C3C2F697B632C7244F126E087FD53145628C3AAB0C8C83823B8ADBAFD42E7E15B051451400514507A50079F7ED0DA8E8EDE04BEB2D596CDE29EDD8FFA4C4D2A4782087D83EF1040207192A32475AFE7B7E3B7ED3BE1EF85BFB48AD8E9718D3FC3D6972E90A5C45E5B5AE015665978F90E07983A1CB6D038AFE8AFE22FC3A8FC7BA6BDBCF717114124652548563DD22E412A1CA965CF4382320D7F3F7FF05C5FD8B27F851F15357D6AE7EC72699E24B97B7F9C8B7922648D0B22851BA44FDE28042807078DA067CDC753E6DD1E9E02A72EDB9C4784BF6629244D52F654FB45EDC286BD8C3AF9840DAE1DCBB1DAC739DCCD851B80E4D5FF0085FF00B4478C3F67EBCB0B7D2350B316C5D84569395FB3C3291865924DC7CE3C8FB8A39520608C577FFB33EA507C67D23E1F785AEB504B3B7F8ADA0C16B6172F324024D4E18CA6C2E083B8CD0040AC76162A304E2BDC7E2AFF00C114B5DF82A3FE1294BE8B5FBBB6B09AFAE923668E1D2E34E7CC5676F9E4404101B73392E7AE01F9EA3416229FEF15EDF99F5D88C4D4C1564A94B96EAEBCEE708FFF00050EF11787BE1D786965D667BDD46EE268D83DAAC26EC82C5A555272B1A8030F8C0FBB9DC0D78978EBE2DA78DFC3F06AD286BABE91CACC66B975124723CC1536B95D9BCC2E594AEDFB876E4B653E237ECCBF12F4886F357F15DA6A36890C72E9F318523B7B881FC840D0BB203B5C208F0B196405D82F28C079A787BC0B731EB76765FDAD7AD696D2C6805DDA98A3937EDDD10DFB5BAA9DABC0DAC7B935AD1C2D2A2F4566CC7139962B151F7DDD22C7C45D4F47F0EF8E25D0AD2779BC412DC32DCDBAA2A851212BBBCCCB048DD2328102E4A20002024D5BBABA4D43C092DDDE5DDDFF006CDA68F68963A7E9F6C1AF2CECEF2EA58A7BE6799938DEAABE603B984BBF05768AA5A978321F0C598D422D3A6BD974B2A88FA9C6A3ED1E5F9A9FBC0DB5891BE28F2EE400CC01C922B998EC7C417D6DAB6ADAC5C7DAF5CF14DE7DB2F269A53998C2E6436C8EBF2AB968D155776D558DB00EE15D3789E6FBEB4B1EA1F07E287528ED64D0D2F348D2ED25922B996EE66371149B6342E590672375B4431FC66438E09ADFF09FED6BE27D3FC0FA4EBF26B3A8C7A7CD7D35835B6F320CC6DB140007618249200DC3825B23C8AD74AD47C2861B2B71BF489B74535D1DC55A0130BE863CE482769F9DCE0B188A90326B43E22F84E4B9F03787E1763FD97A0CF756F74CC821794CF2F99E618CE49332C9247E67213686232EA2B8EA616954D248F628E6189C3461EC9B47D6137FC149750F0CFC38B7BE6D1C5FC4974C8F752C8A2461D063767E5C14C7196C9206D5245BD57F6DAFF849AD639E0B48BFB496E88B7D3CB73267257763A0006E3923D7A0CD7C7F7BE0FBCF887ACF843C3F231961D6219F5ABE9121212FE7788618BE18AA442310AC7B720C639EC353C1DADDAC9F14D22B3BF926B881E4BE5D49124F2A6990A82B1A00C7CA50595E57E1C938185E7C3C46418693565A23EB307C6B98528B77D5EDA1F4E4DFB6A59CBF0E63D66196E1EE241261262A23900214B0C1E465801C639EB8AF0AFDA17E31EB7A9F88BC63A56AB3B5EAC308B217CEA008A406274840EDE6C60907A32BB63A1AE76FBE156ABE0BD546913DBCFF00D9C935D269F1005E49A0DC244640389181DBB42673851B4834B6DE01F14F88E2D77EDB62CFAC788AC2D3ED221B47DB24B0CA1ADEE5237242CC550865C6DF9D9801F329D3019561E849C97F999677C458EC728C2A3E9AAE9F338AB9D38EABA6436F3C364BAA5AD9AFDA99F5195D44A5B16E64831B32D191B933CA1195DC2B4757B0BED12CA4D2FC3BA6E91AA6873CBF649358D6AC648E2B0B95DACE628B77EF542C8A633B7707E70A3207B741FB2B5EEA5E3886E34AD0F55B9BF3E45B5D5C04CA49E5204494B1C06B82B957900C1EA39635ED2FFF0004EFF88DE3EBAB5B5FEC5D2742D261F921B6B897CF48C3B29C98D460B36C40C49C903078E2BD7E7C449DA9536D7A1F3B1C161D53E6AF56316FCCF923C07F0F6E7C4C678ADF50D42EA2823B76375079CF0DCDE217494342D8486D50011A2A664DC0B13805475D3FC247B0D32E0CB6D616D7D205315ECF7725B14CC615A39515B63C7D71D1832AB6EE063EF7F837FF00048CD5F4BB511EBDE209EDAD0A24CF6BA340B6A18761B8EE238F4C63B0AF63F0CFFC13DBE1BF8574669A1F0DC5A85DB312D3DFEEBB9481D397271D3B62B279563EAD4F692B412F9B3A29E6B92E1287B25CD565F72B9F8D9A97C35D3EC6F66FEDABD59EE2E239A196EA091A4499A42CC9B8AE721493F7586558824E05761F0F59B4C54598DBE966CADC5C5C1FB5790648B7190322B60ECC65147CCCC0F000E6BEDBFF0082AB687E13FD9EFF0064BD7B57BDB7B5D296CAC261024482166948C468A3FBCCD8007D7DEBF34BF61CD5AE7E2C7ECDB7971E24D42596EBC3DB638EE64883CC8876A8E40DCC405039249C0CD4E6583F6547F78F993D0DF22C547138B4F0D0E46937BDF63DAEDFF69CD7B5BF12343A2DE5B0B296D96578AEA6F27CA9CB7CE924878895B076C8DFBB0C8159973CFB47C27F8FB1F896C6E9F51D4C4D1594881C3C4609ADB7E766F1928558AB60AB9EC0E0D7C66FAAC5F123C75636774E3C1BE22B695AE6C750D3A302CE59252ED3ACCBB880240242ACADE5E58E4287C26D7C349F52F1478ACD88630691696727F6898360851A549B6A9501049955F40373A0EAB93E66278730B5296D6F33D6CBB8E331C3E2B9B9B9A37F85EC7E8078F7C7DA78F849757F6CF14F17D98C8764AA8814A927E7C803A1E4F18AF8ABC71713789BC19143149FDAD1EB5AA497570208B6B471189B6AC7BC6F651C125BA818C004553BBF8AF736BE15F136836B28D412D657927B3690112C6BF3C926EC00553EE94E06D555190403C778EFC5F77632E89A75947259DE5F3DC5CA29949611BA0545918632E7A6D0383C573651944F08A5677BBFC0EBE25E25A79854846A2B28A77F537EEA4FF84BE0F223786FA2D9F635FB35C2B3DB3103619D490CA0E554BE39C8E735EA9FB01F8F957F6F5F076BD7163FDAD12F89A38E29A26D86CE740E76C8157728C31DB90771EBCD783698267F0E5DDECB18FF008A7A57B1B536AC8D7B7B63F2C50CC5BB0126E0CC416DA00E4E08FA87FE08B3A25DD8FED97E1E58B46B4D4AD750BD7B9DF2C685ED7727C92FCEC772A3E73CEEC12572C307E9E8D2B4E3DCFCEB135DFB3693DCFDECF03783ACFC1F6573F648BCA6D4EE5EFEE40006E9A40379E3E82B72A2B499A6811993612A0953FC27D2A5AFAB8AD0F8F77BEA14514558828A28A002BF1EBFE0E54F0B58EAB6DA0B086F25D90B5C5ECB6A079D96223545918E76F4DCA9C92EB9ED8FD85AF8E7FE0AE7E1DD3FC51F0456CED2C5EE75EB65786C0C502BF94CEB8E4B0F97601B830E5481D33918625374DD8E8C3492A8AE7E0F780B465F177EC553DB69D713DBDF7C32F14CD04B1C4E37D85B5E2ADD44C1971B4ACA971F7402AC08072335FAEFFF00047AFF0082C7E85FB66784ACBE107C5EBDB28BE275BC06D6D2EEE18476FE3289571B90F18BADBF7E31F7F05D38DCA9F929FB2078823F097ED17E28F86FAAC4D1699F123449B46D3A2DBB4AEAB196B8B303D725658BAE0998019CD789FC5DF095DF8475A9ECA759E09ECA7CC2EA5A2923756E08230559594608E41039AF91A18A785C5CE1D1EA97F5E67E8988C2D3CC32CA551FC51F76FDADB7E163FAE4F0E7C2DD03C3312259E9F027952CB32E46E65795D9DDB279C96663C9FE42B93F8A3FB23FC3EF8B53432EB7E13D1AFA68A613094C0A926E0081965C161C9F94E47B57E14FFC13EBFE0E76F8A1FB2FDB5BF863E33585D7C58F09DA811C5AAACAB1788ECA3040C348D88EEC019FF59B243DE46AFD82FD967FE0B29FB367ED7FE1EB7BCF0BFC55F0CD85F4EC236D1F5FBA4D2354864254796609CA973965198F7A92C304E6BEAE954A55A3A7DC7C156C3E2284BAFAA2A7C5BFF82437C1CF88F0CB2C1E185D2AE662ADBAD6E25409B4EFF957760127BE38CE792057CF3AFF00FC10E3C19AE59DADA47AB6B76D70F0CF7CD2DC386856ED61550BE5E0854196524F3C0E497C8FD308E649E157560C8C32ACA73907D291ED629C7CE8B2718F986720FF00914DE128BFB2898E63898FDB7F33F32E6FF8216E97AAE8EF8F10EA502DFD9179AD6582268CCAC776D2001C659F383D188F4C731F127FE0897043E0CD1EC74892FEF1ADF4CB913587998925705323CDEE18C6806718F931CE4D7EAD0B55576217EF1C9C9CD43169B14372EFE5A969392C793F4A8FECFC3FF29ABCDB152D272B9F970DFF00046C8AF51A681B535B2BD013CA4B9683CA8D398D04600002838E80FAE4D75DF0EBFE0897E12D275FD32E6EECE5FB3CC863B84133A6F0A08E70475E7F135FA3D169F1431612351CE692480074E0639AD3EA5875F644F36C5DACA6CF90F51FF8261F803C277D60DA16896B651C971E64AA9BBE67CEEDE79E4E4647A55CD1BF623D37C3576161B3924F2A5F2A27B83E6BC484E76AB124EDE4F53DEBEA5D62F2CF4D30BDC4D1424380BBDB19FF003CD79CFC69FDB13E147ECFD612DF78CFC7DE14F0DC513072750D4E180FE019813F857453A54A3AA8A3278AC4D4D1C9B30F4BFD94F4EF0869CD3436B0993CE49090BC81BB9AE87C47A059F87EE256C27C92467AF515F09FED61FF00074AFECF1F0B34DB9B0F04DC6B5F12754E554E936A52D011EB3CBB571EEA1ABF30FF006B6FF83917E3A7ED032DD5B785574BF871A64E3024B35FB66A2476FDF480221FF763CFBD4CB154E2ACBF034A582AD37CD33F7F3E30FED05E15F829E1A935BF116B7A3E85A6C302896E6FEF12DE2007FB4E40AFCCAFDB3BFE0E92F863F0A61974EF85DA55C7C42D5EDD0A24D07FA36961F279699D773AE7FB8873FDE15F895F1B3E3778DBF683F1036ADE37F156BFE2ED458E44BAADE34E221E88A4EC41ECA057976AD2379FB493C76F7AE6FAC73EC767D55533DF7F6B2FF828AFC5BFF828D7C459756F88BAF0B8B4B2C8D3F45B2430E9D61E636DCAA7F136DC8DEE59BAF20715F54FEC71A34DE04FD953C4B28B38E796E8C10A348A4A190B12338F61F4AF85FE00F835F5DD42102324DC5C8CFF00B61785FF00C798FE55FA81E28F0B47F067F64EF0DE8BB961BBD73515D41FCC6DABE42BC719DD93D0AF998E79C1AF9ACF3109D5850F33ECF84B0AE34AB629E89459E3DA7780B439355D360B1D264D091F5097EC4268D5DE5B746027830AC7CC8585CB90E49718240C1AC0D1E687C2B7D793477AF368DA45CC514D1468D6C6F2E248F74780DF33919E38C2E19B1C56E78AE78F43D1604D45756D3BC41E17D70A4770D69BEE61628583C90F0CD04A862762BB861DFCBC8C2561F887E1EB5C69BADEA33CB65AC6912DBDB7D8B50B39FCC16FE534ED348D183BD190B28DACA0B79919FBA41AE9E4EC7CCDDAD4CDF86DA1FF0064F897C5A90DE306D4A19934F9E7E678435B4170F2A3679405D72C72A4000E09AE83C6835D9BC476575E2B682F2C162B5B98EE2C06C9621E70170C800CB7FA859954F03B7DD7DD81A4EA572FAB6976B6655AEF46921562045BD4AC6F146C198E12450AE8DD898C6E53F293DFE97F11B4FF001369D19F11E83069DE208AE228A3BDB75FB3DADD2452AB02F093B2290AEF2F84C139C8CE6870B25617B5937A985F10238345F0BEBD6B25A5BBDAEB36B235A4B14DE524534572850BE060E705F2DF290E318E83F413FE0839E119ACFF0068686E2F2CE296E2E7C3B10B98E35D861691D8CBD094287E53B467800673D7F3AFE2AA3F8C2E7478A2314D73A5DD5CC97565800A2F971E77BA131C9952A1411DCB119040FD5DFF00837BFE174973E1D97C432CBAA8B86816249A6986405DE08DA465F1C2B76240279C13AD085EA44C3112B41B67EACDB422DFE55185FAE6A6A8E00C07CC413EC315257D11F3EC28A28A041451450015C97C69D0E7D5FE156BF6B616D6D737B73672A411DC3110995C6D05F1CED04E5B1CE0102BADA4650E3919FAD26AEAC34ECEE7F2D9FF000535F833AC7C0BFDA72FB584BED43EDFA46B4977632CE3CBBE86E512094DD24430A228A49542104824F56539ABDFB5E7F66FED0DE09F0A7C5AF0F5A456BA678D2D84F796F08F92C7528C6CBCB527D5650587AABA9E86BF537FE0BDFF00B22E8BE3DF0F43E33D334AB68F5FB10B36A1750BB799751C68556195114EE5C3E7E7E319EC0E3F1F7F669F88963F0CBC6DABFC2AF19DD4165E10F1EDC471D9DDDC4984D235807CBB7BA2013B63976B43201C0431B9385AF95CDF08F4A94D6B1FC8FBCE18CC6316E857F827A7A3E8CF9CBC596DB09574F98821BE5AE3A4D3EC8DBCF67A95AFDAADE7042767B690E40910E3A804F1D0F19E95F4CFED23FB3DEA1F09FC6FA8E91A8412C17761298E48E55DB8F707B8F435E27AFF0087CAC84B2ED7E47D6B1C163538DD1E8E6797384F944F815FB7F7C7CFD8EAE63D3BC19F15BE2078520B2C18EC2D75999EC0A9195616F21688A90723E4EF5F5FFC26FF0083A4BF6B8F02DBC51DF78A3C23E304880006B5E1D855DC0F57B6F2493F5E79AF86757F0A2F89AD16CE79160B882361657246467AF97277DA79C1EC48EC4D708565D275192DAE2378268CFCC8E30457AFED652578B3CAA54A93972D6827F23F657C37FF00077D7C71FB2A8BEF865F0A6E65DA0168E4BE8013C738F35EB525FF0083BE3E302A607C28F865BF1FF3FD7C47F3AFC6BD3B50C38DC4FB56BC1A947E84374393927E9DAA1622AAEA76BC9F04F58C11FAB5E23FF83B8BF683BC19B1F02FC2AD3958F00C57B70547E32AD794FC4EFF00839B3F6B1F8816CF0DBF88BC25E1C8D8EE56D2F4141221E3A34ACFFCABE02F39668F712E074C629A595F81F99347D6AB7561FD8F855B411EDFF167FE0A73FB44FC74DFFF000927C61F1E5E249C3C56FA91B28CFF00C060082BC2B56BAB8D73527BAD427B8BFBA93EFCF752B4F2B7D598927F3A7BB7964F3F91A89CEE6CD2F6D27B99BC1421F0E822AE4F53F9F4A7E06DA825B8F24FF2AAF2EA6533C8FCBA53898CA9A5A12EA0E210A41E33CD72AFA7CDAE6B896B082D2DC385503B1F5FA71FA5696AFA979AB95232A3919C57B57ECD7FB306A9E20D6E396EE064BDBB01766DF9ADD0F453E8EDDFD071D4F173AAA9479A6732C3CEBD554A9AB9ECDFF04F5FD99AEBE237C43D06DA186478DA58A28C018C46A416627A0EEDCFAD7BFF00FC147BC7DF6FF8910E91630FDA34DF0F3C1A6BB47C94851595153B191A419C772C33F2835ECDF05BC17A3FEC43FB325E78A75295A1D735E89ECB4E8F6ED29101F3C8A7B678507DABE36BDF8DD0DCFC460BE22B38AE747F155B4B298C398EE942BB2C5229E9200EA4BC6C0AC8A3B1E6BE4B0F2962F31759FC313EF7358432AC9BEAC9FEF2674B36A5A643F03AD6E35231F88DE2692D748BAF36449AD62906FBBB190924848F67991090660666504C6EB8E7F534B9F0DF81351D36CEF566B258F2DAAEA512C935C1674F9BE4211B6A1951B920A155CA1EBAF15E697E0CF0FC3A4497A2E1754BE9675B58FF0074B1F951C8F09690A379A8C4C89927FD5BA608318CF8DF863C11AFF896C2779EE60B74B8F3A4B69D665B8B688A45F345BF2F1C60BA479CB20C4EE73C1AFA8B58FCC75B16BC77A07FC24FF11B5ABB8269608ECB4EFB54E6F668D92297967818E414911DCA2EE23181CE0EE296FA92EBBA6CB6F786DCDECEF6EF66B673C854C931667525BE6DADE43004E3E6E87613567E31783AF2DF59B6875AB53A645E31820B8F3AD161BAC5D1855A5564C65E094C7B7E46EAE0E48016BADFF8456C6F7418EF86A3A76A73C111B7782DB123E9F3C5E6496E049F2302385E7A962090C4D4D848EC7F647D1E5F8EBE39D1346F22EEFB5A8AE8C56DAA47BB6A2A1DF134D1A9DB24670D19C2963B8E3AE0FF00441FB077ECCD67FB37FC0AB0D191313F98679548F96391B9217201DB9C9048DD8201E95F953FF0444FD96B57F8D5E3ED2FC7BAFE9D3D8D87CF73FE8F9FB18B82A70AAEA7742A719084FCACD8395618FDC0D32C134CB28A0891523891515546028030001E800AEDC1D0F7DD467063AB2FE1A270B8A5A28AF50F3428A28A0028A28A0028A28A00E07E3EFC228BE2F780EFF499A213C376159E063B52774E5039EA50300703AF4E99AFE797FE0A33FF0004DAD43E14789B57D46FF4C9A3B1B0716526E9772B170092B248C23624E4B609DBC0E8463FA58AF17FDB3FF666F0CFED09F0BAF6CB5CD36DEE5B6130CED08964B49328C24453C6F213603D70F8C804D72E228F36A75E1B10E9BB1FCFCFC0AF8896DFB5FF00C35B2F85FE287857E27F8660FB3F8675AB9601BC536718E2CA591B86BA8957E423EFA003EF0E7C23E2A7C1BB9F0B6B777697F65716D756D23472C4CBB5E161D5594F22BA2FDAB3E12EA7A17C68F12C434B1E146D235973A6A09DACDAD8452BF2240094C48B1E1C00728D803191EC5F0BFF006A8F02FED27A75BF853E3C6A90F853E2369D6BE5D9F8AA3B7DB0EBD1EEF255EF06331B2B91FBC7003AA3B6062BE2F1D829E1E6EB61D5E3D52E8CFD3F27CDE963292C3E29DA6B6977F267C4BA9783D9257CA9D873CFA0AC0D73C1F6BAB598B4D4A1DFE5A95B6BC887FA45B1EC0FF7D3FD93F8115F6E7ED19FB0CF887E10CECD3D9452E9F2AEFB5BFB693CDB4BA4EBB95C7078C7E75F3D7887E184B14B200863231B7DCFF856982C7A9AB958FC9A54E5AA3E6CF14782751F078134C9E769EE7115D44A7CA73E849FBADFEC9E7D33D6AA596AA5795E7B722BDFE4F0DDE693BBCD042EDC323A87471D30CBC823D88AE4BC43F07B47D5049243E769176C42A24081ED33FDE2A4EE5CFA29C0EC3B57AD0A909EE791FBCA5A743CE97532E73BC6EEE076FE9563CEE3756E4BFB3DF8A2273F608ECF5819C06B19D59B1EA51B0DFA567DF7C2EF16E9AEA971E1DD753270BFE832107F10B8AD542FB14F1892D4A9F69DF1E7EEFB66A29EE318F97EBCD6959FC2FF0016DDCC513C31E217751923FB3E5181EA72BD2BA6B1FD977C677578B15F5AD9E83B86E65D46E9524418CE4C6BB9C76FE11D69BA76F88CBEB0E4ED1D4F3BBCBEDA07F4352786BC2DAB78FF0059163A3D9CD753B73211854857BB3B9C2A0F762057BE783BF644D174EBB83FB567BFD76EA460C21881B3B6C77CF0D2B0FF00BE3F0AFA17E0BFC09FED5FB3D95B6931DBDB236F1676F12C509EBB4E39C9F76CB7E35CF5B1B4A8C799BD8E8A197D7C54D452B1E09FB3DFEC9B2693A95B5E5D4516AFAF67746A0F9969A73103073CACB2007AF28A7A6EC66BF49BF641FD93743F85DE0C97C7BE359841A1693996E1DCFCF7F37510A03C9663E9F526BA5FD9E3F639D23C21E0C97C65E33957C35E1CB242CF231C493E1788E3C9C1638EC3D7A578AFEDBFFB695BFC65BB5F0F6953DBF877C2DA45BCB2D858162008A35049C28CB4D27006E2A0938C8CD7CB62B32AD8DA8A9D2D8FAFC0E59432CA4EBD4D65FD69EBF91C77ED65F1FEEFF6B3F8B36BBCFF0063F8716416B6D0A1CEC823059BCB41FC2A8BE9CB32FB91F3F7C63D77FE164698F638FECFD51A11FD996E6D0456DA7AAAB9778AE4E163568C24214139740F8C9DD5E89A0CFE1CD506BFA149A9BACFA3B5B4BA76B96C648E78E5440D66A916EDAB1869DD8A637972B8CE003E4DF16B568B45F15D828D422BEF0C4374EB74B75A77916F2C72C8AFBFCAC131AE24EC11F24B05F9B27E9B0583850A694773F39CE333AB8DACEA547E8BC8A3E17F88D6FA0C179A8DCC116A3AFDF59C969A75A451B27941891713CAB8DB26079A91AB8F99932493B6BA293C117BF0826FB7F8662874CB68ED2444B2B66FB458C5296F9D264390D9899D983820AC83D0566FC49D17C396EDA2FF00C230E66B9B9844934AC1BF725554C854900B42CAB1B86002E769C64B11D17C3FF14C50EAFA3E95672EB1777F676D776ED25E223AC8EDFBD8C22E4966FDE6CC9C9FDE9EC2BA99E62663F8AB45D1F50F89934D36A71E970CD6E97D0C3B372A347179863548B2A0231F2911906522009C035E89F033E103FC79F10CBA0785A2935CD6B547B39E48ADA42C93618129B8A7980B2EF186DC4155C018AE23C23E12B9D63E2935EC56D692E8F78B25D24D2BBDC476D7725BAA94C03B9544C5D553924ED1C8E6BF563FE085DFB096B7E07F1BD8FC46D4F4B32D9DCCF2431C52848CAA16919655E7736C60AC08CE33C104105C21CEEC4CE7CAAE7E8F7EC59FB3CC1FB3C7C20D23C390C689FD916AD692BADBF92B724B821F6E48E00C0E4F1DF1803DA6A3B78FCA8554F2546093DEA4AF6A9C145591E1CE4E52BB0A28A2B42428A28A0028A28A0028A28A002A1BDB51796EC87BFA8CD4D4526AFB81F0FF00FC1423FE095BE1AF8EDE1CBDD5349D1AC46B37B334F76F25C345E6B34864762CC481C7627686DA40FBD9FC3FFDA67F64CBEF873E21BDB5BE48EE63B8582EA57B80C8615684EC91A3C6E74099DB9254201D599ABFA9E96159D0AB80CA46083D08AF37F897FB2EF83BE24447EDFE1DD16E64685EDFCD9ED95E4457EB8623240EC84ED1E95C95F0CA6B43AE862793491FCD2FECD3FB6F78DFF65EB2D6BC397D6969E36F8451468CFA26BA5BCD86360C4C9039CBC476A9383F27A0E01AF70F0BF817E157EDC119D43E14EBB1DBEA291EE97C29A9325B6A566DCFC91EE2165008C0C1AF7BFF008289FF00C127AC3E19F8775AF11E876BE57DBA692F2EADED205DB32868C44B1C6178DBB1F2BFECAF18241FCB5F8B3F0235BF847E0FD065B19B50D335DB4BC0DA85E42A61680A6E28B1B8E7392739C0C9F506BE63199346A3E783E497E1F347DC651C555682F655573C3B3DD7A33DCFE21FECBBAC785F52920D4B4EBBD3663CB45759464FAA9C7A7E95C44DF071BED73218D664840DF853B493CFE3DFA576FF00083FE0A3BF137C29E217D07C61A3DBFC52D02C108F37506C5CC512AA8E66193CE7F46EC39F61F0CFEDA9FB33FC6BD26157D3BC4BE03D52E63DED6E664B981F2482537609C107F01C57913FAE61DFBF1BAEE8FB2A35F29C6B4A94F95F696963E528FE10431C92CAC1A18339CA96DA9F4CF5FC2AC69BF0D355BA72D6D717925B478643F7772E71F28EA2BED54D3FE05CFE0E1369FF0013A0B6B846063FB65A146018F2095DC33DEAEAE8FF00046EADD1DFE24DBCB7322AA136D10DFB88E3392A00EFCD64F389A5F0BFB8ED5C3D425AA9AB7A9F21E9BF08B50BAB632DE49A8470BBEF7F325624A8E31824D77DE0EFD9BBEDB6F0DC2A2EC490310CA3793C1E4F423A6735EFBAA7ED01FB3FF8134EDF73AA6B1E2496DD3C8F96286049769EBD491F5E3A572FAD7FC1557C31E05B49BFE10AF87560D36E511DC5C31BB9559802A318D809C82A3AF3EF50B1D8AACED08317F67E5F867CF5AA2FBCE97E17FEC23AA5FDABEA3771DBE9D63BCCB717B78CB144148F56E3B0E7AFA75AE9B5EFDA93E10FEC676F70639AC7C55E25B74C3111E6D519790403CB638ED8F6AF903E2AFEDD3F147F6C0F125CDB5CEA12E91A7AC2F335C2C6CF0C089C36D8C71DBB7271C67A5703A17C31D2AC7C63ABEA9AD6B573776DE1FB585D649B625C992E62F385CCC03B4707CA0F951B393911E412715AD1CA7135DDF132B2EC7062F8AF03858B86123CCFFAFEBA1EC5F1DBF6D9F17FEDD3F16F48D127BD7D03C292AB5C46A1C24569631EEDF2A45951B723032324E07522BC1F48D334A86EA78751D43CCB9F13343E53342D27905A5DD6F6B1B6D6DCD9659642060189179C8AEDFC67AC2E99A769577A5DD595BBDF698E6DB5670971706C12785DD64208087CE556C290CC1BAA80A2B86D5F4B9FC6B6FA6F886182F74A81B56B87B152034DF64B54F38DE961951F322AB718DF8038AFA6C2E0A8D08DA08FCF71F9B6231536EA3D3B2D121B2E91A8783FE1D4B77F6657BC86F6E64D4C2069D11E26587E629BB1C8057A8C479E08C5711E33F0B5E789B48CC174BAB2CF752CD750DDDC117171E62C667667C90D8090AAB4791823E5DD907DBFE0CFC678F53D1EE6E34DD0B4BBDFB7C329D4B4EBE412411CAEBFBC0B93BF61DF952A031E57EF05CE37C7B9BC0FA869F7B6DE11D2E7B0B1D46D925B0BA97519EEAE2DD9247568E44906028F99720EE6F97270307A6F63CDB2E8606B8A35AF055A597DB2CC22594366CD0A63EC500C4321DBC8DCCAA910233B40C923380DF87FA85FEBA2E2DADB4D47D5ACAF63B8B449E2C989D515832100123E6627E604360E0AE6BD9BF634FF00827EEB9FB607C50D174DD0AD64974ED5E548EE669008EDE06F2B127EF00CA8108126319E4000915FB3BFB267FC1083E15FECE5FD97A96A2F75E27F13D848F2CB7B39D91C8FE68646541F7488D44679390CDEB5A4694A7AC48A95A14D5A5B9F3AFF00C124BFE094F65E32BE5F887E30D06C3EC170A1CD9EFF00DD8B89115EE2131636B20731C892A9043A942B8193FAADE0FF0002699E03D256C74AB386CED5092B1C68AA01249278F524D68E99A641A45A886DE18A0897A246A140FCAACD7A74A82823CAAB5A537A8514515B9885145140051451400514514005145140051451400523207EA334B450064F89FC1BA7F8BAD7C8BEB68AE23E70B22060338CF07E95F257EDA9FF00048AF01FED1FE19D4E76B7960D5259DAE21B8462ED006DC762213B00DEDB89E49E7D057D9748E8245C1E878A8942325665C6728BBA3F9DAFDA7FFE0973E32F829E1EB0B896CEEBED5E294FECED4ADE25C8B77F302860990DB4A16393FDEEB9CE3E2EBCFD9E25F0B5F9D4EEB4737705A3DB69D1C2AF88DE5952551927E6C2AA4AEC78237738DA6BFAD8F1AFC35D23C7D0A0D46CE19CC4B22296456CABAED60410411D0F3D08046315F137ED2FFF000473F0A7C50B9D4278ECDE6B0B7B48960B24215A79B2DE6461C8F915B79DCE4B70ED9202D704F0AD691D8F4296313F88FC06D0FE1AD9EA3A2C6C9386B7BFBEB8136617587CA50BE5C71F209C3AB3138E018C0C8DD5497E08FF00C27B7D6167A6ACDA7CB3C99BB6791414B4876EF6DDD15A5FC8046C71923F62FE297FC10F2E64F85FA7B6870CD7770D0BC8D2595A2C2D2C935C09B795DDCC6119D1464B0C26781CFCB9F13BFE0955F143C0DE07D403D95BE9F6B6B6F0C1A82F124C6323FD4952A0E11A36638277614927A560F0CD2D4EB8E31CB4523E24D4BC2DA45BDFEB7AD0B327C39A3CEEB77A9163E56A73E0225B4249F9608F0C59829694A37280AE76BC27E0E5D4B4A8B4AFB7491DE5B4BFDADAA5E6140B4BA572CB0A2B0C1296A0B93C8241DA7E4E7E93D3FF00E09B9F11468979FDB5A0DF6A9611C93D8B34A6312DD3B0E6323EEF9849E33C2EEC6E1815CEF847F628F885F0FF005AD5AEE6D2B57363A859452BDADD5A3C535E69EC4AC720DC4EE8CC8CAACCA4B1193D2A153B6C83DAB6F5679C7C3DF0F689A86926CF464B987C9B174BDBCF29C2C76A55C02D23B6362898BB11F2E4E0738AE2FC4B0FFC245E21D6E1D3205BEF0FACE6F63821E2DE611BC5129380BBE54883202DB8A966C60735F5AF85FF00E09FFF00163C5F6DA7E91A1E8EB16837C26B8B37B38B62CF1DBBC6AD6F21C7EF1C619D63936A15DD9E4AE619FF00E0933F1566D52696D7C2D3E9D770B4AB3C102F9913300AECC9C8C0C88C8EA0EE0323032D527D88BC5753E51B5BAFECFB2B68BCC58ADA1F384F6772B931C4DE5B88F18CB6EDAA83271C1F4E22D5B4AD627D1EDDD22DB3C76325BDC30BD6C0973E63246A5803BF0493CE3233C707F48FF66BFF00820378A7C5FA741ABEBD75258EA176B235DC135BA8F3832B14521B20AA09148008CB023383C7D6DFB39FFC10CBC35F093C4FA45EEA176FA80B13E73DB48886349410FE6860031DCCA80C6490029C11C0AD63426CCE55A08FC70F835FB19EBDE3FBDB2874BD0446F3DC9FB3F9EA13ECF2FCD888C876E46DE46391CAF51CFDCFF0A3FE0827E2AF16EB3A45FF008DA4B7B2B5BAB577FB3DD209258F79F9A371BC159159980C82000849C96DBFB27E1CF863A1785B468B4FD3F48D3ECACE17691628605452CC58B3600EA77B67FDE35B91DA469185D80055DA07B574470ABA9C8F16DEC78AFEC87FB17F85FF00652F0E7D97C3F632D9A38855ADD8A345198E111ABA607DEC6ECB0C121C839C0C7B7018A51C515D708282B2396537277614514559214514500145145001451450014514500145145001451450014514500145145001515DDA25E5BBC522EE4906D65F5152D1400C8E208300003D0551D53C27A76B5E67DAAD229C4A30E1875E315A3450062FFC203A57F659B3FB15B881A33090100F9339DBFCA96F3C05A4EA1A7595B4D616B2C7A700B6C248C39846369009CE015E0FB56CD14AC87CCCC2D2FE1D691A2C70ADAD8DBC22079248F620010BAED6C7D5401F856847A25BC4D16215FDC7FAB39FBB5768A39505D91880039C007A53B6714EA2988451814B4514005145140051451400514514005145140051451401FFD9),\r\n  CNHDigital varbinary(max) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  DataAlteracao datetime NULL DEFAULT (getdate()),\r\n  UnidadeId uniqueidentifier NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  CondutorId uniqueidentifier NULL,\r\n  TipoCondutor varchar(50) NULL CONSTRAINT DF_Motorista_TipoCondutor2 DEFAULT (\u0027\u0027),\r\n  EfetivoFerista varchar(50) NULL CONSTRAINT DF_Motorista_EfetivoFerista2 DEFAULT (\u0027\u0027),\r\n  CodMotoristaQCard int NULL,\r\n  CONSTRAINT PK_Motorista_bkp_MotoristaId PRIMARY KEY CLUSTERED (MotoristaId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaAbastecimentoCombustivel":  "CREATE TABLE dbo.EstatisticaAbastecimentoCombustivel (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TipoCombustivel nvarchar(100) NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NULL DEFAULT (0),\r\n  MediaValorLitro decimal(18, 4) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatAbastComb UNIQUE (Ano, Mes, TipoCombustivel)\r\n)\r\nON [PRIMARY]",
                      "ViagemEstatistica":  "CREATE TABLE dbo.ViagemEstatistica (\r\n  Id int IDENTITY,\r\n  DataReferencia datetime2 NOT NULL,\r\n  TotalViagens int NOT NULL DEFAULT (0),\r\n  ViagensFinalizadas int NOT NULL DEFAULT (0),\r\n  ViagensEmAndamento int NOT NULL DEFAULT (0),\r\n  ViagensAgendadas int NOT NULL DEFAULT (0),\r\n  ViagensCanceladas int NOT NULL DEFAULT (0),\r\n  CustoTotal decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoMedioPorViagem decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoVeiculo decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoMotorista decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoOperador decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoLavador decimal(18, 2) NOT NULL DEFAULT (0),\r\n  CustoCombustivel decimal(18, 2) NOT NULL DEFAULT (0),\r\n  QuilometragemTotal decimal(18, 2) NOT NULL DEFAULT (0),\r\n  QuilometragemMedia decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ViagensPorStatusJson nvarchar(max) NULL,\r\n  ViagensPorMotoristaJson nvarchar(max) NULL,\r\n  ViagensPorVeiculoJson nvarchar(max) NULL,\r\n  ViagensPorFinalidadeJson nvarchar(max) NULL,\r\n  ViagensPorRequisitanteJson nvarchar(max) NULL,\r\n  ViagensPorSetorJson nvarchar(max) NULL,\r\n  CustosPorMotoristaJson nvarchar(max) NULL,\r\n  CustosPorVeiculoJson nvarchar(max) NULL,\r\n  KmPorVeiculoJson nvarchar(max) NULL,\r\n  CustosPorTipoJson nvarchar(max) NULL,\r\n  DataCriacao datetime2 NOT NULL DEFAULT (getdate()),\r\n  DataAtualizacao datetime2 NULL,\r\n  KmTotal int NULL,\r\n  KmMedio decimal(18, 2) NULL,\r\n  MinutosTotal int NULL,\r\n  MinutosMedio int NULL,\r\n  CONSTRAINT PK_ViagemEstatistica PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Usuarios":  "CREATE TABLE dbo.Usuarios (\r\n  UsuarioId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ponto varchar(10) NOT NULL,\r\n  PontoUpper varchar(10) NOT NULL,\r\n  Nome varchar(100) NOT NULL,\r\n  Email varchar(100) NOT NULL,\r\n  EmailUpper varchar(100) NULL,\r\n  EmailNaoConfirmado varchar(100) NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NOT NULL,\r\n  SenhaHash varchar(100) NOT NULL,\r\n  SenhaCamaraNetHash varchar(100) NULL,\r\n  PrecisaMudarSenha bit NULL,\r\n  EmailConfirmado bit NULL,\r\n  SecurityStamp varchar(50) NULL,\r\n  AuthenticatorKey varchar(50) NULL,\r\n  RecoveryCodes varchar(200) NULL,\r\n  AccessFailedCount int NULL,\r\n  LockoutEndDate datetime NULL,\r\n  AdministratorRole bit NULL,\r\n  LastLoginDate datetime NULL,\r\n  CreatedDate datetime NULL,\r\n  RowVersion timestamp NULL,\r\n  CONSTRAINT PK_Usuarios_id_usuario PRIMARY KEY CLUSTERED (UsuarioId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaAbastecimentoTipoVeiculo":  "CREATE TABLE dbo.EstatisticaAbastecimentoTipoVeiculo (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TipoVeiculo nvarchar(100) NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatAbastTipo UNIQUE (Ano, Mes, TipoVeiculo)\r\n)\r\nON [PRIMARY]",
                      "MovimentacaoEmpenhoMulta":  "CREATE TABLE dbo.MovimentacaoEmpenhoMulta (\r\n  MovimentacaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(500) NULL,\r\n  TipoMovimentacao char(1) NULL,\r\n  Valor float NULL,\r\n  DataMovimentacao datetime NULL,\r\n  MultaId uniqueidentifier NULL,\r\n  EmpenhoMultaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_MovimentacaoEmpenhoMulta_MovimentacaoId PRIMARY KEY CLUSTERED (MovimentacaoId)\r\n)\r\nON [PRIMARY]",
                      "LavadoresLavagem":  "CREATE TABLE dbo.LavadoresLavagem (\r\n  LavagemId uniqueidentifier NOT NULL,\r\n  LavadorId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_LavadoresLavagem PRIMARY KEY CLUSTERED (LavagemId, LavadorId)\r\n)\r\nON [PRIMARY]",
                      "ItensManutencao":  "CREATE TABLE dbo.ItensManutencao (\r\n  ItemManutencaoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  ManutencaoId uniqueidentifier NOT NULL,\r\n  TipoItem varchar(100) NULL,\r\n  NumFicha varchar(50) NULL,\r\n  DataItem datetime NULL,\r\n  Resumo varchar(max) NULL,\r\n  Descricao varchar(max) NULL,\r\n  Status varchar(100) NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  ViagemId uniqueidentifier NULL,\r\n  ImagemOcorrencia varchar(500) NULL,\r\n  CONSTRAINT PK_ItensManutencao PRIMARY KEY CLUSTERED (ItemManutencaoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "SecaoPatrimonial":  "CREATE TABLE dbo.SecaoPatrimonial (\r\n  SecaoId uniqueidentifier NOT NULL,\r\n  NomeSecao varchar(50) NOT NULL,\r\n  SetorId uniqueidentifier NOT NULL,\r\n  Status bit NOT NULL,\r\n  CONSTRAINT PK_Secao_SecaoId PRIMARY KEY CLUSTERED (SecaoId)\r\n)\r\nON [PRIMARY]",
                      "SetorSolicitante":  "CREATE TABLE dbo.SetorSolicitante (\r\n  SetorSolicitanteId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(200) NOT NULL,\r\n  Sigla varchar(50) NULL,\r\n  Ramal int NULL,\r\n  SetorPaiId uniqueidentifier NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  DataAlteracao datetime NULL DEFAULT (getdate()),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  CONSTRAINT PK_Setores_id_setor PRIMARY KEY CLUSTERED (SetorSolicitanteId)\r\n)\r\nON [PRIMARY]",
                      "HeatmapViagensMensal":  "CREATE TABLE dbo.HeatmapViagensMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  DiaSemana int NOT NULL,\r\n  Hora int NOT NULL,\r\n  TotalViagens int NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]",
                      "tr_Object":  "CREATE TABLE dbo.tr_Object (\r\n  Id varchar(255) NOT NULL,\r\n  Value image NOT NULL,\r\n  CONSTRAINT pk_tr_Object PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "WhatsAppMensagens":  "CREATE TABLE dbo.WhatsAppMensagens (\r\n  Id int IDENTITY,\r\n  NumeroDestino nvarchar(50) NOT NULL,\r\n  Mensagem nvarchar(max) NOT NULL,\r\n  Tipo int NOT NULL DEFAULT (0),\r\n  Status int NOT NULL DEFAULT (0),\r\n  DataCriacao datetime NOT NULL DEFAULT (getdate()),\r\n  DataEnvio datetime NULL,\r\n  DataLeitura datetime NULL,\r\n  InstanciaId int NULL,\r\n  ContatoId int NULL,\r\n  UsuarioId int NULL,\r\n  ErroDetalhes nvarchar(max) NULL,\r\n  TentativasEnvio int NULL DEFAULT (0),\r\n  IdWhatsApp nvarchar(100) NULL,\r\n  RespostaJson nvarchar(max) NULL,\r\n  UrlMidia nvarchar(500) NULL,\r\n  TipoMidia nvarchar(50) NULL,\r\n  NomeArquivo nvarchar(255) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "AspNetUserTokens":  "CREATE TABLE dbo.AspNetUserTokens (\r\n  UserId nvarchar(450) NOT NULL,\r\n  LoginProvider nvarchar(450) NOT NULL,\r\n  Name nvarchar(450) NOT NULL,\r\n  Value nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "RepactuacaoTerceirizacao":  "CREATE TABLE dbo.RepactuacaoTerceirizacao (\r\n  RepactuacaoTerceirizacaoId uniqueidentifier NOT NULL,\r\n  DataRepactuacao date NULL,\r\n  ValorEncarregado float NULL,\r\n  QtdEncarregados int NULL,\r\n  ValorOperador float NULL,\r\n  QtdOperadores int NULL,\r\n  ValorMotorista float NULL,\r\n  QtdMotoristas int NULL,\r\n  ValorLavador float NULL,\r\n  QtdLavadores int NULL,\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_RepactuacaoTerceirizacao_RepactuacaoTerceirizacaoId PRIMARY KEY CLUSTERED (RepactuacaoTerceirizacaoId)\r\n)\r\nON [PRIMARY]",
                      "tr_Set":  "CREATE TABLE dbo.tr_Set (\r\n  Id varchar(255) NOT NULL,\r\n  Member varchar(255) NOT NULL,\r\n  CONSTRAINT pk_st_DE59633C PRIMARY KEY CLUSTERED (Id, Member)\r\n)\r\nON [PRIMARY]",
                      "Multa":  "CREATE TABLE dbo.Multa (\r\n  MultaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Data datetime NOT NULL,\r\n  Hora datetime NOT NULL,\r\n  Localizacao varchar(200) NOT NULL,\r\n  Vencimento datetime NULL,\r\n  ValorAteVencimento float NULL CONSTRAINT DF_Multa_ValorAteVencimento2 DEFAULT (0),\r\n  ValorPosVencimento float NULL CONSTRAINT DF_Multa_ValorPosVencimento2 DEFAULT (0),\r\n  Observacao varchar(max) NULL CONSTRAINT DF_Multa_Observacao2 DEFAULT (\u0027\u0027),\r\n  AutuacaoPDF varchar(max) NULL CONSTRAINT DF_Multa_AutuacaoPDF2 DEFAULT (\u0027\u0027),\r\n  PenalidadePDF varchar(max) NULL CONSTRAINT DF_Multa_PenalidadePDF2 DEFAULT (\u0027\u0027),\r\n  Paga bit NOT NULL,\r\n  EnviadaSecle bit NOT NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  OrgaoAutuanteId uniqueidentifier NULL,\r\n  TipoMultaId uniqueidentifier NULL,\r\n  EmpenhoMultaId uniqueidentifier NULL,\r\n  Fase varchar(50) NULL CONSTRAINT DF_Multa_Fase2 DEFAULT (\u0027\u0027),\r\n  ProcessoEDoc varchar(50) NULL CONSTRAINT DF_Multa_ProcessoEDoc2 DEFAULT (\u0027\u0027),\r\n  NumInfracao varchar(50) NULL,\r\n  Status varchar(50) NULL CONSTRAINT DF_Multa_Status2 DEFAULT (\u0027\u0027),\r\n  DataNotificacao datetime NULL,\r\n  DataLimite datetime NULL,\r\n  ContratoVeiculoId uniqueidentifier NULL,\r\n  ContratoMotoristaId uniqueidentifier NULL,\r\n  NoFichaVistoria int NULL CONSTRAINT DF_Multa_NoFichaVistoria2 DEFAULT (0),\r\n  ComprovantePDF varchar(max) NULL CONSTRAINT DF_Multa_ComprovantePDF2 DEFAULT (\u0027\u0027),\r\n  DataPagamento datetime NULL,\r\n  ValorPago float NULL CONSTRAINT DF_Multa_ValorPago2 DEFAULT (0),\r\n  FormaPagamento varchar(50) NULL CONSTRAINT DF_Multa_FormaPagamento2 DEFAULT (\u0027\u0027),\r\n  AtaVeiculoId uniqueidentifier NULL,\r\n  ProcessoEdocPDF varchar(max) NULL,\r\n  OutrosDocumentosPDF varchar(max) NULL,\r\n  CONSTRAINT PK_Multas_id_multa PRIMARY KEY CLUSTERED (MultaId),\r\n  CONSTRAINT KEY_NumInfracao UNIQUE (NumInfracao)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "AnosDisponiveisVeiculo":  "CREATE TABLE dbo.AnosDisponiveisVeiculo (\r\n  Ano int NOT NULL,\r\n  TotalViagens int NOT NULL DEFAULT (0),\r\n  TotalAbastecimentos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Ano)\r\n)\r\nON [PRIMARY]",
                      "ModeloVeiculo":  "CREATE TABLE dbo.ModeloVeiculo (\r\n  ModeloId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  MarcaId uniqueidentifier NOT NULL,\r\n  DescricaoModelo varchar(100) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_ModeloVeiculo_ModeloId PRIMARY KEY CLUSTERED (ModeloId)\r\n)\r\nON [PRIMARY]",
                      "CorridasCanceladasTaxiLeg":  "CREATE TABLE dbo.CorridasCanceladasTaxiLeg (\r\n  CorridaCanceladaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Origem varchar(100) NULL,\r\n  Setor varchar(500) NULL,\r\n  SetorExtra varchar(500) NULL,\r\n  Unidade varchar(500) NULL,\r\n  UnidadeExtra varchar(500) NULL,\r\n  QtdPassageiros int NULL,\r\n  MotivoUso varchar(500) NULL,\r\n  DataAgenda datetime NULL,\r\n  HoraAgenda varchar(5) NULL,\r\n  DataHoraCancelamento datetime NULL,\r\n  HoraCancelamento varchar(5) NULL,\r\n  TipoCancelamento varchar(500) NULL,\r\n  MotivoCancelamento varchar(500) NULL,\r\n  TempoEspera int NULL,\r\n  CONSTRAINT PK_CorridasCanceladasTaxiLeg_CorridaCanceladaId PRIMARY KEY CLUSTERED (CorridaCanceladaId)\r\n)\r\nON [PRIMARY]",
                      "Recurso":  "CREATE TABLE dbo.Recurso (\r\n  RecursoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome nvarchar(200) NOT NULL,\r\n  Descricao varchar(250) NULL,\r\n  NomeMenu nvarchar(200) NOT NULL,\r\n  Ordem float NOT NULL,\r\n  ParentId uniqueidentifier NULL,\r\n  Icon nvarchar(200) NOT NULL,\r\n  Href nvarchar(500) NOT NULL,\r\n  Ativo bit NOT NULL DEFAULT (1),\r\n  Nivel int NOT NULL DEFAULT (0),\r\n  HasChild bit NOT NULL DEFAULT (0),\r\n  CONSTRAINT PK_Recurso_RecursoId PRIMARY KEY CLUSTERED (RecursoId)\r\n)\r\nON [PRIMARY]",
                      "Encarregado":  "CREATE TABLE dbo.Encarregado (\r\n  EncarregadoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome nvarchar(100) NOT NULL,\r\n  Ponto nvarchar(20) NOT NULL,\r\n  DataNascimento datetime2 NOT NULL,\r\n  CPF nvarchar(20) NOT NULL,\r\n  Celular01 nvarchar(50) NOT NULL,\r\n  Celular02 nvarchar(50) NULL,\r\n  DataIngresso datetime2 NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NOT NULL DEFAULT (1),\r\n  DataAlteracao datetime2 NULL,\r\n  UsuarioIdAlteracao nvarchar(450) NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_Encarregado PRIMARY KEY CLUSTERED (EncarregadoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EstatisticaMotoristasMensal":  "CREATE TABLE dbo.EstatisticaMotoristasMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  MotoristaId uniqueidentifier NOT NULL,\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TotalViagens int NULL DEFAULT (0),\r\n  KmTotal decimal(18, 2) NULL DEFAULT (0),\r\n  MinutosTotais int NULL DEFAULT (0),\r\n  TotalMultas int NULL DEFAULT (0),\r\n  ValorTotalMultas decimal(18, 2) NULL DEFAULT (0),\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  LitrosTotais decimal(18, 2) NULL DEFAULT (0),\r\n  ValorTotalAbastecimentos decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatMotMensal UNIQUE (MotoristaId, Ano, Mes)\r\n)\r\nON [PRIMARY]",
                      "ViagensEconomildo":  "CREATE TABLE dbo.ViagensEconomildo (\r\n  VIagemEconomildoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Data date NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  MOB varchar(50) NULL,\r\n  Responsavel varchar(50) NULL,\r\n  IdaVolta varchar(5) NULL,\r\n  Trajeto varchar(500) NULL,\r\n  HoraInicio varchar(5) NULL,\r\n  HoraFim varchar(5) NULL,\r\n  Duracao int NULL,\r\n  QtdPassageiros int NULL,\r\n  CONSTRAINT PK_table1_VIagemEconomildoId PRIMARY KEY CLUSTERED (VIagemEconomildoId)\r\n)\r\nON [PRIMARY]",
                      "Operador":  "CREATE TABLE dbo.Operador (\r\n  OperadorId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(100) NULL CONSTRAINT DF_Operador_Nome2 DEFAULT (\u0027\u0027),\r\n  Ponto varchar(50) NULL CONSTRAINT DF_Operador_Ponto2 DEFAULT (\u0027\u0027),\r\n  DataNascimento date NULL,\r\n  CPF varchar(50) NULL CONSTRAINT DF_Operador_CPF2 DEFAULT (\u0027\u0027),\r\n  Celular01 varchar(50) NULL CONSTRAINT DF_Operador_Celular012 DEFAULT (\u0027\u0027),\r\n  Celular02 varchar(50) NULL CONSTRAINT DF_Operador_Celular022 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  Foto varbinary(max) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  UsuarioIdAlteracao nvarchar(50) NULL,\r\n  DataAlteracao datetime NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_Operadores_OperadorId PRIMARY KEY CLUSTERED (OperadorId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Lavagem":  "CREATE TABLE dbo.Lavagem (\r\n  LavagemId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  HorarioLavagem datetime NULL,\r\n  Data datetime NULL,\r\n  CONSTRAINT PK_Lavagem_LavagemId PRIMARY KEY CLUSTERED (LavagemId)\r\n)\r\nON [PRIMARY]",
                      "CorridasTaxiLeg":  "CREATE TABLE dbo.CorridasTaxiLeg (\r\n  CorridaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  QRU int NULL,\r\n  Origem varchar(200) NULL,\r\n  Setor varchar(200) NULL,\r\n  DescSetor varchar(300) NULL,\r\n  Unidade varchar(200) NULL,\r\n  DescUnidade varchar(200) NULL,\r\n  QtdPassageiros int NULL,\r\n  MotivoUso varchar(200) NULL,\r\n  DataAgenda date NULL,\r\n  HoraAgenda varchar(5) NULL,\r\n  HoraAceite varchar(5) NULL,\r\n  HoraLocal varchar(5) NULL,\r\n  HoraInicio varchar(5) NULL,\r\n  HoraFinal varchar(5) NULL,\r\n  DataFinal date NULL,\r\n  KmReal float NULL,\r\n  Valor float NULL,\r\n  QtdEstrelas int NULL,\r\n  Avaliacao varchar(50) NULL,\r\n  Duracao int NULL,\r\n  Espera int NULL,\r\n  OrigemCorrida varchar(150) NULL,\r\n  DestinoCorrida varchar(150) NULL,\r\n  Glosa bit NULL,\r\n  ValorGlosa float NULL,\r\n  CONSTRAINT PK_CorridasTaxiLeg_CorridaId PRIMARY KEY CLUSTERED (CorridaId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoRankingKm":  "CREATE TABLE dbo.EstatisticaVeiculoRankingKm (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  Placa nvarchar(20) NULL,\r\n  Modelo nvarchar(100) NULL,\r\n  KmRodado decimal(18, 2) NOT NULL DEFAULT (0),\r\n  TotalViagens int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicRankKm UNIQUE (Ano, VeiculoId)\r\n)\r\nON [PRIMARY]",
                      "ItemVeiculoContrato":  "CREATE TABLE dbo.ItemVeiculoContrato (\r\n  ItemVeiculoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumItem int NULL,\r\n  Descricao varchar(100) NULL,\r\n  Quantidade int NULL,\r\n  ValorUnitario float NULL,\r\n  RepactuacaoContratoId uniqueidentifier NULL,\r\n  CONSTRAINT PK_ItemVeiculoContrato_ItemVeiculoId PRIMARY KEY CLUSTERED (ItemVeiculoId)\r\n)\r\nON [PRIMARY]",
                      "MotoristaContrato":  "CREATE TABLE dbo.MotoristaContrato (\r\n  MotoristaId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_MotoristaContrato PRIMARY KEY CLUSTERED (MotoristaId, ContratoId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoCombustivel":  "CREATE TABLE dbo.EstatisticaVeiculoCombustivel (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Combustivel nvarchar(100) NOT NULL,\r\n  TotalVeiculos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicCombustivel UNIQUE (Combustivel)\r\n)\r\nON [PRIMARY]",
                      "AspNetUsers":  "CREATE TABLE dbo.AspNetUsers (\r\n  Id nvarchar(450) NOT NULL,\r\n  UserName nvarchar(256) NULL,\r\n  NormalizedUserName nvarchar(256) NULL,\r\n  Email nvarchar(256) NULL,\r\n  NormalizedEmail nvarchar(256) NULL,\r\n  EmailConfirmed bit NULL,\r\n  PasswordHash nvarchar(max) NULL,\r\n  SecurityStamp nvarchar(max) NULL,\r\n  ConcurrencyStamp nvarchar(max) NULL,\r\n  PhoneNumber nvarchar(max) NULL,\r\n  PhoneNumberConfirmed bit NULL,\r\n  TwoFactorEnabled bit NULL,\r\n  LockoutEnd datetimeoffset NULL,\r\n  LockoutEnabled bit NULL,\r\n  AccessFailedCount int NULL,\r\n  Discriminator nvarchar(max) NULL,\r\n  NomeCompleto nvarchar(max) NULL,\r\n  Ponto nvarchar(max) NULL,\r\n  PrecisaMudarSenha bit NULL,\r\n  Ramal int NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  Foto varbinary(max) NULL,\r\n  Criacao datetime NULL,\r\n  UltimoLogin datetime NULL,\r\n  DetentorCargaPatrimonial bit NULL,\r\n  UsuarioIdAlteracao varchar(150) NULL,\r\n  Vistoriador bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_AspNetUsers_Id PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Fornecedor":  "CREATE TABLE dbo.Fornecedor (\r\n  FornecedorId uniqueidentifier NULL DEFAULT (newid()),\r\n  DescricaoFornecedor varchar(100) NULL,\r\n  CNPJ varchar(50) NULL,\r\n  Endereco varchar(150) NULL,\r\n  Contato01 varchar(100) NULL,\r\n  Telefone01 varchar(50) NULL,\r\n  Contato02 varchar(100) NULL,\r\n  Telefone02 varchar(50) NULL,\r\n  Status bit NULL\r\n)\r\nON [PRIMARY]",
                      "Empenho":  "CREATE TABLE dbo.Empenho (\r\n  EmpenhoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NotaEmpenho varchar(12) NOT NULL,\r\n  DataEmissao date NOT NULL,\r\n  AnoVigencia int NOT NULL,\r\n  SaldoInicial float NOT NULL,\r\n  SaldoFinal float NOT NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  VigenciaInicial date NULL,\r\n  VigenciaFinal date NULL,\r\n  CONSTRAINT PK_Empenho_EmpenhoId PRIMARY KEY CLUSTERED (EmpenhoId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaVeiculoRankingLitros":  "CREATE TABLE dbo.EstatisticaVeiculoRankingLitros (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  Placa nvarchar(20) NULL,\r\n  Modelo nvarchar(100) NULL,\r\n  LitrosAbastecidos decimal(18, 2) NOT NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NOT NULL DEFAULT (0),\r\n  TotalAbastecimentos int NOT NULL DEFAULT (0),\r\n  DataAtualizacao datetime NOT NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatVeicRankLitros UNIQUE (Ano, VeiculoId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaAbastecimentoVeiculoMensal":  "CREATE TABLE dbo.EstatisticaAbastecimentoVeiculoMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatAbastVeiculoMes UNIQUE (Ano, Mes, VeiculoId)\r\n)\r\nON [PRIMARY]",
                      "Veiculo":  "CREATE TABLE dbo.Veiculo (\r\n  VeiculoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Placa varchar(10) NOT NULL,\r\n  Quilometragem int NULL CONSTRAINT DF_Veiculo_Quilometragem2 DEFAULT (0),\r\n  Renavam varchar(20) NULL CONSTRAINT DF_Veiculo_Renavam2 DEFAULT (\u0027\u0027),\r\n  PlacaVinculada varchar(50) NULL CONSTRAINT DF_Veiculo_PlacaVinculada2 DEFAULT (\u0027\u0027),\r\n  AnoFabricacao int NULL CONSTRAINT DF_Veiculo_AnoFabricacao2 DEFAULT (0),\r\n  AnoModelo int NULL CONSTRAINT DF_Veiculo_AnoModelo2 DEFAULT (0),\r\n  Reserva bit NULL DEFAULT (0),\r\n  VeiculoProprio bit NULL DEFAULT (0),\r\n  Status bit NULL DEFAULT (1),\r\n  CRLV varbinary(max) NULL,\r\n  DataAlteracao datetime NOT NULL DEFAULT (getdate()),\r\n  UsuarioIdAlteracao nvarchar(100) NULL,\r\n  UnidadeId uniqueidentifier NULL,\r\n  MarcaId uniqueidentifier NOT NULL,\r\n  ModeloId uniqueidentifier NOT NULL,\r\n  CombustivelId uniqueidentifier NULL,\r\n  ContratoId uniqueidentifier NULL,\r\n  AtaId uniqueidentifier NULL,\r\n  PlacaBronzeId uniqueidentifier NULL,\r\n  ItemVeiculoId uniqueidentifier NULL,\r\n  Patrimonio varchar(10) NULL CONSTRAINT DF_Veiculo_Patrimonio2 DEFAULT (\u0027\u0027),\r\n  ItemVeiculoAtaId uniqueidentifier NULL,\r\n  Categoria varchar(50) NULL CONSTRAINT DF_Veiculo_Categoria2 DEFAULT (\u0027\u0027),\r\n  DataIngresso date NULL,\r\n  Economildo bit NULL CONSTRAINT DF_Veiculo_Economildo2 DEFAULT (0),\r\n  ValorMensal float NULL DEFAULT (0),\r\n  Consumo float NULL DEFAULT (0),\r\n  CONSTRAINT PK_Veiculos_id_Veiculo PRIMARY KEY CLUSTERED (VeiculoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "WhatsAppContatos":  "CREATE TABLE dbo.WhatsAppContatos (\r\n  Id int IDENTITY,\r\n  Numero nvarchar(50) NOT NULL,\r\n  Nome nvarchar(100) NULL,\r\n  NomeWhatsApp nvarchar(100) NULL,\r\n  FotoUrl nvarchar(500) NULL,\r\n  Verificado bit NULL DEFAULT (0),\r\n  Bloqueado bit NULL DEFAULT (0),\r\n  UltimaMensagem datetime NULL,\r\n  DataCadastro datetime NOT NULL DEFAULT (getdate()),\r\n  TotalMensagensEnviadas int NULL DEFAULT (0),\r\n  TotalMensagensRecebidas int NULL DEFAULT (0),\r\n  ObservacoesJson nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  UNIQUE (Numero)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "MovimentacaoPatrimonio":  "CREATE TABLE dbo.MovimentacaoPatrimonio (\r\n  MovimentacaoPatrimonioId uniqueidentifier NOT NULL,\r\n  DataMovimentacao datetime NOT NULL,\r\n  ResponsavelMovimentacao nvarchar(450) NOT NULL,\r\n  SecaoOrigemId uniqueidentifier NOT NULL,\r\n  SecaoDestinoId uniqueidentifier NOT NULL,\r\n  SetorOrigemId uniqueidentifier NOT NULL,\r\n  SetorDestinoId uniqueidentifier NOT NULL,\r\n  PatrimonioId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_MovimentacaoPatrimonio_MovimentacaoPatrimonioId PRIMARY KEY CLUSTERED (MovimentacaoPatrimonioId)\r\n)\r\nON [PRIMARY]",
                      "SchemaChangeLog":  "CREATE TABLE dbo.SchemaChangeLog (\r\n  Id bigint IDENTITY,\r\n  RunId uniqueidentifier NULL,\r\n  LoggedAt datetime2(3) NOT NULL DEFAULT (sysdatetime()),\r\n  LoginName sysname NULL,\r\n  UserName sysname NULL,\r\n  EventType nvarchar(128) NULL,\r\n  SchemaName sysname NULL,\r\n  ObjectName sysname NULL,\r\n  ObjectType nvarchar(128) NULL,\r\n  TSqlCommand nvarchar(max) NULL,\r\n  PRIMARY KEY CLUSTERED (Id)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "VeiculoPadraoViagem":  "CREATE TABLE dbo.VeiculoPadraoViagem (\r\n  VeiculoPadraoViagemId int IDENTITY,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  AvgDuracaoMinutos decimal(18, 2) NULL,\r\n  DesvioPadraoDuracaoMinutos decimal(18, 2) NULL,\r\n  MinDuracaoMinutos int NULL,\r\n  MaxDuracaoNormalMinutos int NULL,\r\n  MedianaDuracaoMinutos int NULL,\r\n  AvgKmPorViagem decimal(18, 2) NULL,\r\n  DesvioPadraoKm decimal(18, 2) NULL,\r\n  MaxKmNormalPorViagem decimal(18, 2) NULL,\r\n  MedianaKm decimal(18, 2) NULL,\r\n  Q1Km decimal(18, 2) NULL,\r\n  Q3Km decimal(18, 2) NULL,\r\n  IQRKm decimal(18, 2) NULL,\r\n  LimiteInferiorKm decimal(18, 2) NULL,\r\n  LimiteSuperiorKm decimal(18, 2) NULL,\r\n  MedianaMinutos decimal(18, 2) NULL,\r\n  AvgKmPorDia decimal(18, 2) NULL,\r\n  MediaKmEntreAbastecimentos decimal(18, 2) NULL,\r\n  MediaDiasEntreAbastecimentos decimal(18, 2) NULL,\r\n  TotalAbastecimentosAnalisados int NULL DEFAULT (0),\r\n  TotalViagensAnalisadas int NULL DEFAULT (0),\r\n  TotalViagensRealizadas int NULL DEFAULT (0),\r\n  Percentil95Duracao int NULL,\r\n  Percentil99Duracao int NULL,\r\n  TipoUso varchar(50) NULL,\r\n  DataCriacao datetime2 NULL DEFAULT (getdate()),\r\n  DataAtualizacao datetime2 NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (VeiculoPadraoViagemId)\r\n)\r\nON [PRIMARY]",
                      "EstatisticaAbastecimentoVeiculo":  "CREATE TABLE dbo.EstatisticaAbastecimentoVeiculo (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  Placa nvarchar(20) NULL,\r\n  TipoVeiculo nvarchar(100) NULL,\r\n  Categoria nvarchar(100) NULL,\r\n  TotalAbastecimentos int NULL DEFAULT (0),\r\n  ValorTotal decimal(18, 2) NULL DEFAULT (0),\r\n  LitrosTotal decimal(18, 2) NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_EstatAbastVeiculo UNIQUE (Ano, VeiculoId)\r\n)\r\nON [PRIMARY]",
                      "Evento":  "CREATE TABLE dbo.Evento (\r\n  EventoId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Nome varchar(200) NULL,\r\n  Descricao varchar(max) NULL,\r\n  QtdParticipantes int NOT NULL,\r\n  DataInicial datetime NULL,\r\n  DataFinal datetime NULL,\r\n  SetorSolicitanteId uniqueidentifier NOT NULL,\r\n  RequisitanteId uniqueidentifier NOT NULL,\r\n  Status varchar(1) NULL,\r\n  CONSTRAINT PK_Evento_EventoId PRIMARY KEY CLUSTERED (EventoId)\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "EmpenhoMulta":  "CREATE TABLE dbo.EmpenhoMulta (\r\n  EmpenhoMultaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NotaEmpenho varchar(50) NOT NULL,\r\n  AnoVigencia int NULL,\r\n  SaldoInicial float NULL,\r\n  SaldoAtual float NULL,\r\n  OrgaoAutuanteId uniqueidentifier NULL,\r\n  Status bit NULL,\r\n  CONSTRAINT PK_Empenhos_multas PRIMARY KEY CLUSTERED (EmpenhoMultaId)\r\n)\r\nON [PRIMARY]",
                      "SetorPatrimonial":  "CREATE TABLE dbo.SetorPatrimonial (\r\n  SetorId uniqueidentifier NOT NULL,\r\n  NomeSetor varchar(50) NOT NULL,\r\n  DetentorId nvarchar(450) NOT NULL,\r\n  Status bit NOT NULL DEFAULT (1),\r\n  SetorBaixa bit NULL,\r\n  CONSTRAINT PK_Setor_SetorId PRIMARY KEY CLUSTERED (SetorId)\r\n)\r\nON [PRIMARY]",
                      "ItemVeiculoAta":  "CREATE TABLE dbo.ItemVeiculoAta (\r\n  ItemVeiculoAtaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  NumItem int NULL,\r\n  Descricao varchar(100) NULL,\r\n  Quantidade int NULL,\r\n  ValorUnitario float NULL,\r\n  RepactuacaoAtaId uniqueidentifier NULL,\r\n  CONSTRAINT PK_ItemVeiculoAta_ItemVeiculoId PRIMARY KEY CLUSTERED (ItemVeiculoAtaId)\r\n)\r\nON [PRIMARY]",
                      "MarcaVeiculo":  "CREATE TABLE dbo.MarcaVeiculo (\r\n  MarcaId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DescricaoMarca varchar(50) NOT NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_MarcaVeiculo_MarcaId PRIMARY KEY CLUSTERED (MarcaId)\r\n)\r\nON [PRIMARY]",
                      "VeiculoContrato":  "CREATE TABLE dbo.VeiculoContrato (\r\n  VeiculoId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_VeiculoContrato PRIMARY KEY CLUSTERED (VeiculoId, ContratoId)\r\n)\r\nON [PRIMARY]",
                      "PlacaBronze":  "CREATE TABLE dbo.PlacaBronze (\r\n  PlacaBronzeId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  DescricaoPlaca varchar(100) NULL,\r\n  Status bit NULL DEFAULT (1),\r\n  CONSTRAINT PK_PlacaBronze_PlacaId PRIMARY KEY CLUSTERED (PlacaBronzeId)\r\n)\r\nON [PRIMARY]",
                      "OperadorContrato":  "CREATE TABLE dbo.OperadorContrato (\r\n  OperadorId uniqueidentifier NOT NULL,\r\n  ContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_OperadorContrato PRIMARY KEY CLUSTERED (OperadorId, ContratoId)\r\n)\r\nON [PRIMARY]",
                      "AlertasUsuario":  "CREATE TABLE dbo.AlertasUsuario (\r\n  AlertasUsuarioId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  AlertasFrotiXId uniqueidentifier NOT NULL,\r\n  UsuarioId nvarchar(450) NOT NULL,\r\n  Lido bit NOT NULL DEFAULT (0),\r\n  DataLeitura datetime2 NULL,\r\n  Notificado bit NOT NULL DEFAULT (0),\r\n  Apagado bit NULL CONSTRAINT DF_AlertasUsuario_Apagado DEFAULT (0),\r\n  DataApagado datetime NULL,\r\n  DataNotificacao datetime NULL,\r\n  CONSTRAINT PK_AlertasUsuario PRIMARY KEY CLUSTERED (AlertasUsuarioId),\r\n  CONSTRAINT UK_AlertasUsuario_Alerta_Usuario UNIQUE (AlertasFrotiXId, UsuarioId)\r\n)\r\nON [PRIMARY]",
                      "AspNetUserClaims":  "CREATE TABLE dbo.AspNetUserClaims (\r\n  Id int NOT NULL,\r\n  UserId nvarchar(450) NOT NULL,\r\n  ClaimType nvarchar(max) NULL,\r\n  ClaimValue nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "ControleAcesso":  "CREATE TABLE dbo.ControleAcesso (\r\n  UsuarioId nvarchar(450) NOT NULL,\r\n  RecursoId uniqueidentifier NOT NULL,\r\n  Acesso bit NOT NULL DEFAULT (1),\r\n  CONSTRAINT PK_ControleAcesso PRIMARY KEY CLUSTERED (UsuarioId, RecursoId)\r\n)\r\nON [PRIMARY]",
                      "RankingMotoristasMensal":  "CREATE TABLE dbo.RankingMotoristasMensal (\r\n  Id uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Ano int NOT NULL,\r\n  Mes int NOT NULL,\r\n  TipoRanking varchar(50) NOT NULL,\r\n  Posicao int NOT NULL,\r\n  MotoristaId uniqueidentifier NOT NULL,\r\n  NomeMotorista nvarchar(200) NULL,\r\n  TipoMotorista nvarchar(50) NULL,\r\n  ValorPrincipal decimal(18, 2) NULL DEFAULT (0),\r\n  ValorSecundario decimal(18, 2) NULL DEFAULT (0),\r\n  ValorTerciario decimal(18, 2) NULL DEFAULT (0),\r\n  ValorQuaternario int NULL DEFAULT (0),\r\n  DataAtualizacao datetime NULL DEFAULT (getdate()),\r\n  PRIMARY KEY CLUSTERED (Id),\r\n  CONSTRAINT UQ_RankingMot UNIQUE (Ano, Mes, TipoRanking, Posicao)\r\n)\r\nON [PRIMARY]",
                      "CondutorApoio":  "CREATE TABLE dbo.CondutorApoio (\r\n  CondutorId uniqueidentifier NOT NULL DEFAULT (newid()),\r\n  Descricao varchar(50) NULL,\r\n  Status bit NULL,\r\n  CONSTRAINT PK_CondutorApoio_CondutorId PRIMARY KEY CLUSTERED (CondutorId)\r\n)\r\nON [PRIMARY]",
                      "AspNetRoles":  "CREATE TABLE dbo.AspNetRoles (\r\n  Id nvarchar(450) NOT NULL,\r\n  Name nvarchar(256) NULL,\r\n  NormalizedName nvarchar(256) NULL,\r\n  ConcurrencyStamp nvarchar(max) NULL\r\n)\r\nON [PRIMARY]\r\nTEXTIMAGE_ON [PRIMARY]",
                      "Contatos":  "CREATE TABLE dbo.Contatos (\r\n  ContatoId uniqueidentifier NOT NULL,\r\n  Nome nvarchar(200) NOT NULL,\r\n  Celular nvarchar(20) NULL,\r\n  Telefone nvarchar(20) NULL,\r\n  Email nvarchar(200) NULL,\r\n  Cargo nvarchar(100) NULL,\r\n  Departamento nvarchar(100) NULL,\r\n  Ativo bit NOT NULL DEFAULT (1),\r\n  DataCadastro datetime NOT NULL DEFAULT (getdate()),\r\n  DataAtualizacao datetime NULL,\r\n  Observacoes nvarchar(500) NULL,\r\n  RecebeWhatsApp bit NOT NULL DEFAULT (1),\r\n  OptOutWhatsApp bit NOT NULL DEFAULT (0),\r\n  PRIMARY KEY CLUSTERED (ContatoId)\r\n)\r\nON [PRIMARY]",
                      "AbastecimentoPendente":  "CREATE TABLE dbo.AbastecimentoPendente (\r\n  AbastecimentoPendenteId uniqueidentifier NOT NULL,\r\n  AutorizacaoQCard int NULL,\r\n  Placa nvarchar(20) NULL,\r\n  CodMotorista int NULL,\r\n  NomeMotorista nvarchar(200) NULL,\r\n  Produto nvarchar(100) NULL,\r\n  DataHora datetime2 NULL,\r\n  KmAnterior int NULL,\r\n  Km int NULL,\r\n  KmRodado int NULL,\r\n  Litros float NULL,\r\n  ValorUnitario float NULL,\r\n  VeiculoId uniqueidentifier NULL,\r\n  MotoristaId uniqueidentifier NULL,\r\n  CombustivelId uniqueidentifier NULL,\r\n  DescricaoPendencia nvarchar(2000) NULL,\r\n  TipoPendencia nvarchar(50) NULL,\r\n  TemSugestao bit NOT NULL DEFAULT (0),\r\n  CampoCorrecao nvarchar(20) NULL,\r\n  ValorAtualErrado int NULL,\r\n  ValorSugerido int NULL,\r\n  JustificativaSugestao nvarchar(500) NULL,\r\n  MediaConsumoVeiculo float NULL,\r\n  DataImportacao datetime2 NOT NULL,\r\n  NumeroLinhaOriginal int NOT NULL DEFAULT (0),\r\n  ArquivoOrigem nvarchar(255) NULL,\r\n  Status int NOT NULL DEFAULT (0),\r\n  CONSTRAINT PK_AbastecimentoPendente PRIMARY KEY CLUSTERED (AbastecimentoPendenteId)\r\n)\r\nON [PRIMARY]",
                      "RepactuacaoServicos":  "CREATE TABLE dbo.RepactuacaoServicos (\r\n  RepactuacaoServicoId uniqueidentifier NOT NULL,\r\n  DataRepactuacao date NULL,\r\n  Valor float NULL,\r\n  RepactuacaoContratoId uniqueidentifier NOT NULL,\r\n  CONSTRAINT PK_RepactuacaoServicos_RepactuacaoTerceirizacaoId PRIMARY KEY CLUSTERED (RepactuacaoServicoId)\r\n)\r\nON [PRIMARY]"
                  },
    "ModificadasTables":  [
                              "Viagem",
                              "Manutencao",
                              "Recurso",
                              "Lavagem",
                              "Fornecedor"
                          ],
    "ProdProcedures":  {
                           "sp_AtualizarTodasEstatisticasViagem":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarTodasEstatisticasViagem\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    IF NOT EXISTS (SELECT * FROM sys.tables WHERE name = \u0027ViagemEstatistica\u0027)\r\n    BEGIN\r\n        PRINT \u0027Tabela ViagemEstatistica nao existe - ignorando\u0027\r\n        RETURN\r\n    END\r\n    \r\n    DECLARE @DataAtual DATE\r\n    DECLARE @DataMin DATE\r\n    DECLARE @DataMax DATE\r\n    DECLARE @Hoje DATE = CAST(GETDATE() AS DATE)\r\n    DECLARE @Total INT = 0\r\n    \r\n    SELECT @DataMin = MIN(CAST(DataInicial AS DATE)), @DataMax = MAX(CAST(DataInicial AS DATE))\r\n    FROM Viagem\r\n    WHERE DataInicial IS NOT NULL AND Status = \u0027Realizada\u0027\r\n    \r\n    -- Limitar até a data atual (não calcular para datas futuras)\r\n    IF @DataMax \u003e @Hoje\r\n        SET @DataMax = @Hoje\r\n    \r\n    SET @DataAtual = @DataMin\r\n    \r\n    PRINT \u0027Atualizando estatisticas de \u0027 + CONVERT(VARCHAR, @DataMin, 103) + \u0027 a \u0027 + CONVERT(VARCHAR, @DataMax, 103) + \u0027...\u0027\r\n    \r\n    WHILE @DataAtual \u003c= @DataMax\r\n    BEGIN\r\n        EXEC sp_AtualizarEstatisticasViagem @DataAtual\r\n        SET @DataAtual = DATEADD(DAY, 1, @DataAtual)\r\n        SET @Total = @Total + 1\r\n        \r\n        IF @Total % 100 = 0\r\n            PRINT \u0027  Processados \u0027 + CAST(@Total AS VARCHAR) + \u0027 dias...\u0027\r\n    END\r\n    \r\n    PRINT \u0027Total: \u0027 + CAST(@Total AS VARCHAR) + \u0027 dias processados com sucesso!\u0027\r\n    \r\n    RETURN @Total\r\nEND",
                           "sp_tr_Delete":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_Delete \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE \r\n\tFROM [dbo].[tr_String] \r\n\tWHERE [Id] = @Key \r\n\t\r\n\tDELETE \r\n\tFROM [dbo].[tr_Object] \r\n\tWHERE [Id] = @Key\r\nEND",
                           "sp_tr_ExistsInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_ExistsInSet \r\n\t@Key varchar(255) = 0, \r\n\t@Value varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tIF EXISTS (SELECT 1 FROM [dbo].[tr_Set] WHERE [Id] = @Key AND [Member] = @Value)\r\n\t\tRETURN 1\r\n\tELSE\r\n\t\tRETURN 0\r\nEND",
                           "sp_CalcularConsumoVeiculos":  "CREATE OR ALTER PROCEDURE dbo.sp_CalcularConsumoVeiculos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    \r\n    DECLARE @VeiculosAtualizados INT = 0;\r\n    DECLARE @TemTriggers BIT = 0;\r\n\r\n    BEGIN TRY\r\n        -- Verifica se as colunas necessárias existem\r\n        IF NOT EXISTS (\r\n            SELECT 1 FROM sys.columns \r\n            WHERE object_id = OBJECT_ID(\u0027Veiculo\u0027) AND name = \u0027Consumo\u0027\r\n        )\r\n        BEGIN\r\n            RAISERROR(\u0027Coluna Veiculo.Consumo não existe!\u0027, 16, 1);\r\n            RETURN;\r\n        END\r\n\r\n        IF NOT EXISTS (\r\n            SELECT 1 FROM sys.columns \r\n            WHERE object_id = OBJECT_ID(\u0027Abastecimento\u0027) AND name IN (\u0027Litros\u0027, \u0027KmRodado\u0027)\r\n        )\r\n        BEGIN\r\n            RAISERROR(\u0027Colunas Abastecimento.Litros ou KmRodado não existem!\u0027, 16, 1);\r\n            RETURN;\r\n        END\r\n\r\n        BEGIN TRANSACTION;\r\n\r\n        -- Verifica se existem triggers na tabela Veiculo\r\n        IF EXISTS (\r\n            SELECT 1 FROM sys.triggers \r\n            WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027) AND is_disabled = 0\r\n        )\r\n        BEGIN\r\n            SET @TemTriggers = 1;\r\n            PRINT \u0027  [INFO] Desabilitando triggers em Veiculo para evitar recursão...\u0027;\r\n            \r\n            -- Desabilita TODOS os triggers ativos na tabela Veiculo\r\n            DECLARE @TriggerName NVARCHAR(128);\r\n            DECLARE trigger_cursor CURSOR FOR\r\n                SELECT name FROM sys.triggers \r\n                WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027) AND is_disabled = 0;\r\n            \r\n            OPEN trigger_cursor;\r\n            FETCH NEXT FROM trigger_cursor INTO @TriggerName;\r\n            \r\n            WHILE @@FETCH_STATUS = 0\r\n            BEGIN\r\n                EXEC(\u0027ALTER TABLE Veiculo DISABLE TRIGGER \u0027 + @TriggerName);\r\n                PRINT \u0027  [INFO] Trigger desabilitado: \u0027 + @TriggerName;\r\n                FETCH NEXT FROM trigger_cursor INTO @TriggerName;\r\n            END\r\n            \r\n            CLOSE trigger_cursor;\r\n            DEALLOCATE trigger_cursor;\r\n        END\r\n\r\n        -- Atualiza o consumo de cada veículo baseado na média de seus abastecimentos\r\n        PRINT \u0027  [EXEC] Calculando consumo médio por veículo...\u0027;\r\n        \r\n        UPDATE V\r\n        SET V.Consumo = ROUND(Calc.ConsumoMedio, 2)\r\n        FROM Veiculo V\r\n        INNER JOIN (\r\n            SELECT \r\n                VeiculoId,\r\n                AVG(CAST(KmRodado AS FLOAT) / NULLIF(Litros, 0)) AS ConsumoMedio\r\n            FROM Abastecimento\r\n            WHERE Litros \u003e 0 \r\n              AND KmRodado \u003e 0\r\n            GROUP BY VeiculoId\r\n            HAVING AVG(CAST(KmRodado AS FLOAT) / NULLIF(Litros, 0)) \u003e 0\r\n        ) Calc ON V.VeiculoId = Calc.VeiculoId;\r\n\r\n        SET @VeiculosAtualizados = @@ROWCOUNT;\r\n\r\n        -- Reabilita triggers se foram desabilitados\r\n        IF @TemTriggers = 1\r\n        BEGIN\r\n            PRINT \u0027  [INFO] Reabilitando triggers em Veiculo...\u0027;\r\n            \r\n            DECLARE trigger_cursor2 CURSOR FOR\r\n                SELECT name FROM sys.triggers \r\n                WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027);\r\n            \r\n            OPEN trigger_cursor2;\r\n            FETCH NEXT FROM trigger_cursor2 INTO @TriggerName;\r\n            \r\n            WHILE @@FETCH_STATUS = 0\r\n            BEGIN\r\n                EXEC(\u0027ALTER TABLE Veiculo ENABLE TRIGGER \u0027 + @TriggerName);\r\n                PRINT \u0027  [INFO] Trigger reabilitado: \u0027 + @TriggerName;\r\n                FETCH NEXT FROM trigger_cursor2 INTO @TriggerName;\r\n            END\r\n            \r\n            CLOSE trigger_cursor2;\r\n            DEALLOCATE trigger_cursor2;\r\n        END\r\n\r\n        COMMIT TRANSACTION;\r\n\r\n        -- Log de sucesso\r\n        PRINT \u0027  [OK]   Cálculo de consumo concluído com sucesso!\u0027;\r\n        PRINT \u0027  [INFO] Total de veículos atualizados: \u0027 + CAST(@VeiculosAtualizados AS VARCHAR(10));\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT \u003e 0\r\n            ROLLBACK TRANSACTION;\r\n\r\n        -- Tenta reabilitar triggers mesmo em caso de erro\r\n        IF @TemTriggers = 1\r\n        BEGIN\r\n            BEGIN TRY\r\n                PRINT \u0027  [WARN] Tentando reabilitar triggers após erro...\u0027;\r\n                \r\n                DECLARE trigger_cursor3 CURSOR FOR\r\n                    SELECT name FROM sys.triggers \r\n                    WHERE parent_id = OBJECT_ID(\u0027Veiculo\u0027);\r\n                \r\n                OPEN trigger_cursor3;\r\n                FETCH NEXT FROM trigger_cursor3 INTO @TriggerName;\r\n                \r\n                WHILE @@FETCH_STATUS = 0\r\n                BEGIN\r\n                    EXEC(\u0027ALTER TABLE Veiculo ENABLE TRIGGER \u0027 + @TriggerName);\r\n                    FETCH NEXT FROM trigger_cursor3 INTO @TriggerName;\r\n                END\r\n                \r\n                CLOSE trigger_cursor3;\r\n                DEALLOCATE trigger_cursor3;\r\n            END TRY\r\n            BEGIN CATCH\r\n                PRINT \u0027  [ERROR] Falha ao reabilitar triggers!\u0027;\r\n            END CATCH\r\n        END\r\n\r\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE();\r\n        DECLARE @ErrorSeverity INT = ERROR_SEVERITY();\r\n        DECLARE @ErrorState INT = ERROR_STATE();\r\n\r\n        RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState);\r\n    END CATCH\r\nEND",
                           "usp_PreencheNulos_Motorista":  "CREATE OR ALTER PROCEDURE dbo.usp_PreencheNulos_Motorista\r\n    @Keys dbo.MotoristaKeyList READONLY\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    UPDATE M\r\n       SET\r\n         -- strings\r\n         CPF               = ISNULL(M.CPF,               \u0027\u0027),\r\n         CNH               = ISNULL(M.CNH,               \u0027\u0027),\r\n         CategoriaCNH      = ISNULL(M.CategoriaCNH,      \u0027\u0027),\r\n         Celular01         = ISNULL(M.Celular01,          \u0027\u0027),\r\n         Celular02         = ISNULL(M.Celular02,          \u0027\u0027),\r\n         OrigemIndicacao   = ISNULL(M.OrigemIndicacao,    \u0027\u0027),\r\n         UsuarioIdAlteracao= ISNULL(M.UsuarioIdAlteracao, \u0027\u0027),\r\n         TipoCondutor      = ISNULL(M.TipoCondutor,      \u0027\u0027),\r\n         EfetivoFerista    = ISNULL(M.EfetivoFerista,     \u0027\u0027),\r\n\r\n         -- datas\r\n         DataNascimento    = ISNULL(M.DataNascimento,     CONVERT(date,\u002719000101\u0027)),\r\n         DataVencimentoCNH = ISNULL(M.DataVencimentoCNH,  CONVERT(date,\u002719000101\u0027)),\r\n         DataIngresso      = ISNULL(M.DataIngresso,       CONVERT(date,\u002719000101\u0027)),\r\n         DataAlteracao     = ISNULL(M.DataAlteracao,      GETDATE()),\r\n\r\n         -- numéricos/bit\r\n         Status            = ISNULL(M.Status, 0),\r\n         CodMotoristaQCard = ISNULL(M.CodMotoristaQCard, 0)\r\n\r\n         -- GUIDs de FK: NÃO preencher com 00000000-..., MANTER NULL\r\n         -- UnidadeId, ContratoId, CondutorId permanecem como estão\r\n    FROM dbo.Motorista AS M\r\n    INNER JOIN @Keys      AS K ON K.MotoristaId = M.MotoristaId\r\n    WHERE\r\n         M.CPF                IS NULL OR\r\n         M.CNH                IS NULL OR\r\n         M.CategoriaCNH       IS NULL OR\r\n         M.Celular01          IS NULL OR\r\n         M.Celular02          IS NULL OR\r\n         M.OrigemIndicacao    IS NULL OR\r\n         M.UsuarioIdAlteracao IS NULL OR\r\n         M.TipoCondutor       IS NULL OR\r\n         M.EfetivoFerista     IS NULL OR\r\n\r\n         M.DataNascimento     IS NULL OR\r\n         M.DataVencimentoCNH  IS NULL OR\r\n         M.DataIngresso       IS NULL OR\r\n         M.DataAlteracao      IS NULL OR\r\n\r\n         M.Status             IS NULL OR\r\n         M.CodMotoristaQCard  IS NULL;\r\nEND;",
                           "sp_Requisitante_TratarNulos":  "CREATE OR ALTER PROCEDURE dbo.sp_Requisitante_TratarNulos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n\r\n    UPDATE dbo.Requisitante\r\n    SET \r\n        Nome = ISNULL(Nome, \u0027\u0027),\r\n        Ponto = ISNULL(Ponto, \u0027\u0027),\r\n        Ramal = ISNULL(Ramal, 0),\r\n        Email = ISNULL(Email, \u0027\u0027),\r\n        Status = ISNULL(Status, 1),\r\n        UsuarioIdAlteracao = ISNULL(UsuarioIdAlteracao, \u0027\u0027),\r\n        DataAlteracao = ISNULL(DataAlteracao, GETDATE())\r\n    WHERE \r\n        Nome IS NULL\r\n        OR Ponto IS NULL\r\n        OR Ramal IS NULL\r\n        OR Email IS NULL\r\n        OR Status IS NULL\r\n        OR UsuarioIdAlteracao IS NULL\r\n        OR DataAlteracao IS NULL;\r\nEND",
                           "sp_NormalizarViagens":  "CREATE OR ALTER PROCEDURE dbo.sp_NormalizarViagens\r\n    @DiasParaProcessar INT = 365,\r\n    @ForcarReprocessamento BIT = 0\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @KM_MAXIMO_VIAGEM INT = 2000\r\n    DECLARE @TotalNormalizadas INT = 0\r\n    DECLARE @DataLimite DATE = DATEADD(DAY, -@DiasParaProcessar, GETDATE())\r\n    \r\n    PRINT \u0027  Normalizando viagens dos últimos \u0027 + CAST(@DiasParaProcessar AS VARCHAR) + \u0027 dias...\u0027\r\n    \r\n    -- PASSO 1: Copiar datas válidas\r\n    PRINT \u0027  [PASSO 1] Copiando datas válidas...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET \r\n        DataInicialNormalizada = DataInicial,\r\n        DataFinalNormalizada = DataFinal,\r\n        HoraInicioNormalizada = HoraInicio,\r\n        HoraFimNormalizada = HoraFim,\r\n        FoiNormalizada = 0,\r\n        TipoNormalizacao = NULL,\r\n        DataNormalizacao = GETDATE()\r\n    WHERE DataInicial IS NOT NULL\r\n      AND DataInicial \u003e= @DataLimite\r\n      AND (@ForcarReprocessamento = 1 OR DataInicialNormalizada IS NULL)\r\n    \r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 datas copiadas\u0027\r\n    \r\n    -- PASSO 2: Corrigir datas invertidas\r\n    PRINT \u0027  [PASSO 2] Corrigindo datas invertidas...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET \r\n        DataInicialNormalizada = DataFinalNormalizada,\r\n        DataFinalNormalizada = DataInicialNormalizada,\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = \u0027DATAS_INVERTIDAS\u0027\r\n    WHERE DataInicialNormalizada \u003e DataFinalNormalizada\r\n      AND DataFinalNormalizada IS NOT NULL\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 datas invertidas corrigidas\u0027\r\n    \r\n    -- PASSO 3: Copiar KM válidos\r\n    PRINT \u0027  [PASSO 3] Copiando KM válidos...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET \r\n        KmInicialNormalizado = KmInicial,\r\n        KmFinalNormalizado = KmFinal,\r\n        KmRodadoNormalizado = KmFinal - KmInicial\r\n    WHERE KmInicial IS NOT NULL\r\n      AND KmFinal IS NOT NULL\r\n      AND KmFinal \u003e= KmInicial\r\n      AND (KmFinal - KmInicial) \u003c= @KM_MAXIMO_VIAGEM\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 KM válidos copiados\u0027\r\n    \r\n    -- PASSO 4: Tratar KM outliers usando padrão do veículo\r\n    PRINT \u0027  [PASSO 4] Corrigindo KM outliers...\u0027\r\n    \r\n    UPDATE v\r\n    SET \r\n        KmFinalNormalizado = v.KmInicial + CAST(COALESCE(p.MedianaKm, p.AvgKmPorViagem, 50) AS INT),\r\n        KmRodadoNormalizado = CAST(COALESCE(p.MedianaKm, p.AvgKmPorViagem, 50) AS INT),\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = COALESCE(v.TipoNormalizacao + \u0027,\u0027, \u0027\u0027) + \u0027KM_OUTLIER\u0027\r\n    FROM Viagem v\r\n    INNER JOIN VeiculoPadraoViagem p ON v.VeiculoId = p.VeiculoId\r\n    WHERE v.KmInicial IS NOT NULL\r\n      AND v.KmFinal IS NOT NULL\r\n      AND (v.KmFinal - v.KmInicial) \u003e @KM_MAXIMO_VIAGEM\r\n      AND v.DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 KM outliers corrigidos\u0027\r\n    \r\n    -- PASSO 5: Anular KM outliers sem padrão\r\n    UPDATE v\r\n    SET \r\n        KmFinalNormalizado = NULL,\r\n        KmRodadoNormalizado = NULL,\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = COALESCE(v.TipoNormalizacao + \u0027,\u0027, \u0027\u0027) + \u0027KM_ANULADO\u0027\r\n    FROM Viagem v\r\n    LEFT JOIN VeiculoPadraoViagem p ON v.VeiculoId = p.VeiculoId\r\n    WHERE v.KmInicial IS NOT NULL\r\n      AND v.KmFinal IS NOT NULL\r\n      AND (v.KmFinal - v.KmInicial) \u003e @KM_MAXIMO_VIAGEM\r\n      AND p.VeiculoId IS NULL\r\n      AND v.DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    \r\n    -- PASSO 6: Calcular MinutosNormalizado\r\n    PRINT \u0027  [PASSO 6] Calculando minutos normalizados...\u0027\r\n    \r\n    UPDATE Viagem\r\n    SET MinutosNormalizado = dbo.fn_CalculaMinutosUteis(\r\n        DataInicialNormalizada,\r\n        DataFinalNormalizada,\r\n        HoraInicioNormalizada,\r\n        HoraFimNormalizada\r\n    )\r\n    WHERE DataInicialNormalizada IS NOT NULL\r\n      AND HoraInicioNormalizada IS NOT NULL\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    PRINT \u0027           \u0027 + CAST(@@ROWCOUNT AS VARCHAR) + \u0027 minutos calculados\u0027\r\n    \r\n    -- PASSO 7: Limitar minutos excessivos\r\n    UPDATE Viagem\r\n    SET MinutosNormalizado = 13200,\r\n        FoiNormalizada = 1,\r\n        TipoNormalizacao = COALESCE(TipoNormalizacao + \u0027,\u0027, \u0027\u0027) + \u0027MINUTOS_LIMITADOS\u0027\r\n    WHERE MinutosNormalizado \u003e 13200\r\n      AND DataInicial \u003e= @DataLimite\r\n    \r\n    SET @TotalNormalizadas = @TotalNormalizadas + @@ROWCOUNT\r\n    \r\n    PRINT \u0027\u0027\r\n    PRINT \u0027  ✓ Normalização concluída! Total corrigidas: \u0027 + CAST(@TotalNormalizadas AS VARCHAR)\r\n    \r\n    RETURN @TotalNormalizadas\r\nEND",
                           "sp_CalculaCustosViagem":  "CREATE OR ALTER PROCEDURE dbo.sp_CalculaCustosViagem\r\n    @ViagemId UNIQUEIDENTIFIER\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n\r\n    DECLARE @VeiculoId UNIQUEIDENTIFIER\r\n    DECLARE @MotoristaId UNIQUEIDENTIFIER\r\n    DECLARE @DataInicial DATETIME\r\n    DECLARE @KmRodado INT\r\n    DECLARE @Minutos INT\r\n    DECLARE @Status VARCHAR(50)\r\n\r\n    -- Custos calculados\r\n    DECLARE @CustoCombustivel FLOAT = 0\r\n    DECLARE @CustoVeiculo FLOAT = 0\r\n    DECLARE @CustoMotorista FLOAT = 0\r\n    DECLARE @CustoLavador FLOAT = 0\r\n    DECLARE @CustoOperador FLOAT = 0\r\n\r\n    -- Variáveis auxiliares\r\n    DECLARE @ConsumoVeiculo FLOAT\r\n    DECLARE @ValorCombustivel FLOAT\r\n    DECLARE @ValorUnitarioVeiculo FLOAT\r\n    DECLARE @CustoMensalMotorista FLOAT\r\n    DECLARE @CustoMensalLavador FLOAT\r\n    DECLARE @CustoMensalOperador FLOAT\r\n    DECLARE @MediaMensalViagens FLOAT\r\n    DECLARE @ItemVeiculoId UNIQUEIDENTIFIER\r\n    DECLARE @ContratoMotoristaId UNIQUEIDENTIFIER\r\n    DECLARE @ContratoAtivo UNIQUEIDENTIFIER\r\n    DECLARE @QuantidadeLavador INT\r\n    DECLARE @QuantidadeOperador INT\r\n\r\n    -- ========================================================================\r\n    -- BUSCA DADOS USANDO CAMPOS NORMALIZADOS\r\n    -- ========================================================================\r\n    SELECT \r\n        @VeiculoId = VeiculoId,\r\n        @MotoristaId = MotoristaId,\r\n        @DataInicial = COALESCE(DataInicialNormalizada, DataInicial),\r\n        @KmRodado = COALESCE(KmRodadoNormalizado, \r\n                             CASE WHEN KmFinal \u003e= KmInicial THEN KmFinal - KmInicial ELSE 0 END),\r\n        @Minutos = COALESCE(MinutosNormalizado, Minutos, 0),\r\n        @Status = Status\r\n    FROM Viagem\r\n    WHERE ViagemId = @ViagemId\r\n\r\n    -- Só processa viagens realizadas com veículo\r\n    IF @VeiculoId IS NULL OR @Status \u003c\u003e \u0027Realizada\u0027\r\n        RETURN\r\n\r\n    -- Garantir valores não negativos\r\n    IF @KmRodado \u003c 0 SET @KmRodado = 0\r\n    IF @Minutos \u003c 0 SET @Minutos = 0\r\n\r\n    -- ========================================================================\r\n    -- 1. CUSTO COMBUSTÍVEL\r\n    -- ========================================================================\r\n    IF @KmRodado \u003e 0\r\n    BEGIN\r\n        SET @ConsumoVeiculo = dbo.fn_CalculaConsumoVeiculo(@VeiculoId)\r\n        SET @ValorCombustivel = dbo.fn_GetValorCombustivelProximo(@VeiculoId, @DataInicial)\r\n\r\n        IF @ConsumoVeiculo IS NOT NULL AND @ConsumoVeiculo \u003e 0 AND @ValorCombustivel IS NOT NULL\r\n            SET @CustoCombustivel = @KmRodado * (@ValorCombustivel / @ConsumoVeiculo)\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 2. CUSTO VEÍCULO (Jornada 8h × 22 dias = 10.560 min/mês)\r\n    -- ========================================================================\r\n    IF @Minutos \u003e 0\r\n    BEGIN\r\n        SELECT @ItemVeiculoId = ItemVeiculoId FROM Veiculo WHERE VeiculoId = @VeiculoId\r\n\r\n        IF @ItemVeiculoId IS NOT NULL\r\n        BEGIN\r\n            SELECT @ValorUnitarioVeiculo = ValorUnitario\r\n            FROM ItemVeiculoContrato\r\n            WHERE ItemVeiculoId = @ItemVeiculoId\r\n\r\n            IF @ValorUnitarioVeiculo IS NOT NULL AND @ValorUnitarioVeiculo \u003e 0\r\n                -- FÓRMULA: Jornada 8h × 22 dias = 10.560 minutos/mês\r\n                SET @CustoVeiculo = @ValorUnitarioVeiculo * (CAST(@Minutos AS FLOAT) / 10560.0)\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 3. CUSTO MOTORISTA (Jornada 220h = 13.200 min/mês + TETO)\r\n    -- ========================================================================\r\n    IF @Minutos \u003e 0 AND @MotoristaId IS NOT NULL\r\n    BEGIN\r\n        SELECT @ContratoMotoristaId = ContratoId\r\n        FROM Motorista\r\n        WHERE MotoristaId = @MotoristaId\r\n\r\n        IF @ContratoMotoristaId IS NOT NULL\r\n        BEGIN\r\n            -- Busca repactuação mais recente\r\n            SELECT TOP 1 @CustoMensalMotorista = RT.ValorMotorista\r\n            FROM RepactuacaoTerceirizacao RT\r\n            INNER JOIN RepactuacaoContrato RC ON RT.RepactuacaoContratoId = RC.RepactuacaoContratoId\r\n            WHERE RC.ContratoId = @ContratoMotoristaId\r\n              AND RT.DataRepactuacao \u003c= @DataInicial\r\n            ORDER BY RT.DataRepactuacao DESC\r\n\r\n            -- Fallback: se não tiver repactuação, usa Contrato\r\n            IF @CustoMensalMotorista IS NULL\r\n            BEGIN\r\n                SELECT @CustoMensalMotorista = CustoMensalMotorista\r\n                FROM Contrato\r\n                WHERE ContratoId = @ContratoMotoristaId AND Status = 1\r\n            END\r\n\r\n            IF @CustoMensalMotorista IS NOT NULL AND @CustoMensalMotorista \u003e 0\r\n            BEGIN\r\n                SET @CustoMotorista = @CustoMensalMotorista * (CAST(@Minutos AS FLOAT) / 13200.0)\r\n                \r\n                -- TETO: máximo = salário mensal\r\n                IF @CustoMotorista \u003e @CustoMensalMotorista\r\n                    SET @CustoMotorista = @CustoMensalMotorista\r\n            END\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 4. CUSTO LAVADOR (rateado por média de viagens/mês)\r\n    -- ========================================================================\r\n    IF @DataInicial IS NOT NULL\r\n    BEGIN\r\n        SELECT TOP 1 @ContratoAtivo = ContratoId\r\n        FROM Contrato\r\n        WHERE ContratoLavadores = 1 AND Status = 1\r\n        ORDER BY DataInicio DESC\r\n\r\n        IF @ContratoAtivo IS NOT NULL\r\n        BEGIN\r\n            SELECT TOP 1 \r\n                @CustoMensalLavador = RT.ValorLavador,\r\n                @QuantidadeLavador = RT.QtdLavadores\r\n            FROM RepactuacaoTerceirizacao RT\r\n            INNER JOIN RepactuacaoContrato RC ON RT.RepactuacaoContratoId = RC.RepactuacaoContratoId\r\n            WHERE RC.ContratoId = @ContratoAtivo\r\n              AND RT.DataRepactuacao \u003c= @DataInicial\r\n            ORDER BY RT.DataRepactuacao DESC\r\n\r\n            IF @CustoMensalLavador IS NULL\r\n            BEGIN\r\n                SELECT @CustoMensalLavador = CustoMensalLavador,\r\n                       @QuantidadeLavador = ISNULL(QuantidadeLavador, 1)\r\n                FROM Contrato\r\n                WHERE ContratoId = @ContratoAtivo\r\n            END\r\n\r\n            IF @CustoMensalLavador IS NOT NULL AND @CustoMensalLavador \u003e 0\r\n            BEGIN\r\n                SET @MediaMensalViagens = dbo.fn_CalculaMediaMensalViagens(@DataInicial)\r\n                IF @MediaMensalViagens \u003e 0\r\n                    SET @CustoLavador = (@CustoMensalLavador * ISNULL(@QuantidadeLavador, 1)) / @MediaMensalViagens\r\n            END\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- 5. CUSTO OPERADOR (rateado por média de viagens/mês)\r\n    -- ========================================================================\r\n    IF @DataInicial IS NOT NULL\r\n    BEGIN\r\n        SELECT TOP 1 @ContratoAtivo = ContratoId\r\n        FROM Contrato\r\n        WHERE ContratoOperadores = 1 AND Status = 1\r\n        ORDER BY DataInicio DESC\r\n\r\n        IF @ContratoAtivo IS NOT NULL\r\n        BEGIN\r\n            SELECT TOP 1 \r\n                @CustoMensalOperador = RT.ValorOperador,\r\n                @QuantidadeOperador = RT.QtdOperadores\r\n            FROM RepactuacaoTerceirizacao RT\r\n            INNER JOIN RepactuacaoContrato RC ON RT.RepactuacaoContratoId = RC.RepactuacaoContratoId\r\n            WHERE RC.ContratoId = @ContratoAtivo\r\n              AND RT.DataRepactuacao \u003c= @DataInicial\r\n            ORDER BY RT.DataRepactuacao DESC\r\n\r\n            IF @CustoMensalOperador IS NULL\r\n            BEGIN\r\n                SELECT @CustoMensalOperador = CustoMensalOperador,\r\n                       @QuantidadeOperador = ISNULL(QuantidadeOperador, 1)\r\n                FROM Contrato\r\n                WHERE ContratoId = @ContratoAtivo\r\n            END\r\n\r\n            IF @CustoMensalOperador IS NOT NULL AND @CustoMensalOperador \u003e 0\r\n            BEGIN\r\n                IF @MediaMensalViagens IS NULL OR @MediaMensalViagens = 0\r\n                    SET @MediaMensalViagens = dbo.fn_CalculaMediaMensalViagens(@DataInicial)\r\n                \r\n                IF @MediaMensalViagens \u003e 0\r\n                    SET @CustoOperador = (@CustoMensalOperador * ISNULL(@QuantidadeOperador, 1)) / @MediaMensalViagens\r\n            END\r\n        END\r\n    END\r\n\r\n    -- ========================================================================\r\n    -- ATUALIZA VIAGEM\r\n    -- ========================================================================\r\n    UPDATE Viagem\r\n    SET CustoCombustivel = ROUND(@CustoCombustivel, 2),\r\n        CustoVeiculo = ROUND(@CustoVeiculo, 2),\r\n        CustoMotorista = ROUND(@CustoMotorista, 2),\r\n        CustoLavador = ROUND(@CustoLavador, 2),\r\n        CustoOperador = ROUND(@CustoOperador, 2)\r\n    WHERE ViagemId = @ViagemId\r\nEND",
                           "sp_tr_Exists":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_Exists \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tIF EXISTS (SELECT 1 FROM [dbo].[tr_String] WHERE [Id] = @Key)\r\n\t\tRETURN 1\r\n\tELSE \r\n\t\tIF EXISTS (SELECT 1 FROM [dbo].[tr_Object] WHERE [Id] = @Key)\r\n\t\t\tRETURN 1\r\n\t\tELSE\r\n\t\t\tRETURN 0\r\nEND",
                           "sp_RecalcularEstatisticasMultasMotoristas":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularEstatisticasMultasMotoristas\r\n        @Ano INT = NULL,\r\n        @Mes INT = NULL\r\n    AS\r\n    BEGIN\r\n        SET NOCOUNT ON;\r\n\r\n        IF @Ano IS NULL SET @Ano = YEAR(GETDATE());\r\n        IF @Mes IS NULL SET @Mes = MONTH(GETDATE());\r\n\r\n        BEGIN TRY\r\n            BEGIN TRANSACTION;\r\n\r\n            UPDATE em\r\n            SET\r\n                em.TotalMultas = ISNULL(m.TotalMultas, 0),\r\n                em.ValorTotalMultas = ISNULL(m.ValorTotal, 0),\r\n                em.DataAtualizacao = GETDATE()\r\n            FROM dbo.EstatisticaMotoristasMensal em\r\n            LEFT JOIN (\r\n                SELECT\r\n                    MotoristaId,\r\n                    YEAR(Data) AS Ano,\r\n                    MONTH(Data) AS Mes,\r\n                    COUNT(*) AS TotalMultas,\r\n                    SUM(ISNULL(ValorAteVencimento, 0)) AS ValorTotal\r\n                FROM dbo.Multa\r\n                WHERE MotoristaId IS NOT NULL\r\n                  AND YEAR(Data) = @Ano AND MONTH(Data) = @Mes\r\n                GROUP BY MotoristaId, YEAR(Data), MONTH(Data)\r\n            ) m ON em.MotoristaId = m.MotoristaId\r\n               AND em.Ano = m.Ano AND em.Mes = m.Mes\r\n            WHERE em.Ano = @Ano AND em.Mes = @Mes;\r\n\r\n            COMMIT TRANSACTION;\r\n            PRINT \u0027Estatísticas de multas recalculadas para \u0027 + CAST(@Ano AS VARCHAR) + \u0027/\u0027 + CAST(@Mes AS VARCHAR);\r\n        END TRY\r\n        BEGIN CATCH\r\n            ROLLBACK TRANSACTION;\r\n            THROW;\r\n        END CATCH\r\n    END;",
                           "sp_tr_GetMembersInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetMembersInSet \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\nSELECT [Member] \r\nFROM [dbo].[tr_Set] \r\nWHERE [Id] = @Key\r\nEND",
                           "sp_AtualizarEstatisticasViagem":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarEstatisticasViagem\r\n    @DataParam DATE\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @DataRef DATE = CAST(@DataParam AS DATE)\r\n    DECLARE @EstatisticaId INT\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR ESTATÍSTICAS GERAIS\r\n    -- ========================================================================\r\n    \r\n    DECLARE @TotalViagens INT = 0\r\n    DECLARE @ViagensFinalizadas INT = 0\r\n    DECLARE @ViagensEmAndamento INT = 0\r\n    DECLARE @ViagensAgendadas INT = 0\r\n    DECLARE @ViagensCanceladas INT = 0\r\n    \r\n    SELECT \r\n        @TotalViagens = ISNULL(COUNT(*), 0),\r\n        @ViagensFinalizadas = ISNULL(SUM(CASE WHEN Status = \u0027Realizada\u0027 THEN 1 ELSE 0 END), 0),\r\n        @ViagensEmAndamento = ISNULL(SUM(CASE WHEN Status = \u0027Aberta\u0027 THEN 1 ELSE 0 END), 0),\r\n        @ViagensAgendadas = ISNULL(SUM(CASE WHEN Status = \u0027Agendada\u0027 THEN 1 ELSE 0 END), 0),\r\n        @ViagensCanceladas = ISNULL(SUM(CASE WHEN Status = \u0027Cancelada\u0027 THEN 1 ELSE 0 END), 0)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) = @DataRef\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR CUSTOS (apenas viagens Realizadas)\r\n    -- IMPORTANTE: Soma TODOS os custos por viagem (Combustível + Motorista + Lavador)\r\n    -- ========================================================================\r\n    \r\n    DECLARE @CustoTotal DECIMAL(18,2) = 0\r\n    DECLARE @CustoVeiculo DECIMAL(18,2) = 0\r\n    DECLARE @CustoMotorista DECIMAL(18,2) = 0\r\n    DECLARE @CustoOperador DECIMAL(18,2) = 0\r\n    DECLARE @CustoLavador DECIMAL(18,2) = 0\r\n    DECLARE @CustoCombustivel DECIMAL(18,2) = 0\r\n    \r\n    SELECT \r\n        @CustoCombustivel = ISNULL(SUM(ISNULL(CustoCombustivel, 0)), 0),\r\n        @CustoVeiculo = ISNULL(SUM(ISNULL(CustoVeiculo, 0)), 0),\r\n        @CustoMotorista = ISNULL(SUM(ISNULL(CustoMotorista, 0)), 0),\r\n        @CustoOperador = ISNULL(SUM(ISNULL(CustoOperador, 0)), 0),\r\n        @CustoLavador = ISNULL(SUM(ISNULL(CustoLavador, 0)), 0)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) = @DataRef\r\n      AND Status = \u0027Realizada\u0027\r\n    \r\n    -- Custo total = soma de todos os custos\r\n    SET @CustoTotal = @CustoCombustivel + @CustoVeiculo + @CustoMotorista + @CustoOperador + @CustoLavador\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR QUILOMETRAGEM (com filtro de outliers: 1 a 2000 km)\r\n    -- ========================================================================\r\n    \r\n    DECLARE @KmTotal INT = 0\r\n    DECLARE @KmMedio DECIMAL(18,2) = 0\r\n    DECLARE @MinutosTotal INT = 0\r\n    DECLARE @MinutosMedio INT = 0\r\n    DECLARE @QuilometragemTotal DECIMAL(18,2) = 0\r\n    DECLARE @QuilometragemMedia DECIMAL(18,2) = 0\r\n    \r\n    SELECT \r\n        @KmTotal = ISNULL(SUM(ISNULL(KmRodado, 0)), 0),\r\n        @KmMedio = ISNULL(AVG(CAST(ISNULL(KmRodado, 0) AS DECIMAL(18,2))), 0),\r\n        @MinutosTotal = ISNULL(SUM(ISNULL(Minutos, 0)), 0),\r\n        @MinutosMedio = ISNULL(AVG(ISNULL(Minutos, 0)), 0)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) = @DataRef\r\n      AND Status = \u0027Realizada\u0027\r\n      AND KmRodado IS NOT NULL\r\n      AND KmRodado BETWEEN 1 AND 2000  -- Filtro de outliers\r\n    \r\n    SET @QuilometragemTotal = CAST(@KmTotal AS DECIMAL(18,2))\r\n    SET @QuilometragemMedia = @KmMedio\r\n    \r\n    -- ========================================================================\r\n    -- CALCULAR JSONs AGREGADOS\r\n    -- ========================================================================\r\n    \r\n    -- JSON: Viagens por Status\r\n    DECLARE @ViagensPorStatusJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorStatusJson = (\r\n        SELECT \r\n            Status AS status,\r\n            COUNT(*) AS total\r\n        FROM Viagem\r\n        WHERE CAST(DataInicial AS DATE) = @DataRef\r\n        GROUP BY Status\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Motorista\r\n    DECLARE @ViagensPorMotoristaJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorMotoristaJson = (\r\n        SELECT \r\n            m.Nome AS motorista,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN Motorista m ON v.MotoristaId = m.MotoristaId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY m.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Veículo\r\n    DECLARE @ViagensPorVeiculoJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorVeiculoJson = (\r\n        SELECT \r\n            ve.Placa AS veiculo,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN Veiculo ve ON v.VeiculoId = ve.VeiculoId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY ve.Placa\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Finalidade\r\n    DECLARE @ViagensPorFinalidadeJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorFinalidadeJson = (\r\n        SELECT \r\n            v.Finalidade AS finalidade,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.Finalidade IS NOT NULL\r\n        GROUP BY v.Finalidade\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Setor\r\n    DECLARE @ViagensPorSetorJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorSetorJson = (\r\n        SELECT \r\n            s.Nome AS setor,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN SetorSolicitante s ON v.SetorSolicitanteId = s.SetorSolicitanteId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY s.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Viagens por Requisitante (CORRIGIDO - estava faltando!)\r\n    DECLARE @ViagensPorRequisitanteJson NVARCHAR(MAX)\r\n    SELECT @ViagensPorRequisitanteJson = (\r\n        SELECT \r\n            r.Nome AS requisitante,\r\n            COUNT(*) AS totalViagens\r\n        FROM Viagem v\r\n        INNER JOIN Requisitante r ON v.RequisitanteId = r.RequisitanteId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n        GROUP BY r.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Custos por Motorista (apenas CustoMotorista)\r\n    DECLARE @CustosPorMotoristaJson NVARCHAR(MAX)\r\n    SELECT @CustosPorMotoristaJson = (\r\n        SELECT \r\n            m.Nome AS motorista,\r\n            SUM(ISNULL(v.CustoMotorista, 0)) AS custoTotal\r\n        FROM Viagem v\r\n        INNER JOIN Motorista m ON v.MotoristaId = m.MotoristaId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.Status = \u0027Realizada\u0027\r\n        GROUP BY m.Nome\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Custos por Veículo (apenas CustoVeiculo - partilha do aluguel)\r\n    DECLARE @CustosPorVeiculoJson NVARCHAR(MAX)\r\n    SELECT @CustosPorVeiculoJson = (\r\n        SELECT \r\n            ve.Placa AS veiculo,\r\n            SUM(ISNULL(v.CustoVeiculo, 0)) AS custoTotal\r\n        FROM Viagem v\r\n        INNER JOIN Veiculo ve ON v.VeiculoId = ve.VeiculoId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.Status = \u0027Realizada\u0027\r\n        GROUP BY ve.Placa\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: KM por Veículo (com filtro de outliers)\r\n    DECLARE @KmPorVeiculoJson NVARCHAR(MAX)\r\n    SELECT @KmPorVeiculoJson = (\r\n        SELECT \r\n            ve.Placa AS veiculo,\r\n            SUM(ISNULL(v.KmRodado, 0)) AS kmTotal\r\n        FROM Viagem v\r\n        INNER JOIN Veiculo ve ON v.VeiculoId = ve.VeiculoId\r\n        WHERE CAST(v.DataInicial AS DATE) = @DataRef\r\n          AND v.KmRodado IS NOT NULL\r\n          AND v.KmRodado BETWEEN 1 AND 2000  -- Filtro de outliers\r\n        GROUP BY ve.Placa\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- JSON: Custos por Tipo (encapsulado para evitar erro FOR JSON com UNION)\r\n    DECLARE @CustosPorTipoJson NVARCHAR(MAX)\r\n    SELECT @CustosPorTipoJson = (\r\n        SELECT tipo, custo\r\n        FROM (\r\n            SELECT \u0027Combustível\u0027 AS tipo, SUM(ISNULL(CustoCombustivel, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Veículo\u0027 AS tipo, SUM(ISNULL(CustoVeiculo, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Motorista\u0027 AS tipo, SUM(ISNULL(CustoMotorista, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Operador\u0027 AS tipo, SUM(ISNULL(CustoOperador, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n            UNION ALL\r\n            SELECT \u0027Lavador\u0027 AS tipo, SUM(ISNULL(CustoLavador, 0)) AS custo\r\n            FROM Viagem WHERE CAST(DataInicial AS DATE) = @DataRef AND Status = \u0027Realizada\u0027\r\n        ) AS CustosPorTipo\r\n        FOR JSON PATH\r\n    )\r\n    \r\n    -- ========================================================================\r\n    -- INSERIR OU ATUALIZAR\r\n    -- ========================================================================\r\n    \r\n    SELECT @EstatisticaId = Id\r\n    FROM ViagemEstatistica\r\n    WHERE CAST(DataReferencia AS DATE) = @DataRef\r\n    \r\n    IF @EstatisticaId IS NOT NULL\r\n    BEGIN\r\n        UPDATE ViagemEstatistica\r\n        SET \r\n            TotalViagens = @TotalViagens,\r\n            ViagensFinalizadas = @ViagensFinalizadas,\r\n            ViagensEmAndamento = @ViagensEmAndamento,\r\n            ViagensAgendadas = @ViagensAgendadas,\r\n            ViagensCanceladas = @ViagensCanceladas,\r\n            \r\n            CustoTotal = @CustoTotal,\r\n            CustoMedioPorViagem = CASE WHEN @ViagensFinalizadas \u003e 0 THEN @CustoTotal / @ViagensFinalizadas ELSE 0 END,\r\n            CustoVeiculo = @CustoVeiculo,\r\n            CustoMotorista = @CustoMotorista,\r\n            CustoOperador = @CustoOperador,\r\n            CustoLavador = @CustoLavador,\r\n            CustoCombustivel = @CustoCombustivel,\r\n            \r\n            QuilometragemTotal = @QuilometragemTotal,\r\n            QuilometragemMedia = @QuilometragemMedia,\r\n            KmTotal = @KmTotal,\r\n            KmMedio = @KmMedio,\r\n            MinutosTotal = @MinutosTotal,\r\n            MinutosMedio = @MinutosMedio,\r\n            \r\n            ViagensPorStatusJson = @ViagensPorStatusJson,\r\n            ViagensPorMotoristaJson = @ViagensPorMotoristaJson,\r\n            ViagensPorVeiculoJson = @ViagensPorVeiculoJson,\r\n            ViagensPorFinalidadeJson = @ViagensPorFinalidadeJson,\r\n            ViagensPorRequisitanteJson = @ViagensPorRequisitanteJson,\r\n            ViagensPorSetorJson = @ViagensPorSetorJson,\r\n            CustosPorMotoristaJson = @CustosPorMotoristaJson,\r\n            CustosPorVeiculoJson = @CustosPorVeiculoJson,\r\n            KmPorVeiculoJson = @KmPorVeiculoJson,\r\n            CustosPorTipoJson = @CustosPorTipoJson,\r\n            \r\n            DataAtualizacao = GETDATE()\r\n        WHERE Id = @EstatisticaId\r\n    END\r\n    ELSE\r\n    BEGIN\r\n        INSERT INTO ViagemEstatistica (\r\n            DataReferencia,\r\n            TotalViagens, ViagensFinalizadas, ViagensEmAndamento, ViagensAgendadas, ViagensCanceladas,\r\n            CustoTotal, CustoMedioPorViagem, CustoVeiculo, CustoMotorista, CustoOperador, CustoLavador, CustoCombustivel,\r\n            QuilometragemTotal, QuilometragemMedia, KmTotal, KmMedio, MinutosTotal, MinutosMedio,\r\n            ViagensPorStatusJson, ViagensPorMotoristaJson, ViagensPorVeiculoJson, ViagensPorFinalidadeJson,\r\n            ViagensPorRequisitanteJson, ViagensPorSetorJson,\r\n            CustosPorMotoristaJson, CustosPorVeiculoJson, KmPorVeiculoJson, CustosPorTipoJson,\r\n            DataCriacao\r\n        )\r\n        VALUES (\r\n            @DataRef,\r\n            @TotalViagens, @ViagensFinalizadas, @ViagensEmAndamento, @ViagensAgendadas, @ViagensCanceladas,\r\n            @CustoTotal, CASE WHEN @ViagensFinalizadas \u003e 0 THEN @CustoTotal / @ViagensFinalizadas ELSE 0 END,\r\n            @CustoVeiculo, @CustoMotorista, @CustoOperador, @CustoLavador, @CustoCombustivel,\r\n            @QuilometragemTotal, @QuilometragemMedia, @KmTotal, @KmMedio, @MinutosTotal, @MinutosMedio,\r\n            @ViagensPorStatusJson, @ViagensPorMotoristaJson, @ViagensPorVeiculoJson, @ViagensPorFinalidadeJson,\r\n            @ViagensPorRequisitanteJson, @ViagensPorSetorJson,\r\n            @CustosPorMotoristaJson, @CustosPorVeiculoJson, @KmPorVeiculoJson, @CustosPorTipoJson,\r\n            GETDATE()\r\n        )\r\n    END\r\nEND",
                           "sp_TratarNulosTodasTabelas":  "CREATE OR ALTER PROCEDURE dbo.sp_TratarNulosTodasTabelas\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    \r\n    DECLARE @Tabela NVARCHAR(128);\r\n    DECLARE curTabelas CURSOR FOR\r\n        SELECT TABLE_NAME \r\n        FROM INFORMATION_SCHEMA.TABLES \r\n        WHERE TABLE_SCHEMA = \u0027dbo\u0027 \r\n          AND TABLE_TYPE = \u0027BASE TABLE\u0027\r\n          AND TABLE_NAME NOT LIKE \u0027AspNet%\u0027\r\n          AND TABLE_NAME NOT LIKE \u0027__EF%\u0027;\r\n    \r\n    OPEN curTabelas;\r\n    FETCH NEXT FROM curTabelas INTO @Tabela;\r\n    \r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        EXEC dbo.sp_TratarNulosTabela @Tabela;\r\n        FETCH NEXT FROM curTabelas INTO @Tabela;\r\n    END\r\n    \r\n    CLOSE curTabelas;\r\n    DEALLOCATE curTabelas;\r\nEND",
                           "sp_JobAtualizacaoViagens":  "CREATE OR ALTER PROCEDURE dbo.sp_JobAtualizacaoViagens\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @Inicio DATETIME = GETDATE()\r\n    DECLARE @InicioEtapa DATETIME\r\n    DECLARE @DataInicio DATE\r\n    DECLARE @DataFim DATE = CAST(GETDATE() AS DATE)\r\n    DECLARE @DiasTotal INT\r\n    \r\n    -- Pega a data do primeiro registro até hoje\r\n    SELECT @DataInicio = MIN(CAST(DataInicial AS DATE)) FROM Viagem WHERE Status = \u0027Realizada\u0027\r\n    SET @DiasTotal = DATEDIFF(DAY, @DataInicio, @DataFim) + 1\r\n    \r\n    PRINT \u0027========================================================================\u0027\r\n    PRINT \u0027         JOB DE ATUALIZACAO DE VIAGENS - FROTIX\u0027\r\n    PRINT \u0027========================================================================\u0027\r\n    PRINT \u0027Inicio: \u0027 + CONVERT(VARCHAR, @Inicio, 120)\r\n    PRINT \u0027Periodo: \u0027 + CONVERT(VARCHAR, @DataInicio, 103) + \u0027 a \u0027 + CONVERT(VARCHAR, @DataFim, 103)\r\n    PRINT \u0027Total de dias: \u0027 + CAST(@DiasTotal AS VARCHAR)\r\n    PRINT \u0027\u0027\r\n    \r\n    BEGIN TRY\r\n        -- ETAPA 1: NORMALIZAR ABASTECIMENTOS\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 1/6] NORMALIZAR ABASTECIMENTOS\u0027\r\n        EXEC dbo.sp_NormalizarAbastecimentos\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 2: CALCULAR CONSUMO DOS VEICULOS\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 2/6] CALCULAR CONSUMO DOS VEICULOS\u0027\r\n        EXEC dbo.sp_CalcularConsumoVeiculos\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 3: ATUALIZAR PADROES ESTATISTICOS DOS VEICULOS\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 3/6] ATUALIZAR PADROES ESTATISTICOS DOS VEICULOS\u0027\r\n        EXEC dbo.sp_AtualizarPadroesVeiculos\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 4: NORMALIZAR VIAGENS (KM, MINUTOS, DATAS) - TODA A BASE\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 4/6] NORMALIZAR VIAGENS (KM, MINUTOS, DATAS)\u0027\r\n        EXEC dbo.sp_NormalizarViagens @DiasParaProcessar = @DiasTotal, @ForcarReprocessamento = 1\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 5: RECALCULAR CUSTOS DAS VIAGENS - TODA A BASE\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 5/6] RECALCULAR CUSTOS DAS VIAGENS\u0027\r\n        EXEC dbo.sp_RecalcularCustosTodasViagens @DataInicio = @DataInicio, @DataFim = @DataFim\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- ETAPA 6: ATUALIZAR ESTATISTICAS (ViagemEstatistica)\r\n        SET @InicioEtapa = GETDATE()\r\n        PRINT \u0027[ETAPA 6/6] ATUALIZAR ESTATISTICAS\u0027\r\n        EXEC dbo.sp_AtualizarTodasEstatisticasViagem\r\n        PRINT \u0027  Tempo: \u0027 + CAST(DATEDIFF(SECOND, @InicioEtapa, GETDATE()) AS VARCHAR) + \u0027s\u0027\r\n        PRINT \u0027\u0027\r\n        \r\n        -- RESUMO FINAL\r\n        DECLARE @DuracaoTotal INT = DATEDIFF(SECOND, @Inicio, GETDATE())\r\n        \r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027                    JOB CONCLUIDO COM SUCESSO!\u0027\r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027Tempo total: \u0027 + CAST(@DuracaoTotal AS VARCHAR) + \u0027 segundos\u0027\r\n        PRINT \u0027Termino: \u0027 + CONVERT(VARCHAR, GETDATE(), 120)\r\n        \r\n    END TRY\r\n    BEGIN CATCH\r\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE()\r\n        DECLARE @ErrorSeverity INT = ERROR_SEVERITY()\r\n        DECLARE @ErrorState INT = ERROR_STATE()\r\n        \r\n        PRINT \u0027\u0027\r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027                           ERRO NO JOB!\u0027\r\n        PRINT \u0027========================================================================\u0027\r\n        PRINT \u0027Erro: \u0027 + @ErrorMessage\r\n        PRINT \u0027Linha: \u0027 + CAST(ERROR_LINE() AS VARCHAR)\r\n        \r\n        RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState)\r\n    END CATCH\r\nEND",
                           "sp_AtualizarPadroesVeiculos":  "CREATE OR ALTER PROCEDURE dbo.sp_AtualizarPadroesVeiculos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @KM_MAXIMO_VIAGEM INT = 2000\r\n    DECLARE @VeiculosProcessados INT\r\n    \r\n    PRINT \u0027  Calculando padrões estatísticos por veículo...\u0027\r\n    \r\n    -- Limpar tabela\r\n    DELETE FROM VeiculoPadraoViagem\r\n    \r\n    -- PASSO 1: Calcular agregações básicas\r\n    ;WITH AgregacoesVeiculo AS (\r\n        SELECT \r\n            VeiculoId,\r\n            AVG(CAST(COALESCE(MinutosNormalizado, Minutos) AS DECIMAL(18,2))) AS AvgDuracaoMinutos,\r\n            AVG(CAST(COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) AS DECIMAL(18,2))) AS AvgKmPorViagem,\r\n            CASE \r\n                WHEN COUNT(DISTINCT CAST(COALESCE(DataInicialNormalizada, DataInicial) AS DATE)) \u003e 0 \r\n                THEN SUM(CAST(COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) AS DECIMAL(18,2))) / \r\n                     COUNT(DISTINCT CAST(COALESCE(DataInicialNormalizada, DataInicial) AS DATE))\r\n                ELSE NULL \r\n            END AS AvgKmPorDia,\r\n            ISNULL(STDEV(CAST(COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) AS DECIMAL(18,2))), 0) AS StdDevKm,\r\n            COUNT(*) AS TotalViagens,\r\n            CASE \r\n                WHEN AVG(CAST(COALESCE(MinutosNormalizado, Minutos) AS FLOAT)) \u003c 120 THEN \u0027DIARIO\u0027\r\n                WHEN AVG(CAST(COALESCE(MinutosNormalizado, Minutos) AS FLOAT)) \u003e 480 THEN \u0027LONGA_DURACAO\u0027\r\n                ELSE \u0027MISTO\u0027\r\n            END AS TipoUsoCalculado\r\n        FROM Viagem\r\n        WHERE Status = \u0027Realizada\u0027\r\n          AND VeiculoId IS NOT NULL\r\n          AND COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) BETWEEN 1 AND @KM_MAXIMO_VIAGEM\r\n        GROUP BY VeiculoId\r\n        HAVING COUNT(*) \u003e= 5\r\n    ),\r\n    -- PASSO 2: Calcular percentis\r\n    PercentisPorVeiculo AS (\r\n        SELECT DISTINCT\r\n            VeiculoId,\r\n            PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY COALESCE(KmRodadoNormalizado, KmFinal - KmInicial)) \r\n                OVER (PARTITION BY VeiculoId) AS MedianaKm,\r\n            PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY COALESCE(KmRodadoNormalizado, KmFinal - KmInicial)) \r\n                OVER (PARTITION BY VeiculoId) AS Q1,\r\n            PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY COALESCE(KmRodadoNormalizado, KmFinal - KmInicial)) \r\n                OVER (PARTITION BY VeiculoId) AS Q3\r\n        FROM Viagem\r\n        WHERE Status = \u0027Realizada\u0027\r\n          AND VeiculoId IS NOT NULL\r\n          AND COALESCE(KmRodadoNormalizado, KmFinal - KmInicial) BETWEEN 1 AND @KM_MAXIMO_VIAGEM\r\n    )\r\n    -- PASSO 3: Inserir dados combinados\r\n    INSERT INTO VeiculoPadraoViagem (\r\n        VeiculoId, \r\n        AvgDuracaoMinutos, \r\n        AvgKmPorViagem, \r\n        AvgKmPorDia,\r\n        MaxKmNormalPorViagem,\r\n        MedianaKm,\r\n        Q1Km,\r\n        Q3Km,\r\n        IQRKm,\r\n        LimiteInferiorKm,\r\n        LimiteSuperiorKm,\r\n        TotalViagensAnalisadas,\r\n        TipoUso,\r\n        DataAtualizacao\r\n    )\r\n    SELECT \r\n        A.VeiculoId,\r\n        A.AvgDuracaoMinutos,\r\n        A.AvgKmPorViagem,\r\n        A.AvgKmPorDia,\r\n        -- Max normal = média + 2 desvios padrão (mínimo 500km)\r\n        CASE \r\n            WHEN A.AvgKmPorViagem + 2 * A.StdDevKm \u003e 500\r\n            THEN A.AvgKmPorViagem + 2 * A.StdDevKm\r\n            ELSE 500\r\n        END AS MaxKmNormal,\r\n        P.MedianaKm,\r\n        P.Q1,\r\n        P.Q3,\r\n        P.Q3 - P.Q1 AS IQR,\r\n        P.Q1 - 1.5 * (P.Q3 - P.Q1) AS LimiteInferior,\r\n        P.Q3 + 1.5 * (P.Q3 - P.Q1) AS LimiteSuperior,\r\n        A.TotalViagens,\r\n        A.TipoUsoCalculado,\r\n        GETDATE()\r\n    FROM AgregacoesVeiculo A\r\n    INNER JOIN PercentisPorVeiculo P ON A.VeiculoId = P.VeiculoId\r\n    \r\n    SELECT @VeiculosProcessados = @@ROWCOUNT\r\n    \r\n    PRINT \u0027  ✓ Padrões calculados para \u0027 + CAST(@VeiculosProcessados AS VARCHAR) + \u0027 veículos\u0027\r\n    \r\n    RETURN @VeiculosProcessados\r\nEND",
                           "sp_tr_SetString":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_SetString \r\n\t@Key varchar(255) = 0, \r\n\t@Value nvarchar(4000) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tMERGE [dbo].[tr_String] AS T \r\n\tUSING (SELECT @Key as Id, @Value as Value) AS S \r\n\t\tON (T.Id = S.Id) \r\n\tWHEN NOT MATCHED BY TARGET THEN \r\n\t\tINSERT(Id, Value) VALUES(S.Id, S.Value) \r\n\tWHEN MATCHED THEN \r\n\t\tUPDATE SET T.Value = S.Value;\r\nEND",
                           "sp_tr_GetCountInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetCountInSet \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT COUNT(1) \r\n\tFROM [dbo].[tr_Set] \r\n\tWHERE [Id] = @Key\r\nEND",
                           "sp_tr_SetObject":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_SetObject \r\n\t@Key varchar(255) = 0, \r\n\t@Value image\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tMERGE [dbo].[tr_Object] AS T \r\n\tUSING (SELECT @Key as Id, @Value as Value) AS S \r\n\t\tON (T.Id = S.Id) \r\n\tWHEN NOT MATCHED BY TARGET THEN \r\n\t\tINSERT(Id, Value) VALUES(S.Id, S.Value) \r\n\tWHEN MATCHED THEN \r\n\t\tUPDATE SET T.Value = S.Value;\r\nEND",
                           "sp_tr_DeleteSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_DeleteSet \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE\r\n\tFROM [dbo].[tr_Set] \r\n\tWHERE [Id] = @Key\r\nEND",
                           "sp_tr_AcquireLock":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_AcquireLock \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tINSERT INTO [dbo].[tr_AppLock] \r\n\tVALUES (@Key)\r\nEND",
                           "sp_tr_DeleteInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_DeleteInSet \r\n\t@Key varchar(255) = 0, \r\n\t@Value varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE FROM [dbo].[tr_Set] WHERE [Id] = @Key AND [Member] = @Value\r\n\t\r\n\tRETURN @@rowcount\r\nEND",
                           "sp_tr_ClearAll":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_ClearAll \r\nAS\r\nBEGIN\r\n\tDELETE [dbo].[tr_Set]\r\n\tDELETE [dbo].[tr_Object]\r\n\tDELETE [dbo].[tr_String]\r\nEND",
                           "sp_tr_GetString":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetString \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT Value \r\n\tFROM [dbo].[tr_String] \r\n\tWHERE Id = @Key\r\nEND",
                           "sp_tr_DeleteLike":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_DeleteLike \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tDELETE \r\n\tFROM [dbo].[tr_String] \r\n\tWHERE [Id] LIKE @Key + \u0027%\u0027\r\n\t\r\n\tDELETE \r\n\tFROM [dbo].[tr_Object] \r\n\tWHERE [Id] LIKE @Key + \u0027%\u0027\r\n\r\n\tDELETE \r\n\tFROM [dbo].[tr_Set] \r\n\tWHERE [Id] LIKE @Key + \u0027%\u0027\r\nEND",
                           "sp_RecalcularCustosTodasViagens":  "CREATE OR ALTER PROCEDURE dbo.sp_RecalcularCustosTodasViagens\r\n    @DataInicio DATE = NULL,\r\n    @DataFim DATE = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    -- Se não informou datas, pega TODA a base\r\n    IF @DataInicio IS NULL\r\n        SELECT @DataInicio = MIN(CAST(DataInicial AS DATE)) FROM Viagem WHERE Status = \u0027Realizada\u0027\r\n    \r\n    IF @DataFim IS NULL\r\n        SET @DataFim = CAST(GETDATE() AS DATE)\r\n    \r\n    DECLARE @ViagemId UNIQUEIDENTIFIER\r\n    DECLARE @Total INT = 0\r\n    DECLARE @Processadas INT = 0\r\n    DECLARE @Inicio DATETIME = GETDATE()\r\n    \r\n    SELECT @Total = COUNT(*)\r\n    FROM Viagem\r\n    WHERE CAST(DataInicial AS DATE) \u003e= @DataInicio\r\n      AND CAST(DataInicial AS DATE) \u003c= @DataFim\r\n      AND Status = \u0027Realizada\u0027\r\n    \r\n    PRINT \u0027  Recalculando custos de \u0027 + CAST(@Total AS VARCHAR) + \u0027 viagens...\u0027\r\n    PRINT \u0027  Período: \u0027 + CONVERT(VARCHAR, @DataInicio, 103) + \u0027 a \u0027 + CONVERT(VARCHAR, @DataFim, 103)\r\n    \r\n    -- Desabilita o trigger via CONTEXT_INFO\r\n    SET CONTEXT_INFO 0x1\r\n    \r\n    DECLARE viagem_cursor CURSOR LOCAL FAST_FORWARD FOR\r\n        SELECT ViagemId\r\n        FROM Viagem\r\n        WHERE CAST(DataInicial AS DATE) \u003e= @DataInicio\r\n          AND CAST(DataInicial AS DATE) \u003c= @DataFim\r\n          AND Status = \u0027Realizada\u0027\r\n    \r\n    OPEN viagem_cursor\r\n    FETCH NEXT FROM viagem_cursor INTO @ViagemId\r\n    \r\n    WHILE @@FETCH_STATUS = 0\r\n    BEGIN\r\n        EXEC dbo.sp_CalculaCustosViagem @ViagemId\r\n        SET @Processadas = @Processadas + 1\r\n        \r\n        IF @Processadas % 500 = 0\r\n            PRINT \u0027    Processadas \u0027 + CAST(@Processadas AS VARCHAR) + \u0027 de \u0027 + CAST(@Total AS VARCHAR)\r\n        \r\n        FETCH NEXT FROM viagem_cursor INTO @ViagemId\r\n    END\r\n    \r\n    CLOSE viagem_cursor\r\n    DEALLOCATE viagem_cursor\r\n    \r\n    SET CONTEXT_INFO 0x0\r\n    \r\n    DECLARE @Duracao INT = DATEDIFF(SECOND, @Inicio, GETDATE())\r\n    PRINT \u0027  ✓ Concluído! \u0027 + CAST(@Processadas AS VARCHAR) + \u0027 viagens em \u0027 + CAST(@Duracao AS VARCHAR) + \u0027s\u0027\r\nEND",
                           "sp_TratarNulosTabela":  "CREATE OR ALTER PROCEDURE dbo.sp_TratarNulosTabela\r\n    @NomeTabela NVARCHAR(128)\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    \r\n    DECLARE @SQL NVARCHAR(MAX) = \u0027UPDATE \u0027 + QUOTENAME(@NomeTabela) + \u0027 SET \u0027;\r\n    DECLARE @Colunas NVARCHAR(MAX) = \u0027\u0027;\r\n    DECLARE @Where NVARCHAR(MAX) = \u0027 WHERE \u0027;\r\n    \r\n    SELECT @Colunas = @Colunas + QUOTENAME(c.COLUMN_NAME) + \u0027 = ISNULL(\u0027 + QUOTENAME(c.COLUMN_NAME) + \u0027, \u0027 +\r\n        CASE \r\n            WHEN c.DATA_TYPE IN (\u0027varchar\u0027,\u0027nvarchar\u0027,\u0027char\u0027,\u0027nchar\u0027,\u0027text\u0027,\u0027ntext\u0027) THEN \u0027\u0027\u0027\u0027\u0027\u0027\r\n            WHEN c.DATA_TYPE IN (\u0027int\u0027,\u0027bigint\u0027,\u0027smallint\u0027,\u0027tinyint\u0027,\u0027decimal\u0027,\u0027numeric\u0027,\u0027float\u0027,\u0027real\u0027,\u0027money\u0027) THEN \u00270\u0027\r\n            WHEN c.DATA_TYPE = \u0027bit\u0027 THEN \u00271\u0027\r\n            ELSE \u0027NULL\u0027\r\n        END + \u0027), \u0027\r\n    FROM INFORMATION_SCHEMA.COLUMNS c\r\n    WHERE c.TABLE_NAME = @NomeTabela\r\n      AND c.TABLE_SCHEMA = \u0027dbo\u0027\r\n      AND c.IS_NULLABLE = \u0027YES\u0027\r\n      AND c.DATA_TYPE IN (\u0027varchar\u0027,\u0027nvarchar\u0027,\u0027char\u0027,\u0027nchar\u0027,\u0027text\u0027,\u0027ntext\u0027,\r\n                          \u0027int\u0027,\u0027bigint\u0027,\u0027smallint\u0027,\u0027tinyint\u0027,\u0027decimal\u0027,\u0027numeric\u0027,\u0027float\u0027,\u0027real\u0027,\u0027money\u0027,\r\n                          \u0027bit\u0027)\r\n      -- Exclui colunas que são FK\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu\r\n          INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc \r\n              ON kcu.CONSTRAINT_NAME = tc.CONSTRAINT_NAME\r\n          WHERE tc.CONSTRAINT_TYPE = \u0027FOREIGN KEY\u0027\r\n            AND kcu.TABLE_NAME = c.TABLE_NAME\r\n            AND kcu.COLUMN_NAME = c.COLUMN_NAME\r\n      )\r\n      -- Exclui colunas com CHECK constraints\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu\r\n          INNER JOIN INFORMATION_SCHEMA.CHECK_CONSTRAINTS cc \r\n              ON ccu.CONSTRAINT_NAME = cc.CONSTRAINT_NAME\r\n          WHERE ccu.TABLE_NAME = c.TABLE_NAME\r\n            AND ccu.COLUMN_NAME = c.COLUMN_NAME\r\n      );\r\n    \r\n    SELECT @Where = @Where + QUOTENAME(c.COLUMN_NAME) + \u0027 IS NULL OR \u0027\r\n    FROM INFORMATION_SCHEMA.COLUMNS c\r\n    WHERE c.TABLE_NAME = @NomeTabela\r\n      AND c.TABLE_SCHEMA = \u0027dbo\u0027\r\n      AND c.IS_NULLABLE = \u0027YES\u0027\r\n      AND c.DATA_TYPE IN (\u0027varchar\u0027,\u0027nvarchar\u0027,\u0027char\u0027,\u0027nchar\u0027,\u0027text\u0027,\u0027ntext\u0027,\r\n                          \u0027int\u0027,\u0027bigint\u0027,\u0027smallint\u0027,\u0027tinyint\u0027,\u0027decimal\u0027,\u0027numeric\u0027,\u0027float\u0027,\u0027real\u0027,\u0027money\u0027,\r\n                          \u0027bit\u0027)\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu\r\n          INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc \r\n              ON kcu.CONSTRAINT_NAME = tc.CONSTRAINT_NAME\r\n          WHERE tc.CONSTRAINT_TYPE = \u0027FOREIGN KEY\u0027\r\n            AND kcu.TABLE_NAME = c.TABLE_NAME\r\n            AND kcu.COLUMN_NAME = c.COLUMN_NAME\r\n      )\r\n      AND NOT EXISTS (\r\n          SELECT 1 FROM INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu\r\n          INNER JOIN INFORMATION_SCHEMA.CHECK_CONSTRAINTS cc \r\n              ON ccu.CONSTRAINT_NAME = cc.CONSTRAINT_NAME\r\n          WHERE ccu.TABLE_NAME = c.TABLE_NAME\r\n            AND ccu.COLUMN_NAME = c.COLUMN_NAME\r\n      );\r\n    \r\n    IF LEN(@Colunas) \u003e 1\r\n    BEGIN\r\n        SET @Colunas = LEFT(@Colunas, LEN(@Colunas) - 1);\r\n        SET @Where = LEFT(@Where, LEN(@Where) - 3);\r\n        SET @SQL = @SQL + @Colunas + @Where;\r\n        EXEC sp_executesql @SQL;\r\n    END\r\nEND",
                           "sp_tr_GetBytes":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_GetBytes \r\n\t@Key varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT Value \r\n\tFROM [dbo].[tr_Object] \r\n\tWHERE Id = @Key\r\nEND",
                           "sp_NormalizarAbastecimentos":  "CREATE OR ALTER PROCEDURE dbo.sp_NormalizarAbastecimentos\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON\r\n    \r\n    DECLARE @TotalRegistros INT\r\n    DECLARE @OutliersDetectados INT\r\n\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION\r\n\r\n        -- STEP 1: Calcular consumo original\r\n        PRINT \u0027  [STEP 1] Calculando consumo original...\u0027\r\n        \r\n        UPDATE Abastecimento\r\n        SET ConsumoCalculado = CAST(KmRodado AS FLOAT) / Litros\r\n        WHERE Litros \u003e 0 AND KmRodado \u003e 0\r\n        \r\n        SELECT @TotalRegistros = @@ROWCOUNT\r\n        PRINT \u0027           \u0027 + CAST(@TotalRegistros AS VARCHAR) + \u0027 registros calculados\u0027\r\n\r\n        -- STEP 2: Calcular estatísticas e normalizar por veículo\r\n        PRINT \u0027  [STEP 2] Detectando outliers (método IQR)...\u0027\r\n        \r\n        ;WITH EstatisticasVeiculo AS (\r\n            SELECT DISTINCT\r\n                VeiculoId,\r\n                PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY ConsumoCalculado) OVER (PARTITION BY VeiculoId) AS Q1,\r\n                PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY ConsumoCalculado) OVER (PARTITION BY VeiculoId) AS Q3,\r\n                PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY ConsumoCalculado) OVER (PARTITION BY VeiculoId) AS Mediana,\r\n                PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY KmRodado) OVER (PARTITION BY VeiculoId) AS MedianaKm,\r\n                PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY Litros) OVER (PARTITION BY VeiculoId) AS MedianaLitros\r\n            FROM Abastecimento\r\n            WHERE Litros \u003e 0 AND KmRodado \u003e 0 AND ConsumoCalculado IS NOT NULL\r\n        ),\r\n        LimitesVeiculo AS (\r\n            SELECT \r\n                VeiculoId, Q1, Q3, Mediana, MedianaKm, MedianaLitros,\r\n                -- IQR com limites de sanidade (3 a 30 km/l)\r\n                CASE WHEN Q1 - 1.5 * (Q3 - Q1) \u003c 3 THEN 3 ELSE Q1 - 1.5 * (Q3 - Q1) END AS LimiteInf,\r\n                CASE WHEN Q3 + 1.5 * (Q3 - Q1) \u003e 30 THEN 30 ELSE Q3 + 1.5 * (Q3 - Q1) END AS LimiteSup\r\n            FROM EstatisticasVeiculo\r\n        )\r\n        UPDATE A\r\n        SET \r\n            A.EhOutlier = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN 1 ELSE 0 END,\r\n            A.KmRodadoNormalizado = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN CAST(L.MedianaKm AS INT) ELSE A.KmRodado END,\r\n            A.LitrosNormalizado = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN L.MedianaLitros ELSE A.Litros END,\r\n            A.ConsumoNormalizado = CASE WHEN A.ConsumoCalculado \u003c L.LimiteInf OR A.ConsumoCalculado \u003e L.LimiteSup THEN L.Mediana ELSE A.ConsumoCalculado END\r\n        FROM Abastecimento A\r\n        INNER JOIN LimitesVeiculo L ON A.VeiculoId = L.VeiculoId\r\n        WHERE A.Litros \u003e 0 AND A.KmRodado \u003e 0 AND A.ConsumoCalculado IS NOT NULL\r\n\r\n        SELECT @OutliersDetectados = COUNT(*) FROM Abastecimento WHERE EhOutlier = 1\r\n        PRINT \u0027           \u0027 + CAST(@OutliersDetectados AS VARCHAR) + \u0027 outliers detectados e normalizados\u0027\r\n\r\n        COMMIT TRANSACTION\r\n        \r\n        PRINT \u0027\u0027\r\n        PRINT \u0027  ✓ Normalização de abastecimentos concluída!\u0027\r\n\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT \u003e 0 ROLLBACK TRANSACTION\r\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE()\r\n        RAISERROR(@ErrorMessage, 16, 1)\r\n    END CATCH\r\nEND",
                           "sp_tr_AddInSet":  "CREATE OR ALTER PROCEDURE dbo.sp_tr_AddInSet \r\n\t@Key varchar(255) = 0, \r\n\t@Value varchar(255) = 0\r\nAS\r\nBEGIN\r\n\tSET NOCOUNT ON;\r\n\r\n\tMERGE [dbo].[tr_Set] AS T \r\n\tUSING (SELECT @Key as [Id], @Value as [Member]) AS S \r\n\t\tON (T.Id = S.Id AND T.Member = S.Member) \r\n\tWHEN NOT MATCHED BY TARGET THEN \r\n\t\tINSERT(Id, Member) VALUES(S.Id, S.Member);\r\nEND"
                       },
    "RemovidasViews":  [

                       ],
    "DevViews":  {
                     "ViewMotoristasMulta":  "CREATE OR ALTER VIEW dbo.ViewMotoristasMulta \nAS SELECT TOP 1000000\n  Motorista.Nome\n ,SUM(Multa.ValorPago) AS \u0027Valor Pago\u0027\n ,SUM(Multa.ValorPosVencimento) AS \u0027Valor a Pagar\u0027\nFROM dbo.Multa\nINNER JOIN dbo.Motorista\n  ON Multa.MotoristaId = Motorista.MotoristaId\nGROUP BY Motorista.Nome\nORDER BY SUM(Multa.ValorPosVencimento) DESC\n-- Create or alter view [dbo].[ViewEmpenhoMulta]\n--;",
                     "ViewPatrimonioConferencia":  "CREATE OR ALTER VIEW dbo.ViewPatrimonioConferencia \nAS SELECT\n  Patrimonio.PatrimonioId\n ,Patrimonio.NPR\n ,Patrimonio.Descricao\n ,Patrimonio.LocalizacaoAtual\n ,Patrimonio.Marca\n ,Patrimonio.Modelo\n ,SetorPatrimonial.NomeSetor\n ,SecaoPatrimonial.NomeSecao\n ,Patrimonio.Status\n ,Patrimonio.StatusConferencia\n ,Patrimonio.LocalizacaoConferencia\n ,Patrimonio.SetorConferenciaId\n ,Patrimonio.SecaoConferenciaId\n ,Patrimonio.Situacao\nFROM dbo.Patrimonio\nINNER JOIN dbo.SetorPatrimonial\n  ON Patrimonio.SetorId = SetorPatrimonial.SetorId\nINNER JOIN dbo.SecaoPatrimonial\n  ON Patrimonio.SecaoId = SecaoPatrimonial.SecaoId\n    AND SecaoPatrimonial.SetorId = SetorPatrimonial.SetorId\n-- Create table [dbo].[MovimentacaoPatrimonio]\n--;",
                     "ViewNoFichaVistoria":  "CREATE OR ALTER VIEW dbo.ViewNoFichaVistoria \nAS SELECT NoFichaVistoria FROM Viagem\n-- Create or alter view [dbo].[ViewFichaViagem]\n--;",
                     "ViewCustosFinalidade":  "CREATE OR ALTER VIEW dbo.ViewCustosFinalidade \nAS SELECT\n  Viagem.Finalidade\n ,FORMAT(SUM(Viagem.CustoCombustivel), \u0027N2\u0027, \u0027pt-BR\u0027) AS Combustivel\n ,FORMAT(SUM(Viagem.CustoMotorista), \u0027N2\u0027, \u0027pt-BR\u0027) AS Motorista\n ,FORMAT(SUM(Viagem.CustoVeiculo), \u0027N2\u0027, \u0027pt-BR\u0027) AS Veiculo\n ,FORMAT(SUM(Viagem.KmFinal - Viagem.KmInicial), \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\nFROM dbo.Viagem\nWHERE Viagem.Status = \u0027Realizada\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\nAND MONTH(Viagem.DataInicial) = 12\nGROUP BY Viagem.Finalidade\n-- Create table [dbo].[OcorrenciaViagem]\n--;",
                     "ViewAlocacaoMotorista":  "CREATE OR ALTER VIEW dbo.ViewAlocacaoMotorista \nAS SELECT DISTINCT\n  COUNT(Motorista.MotoristaId) AS Motoristas\n ,Unidade.QtdMotoristas\n ,(COUNT(Motorista.MotoristaId) - Unidade.QtdMotoristas) AS Deficit\n ,Unidade.Descricao\nFROM dbo.Motorista\nINNER JOIN dbo.Unidade\n  ON Motorista.UnidadeId = Unidade.UnidadeId\nWHERE Motorista.Status = 1 AND Motorista.TipoCondutor = \u0027Terceirizado\u0027\nGROUP BY Unidade.QtdMotoristas\n        ,Unidade.Descricao\n-- Create table [dbo].[ViagensEconomildo]\n--;",
                     "ViewFluxoEconomildo":  "CREATE OR ALTER VIEW dbo.ViewFluxoEconomildo \nAS SELECT TOP 10000000\n  ViagensEconomildo.Data\n ,Motorista.Nome AS NomeMotorista\n ,Motorista.TipoCondutor\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\n ,ViagensEconomildo.VIagemEconomildoId\n ,ViagensEconomildo.VeiculoId\n ,ViagensEconomildo.MotoristaId\n ,ViagensEconomildo.MOB\n ,ViagensEconomildo.Responsavel\n ,ViagensEconomildo.IdaVolta\n ,ViagensEconomildo.HoraInicio\n ,ViagensEconomildo.HoraFim\n ,ViagensEconomildo.QtdPassageiros\nFROM dbo.Veiculo\nINNER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nINNER JOIN dbo.ViagensEconomildo\n  ON ViagensEconomildo.VeiculoId = Veiculo.VeiculoId\nINNER JOIN dbo.Motorista\n  ON ViagensEconomildo.MotoristaId = Motorista.MotoristaId\nORDER BY Data DESC, MOB, HoraInicio DESC\n-- Create or alter view [dbo].[ViewMotoristaFluxo]\n--;",
                     "ViewEmpenhos":  "CREATE OR ALTER VIEW dbo.ViewEmpenhos \nAS -- =============================================\n-- ViewEmpenhos - Versão sem NULLs\n-- Todos os campos retornam valores padrão em vez de NULL\n-- =============================================\n\nSELECT\n    -- GUID sempre tem valor (é PK, nunca é NULL)\n    Empenho.EmpenhoId,\n    \n    -- Strings: ISNULL retorna string vazia\n    ISNULL(Empenho.NotaEmpenho, \u0027\u0027) AS NotaEmpenho,\n    \n    -- Datas: ISNULL retorna data padrão (ou pode manter NULL se preferir)\n    Empenho.DataEmissao,\n    Empenho.VigenciaInicial,\n    Empenho.VigenciaFinal,\n    \n    -- Inteiros: ISNULL retorna 0\n    ISNULL(Empenho.AnoVigencia, 0) AS AnoVigencia,\n    \n    -- Floats: ISNULL retorna 0\n    ISNULL(Empenho.SaldoInicial, 0) AS SaldoInicial,\n    ISNULL(Empenho.SaldoFinal, 0) AS SaldoFinal,\n    \n    -- GUIDs que podem ser NULL: ISNULL retorna GUID vazio\n    ISNULL(Empenho.ContratoId, \u002700000000-0000-0000-0000-000000000000\u0027) AS ContratoId,\n    ISNULL(Empenho.AtaId, \u002700000000-0000-0000-0000-000000000000\u0027) AS AtaId,\n    \n    -- Agregações: ISNULL para garantir 0 quando não há registros relacionados\n    ISNULL(COUNT(DISTINCT MovimentacaoEmpenho.MovimentacaoId), 0) AS Movimentacoes,\n    ISNULL(SUM(MovimentacaoEmpenho.Valor), 0) AS SaldoMovimentacao,\n    ISNULL(SUM(NotaFiscal.ValorNF - ISNULL(NotaFiscal.ValorGlosa, 0)), 0) AS SaldoNotas\n\nFROM dbo.Empenho\n\nLEFT OUTER JOIN dbo.MovimentacaoEmpenho\n    ON Empenho.EmpenhoId = MovimentacaoEmpenho.EmpenhoId\n\nLEFT OUTER JOIN dbo.NotaFiscal\n    ON Empenho.EmpenhoId = NotaFiscal.EmpenhoId\n\nGROUP BY \n    Empenho.EmpenhoId, \n    Empenho.NotaEmpenho, \n    Empenho.DataEmissao, \n    Empenho.AnoVigencia, \n    Empenho.VigenciaInicial, \n    Empenho.VigenciaFinal, \n    Empenho.SaldoInicial, \n    Empenho.SaldoFinal, \n    Empenho.ContratoId, \n    Empenho.AtaId\n-- Create table [dbo].[EstatisticaVeiculoUnidade]\n--;",
                     "ViewControleAcesso":  "CREATE OR ALTER VIEW dbo.ViewControleAcesso \nAS SELECT TOP 100000000\n  ControleAcesso.UsuarioId\n ,Recurso.RecursoId\n ,ControleAcesso.Acesso\n ,Recurso.Nome\n ,Recurso.Descricao\n ,Recurso.Ordem\n ,AspNetUsers.NomeCompleto\n ,(ControleAcesso.UsuarioId + \u0027|\u0027 + CONVERT(NVARCHAR(MAX), ControleAcesso.RecursoId)) AS IDS\nFROM dbo.ControleAcesso\nINNER JOIN dbo.AspNetUsers\n  ON ControleAcesso.UsuarioId = AspNetUsers.Id\nINNER JOIN dbo.Recurso\n  ON ControleAcesso.RecursoId = Recurso.RecursoId\nORDER BY Recurso.Ordem\n-- Create table [dbo].[AspNetUserRoles]\n--;",
                     "ViewManutencao_Ultima":  "CREATE OR ALTER VIEW dbo.ViewManutencao_Ultima \nAS SELECT \n    -- Campo inicial solicitado\n    ISNULL(v.Placa,\u0027\u0027) + \u0027 - \u0027 + ISNULL(ma.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(m.DescricaoModelo,\u0027\u0027) AS PlacaDescricao,\n\n    -- ===== Chaves e referência ao contrato (para filtrar na LINQ) =====\n    vc.ContratoId,\n\n    -- ===== Manutenção =====\n    b.ManutencaoId,\n    b.NumOS,\n    b.ResumoOS,\n\n    -- strings formatadas (dd/MM/yyyy)\n    CONVERT(CHAR(10), b.DataSolicitacao, 103)                                       AS DataSolicitacao,\n    CONVERT(CHAR(10), b.DataDisponibilidade, 103)                                   AS DataDisponibilidade,\n    CONVERT(CHAR(10), b.DataRecolhimento, 103)                                      AS DataRecolhimento,\n    CONVERT(CHAR(10), b.DataRecebimentoReserva, 103)                                AS DataRecebimentoReserva,\n    CONVERT(CHAR(10), b.DataDevolucaoReserva, 103)                                  AS DataDevolucaoReserva,\n    CONVERT(CHAR(10), b.DataEntrega, 103)                                           AS DataEntrega,\n    CONVERT(CHAR(10), b.DataDevolucao, 103)                                         AS DataDevolucao,\n\n    -- datas cruas\n    b.DataSolicitacao                                                               AS DataSolicitacaoRaw,\n    b.DataDevolucao                                                                 AS DataDevolucaoRaw,\n\n    b.StatusOS,\n    b.VeiculoId,\n\n    -- Derivado (Marca/Modelo) e informações auxiliares\n    ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo                                     AS DescricaoVeiculo,\n    u.Sigla                                                                          AS Sigla,\n    c.Descricao                                                                      AS CombustivelDescricao,\n    v.Placa                                                                          AS Placa,\n\n    -- Reserva como texto\n    CASE\n        WHEN b.ReservaEnviado = 1 THEN \u0027Enviado\u0027\n        WHEN b.ReservaEnviado = 0 THEN \u0027Ausente\u0027\n        ELSE \u0027\u0027\n    END                                                                              AS Reserva,\n\n    -- ===== Planilha de Glosa (Item do contrato, via Veiculo.ItemVeiculoId) =====\n    ivc.Descricao,\n    ivc.Quantidade,\n    ivc.ValorUnitario,\n\n    -- DiasGlosa (via APPLY)\n    d.DiasCalc                                                                       AS DiasGlosa,\n\n    -- ValorGlosa (trata NULLs e usa DECIMAL p/ precisão)\n    CAST(\n        d.DiasCalc\n        * COALESCE(CAST(ivc.ValorUnitario AS DECIMAL(18,2)), 0)\n        AS DECIMAL(18,2)\n    )                                                                                AS ValorGlosa,\n\n    -- Dias (0 quando sem devolução, senão diff Solicitação-\u003eDevolução)\n    CASE\n        WHEN b.DataDevolucao IS NULL THEN 0\n        ELSE DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\n    END                                                                              AS Dias,\n\n    -- Atributos de UI\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS Habilitado,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027fa-regular fa-lock\u0027 ELSE \u0027far fa-flag-checkered\u0027 END                 AS Icon,\n\n    -- Item do contrato\n    ivc.NumItem,\n\n    -- Campos \"montados\"\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoEditar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityEditar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Visualizar Manutenção\u0027 ELSE \u0027Edita a Ordem de Serviço!\u0027 END        AS OpacityTooltipEditarEditar,\n\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoBaixar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS ModalBaixarAttrs,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityBaixar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Desabilitado\u0027 ELSE \u0027Fecha a Ordem de Serviço!\u0027 END                 AS Tooltip,\n\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoCancelar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityCancelar,\n    CASE\n        WHEN b.StatusOS = \u0027Cancelada\u0027 THEN \u0027Manutenção Cancelada\u0027\n        WHEN b.StatusOS = \u0027Fechada\u0027   THEN \u0027OS Fechada/Baixada\u0027\n        ELSE \u0027Cancelar Manutenção\u0027\n    END                                                                                                                      AS TooltipCancelar\n\nFROM dbo.Manutencao               AS b\nLEFT JOIN dbo.Veiculo             AS v   ON v.VeiculoId       = b.VeiculoId\nLEFT JOIN dbo.VeiculoContrato     AS vc  ON vc.VeiculoId      = v.VeiculoId\nLEFT JOIN dbo.ModeloVeiculo       AS m   ON m.ModeloId        = v.ModeloId\nLEFT JOIN dbo.MarcaVeiculo        AS ma  ON ma.MarcaId        = v.MarcaId\nLEFT JOIN dbo.Combustivel         AS c   ON c.CombustivelId   = v.CombustivelId\nLEFT JOIN dbo.Unidade             AS u   ON u.UnidadeId       = v.UnidadeId\nLEFT JOIN dbo.ItemVeiculoContrato AS ivc ON ivc.ItemVeiculoId = v.ItemVeiculoId\nCROSS APPLY (\n  SELECT DiasCalc =\n    CASE\n      WHEN b.DataDevolucao IS NULL THEN 1\n      WHEN b.DataEntrega  IS NOT NULL THEN DATEDIFF(DAY, b.DataEntrega,  b.DataDevolucao)\n      ELSE                               DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\n    END\n) AS d\n\n--WHERE\n--    v.Status = 1\n--    AND b.DataDevolucao IS NOT NULL\n--    AND DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao) \u003e 0\n-- Create or alter view [dbo].[ViewManutencao_2025.11.04]\n--;",
                     "ViewVeiculos_Original":  "CREATE OR ALTER VIEW dbo.ViewVeiculos_Original \nAS SELECT\n  Veiculo.VeiculoId\n ,Veiculo.Placa\n ,LEFT(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), LEN(SUBSTRING(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027))), LEN(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027)))) - 2) AS Quilometragem\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS MarcaModelo\n ,Unidade.Sigla\n ,Combustivel.Descricao\n ,CASE\n    WHEN CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) IS NULL THEN 0\n    ELSE CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2))\n  END AS Consumo\n ,CASE\n    WHEN ViewContratoFornecedor_Veiculos.ContratoVeiculo IS NOT NULL THEN ViewContratoFornecedor_Veiculos.ContratoVeiculo\n    WHEN ViewAtaFornecedor.AtaVeiculo IS NOT NULL THEN ViewAtaFornecedor.AtaVeiculo + \u0027 \u003cb\u003e(Ata)\u003c/b\u003e \u0027\n    ELSE \u0027\u003cb\u003e(Veículo Próprio)\u003c/b\u003e\u0027\n  END AS OrigemVeiculo\n ,CONVERT(VARCHAR, Veiculo.DataAlteracao, 103) AS DataAlteracao\n ,AspNetUsers.NomeCompleto\n ,CASE\n    WHEN Veiculo.Reserva = 0 THEN \u0027Efetivo\u0027\n    ELSE \u0027Reserva\u0027\n  END AS VeiculoReserva\n ,Veiculo.Status\n ,Veiculo.CombustivelId\n ,ROW_NUMBER() OVER (ORDER BY Veiculo.Placa) AS RowNum\n ,ViewContratoFornecedor_Veiculos.ContratoId\n ,ViewAtaFornecedor.AtaId\n ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\n ,ViewAtaFornecedor.AtaVeiculo\n ,Veiculo.ValorMensal\nFROM dbo.Abastecimento\nRIGHT OUTER JOIN dbo.Veiculo\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nLEFT OUTER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nLEFT OUTER JOIN dbo.Unidade\n  ON Unidade.UnidadeId = Veiculo.UnidadeId\nLEFT OUTER JOIN dbo.Combustivel\n  ON Combustivel.CombustivelId = Veiculo.CombustivelId\nLEFT OUTER JOIN dbo.ViewContratoFornecedor_Veiculos\n  ON ViewContratoFornecedor_Veiculos.ContratoId = Veiculo.ContratoId\nLEFT OUTER JOIN dbo.ViewAtaFornecedor\n  ON ViewAtaFornecedor.AtaId = Veiculo.AtaId\nINNER JOIN dbo.AspNetUsers\n  ON AspNetUsers.Id = Veiculo.UsuarioIdAlteracao\nGROUP BY Veiculo.VeiculoId\n        ,Veiculo.Placa\n        ,Veiculo.Quilometragem\n        ,MarcaVeiculo.DescricaoMarca\n        ,ModeloVeiculo.DescricaoModelo\n        ,Unidade.Sigla\n        ,Combustivel.Descricao\n        ,ViewContratoFornecedor_Veiculos.ContratoId\n        ,Veiculo.DataAlteracao\n        ,AspNetUsers.NomeCompleto\n        ,Veiculo.Reserva\n        ,Veiculo.Status\n        ,Veiculo.CombustivelId\n        ,ViewAtaFornecedor.AtaId\n        ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\n        ,ViewAtaFornecedor.AtaVeiculo\n        ,Veiculo.ValorMensal\n-- Create or alter view [dbo].[ViewVeiculos]\n--;",
                     "ViewCalculaMediana":  "CREATE OR ALTER VIEW dbo.[ViewCalculaMediana (backup)] \nAS SELECT x.TempoEspera \nFROM   (SELECT TempoEspera, \n               Count(1) OVER (partition BY \u0027A\u0027)        AS TotalRows, \n               Row_number() OVER (ORDER BY TempoEspera ASC) AS AmountOrder \n        FROM   CorridasCanceladasTaxiLeg ft) x \nWHERE  x.AmountOrder = Round(x.TotalRows / 2.0, 0)  \n-- Create table [dbo].[ControleAcesso_BACKUP]\n--;",
                     "ViewProcuraFicha":  "CREATE OR ALTER VIEW dbo.ViewProcuraFicha \nAS SELECT \nMotoristaId, \nVeiculoId, \nDataInicial, \nDataFinal, \n(FORMAT(DATEPART(hour, HoraInicio), \u002700\u0027) + \u0027:\u0027 + FORMAT(DATEPART(minute, HoraInicio), \u002700\u0027)) AS HoraInicio,\n(FORMAT(DATEPART(hour, HoraFim), \u002700\u0027) + \u0027:\u0027 + FORMAT(DATEPART(minute, HoraFim), \u002700\u0027)) AS HoraFim,\nNoFichaVistoria\nFROM\nViagem\nWHERE Status NOT LIKE \u0027Cancelada\u0027 AND StatusAgendamento = 0\n-- Create or alter view [dbo].[ViewPendenciasManutencao]\n--;",
                     "ViewVeiculoCompleto":  "CREATE OR ALTER VIEW dbo.ViewVeiculoCompleto \nAS SELECT\n    v.VeiculoId,\n    v.Status,\n    ISNULL(v.Placa, \u0027\u0027) AS Placa,\n    ISNULL(v.Placa, \u0027\u0027) + \u0027 - \u0027 +\n        ISNULL(m.DescricaoMarca, \u0027Sem Marca\u0027) + \u0027/\u0027 +\n        ISNULL(md.DescricaoModelo, \u0027Sem Modelo\u0027) AS VeiculoCompleto\nFROM\n    dbo.Veiculo v\nLEFT JOIN\n    dbo.MarcaVeiculo m ON v.MarcaId = m.MarcaId\nLEFT JOIN\n    dbo.ModeloVeiculo md ON v.ModeloId = md.ModeloId\nWHERE v.Status = 1\n-- Create or alter view [dbo].[ViewExisteItemContrato]\n--;",
                     "ViewAbastecimentosPBI":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBI \nAS SELECT\n  Abastecimento.AbastecimentoId\n ,ViewAbastecimentosItensPBI.VeiculoID\n ,CASE\n    WHEN ViewAbastecimentosItensPBI.Descricao IS NULL THEN \u0027Veículo Próprio\u0027\n    ELSE ViewAbastecimentosItensPBI.Descricao\n  END AS Descricao\n ,ViewAbastecimentosItensPBI.Categoria\n ,Abastecimento.Litros\n ,Abastecimento.ValorUnitario\n ,Abastecimento.KmRodado\n ,CONVERT(VARCHAR, Abastecimento.DataHora, 103) AS DataAbastecimento\n ,FORMAT(Abastecimento.DataHora, \u0027HH:mm\u0027) AS HoraAbastecimento\n ,Combustivel.Descricao AS DescricaoCombustivel\nFROM dbo.ViewAbastecimentosItensPBI\nRIGHT OUTER JOIN dbo.Abastecimento\n  ON ViewAbastecimentosItensPBI.VeiculoID = Abastecimento.VeiculoId\nINNER JOIN dbo.Combustivel\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\n-- Create or alter function [dbo].[fn_CalculaMinutosUteis]\n--;",
                     "DocGenerator":  "CREATE OR ALTER VIEW DocGenerator.vw_FilesNeedingUpdate AS\r\nSELECT\r\n    ft.FilePath,\r\n    ft.FileSize,\r\n    ft.LineCount,\r\n    ft.CharacterCount,\r\n    ft.LastModified,\r\n    ft.LastDocumented,\r\n    DATEDIFF(DAY, ft.LastDocumented, GETDATE()) AS DaysSinceDocumented,\r\n    ft.UpdateReason,\r\n    da.AlertType,\r\n    da.Priority\r\nFROM DocGenerator.FileTracking ft\r\nLEFT JOIN DocGenerator.DocumentationAlerts da\r\n    ON ft.FilePath = da.FilePath\r\n    AND da.Status = \u0027PENDING\u0027\r\nWHERE ft.NeedsUpdate = 1\r\n    OR (ft.LastDocumented IS NULL)\r\n    OR (DATEDIFF(DAY, ft.LastDocumented, GETDATE()) \u003e 30);",
                     "ViewOcorrenciasViagem":  "CREATE OR ALTER VIEW dbo.ViewOcorrenciasViagem \nAS SELECT \n    oc.OcorrenciaViagemId,\n    oc.ViagemId,\n    oc.VeiculoId,\n    oc.MotoristaId,\n    ISNULL(oc.Resumo, \u0027\u0027) AS Resumo,\n    ISNULL(oc.Descricao, \u0027\u0027) AS Descricao,\n    ISNULL(oc.ImagemOcorrencia, \u0027\u0027) AS ImagemOcorrencia,\n    ISNULL(oc.Status, \u0027Aberta\u0027) AS Status,\n    oc.DataCriacao,\n    oc.DataBaixa,\n    ISNULL(oc.UsuarioCriacao, \u0027\u0027) AS UsuarioCriacao,\n    ISNULL(oc.UsuarioBaixa, \u0027\u0027) AS UsuarioBaixa,\n    oc.ItemManutencaoId,\n    ISNULL(oc.Observacoes, \u0027\u0027) AS Observacoes,\n    vi.DataInicial,\n    vi.DataFinal,\n    vi.HoraInicio,\n    vi.HoraFim,\n    vi.NoFichaVistoria,\n    ISNULL(vi.Origem, \u0027\u0027) AS Origem,\n    ISNULL(vi.Destino, \u0027\u0027) AS Destino,\n    ISNULL(vi.Finalidade, \u0027\u0027) AS FinalidadeViagem,\n    ISNULL(vi.Status, \u0027\u0027) AS StatusViagem,\n    ISNULL(ve.Placa, \u0027\u0027) AS Placa,\n    ISNULL(ma.DescricaoMarca, \u0027\u0027) AS DescricaoMarca,\n    ISNULL(mo.DescricaoModelo, \u0027\u0027) AS DescricaoModelo,\n    ISNULL(CONCAT(ve.Placa, \u0027 - \u0027, ma.DescricaoMarca, \u0027/\u0027, mo.DescricaoModelo), \u0027\u0027) AS VeiculoCompleto,\n    ISNULL(CONCAT(ma.DescricaoMarca, \u0027/\u0027, mo.DescricaoModelo), \u0027\u0027) AS MarcaModelo,\n    ISNULL(mt.Nome, \u0027\u0027) AS NomeMotorista,\n    CAST(\u0027\u0027 AS VARCHAR(1)) AS FotoMotorista,  -- Campo vazio como placeholder\n    DATEDIFF(DAY, oc.DataCriacao, GETDATE()) AS DiasEmAberto,\n    CASE \n        WHEN oc.Status = \u0027Baixada\u0027 THEN \u0027Resolvida\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027Crítica\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027Alta\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027Média\u0027\n        ELSE \u0027Normal\u0027\n    END AS Urgencia,\n    CASE \n        WHEN oc.Status = \u0027Baixada\u0027 THEN \u0027#28a745\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027#dc3545\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027#ffc107\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027#17a2b8\u0027\n        ELSE \u0027#6c757d\u0027\n    END AS CorUrgencia\nFROM dbo.OcorrenciaViagem oc\n    LEFT JOIN dbo.Viagem vi ON oc.ViagemId = vi.ViagemId\n    LEFT JOIN dbo.Veiculo ve ON oc.VeiculoId = ve.VeiculoId\n    LEFT JOIN dbo.MarcaVeiculo ma ON ve.MarcaId = ma.MarcaId\n    LEFT JOIN dbo.ModeloVeiculo mo ON ve.ModeloId = mo.ModeloId\n    LEFT JOIN dbo.Motorista mt ON oc.MotoristaId = mt.MotoristaId\n-- Create or alter view [dbo].[ViewOcorrenciasAbertasVeiculo]\n--;",
                     "ViewAbastecimentosPBIAta":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBIAta \nAS SELECT\n  Veiculo.VeiculoId\n ,Veiculo.Placa\n ,Veiculo.Categoria\n ,ItemVeiculoAta.Descricao\nFROM dbo.VeiculoAta\nINNER JOIN dbo.Veiculo\n  ON VeiculoAta.VeiculoId = Veiculo.VeiculoId\nINNER JOIN dbo.ItemVeiculoAta\n  ON Veiculo.ItemVeiculoAtaId = ItemVeiculoAta.ItemVeiculoAtaId\nINNER JOIN dbo.RepactuacaoAta\n  ON VeiculoAta.AtaId = RepactuacaoAta.AtaId\n-- Create or alter view [dbo].[ViewAbastecimentosItensPBI]\n--;",
                     "ViewVeiculos":  "CREATE OR ALTER VIEW dbo.ViewVeiculos \nAS SELECT\n  Veiculo.VeiculoId\n ,Veiculo.Placa\n ,Economildo\n ,Quilometragem\n ,Veiculo.Categoria\n ,Veiculo.Placa +  \u0027 (\u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo + \u0027)\u0027 AS VeiculoCompleto\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS MarcaModelo\n ,Unidade.Sigla\n ,Combustivel.Descricao\n ,CASE\n    WHEN CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) IS NULL THEN 0\n    ELSE CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2))\n  END AS Consumo\n ,CASE\n    WHEN ViewContratoFornecedor_Veiculos.ContratoVeiculo IS NOT NULL THEN ViewContratoFornecedor_Veiculos.ContratoVeiculo\n    WHEN ViewAtaFornecedor.AtaVeiculo IS NOT NULL THEN ViewAtaFornecedor.AtaVeiculo + \u0027 \u003cb\u003e(Ata)\u003c/b\u003e \u0027\n    WHEN Veiculo.VeiculoProprio = 1 THEN \u0027\u003cb\u003e\u003ci\u003e(Veículo Próprio)\u003c/i\u003e\u003c/b\u003e\u0027\n    ELSE \u0027\u003cb\u003e\u003ci style=\"color: #dc3545;\"\u003e(Sem Contrato/Ata)\u003c/i\u003e\u003c/b\u003e\u0027\n  END AS OrigemVeiculo\n ,CONVERT(VARCHAR, Veiculo.DataAlteracao, 103) AS DataAlteracao\n ,AspNetUsers.NomeCompleto\n ,CASE\n    WHEN Veiculo.Reserva = 0 THEN \u0027Efetivo\u0027\n    ELSE \u0027Reserva\u0027\n  END AS VeiculoReserva\n ,Veiculo.Status\n ,Veiculo.CombustivelId\n ,ROW_NUMBER() OVER (ORDER BY Veiculo.Placa) AS RowNum\n ,ViewContratoFornecedor_Veiculos.ContratoId\n ,ViewAtaFornecedor.AtaId\n ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\n ,ViewAtaFornecedor.AtaVeiculo\n ,Veiculo.VeiculoProprio\n ,Veiculo.ItemVeiculoAtaId\n ,Veiculo.ItemVeiculoId\n ,Veiculo.ValorMensal\nFROM dbo.Abastecimento\nRIGHT OUTER JOIN dbo.Veiculo\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nLEFT OUTER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nLEFT OUTER JOIN dbo.Unidade\n  ON Unidade.UnidadeId = Veiculo.UnidadeId\nLEFT OUTER JOIN dbo.Combustivel\n  ON Combustivel.CombustivelId = Veiculo.CombustivelId\nLEFT OUTER JOIN dbo.ViewContratoFornecedor_Veiculos\n  ON ViewContratoFornecedor_Veiculos.ContratoId = Veiculo.ContratoId\nLEFT OUTER JOIN dbo.ViewAtaFornecedor\n  ON ViewAtaFornecedor.AtaId = Veiculo.AtaId\nINNER JOIN dbo.AspNetUsers\n  ON AspNetUsers.Id = Veiculo.UsuarioIdAlteracao\nGROUP BY Veiculo.VeiculoId\n        ,Veiculo.Placa\n        ,Veiculo.Quilometragem\n        ,MarcaVeiculo.DescricaoMarca\n        ,ModeloVeiculo.DescricaoModelo\n        ,Unidade.Sigla\n        ,Combustivel.Descricao\n        ,ViewContratoFornecedor_Veiculos.ContratoId\n        ,Veiculo.DataAlteracao\n        ,AspNetUsers.NomeCompleto\n        ,Veiculo.Reserva\n        ,Veiculo.Status\n        ,Veiculo.CombustivelId\n        ,ViewAtaFornecedor.AtaId\n        ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\n        ,ViewAtaFornecedor.AtaVeiculo\n        ,Veiculo.VeiculoProprio\n        ,Veiculo.ItemVeiculoAtaId\n        ,Veiculo.ItemVeiculoId\n        ,Veiculo.ValorMensal\n        ,Economildo\n        ,Veiculo.Categoria\n-- Create or alter view [dbo].[ViewManutencao.OLD]\n--;",
                     "ViewVeiculosManutencaoReserva":  "CREATE OR ALTER VIEW dbo.ViewVeiculosManutencaoReserva \nAS SELECT TOP 1000\n    v.VeiculoId,\n    (v.Placa + \u0027 - \u0027 + ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo) AS Descricao\nFROM \n    dbo.Veiculo v\nINNER JOIN \n    dbo.ModeloVeiculo m ON v.ModeloId = m.ModeloId\nINNER JOIN \n    dbo.MarcaVeiculo ma ON v.MarcaId = ma.MarcaId\nWHERE \n    v.Status = 1 AND v.Reserva = 1\nORDER BY \n    Descricao\n-- Create or alter view [dbo].[ViewVeiculosManutencao]\n--;",
                     "ViewAbastecimentosPBIProprio":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBIProprio \nAS SELECT\n  Veiculo.VeiculoId\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS Descricao\n ,Veiculo.Categoria\nFROM dbo.Veiculo\nLEFT OUTER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nLEFT OUTER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nWHERE VeiculoProprio = 1\nGROUP BY Veiculo.VeiculoId\n        ,Veiculo.Categoria\n        ,MarcaVeiculo.DescricaoMarca\n        ,ModeloVeiculo.DescricaoModelo\n-- Create table [dbo].[VeiculoPadraoViagem]\n--;",
                     "ViewMotoristasViagem":  "CREATE OR ALTER VIEW dbo.ViewMotoristasViagem \nAS SELECT TOP 10000\n    m.MotoristaId,\n    m.Nome,\n    m.TipoCondutor,\n    m.Status,\n    m.Foto,\n    CAST(m.Nome + \u0027 (\u0027 + m.TipoCondutor + \u0027)\u0027 AS NVARCHAR(300)) AS MotoristaCondutor\nFROM dbo.Motorista AS m\nWHERE m.Status = 1\nORDER BY m.Nome\n-- Create or alter view [dbo].[ViewMotoristas_Ultimo]\n--;",
                     "ViewAtaFornecedor":  "CREATE OR ALTER VIEW dbo.ViewAtaFornecedor \nAS SELECT\n  AtaRegistroPrecos.AtaId\n  ,(AtaRegistroPrecos.AnoAta+ \u0027/\u0027 + AtaRegistroPrecos.NumeroAta + \u0027 - \u0027 + Fornecedor.DescricaoFornecedor) AS AtaVeiculo\n\nFROM dbo.Fornecedor\nINNER JOIN dbo.AtaRegistroPrecos\n  ON Fornecedor.FornecedorId = AtaRegistroPrecos.FornecedorId\n-- Create table [dbo].[VeiculoAta]\n--;",
                     "ViewMultas":  "CREATE OR ALTER VIEW dbo.ViewMultas \nAS SELECT TOP 100000\n  Multa.MultaId\n ,Multa.NumInfracao\n ,Multa.Data AS DataOriginal\n ,CONVERT(VARCHAR, Multa.Data, 103) AS Data\n ,FORMAT(Multa.Hora, \u0027HH:mm\u0027) AS Hora\n ,(Motorista.Nome + \u0027 - (\u0027 + Motorista.TipoCondutor + \u0027)\u0027) AS Nome\n ,Motorista.MotoristaId\n ,CASE\n    WHEN Motorista.Celular02 IS NULL THEN Motorista.Celular01\n    ELSE (Motorista.Celular01 + \u0027 / \u0027 + Motorista.Celular02) \n  END AS Telefone\n ,Veiculo.Placa\n ,Veiculo.VeiculoId\n ,OrgaoAutuante.Sigla\n ,OrgaoAutuante.OrgaoAutuanteId\n ,Multa.Localizacao\n ,TipoMulta.Artigo\n ,CONVERT(VARCHAR, Multa.Vencimento, 103) AS Vencimento\n ,Multa.AutuacaoPDF\n ,Multa.PenalidadePDF\n ,Multa.ValorAteVencimento\n ,Multa.ComprovantePDF\n ,Multa.ValorPosVencimento\n ,Multa.ProcessoEDoc\n ,Multa.Status\n ,Multa.Fase\n ,TipoMulta.Descricao\n ,Multa.Observacao\n ,Multa.Paga\n ,Multa.ValorPago\n ,Multa.TipoMultaId\n ,CONVERT(VARCHAR, Multa.DataPagamento, 103) AS DataPagamento\nFROM dbo.Multa\nLEFT OUTER JOIN dbo.Motorista\n  ON Multa.MotoristaId = Motorista.MotoristaId\nLEFT OUTER JOIN dbo.Veiculo\n  ON Multa.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.OrgaoAutuante\n  ON Multa.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\nLEFT OUTER JOIN dbo.TipoMulta\n  ON Multa.TipoMultaId = TipoMulta.TipoMultaId\nLEFT OUTER JOIN dbo.EmpenhoMulta\n  ON Multa.EmpenhoMultaId = EmpenhoMulta.EmpenhoMultaId\n    AND EmpenhoMulta.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\nORDER BY DataOriginal DESC\n-- Create or alter view [dbo].[ViewMotoristasMulta]\n--;",
                     "ViewSabrina":  "CREATE OR ALTER VIEW dbo.ViewSabrina \nAS SELECT\n  Combustivel.Descricao\n ,Veiculo.Placa\n ,Abastecimento.Litros\n ,Abastecimento.ValorUnitario\n ,Abastecimento.DataHora\nFROM dbo.Abastecimento\nINNER JOIN dbo.Combustivel\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\nINNER JOIN dbo.Veiculo\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\n-- Create or alter view [dbo].[ViewMediaConsumo]\n--;",
                     "ViewVeiculosManutencao":  "CREATE OR ALTER VIEW dbo.ViewVeiculosManutencao \nAS SELECT TOP 1000\n    v.VeiculoId,\n    (v.Placa + \u0027 - \u0027 + ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo) AS Descricao\nFROM \n    dbo.Veiculo v\nINNER JOIN \n    dbo.ModeloVeiculo m ON v.ModeloId = m.ModeloId\nINNER JOIN \n    dbo.MarcaVeiculo ma ON v.MarcaId = ma.MarcaId\nWHERE \n    v.Status = 1 -- BIT: TRUE\nORDER BY \n    Descricao\n-- Create or alter view [dbo].[ViewVeiculoCompleto]\n--;",
                     "ViewEventos":  "CREATE OR ALTER VIEW dbo.ViewEventos \nAS SELECT \n    e.EventoId,\n    e.Nome,\n    e.Descricao,\n    e.QtdParticipantes,\n    e.DataInicial,\n    e.DataFinal,\n    r.Nome AS NomeRequisitante,\n    s.Nome AS NomeSetor,\n    s.Sigla AS SiglaSetor,\n    ISNULL(cv.CustoViagem, 0) AS CustoViagem,\n    e.Status\nFROM dbo.Evento e\nLEFT JOIN dbo.Requisitante r \n    ON e.RequisitanteId = r.RequisitanteId\nLEFT JOIN dbo.SetorSolicitante s \n    ON e.SetorSolicitanteId = s.SetorSolicitanteId\n-- ✅ SUBQUERY AGREGADA: Executa 1x para TODOS os eventos\nLEFT JOIN (\n    SELECT \n        EventoId,\n        ROUND(\n            SUM(\n                ISNULL(CustoCombustivel, 0) + \n                ISNULL(CustoMotorista, 0) + \n                ISNULL(CustoVeiculo, 0) + \n                ISNULL(CustoOperador, 0) + \n                ISNULL(CustoLavador, 0)\n            ), 2\n        ) AS CustoViagem\n    FROM dbo.Viagem\n    WHERE EventoId IS NOT NULL\n    GROUP BY EventoId\n) cv ON e.EventoId = cv.EventoId\n-- Create or alter view [dbo].[ViewCustosViagem]\n--;",
                     "ViewCustoAbastecimento":  "CREATE OR ALTER VIEW dbo.ViewCustoAbastecimento \nAS SELECT\n  Combustivel.Descricao\n ,DAY(Abastecimento.DataHora) AS Dia\n ,SUM(Abastecimento.Litros * Abastecimento.ValorUnitario) AS Valor\nFROM dbo.Abastecimento\nINNER JOIN dbo.Combustivel\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\nWHERE MONTH(Abastecimento.DataHora) = 07\nAND YEAR(Abastecimento.DataHora) = 2022\nGROUP BY Combustivel.Descricao\n        ,Abastecimento.DataHora\n-- Create or alter view [dbo].[ViewAbastecimentosPBI]\n--;",
                     "ViewMotoristas":  "CREATE OR ALTER VIEW dbo.ViewMotoristas \nAS SELECT TOP 10000\n  Motorista.MotoristaId\n ,Motorista.Nome\n ,Motorista.Ponto\n ,Motorista.CNH\n ,Motorista.CategoriaCNH\n ,Motorista.Celular01\n ,Motorista.Status\n ,Unidade.Sigla\n ,Contrato.AnoContrato\n ,Contrato.NumeroContrato\n ,Fornecedor.DescricaoFornecedor\n ,AspNetUsers.NomeCompleto\n ,Motorista.DataAlteracao\n ,Motorista.ContratoId\n ,Motorista.TipoCondutor \n ,Motorista.Foto\n ,Motorista.EfetivoFerista   \n,Motorista.Nome + \u0027 (\u0027 + Motorista.TipoCondutor + \u0027)\u0027 AS MotoristaCondutor\n ,ROW_NUMBER() OVER (ORDER BY Motorista.Nome) AS RowNum\nFROM dbo.Motorista\nLEFT OUTER JOIN dbo.Contrato\n  ON Motorista.ContratoId = Contrato.ContratoId\nLEFT OUTER JOIN dbo.Fornecedor\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\nINNER JOIN dbo.AspNetUsers\n  ON Motorista.UsuarioIdAlteracao = AspNetUsers.Id\nLEFT OUTER JOIN dbo.Unidade\n  ON Motorista.UnidadeId = Unidade.UnidadeId\nORDER BY Motorista.Nome\n-- Create or alter view [dbo].[ViewItensManutencao]\n--;",
                     "ViewMotoristas_original":  "CREATE OR ALTER VIEW dbo.ViewMotoristas_original \nAS SELECT\n  Motorista.MotoristaId\n ,Motorista.Nome\n ,Motorista.Ponto\n ,Motorista.CNH\n ,Motorista.CategoriaCNH\n ,Motorista.Celular01\n ,Motorista.Status\n ,Unidade.Sigla\n ,Contrato.AnoContrato\n ,Contrato.NumeroContrato\n ,Fornecedor.DescricaoFornecedor\n ,AspNetUsers.NomeCompleto\n ,Motorista.DataAlteracao\n ,Motorista.ContratoId\n ,Motorista.CondutorId\n ,Motorista.Foto\n ,CondutorApoio.Descricao\n ,CASE\n    WHEN CondutorApoio.Descricao IS NULL THEN (Motorista.Nome + \u0027(Terceirizado)\u0027) \n    ELSE Motorista.Nome + \u0027(\u0027 + CondutorApoio.Descricao + \u0027)\u0027 \n    END AS MotoristaCondutor\n  ,ROW_NUMBER() OVER (ORDER BY Motorista.Nome) AS RowNum\nFROM dbo.Motorista\nLEFT OUTER JOIN dbo.Contrato\n  ON Motorista.ContratoId = Contrato.ContratoId\nLEFT OUTER JOIN dbo.Fornecedor\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\nINNER JOIN dbo.AspNetUsers\n  ON Motorista.UsuarioIdAlteracao = AspNetUsers.Id\nLEFT OUTER JOIN dbo.Unidade\n  ON Motorista.UnidadeId = Unidade.UnidadeId\nLEFT OUTER JOIN dbo.CondutorApoio\n  ON Motorista.CondutorId = CondutorApoio.CondutorId\n-- Create or alter view [dbo].[ViewMotoristas]\n--;",
                     "ViewCustosMotoristas_Individual":  "CREATE OR ALTER VIEW dbo.ViewCustosMotoristas_Individual \nAS SELECT\n  Viagem.NoFichaVistoria\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS DataFinal\n ,FORMAT(Viagem.KmFinal - Viagem.KmInicial, \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\nFROM dbo.Viagem\nINNER JOIN dbo.Motorista\n  ON Viagem.MotoristaId = Motorista.MotoristaId\nWHERE Viagem.Status = \u0027Realizada\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\nAND Motorista.TipoCondutor = \u0027Terceirizado\u0027\nAND Motorista.MotoristaId = \u002700a5ece9-1735-47c0-5eb5-08d97c53518f\u0027\nAND MONTH(Viagem.DataInicial) = 06\n-- Create or alter view [dbo].[ViewCustosMotoristas]\n--;",
                     "ViewLotacoes":  "CREATE OR ALTER VIEW dbo.ViewLotacoes \nAS SELECT\n  Unidade.Categoria AS NomeCategoria\n ,Unidade.Descricao + \u0027 (\u0027+ Unidade.Sigla + \u0027)\u0027 AS Unidade\n ,Motorista.Nome AS Motorista\n ,CONVERT(VARCHAR, LotacaoMotorista.DataInicio, 103) AS DataInicio\n ,LotacaoMotorista.LotacaoMotoristaId\n ,LotacaoMotorista.Lotado\n ,Motorista.MotoristaId\n ,Unidade.UnidadeId\nFROM dbo.LotacaoMotorista\nINNER JOIN dbo.Unidade\n  ON LotacaoMotorista.UnidadeId = Unidade.UnidadeId\nINNER JOIN dbo.Motorista\n  ON LotacaoMotorista.MotoristaId = Motorista.MotoristaId\n-- Create or alter view [dbo].[ViewLotacaoMotorista]\n--;",
                     "ViewSetores":  "CREATE OR ALTER VIEW dbo.ViewSetores \nAS SELECT\n  SetorSolicitante.SetorSolicitanteId\n  ,CASE\n    WHEN SetorSolicitante.Sigla IS NULL THEN (SetorSolicitante.Nome) \n    ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027 \n    END AS Nome\n ,SetorSolicitante.SetorPaiId\n ,SetorSolicitante.Status\nFROM dbo.SetorSolicitante\nWHERE SetorSolicitante.Status = 1\n-- Create table [dbo].[Requisitante]\n--;",
                     "ViewViagens":  "CREATE OR ALTER VIEW dbo.ViewViagens \nAS SELECT\n    Viagem.ViagemId,\n    Viagem.DataInicial,\n    Viagem.DataFinal,\n    Viagem.HoraInicio,\n    Viagem.HoraFim,\n    Viagem.Descricao,\n    Viagem.Status,\n    Viagem.KmInicial,\n    Viagem.KmFinal,\n    Viagem.CombustivelInicial,\n    Viagem.CombustivelFinal,\n    Viagem.MotoristaId,\n    Viagem.VeiculoId,\n    Viagem.ResumoOcorrencia,\n    Viagem.DescricaoOcorrencia,\n    Viagem.StatusOcorrencia,\n    Viagem.StatusDocumento,\n    Viagem.StatusCartaoAbastecimento,\n    Viagem.StatusAgendamento,\n    Viagem.NoFichaVistoria,\n    Viagem.Finalidade,\n    Veiculo.Placa,\n    Motorista.CNH,\n    Motorista.Foto,\n    Motorista.Ponto,\n    convert(nvarchar(36), Viagem.ViagemId) AS ViagemIDStr,\n    CASE\n        WHEN Requisitante.Ramal IS NULL THEN Requisitante.Nome\n        ELSE Requisitante.Nome + \u0027 - (\u0027 + CONVERT(VARCHAR, Requisitante.Ramal) + \u0027)\u0027\n    END AS NomeRequisitante,\n    CASE\n        WHEN SetorSolicitante.Sigla IS NULL THEN SetorSolicitante.Nome\n        ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027\n    END AS NomeSetor,\n    Requisitante.RequisitanteId,\n    SetorSolicitante.SetorSolicitanteId,\n    Motorista.Nome AS NomeMotorista,\n    \u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo,\n    Veiculo.UnidadeId,\n    ROW_NUMBER() OVER (ORDER BY Viagem.DataInicial, Viagem.HoraInicio) AS RowNum,\n    Veiculo.CombustivelId,\n    Viagem.DescricaoSolucaoOcorrencia,\n    Viagem.FichaVistoria,\n    Viagem.Origem,\n    Viagem.Destino,\n    Viagem.Minutos,\n    Viagem.NomeEvento,\n    Viagem.RamalRequisitante,\n    Viagem.ImagemOcorrencia,\n    Viagem.ItemManutencaoId,\n    ROUND((Viagem.CustoCombustivel + Viagem.CustoMotorista + Viagem.CustoVeiculo + Viagem.CustoOperador + Viagem.CustoLavador), 2) AS CustoViagem,\n    Viagem.EventoId,\n\n    -- NOVAS COLUNAS: Lógica de cor do evento\n    CorEvento = CASE\n        WHEN Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027 AND Viagem.Finalidade = \u0027Evento\u0027 THEN \u0027#E99B63\u0027\n        WHEN Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027 THEN \u0027#29B3FF\u0027\n        WHEN Viagem.Status = \u0027Cancelada\u0027 THEN \u0027#E34234\u0027\n        WHEN Viagem.Status = \u0027Aberta\u0027 AND ISNULL(Viagem.StatusAgendamento, 0) = 0 THEN \u0027#FFD774\u0027\n        WHEN Viagem.Status = \u0027Realizada\u0027 AND ISNULL(Viagem.FoiAgendamento, 0) = 1 THEN \u0027#52688F\u0027\n        WHEN Viagem.Status = \u0027Realizada\u0027 THEN \u0027#75B390\u0027\n        WHEN Viagem.Finalidade = \u0027Evento\u0027 THEN \u0027#E99B63\u0027\n        ELSE \u0027#29B3FF\u0027\n    END,\n\n    CorTexto = CASE\n        WHEN (Viagem.StatusAgendamento = 1 AND Viagem.Status \u003c\u003e \u0027Cancelada\u0027)\n          OR (Viagem.Status = \u0027Realizada\u0027)\n          OR (Viagem.Finalidade = \u0027Evento\u0027)\n          OR (Viagem.Status = \u0027Cancelada\u0027)\n          THEN \u0027white\u0027\n        WHEN (Viagem.Status = \u0027Aberta\u0027 AND ISNULL(Viagem.StatusAgendamento, 0) = 0)\n          THEN \u0027#2B6670\u0027\n        ELSE \u0027white\u0027\n    END,\n\n    -- Descrição Montada\n    DescricaoMontada = \n        (\n            ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\n            + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\n            + CASE \n                WHEN Viagem.Descricao IS NOT NULL AND LEN(LTRIM(RTRIM(Viagem.Descricao))) \u003e 0\n                THEN \u0027 - \u0027 + Viagem.Descricao\n                ELSE \u0027\u0027\n              END\n        ),\n\n    -- Descrição especial para eventos (seguindo a mesma lógica do C#)\n    DescricaoEvento =\n        CASE\n            WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Viagem.NomeEvento IS NOT NULL AND Viagem.Status = \u0027Cancelada\u0027\n                THEN \u0027Evento CANCELADO: \u0027 + Viagem.NomeEvento + \u0027 / \u0027\n                    + ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\n                    + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\n                    + CASE WHEN Viagem.Descricao IS NOT NULL AND LEN(LTRIM(RTRIM(Viagem.Descricao))) \u003e 0\n                        THEN \u0027 - \u0027 + Viagem.Descricao\n                        ELSE \u0027\u0027 END\n            WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Viagem.NomeEvento IS NOT NULL\n                THEN \u0027Evento: \u0027 + Viagem.NomeEvento + \u0027 / \u0027\n                    + ISNULL(Motorista.Nome, \u0027(Motorista Não Identificado)\u0027)\n                    + \u0027 - (\u0027 + ISNULL(Veiculo.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\n                    + CASE WHEN Viagem.Descricao IS NOT NULL AND LEN(LTRIM(RTRIM(Viagem.Descricao))) \u003e 0\n                        THEN \u0027 - \u0027 + Viagem.Descricao\n                        ELSE \u0027\u0027 END\n            ELSE NULL\n        END,\n\n    -- Título do Evento\n    Titulo = \n        CASE\n            WHEN Viagem.Finalidade = \u0027Evento\u0027 AND Viagem.NomeEvento IS NOT NULL THEN \u0027Evento : \u0027 + Viagem.NomeEvento\n            ELSE Viagem.Finalidade\n        END\n\nFROM dbo.SetorSolicitante\nRIGHT OUTER JOIN dbo.Viagem\n    ON SetorSolicitante.SetorSolicitanteId = Viagem.SetorSolicitanteId\nLEFT OUTER JOIN dbo.Requisitante\n    ON Requisitante.RequisitanteId = Viagem.RequisitanteId\nLEFT OUTER JOIN dbo.Motorista\n    ON Motorista.MotoristaId = Viagem.MotoristaId\nLEFT OUTER JOIN dbo.Veiculo\n    ON Veiculo.VeiculoId = Viagem.VeiculoId\nINNER JOIN dbo.ModeloVeiculo\n    ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n    ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\n-- Create or alter view [dbo].[ViewProcuraFicha]\n--;",
                     "ViewItensManutencao":  "CREATE OR ALTER VIEW dbo.ViewItensManutencao \nAS SELECT\n   im.ItemManutencaoId,\n   im.ManutencaoId,\n   im.TipoItem,\n   im.NumFicha,\n   CONVERT(varchar(10), im.DataItem, 103) AS DataItem,  -- dd/MM/yyyy\n   im.Resumo,\n   im.Descricao,\n   im.Status,\n   im.ImagemOcorrencia,\n   m.Nome AS NomeMotorista,\n   im.MotoristaId,\n   im.ViagemId\nFROM dbo.ItensManutencao AS im\nLEFT JOIN dbo.Motorista  AS m\n  ON m.MotoristaId = im.MotoristaId\n-- Create or alter view [dbo].[ViewAlocacaoMotorista]\n--;",
                     "ViewExisteItemContrato":  "CREATE OR ALTER VIEW dbo.ViewExisteItemContrato \nAS SELECT\n  ItemVeiculoContrato.ItemVeiculoId\n ,ItemVeiculoContrato.NumItem\n ,ItemVeiculoContrato.Descricao\n ,ItemVeiculoContrato.Quantidade\n ,ItemVeiculoContrato.ValorUnitario AS ValUnitario\n ,ItemVeiculoContrato.RepactuacaoContratoId\n ,(SELECT DISTINCT ItemVeiculoId FROM Veiculo WHERE Veiculo.ItemVeiculoId = ItemVeiculoContrato.ItemVeiculoId) AS ExisteVeiculo\nFROM dbo.ItemVeiculoContrato\n-- Create or alter view [dbo].[ViewAbastecimentosPBIProprio]\n--;",
                     "ViewMediaConsumo":  "CREATE OR ALTER VIEW dbo.ViewMediaConsumo \nAS SELECT\n  Abastecimento.VeiculoId\n ,CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) AS ConsumoGeral\nFROM dbo.Abastecimento\nGROUP BY Abastecimento.VeiculoId\n-- Create or alter view [dbo].[ViewAbastecimentos]\n--;",
                     "ViewAbastecimentosPBIContrato":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosPBIContrato \nAS SELECT\n  Veiculo.VeiculoId\n ,Veiculo.Placa\n ,Veiculo.Categoria\n ,ItemVeiculoContrato.Descricao\nFROM dbo.VeiculoContrato\nINNER JOIN dbo.Veiculo\n  ON VeiculoContrato.VeiculoId = Veiculo.VeiculoId\nINNER JOIN dbo.ItemVeiculoContrato\n  ON Veiculo.ItemVeiculoId = ItemVeiculoContrato.ItemVeiculoId\nINNER JOIN dbo.RepactuacaoContrato\n  ON ItemVeiculoContrato.RepactuacaoContratoId = RepactuacaoContrato.RepactuacaoContratoId\n    AND VeiculoContrato.ContratoId = RepactuacaoContrato.ContratoId\n-- Create table [dbo].[RepactuacaoVeiculo]\n--;",
                     "ViewCustosViagem":  "CREATE OR ALTER VIEW dbo.ViewCustosViagem \nAS SELECT\n  Viagem.NoFichaVistoria\n ,Viagem.ViagemId\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS DataFinal\n ,FORMAT(Viagem.HoraInicio, \u0027HH:mm\u0027) AS HoraInicio\n ,FORMAT(Viagem.HoraFim, \u0027HH:mm\u0027) AS HoraFim\n ,Viagem.Finalidade\n ,Viagem.Status\n ,Viagem.KmInicial\n ,Viagem.KmFinal\n ,Viagem.KmFinal - Viagem.KmInicial AS Quilometragem\n ,FORMAT(Viagem.CustoMotorista, \u0027N2\u0027, \u0027pt-BR\u0027) AS CustoMotorista\n ,FORMAT(Viagem.CustoCombustivel, \u0027N2\u0027, \u0027pt-BR\u0027) AS CustoCombustivel\n ,FORMAT(Viagem.CustoVeiculo, \u0027N2\u0027, \u0027pt-BR\u0027) AS CustoVeiculo\n ,CONVERT(varchar, CAST(Viagem.CustoMotorista AS money), 1) AS CustoMotoristaFormatado\n ,Motorista.Nome AS NomeMotorista\n ,Motorista.MotoristaId\n ,Viagem.VeiculoId\n ,Viagem.StatusAgendamento\n ,Viagem.SetorSolicitanteId \n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\n ,ROW_NUMBER() OVER (ORDER BY Viagem.DataInicial, Viagem.HoraInicio) AS RowNum\nFROM dbo.Viagem\nLEFT OUTER JOIN dbo.Motorista\n  ON Motorista.MotoristaId = Viagem.MotoristaId\nLEFT OUTER JOIN dbo.Veiculo\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\nINNER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nWHERE Viagem.Status = \u0027Realizada\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\n-- Create or alter view [dbo].[ViewCustosVeiculos]\n--;",
                     "ViewManutencao":  "CREATE OR ALTER VIEW dbo.[ViewManutencao.OLD] \nAS SELECT\n  Manutencao.ManutencaoId\n ,Manutencao.NumOS\n ,CONVERT(VARCHAR, Manutencao.DataSolicitacao, 103) AS DataSolicitacao\n ,Manutencao.ResumoOS\n ,CONVERT(VARCHAR, Manutencao.DataRecolhimento, 103) AS DataRecolhimento\n ,CONVERT(VARCHAR, Manutencao.DataRecebimentoReserva, 103) AS DataRecebimentoReserva\n ,CONVERT(VARCHAR, Manutencao.DataDevolucaoReserva, 103) AS DataDevolucaoReserva\n ,CONVERT(VARCHAR, Manutencao.DataEntrega, 103) AS DataEntrega\n ,Manutencao.StatusOS\n ,Manutencao.VeiculoId\n ,\u0027(\u0027 + ViewVeiculos.Placa + \u0027) \u0027 + ViewVeiculos.MarcaModelo AS DescricaoVeiculo\n ,CASE\n    WHEN Manutencao.ReservaEnviado IS NULL THEN \u0027\u0027\n    WHEN Manutencao.ReservaEnviado = 1 THEN \u0027Enviado\u0027\n    ELSE \u0027Ausente\u0027\n  END AS Reserva\n ,CASE\n    WHEN Manutencao.DataDevolucao IS NULL THEN \u002701/01/2001\u0027\n    ELSE CONVERT(VARCHAR, Manutencao.DataDevolucao, 103)\n  END AS DataDevolucao\n ,CASE\n    WHEN Manutencao.DataDevolucao IS NULL THEN \u002701\u0027\n    WHEN Manutencao.DataEntrega IS NOT NULL THEN DATEDIFF(DAY, Manutencao.DataEntrega, Manutencao.DataDevolucao)\n    ELSE DATEDIFF(DAY, Manutencao.DataSolicitacao, Manutencao.DataDevolucao)\n  END AS DiasGlosa\n ,ItemVeiculoContrato.NumItem\nFROM dbo.ViewVeiculos\nRIGHT OUTER JOIN dbo.Manutencao\n  ON ViewVeiculos.VeiculoId = Manutencao.VeiculoId\nLEFT OUTER JOIN dbo.ItemVeiculoContrato\n  ON ItemVeiculoContrato.ItemVeiculoId = ViewVeiculos.ItemVeiculoId\n-- Create or alter view [dbo].[ViewTeste]\n--;",
                     "ViewAbastecimentosItensPBI":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentosItensPBI \nAS SELECT\n  ViewAbastecimentosPBIAta.VeiculoID,\n  ViewAbastecimentosPBIAta.Descricao,\n  ViewAbastecimentosPBIAta.Categoria\nFROM dbo.ViewAbastecimentosPBIAta\n\nUNION\n\nSELECT\n  ViewAbastecimentosPBIContrato.VeiculoID,\n  ViewAbastecimentosPBIContrato.Descricao,\n  ViewAbastecimentosPBIContrato.Categoria \nFROM dbo.ViewAbastecimentosPBIContrato\n  \nUNION \n\nSELECT\n  ViewAbastecimentosPBIProprio.VeiculoID,\n  ViewAbastecimentosPBIProprio.Descricao,\n  ViewAbastecimentosPBIProprio.Categoria \nFROM dbo.ViewAbastecimentosPBIProprio\n-- Create table [dbo].[Empenho]\n--;",
                     "ViewLotacaoMotorista":  "CREATE OR ALTER VIEW dbo.ViewLotacaoMotorista \nAS SELECT TOP 1000000\n  Unidade.UnidadeId\n ,LotacaoMotorista.LotacaoMotoristaId\n ,Motorista.MotoristaId\n ,LotacaoMotorista.Lotado\n ,LotacaoMotorista.Motivo\n ,Unidade.Descricao AS Unidade\n ,CONVERT(VARCHAR, LotacaoMotorista.DataInicio, 103) AS DataInicial\n ,CONVERT(VARCHAR, LotacaoMotorista.DataFim, 103) AS DataFim\n ,Motorista_1.Nome AS MotoristaCobertura\nFROM dbo.LotacaoMotorista\nLEFT OUTER JOIN dbo.Unidade\n  ON LotacaoMotorista.UnidadeId = Unidade.UnidadeId\nINNER JOIN dbo.Motorista\n  ON LotacaoMotorista.MotoristaId = Motorista.MotoristaId\nLEFT OUTER JOIN dbo.Motorista Motorista_1\n  ON Motorista_1.MotoristaId = LotacaoMotorista.MotoristaCoberturaId\nORDER BY LotacaoMotorista.DataInicio DESC\n-- Create table [dbo].[Lavagem]\n--;",
                     "ViewViagensAgenda":  "CREATE OR ALTER VIEW dbo.ViewViagensAgenda\r\nWITH SCHEMABINDING\r\nAS\r\n-- ================================================================\r\n-- VIEW: ViewViagensAgenda\r\n-- Descrição: View para alimentar o calendário FullCalendar\r\n-- Atualizado: Cores correspondentes aos Modais do sistema\r\n-- Última alteração: 18/01/2026 - Adicionado campo Descricao\r\n-- ================================================================\r\n\r\nSELECT\r\n    -- ============================================================\r\n    -- IDENTIFICADORES\r\n    -- ============================================================\r\n    v.ViagemId,\r\n    v.MotoristaId,\r\n    v.VeiculoId,\r\n    v.EventoId,\r\n\r\n    -- ============================================================\r\n    -- DATAS E HORÁRIOS\r\n    -- ============================================================\r\n    v.DataInicial,\r\n    v.HoraInicio,\r\n    v.DataFinal,\r\n    v.HoraFim,\r\n\r\n    -- Campo Start para FullCalendar (DATETIME combinando data + hora)\r\n    CONVERT(\r\n        DATETIME,\r\n        CONVERT(VARCHAR(10), v.DataInicial, 120) + \u0027 \u0027 + CONVERT(VARCHAR(8), v.HoraInicio, 108),\r\n        120\r\n    ) AS [Start],\r\n\r\n    -- Campo End para FullCalendar\r\n    v.HoraFim AS [End],\r\n\r\n    -- ============================================================\r\n    -- STATUS E FLAGS\r\n    -- ============================================================\r\n    v.Status,\r\n    v.StatusAgendamento,\r\n    v.FoiAgendamento,\r\n    v.Finalidade,\r\n\r\n    -- ============================================================\r\n    -- INFORMAÇÕES DO EVENTO\r\n    -- ============================================================\r\n    v.NomeEvento,\r\n    e.Nome AS NomeEventoFull,\r\n\r\n    -- ============================================================\r\n    -- INFORMAÇÕES DE MOTORISTA E VEÍCULO\r\n    -- ============================================================\r\n    m.Nome AS NomeMotorista,\r\n    vec.Placa,\r\n\r\n    -- ============================================================\r\n    -- TÍTULO DO EVENTO NA AGENDA\r\n    -- ============================================================\r\n    Titulo = CASE\r\n        WHEN v.Finalidade = \u0027Evento\u0027 AND e.Nome IS NOT NULL\r\n            THEN \u0027Evento: \u0027 + e.Nome\r\n        ELSE v.Finalidade\r\n    END,\r\n\r\n    -- ============================================================\r\n    -- COR DO EVENTO - Correspondente aos Headers dos Modais\r\n    -- ============================================================\r\n    -- Prioridade: 1. Evento, 2. Cancelada, 3. Realizada, 4. Agendada, 5. Aberta\r\n    CorEvento = CASE\r\n        -- EVENTO (Finalidade = \u0027Evento\u0027) - Bege claro #A39481 (20% mais claro)\r\n        WHEN v.Finalidade = \u0027Evento\u0027\r\n            THEN \u0027#A39481\u0027\r\n\r\n        -- CANCELADA - Vinho #722F37\r\n        WHEN v.Status = \u0027Cancelada\u0027\r\n            THEN \u0027#722F37\u0027\r\n\r\n        -- REALIZADA - Azul Petróleo #154c62\r\n        WHEN v.Status = \u0027Realizada\u0027\r\n            THEN \u0027#154c62\u0027\r\n\r\n        -- AGENDADA (Status = \u0027Agendada\u0027 OU Status = \u0027Aberta\u0027 com StatusAgendamento = 1) - Laranja #FFA726\r\n        WHEN v.Status = \u0027Agendada\u0027\r\n            THEN \u0027#FFA726\u0027\r\n        WHEN v.Status = \u0027Aberta\u0027 AND ISNULL(CAST(v.StatusAgendamento AS INT), 0) = 1\r\n            THEN \u0027#FFA726\u0027\r\n\r\n        -- ABERTA (viagem já transformada) - Verde Militar #3d5c3d\r\n        WHEN v.Status = \u0027Aberta\u0027 AND ISNULL(CAST(v.StatusAgendamento AS INT), 0) = 0\r\n            THEN \u0027#476b47\u0027\r\n\r\n        -- DEFAULT - Cinza\r\n        ELSE \u0027#6c757d\u0027\r\n    END,\r\n\r\n    -- ============================================================\r\n    -- COR DO TEXTO - Branco para todas (fundos escuros)\r\n    -- ============================================================\r\n    CorTexto = \u0027#FFFFFF\u0027,\r\n\r\n    -- ============================================================\r\n    -- DESCRIÇÃO GENÉRICA (sem HTML)\r\n    -- ============================================================\r\n    DescricaoMontada =\r\n        ISNULL(m.Nome, \u0027(Motorista Não Informado)\u0027)\r\n        + \u0027 - (\u0027 + ISNULL(vec.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n        + CASE\r\n            WHEN v.DescricaoSemFormato IS NOT NULL\r\n            THEN \u0027 - \u0027 +\r\n                REPLACE(\r\n                    REPLACE(\r\n                        REPLACE(\r\n                            CAST(v.DescricaoSemFormato AS VARCHAR(MAX)),\r\n                            CHAR(13), \u0027\u0027\r\n                        ),\r\n                        CHAR(10), \u0027 \u0027\r\n                    ),\r\n                    CHAR(9), \u0027 \u0027\r\n                )\r\n            ELSE \u0027\u0027\r\n        END,\r\n\r\n    -- ============================================================\r\n    -- DESCRIÇÃO ESPECIAL PARA EVENTOS\r\n    -- ============================================================\r\n    DescricaoEvento = CASE\r\n        -- Evento Cancelado\r\n        WHEN v.Finalidade = \u0027Evento\u0027 AND e.Nome IS NOT NULL AND v.Status = \u0027Cancelada\u0027\r\n            THEN \u0027Evento CANCELADO: \u0027 + e.Nome + \u0027 / \u0027\r\n                + ISNULL(m.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n                + \u0027 - (\u0027 + ISNULL(vec.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n                + CASE\r\n                    WHEN v.DescricaoSemFormato IS NOT NULL\r\n                    THEN \u0027 - \u0027 +\r\n                        REPLACE(\r\n                            REPLACE(\r\n                                REPLACE(\r\n                                    CAST(v.DescricaoSemFormato AS VARCHAR(MAX)),\r\n                                    CHAR(13), \u0027\u0027\r\n                                ),\r\n                                CHAR(10), \u0027 \u0027\r\n                            ),\r\n                            CHAR(9), \u0027 \u0027\r\n                        )\r\n                    ELSE \u0027\u0027\r\n                END\r\n\r\n        -- Evento Ativo\r\n        WHEN v.Finalidade = \u0027Evento\u0027 AND e.Nome IS NOT NULL\r\n            THEN \u0027Evento: \u0027 + e.Nome + \u0027 / \u0027\r\n                + ISNULL(m.Nome, \u0027(Motorista Não Identificado)\u0027)\r\n                + \u0027 - (\u0027 + ISNULL(vec.Placa, \u0027Sem Veículo\u0027) + \u0027)\u0027\r\n                + CASE\r\n                    WHEN v.DescricaoSemFormato IS NOT NULL\r\n                    THEN \u0027 - \u0027 +\r\n                        REPLACE(\r\n                            REPLACE(\r\n                                REPLACE(\r\n                                    CAST(v.DescricaoSemFormato AS VARCHAR(MAX)),\r\n                                    CHAR(13), \u0027\u0027\r\n                                ),\r\n                                CHAR(10), \u0027 \u0027\r\n                            ),\r\n                            CHAR(9), \u0027 \u0027\r\n                        )\r\n                    ELSE \u0027\u0027\r\n                END\r\n\r\n        -- Não é evento\r\n        ELSE NULL\r\n    END,\r\n\r\n    -- ============================================================\r\n    -- DESCRIÇÃO PURA (NOVO CAMPO - 18/01/2026)\r\n    -- Apenas a descrição da viagem, sem motorista/placa\r\n    -- Para uso em tooltips customizadas\r\n    -- ============================================================\r\n    Descricao = CASE\r\n        WHEN v.DescricaoSemFormato IS NOT NULL\r\n        THEN\r\n            REPLACE(\r\n                REPLACE(\r\n                    REPLACE(\r\n                        CAST(v.DescricaoSemFormato AS VARCHAR(MAX)),\r\n                        CHAR(13), \u0027\u0027\r\n                    ),\r\n                    CHAR(10), \u0027 \u0027\r\n                ),\r\n                CHAR(9), \u0027 \u0027\r\n            )\r\n        ELSE NULL\r\n    END\r\n\r\nFROM dbo.Viagem v WITH (NOLOCK)\r\nLEFT JOIN dbo.Motorista m WITH (NOLOCK) ON v.MotoristaId = m.MotoristaId\r\nLEFT JOIN dbo.Veiculo vec WITH (NOLOCK) ON v.VeiculoId = vec.VeiculoId\r\nLEFT JOIN dbo.Evento e WITH (NOLOCK) ON v.EventoId = e.EventoId\r\n\r\nWHERE v.DataInicial IS NOT NULL\r\n  AND v.HoraInicio IS NOT NULL",
                     "ViewContratoFornecedor":  "CREATE OR ALTER VIEW dbo.ViewContratoFornecedor \nAS SELECT TOP 100000\n  Contrato.ContratoId\n ,Contrato.AnoContrato + \u0027/\u0027 + Contrato.NumeroContrato + \u0027 - \u0027 + Fornecedor.DescricaoFornecedor AS Descricao\n ,Contrato.TipoContrato\nFROM dbo.Fornecedor\nINNER JOIN dbo.Contrato\n  ON Fornecedor.FornecedorId = Contrato.FornecedorId\nORDER BY Contrato.AnoContrato DESC\n-- Create table [dbo].[RepactuacaoContrato]\n--;",
                     "ViewTeste":  "CREATE OR ALTER VIEW dbo.ViewTeste \nAS SELECT\n  Abastecimento.AbastecimentoId\n ,Abastecimento.Litros\n ,Abastecimento.ValorUnitario\n ,Abastecimento.DataHora\n ,Abastecimento.KmRodado\n ,Abastecimento.Hodometro\n ,Veiculo.Placa\n ,ModeloVeiculo.DescricaoModelo\n ,MarcaVeiculo.DescricaoMarca\n ,Combustivel.Descricao\n ,Motorista.Nome\n ,Unidade.Sigla\nFROM dbo.Abastecimento\nINNER JOIN dbo.Veiculo\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\nINNER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nINNER JOIN dbo.Combustivel\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\nINNER JOIN dbo.Motorista\n  ON Abastecimento.MotoristaId = Motorista.MotoristaId\nLEFT OUTER JOIN dbo.Unidade\n  ON Unidade.UnidadeId = Motorista.UnidadeId\n-- Create or alter view [dbo].[ViewSabrina]\n--;",
                     "ViewContratoFornecedor_Veiculos":  "CREATE OR ALTER VIEW dbo.ViewContratoFornecedor_Veiculos \nAS SELECT TOP 100000\n  Contrato.ContratoId\n ,Contrato.AnoContrato + \u0027/\u0027 + Contrato.NumeroContrato + \u0027 - \u0027 + Fornecedor.DescricaoFornecedor AS ContratoVeiculo\n ,Contrato.TipoContrato\nFROM dbo.Fornecedor\nINNER JOIN dbo.Contrato\n  ON Fornecedor.FornecedorId = Contrato.FornecedorId\nORDER BY Contrato.AnoContrato DESC\n-- Create or alter view [dbo].[ViewContratoFornecedor]\n--;",
                     "ViewVeiculos_Ultima":  "CREATE OR ALTER VIEW dbo.ViewVeiculos_Ultima \nAS SELECT\n  Veiculo.VeiculoId\n ,Veiculo.Placa\n ,LEFT(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), LEN(SUBSTRING(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027), CHARINDEX(\u0027 \u0027, REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027))), LEN(REPLACE(REPLACE(REPLACE(CONVERT(VARCHAR, CAST(Veiculo.Quilometragem AS MONEY), 1), \u0027,\u0027, \u0027_\u0027), \u0027.\u0027, \u0027,\u0027), \u0027_\u0027, \u0027.\u0027)))) - 2) AS Quilometragem\n ,MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS MarcaModelo\n ,Unidade.Sigla\n ,Combustivel.Descricao\n ,CASE\n    WHEN CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2)) IS NULL THEN 0\n    ELSE CAST(ROUND(AVG(Abastecimento.KmRodado / Abastecimento.Litros), 2) AS DEC(10, 2))\n  END AS Consumo\n ,CASE\n    WHEN ViewContratoFornecedor_Veiculos.ContratoVeiculo IS NOT NULL THEN ViewContratoFornecedor_Veiculos.ContratoVeiculo\n    WHEN ViewAtaFornecedor.AtaVeiculo IS NOT NULL THEN ViewAtaFornecedor.AtaVeiculo + \u0027 \u003cb\u003e(Ata)\u003c/b\u003e \u0027\n    ELSE \u0027\u003cb\u003e(Veículo Próprio)\u003c/b\u003e\u0027\n  END AS OrigemVeiculo\n ,CONVERT(VARCHAR, Veiculo.DataAlteracao, 103) AS DataAlteracao\n ,AspNetUsers.NomeCompleto\n ,CASE\n    WHEN Veiculo.Reserva = 0 THEN \u0027Efetivo\u0027\n    ELSE \u0027Reserva\u0027\n  END AS VeiculoReserva\n ,Veiculo.Status\n ,Veiculo.CombustivelId\n ,ROW_NUMBER() OVER (ORDER BY Veiculo.Placa) AS RowNum\n ,ViewContratoFornecedor_Veiculos.ContratoId\n ,ViewAtaFornecedor.AtaId\n ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\n ,ViewAtaFornecedor.AtaVeiculo\n ,Veiculo.VeiculoProprio\n ,Veiculo.ItemVeiculoAtaId\n ,Veiculo.ItemVeiculoId\n ,Veiculo.ValorMensal\nFROM dbo.Abastecimento\nRIGHT OUTER JOIN dbo.Veiculo\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nLEFT OUTER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nLEFT OUTER JOIN dbo.Unidade\n  ON Unidade.UnidadeId = Veiculo.UnidadeId\nLEFT OUTER JOIN dbo.Combustivel\n  ON Combustivel.CombustivelId = Veiculo.CombustivelId\nLEFT OUTER JOIN dbo.ViewContratoFornecedor_Veiculos\n  ON ViewContratoFornecedor_Veiculos.ContratoId = Veiculo.ContratoId\nLEFT OUTER JOIN dbo.ViewAtaFornecedor\n  ON ViewAtaFornecedor.AtaId = Veiculo.AtaId\nINNER JOIN dbo.AspNetUsers\n  ON AspNetUsers.Id = Veiculo.UsuarioIdAlteracao\nGROUP BY Veiculo.VeiculoId\n        ,Veiculo.Placa\n        ,Veiculo.Quilometragem\n        ,MarcaVeiculo.DescricaoMarca\n        ,ModeloVeiculo.DescricaoModelo\n        ,Unidade.Sigla\n        ,Combustivel.Descricao\n        ,ViewContratoFornecedor_Veiculos.ContratoId\n        ,Veiculo.DataAlteracao\n        ,AspNetUsers.NomeCompleto\n        ,Veiculo.Reserva\n        ,Veiculo.Status\n        ,Veiculo.CombustivelId\n        ,ViewAtaFornecedor.AtaId\n        ,ViewContratoFornecedor_Veiculos.ContratoVeiculo\n        ,ViewAtaFornecedor.AtaVeiculo\n        ,Veiculo.VeiculoProprio\n        ,Veiculo.ItemVeiculoAtaId\n        ,Veiculo.ItemVeiculoId\n        ,Veiculo.ValorMensal\n-- Create or alter view [dbo].[ViewVeiculos_Original]\n--;",
                     "vw_RankingMotoristasPorPeriodo":  "CREATE OR ALTER VIEW dbo.vw_RankingMotoristasPorPeriodo\nAS\nWITH ViagensPorMotorista AS (\n    SELECT\n        YEAR(v.DataInicial) AS Ano,\n        MONTH(v.DataInicial) AS Mes,\n        v.MotoristaId,\n        m.Nome AS NomeMotorista,\n        COUNT(*) AS TotalViagens,\n        SUM(\n            CASE\n                WHEN v.KmInicial IS NOT NULL\n                     AND v.KmFinal IS NOT NULL\n                     AND v.KmFinal \u003e= v.KmInicial\n                     AND (v.KmFinal - v.KmInicial) \u003c= 2000\n                THEN v.KmFinal - v.KmInicial\n                ELSE 0\n            END\n        ) AS KmTotal\n    FROM Viagem v\n    INNER JOIN Motorista m ON v.MotoristaId = m.MotoristaId\n    WHERE v.MotoristaId IS NOT NULL\n      AND v.DataInicial IS NOT NULL\n    GROUP BY YEAR(v.DataInicial), MONTH(v.DataInicial), v.MotoristaId, m.Nome\n)\nSELECT\n    Ano,\n    Mes,\n    MotoristaId,\n    NomeMotorista,\n    TotalViagens,\n    KmTotal,\n    ROW_NUMBER() OVER (PARTITION BY Ano, Mes ORDER BY TotalViagens DESC, KmTotal DESC) AS PosicaoViagens,\n    ROW_NUMBER() OVER (PARTITION BY Ano, Mes ORDER BY KmTotal DESC, TotalViagens DESC) AS PosicaoKm\nFROM ViagensPorMotorista;\n-- Create or alter view [dbo].[ViewViagensAgendaTodosMeses]\n--;",
                     "ViewManutencao_2025":  "CREATE OR ALTER VIEW dbo.[ViewManutencao_2025.11.04] \nAS SELECT \n    -- Campo inicial solicitado\n    ISNULL(v.Placa,\u0027\u0027) + \u0027 - \u0027 + ISNULL(ma.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(m.DescricaoModelo,\u0027\u0027) AS PlacaDescricao,\n\n    -- ===== Chaves e referência ao contrato (para filtrar na LINQ) =====\n    vc.ContratoId,\n\n    -- ===== Manutenção =====\n    b.ManutencaoId,\n    b.NumOS,\n    b.ResumoOS,\n\n    -- strings formatadas (dd/MM/yyyy)\n    CONVERT(CHAR(10), b.DataSolicitacao,     103) AS DataSolicitacao,\n    CONVERT(CHAR(10), b.DataDisponibilidade, 103) AS DataDisponibilidade,\n    CONVERT(CHAR(10), b.DataRecolhimento,    103) AS DataRecolhimento,\n    CONVERT(CHAR(10), b.DataRecebimentoReserva, 103) AS DataRecebimentoReserva,\n    CONVERT(CHAR(10), b.DataDevolucaoReserva,   103) AS DataDevolucaoReserva,\n    CONVERT(CHAR(10), b.DataEntrega,         103) AS DataEntrega,\n    CONVERT(CHAR(10), b.DataDevolucao,       103) AS DataDevolucao,\n\n    -- datas cruas\n    b.DataSolicitacao AS DataSolicitacaoRaw,\n    b.DataDevolucao   AS DataDevolucaoRaw,\n\n    b.StatusOS,\n    b.VeiculoId,\n\n    -- Derivado (Marca/Modelo) e informações auxiliares\n    ma.DescricaoMarca + \u0027/\u0027 + m.DescricaoModelo AS DescricaoVeiculo,\n    u.Sigla                                    AS Sigla,\n    c.Descricao                                AS CombustivelDescricao,\n    v.Placa                                    AS Placa,\n\n    -- Reserva em texto (compatibilidade)\n    CASE\n        WHEN b.ReservaEnviado = 1 THEN \u0027Enviado\u0027\n        WHEN b.ReservaEnviado = 0 THEN \u0027Ausente\u0027\n        ELSE \u0027\u0027\n    END AS Reserva,\n\n    -- Novo: ReservaEnviado (Sim/Não)\n    CASE WHEN b.ReservaEnviado = 1 THEN \u0027Sim\u0027 ELSE \u0027Não\u0027 END AS ReservaEnviado,\n\n    b.VeiculoReservaId,\n\n    -- ===== Planilha de Glosa (Item do contrato, via Veiculo.ItemVeiculoId) =====\n    ivc.Descricao,\n    ivc.Quantidade,\n    ivc.ValorUnitario,\n\n    -- DiasGlosa (via APPLY)\n    d.DiasCalc AS DiasGlosa,\n\n    -- ValorGlosa (trata NULLs e usa DECIMAL p/ precisão)\n    CAST(\n        d.DiasCalc * COALESCE(CAST(ivc.ValorUnitario AS DECIMAL(18,2)), 0)\n        AS DECIMAL(18,2)\n    ) AS ValorGlosa,\n\n    -- Dias (0 quando sem devolução, senão diff Solicitação-\u003eDevolução)\n    CASE\n        WHEN b.DataDevolucao IS NULL THEN 0\n        ELSE DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\n    END AS Dias,\n\n    -- Atributos de UI\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS Habilitado,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027fa-regular fa-lock\u0027 ELSE \u0027far fa-flag-checkered\u0027 END                 AS Icon,\n\n    -- Item do contrato\n    ivc.NumItem,\n\n    -- Campos \"montados\"\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoEditar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityEditar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Visualizar Manutenção\u0027 ELSE \u0027Edita a Ordem de Serviço!\u0027 END        AS OpacityTooltipEditarEditar,\n\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoBaixar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027\u0027 ELSE \u0027data-toggle=\u0027\u0027modal\u0027\u0027 data-target=\u0027\u0027#modalManutencao\u0027\u0027\u0027 END AS ModalBaixarAttrs,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityBaixar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027Desabilitado\u0027 ELSE \u0027Fecha a Ordem de Serviço!\u0027 END                 AS Tooltip,\n\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027disabled\u0027 ELSE \u0027\u0027 END                                              AS HabilitadoCancelar,\n    CASE WHEN b.StatusOS IN (\u0027Fechada\u0027,\u0027Cancelada\u0027) THEN \u0027opacity:0.3; pointer-events:none;\u0027 ELSE \u0027opacity:1;\u0027 END           AS OpacityCancelar,\n    CASE\n        WHEN b.StatusOS = \u0027Cancelada\u0027 THEN \u0027Manutenção Cancelada\u0027\n        WHEN b.StatusOS = \u0027Fechada\u0027   THEN \u0027OS Fechada/Baixada\u0027\n        ELSE \u0027Cancelar Manutenção\u0027\n    END AS TooltipCancelar,\n\n    -- ========= Novos campos no formato solicitado =========\n    -- Veiculo principal: \"Placa - (Marca/Modelo)\"\n    ISNULL(v.Placa,\u0027\u0027) + \u0027 - (\u0027 + ISNULL(ma.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(m.DescricaoModelo,\u0027\u0027) + \u0027)\u0027 AS Veiculo,\n\n    -- Carro de reserva (quando houver): \"Placa - (Marca/Modelo)\"\n    CASE\n        WHEN b.VeiculoReservaId IS NULL THEN NULL\n        ELSE ISNULL(vr.Placa,\u0027\u0027) + \u0027 - (\u0027 + ISNULL(mar.DescricaoMarca,\u0027\u0027) + \u0027/\u0027 + ISNULL(mr.DescricaoModelo,\u0027\u0027) + \u0027)\u0027\n    END AS CarroReserva\n\nFROM dbo.Manutencao               AS b\nLEFT JOIN dbo.Veiculo             AS v   ON v.VeiculoId       = b.VeiculoId\nLEFT JOIN dbo.VeiculoContrato     AS vc  ON vc.VeiculoId      = v.VeiculoId\nLEFT JOIN dbo.ModeloVeiculo       AS m   ON m.ModeloId        = v.ModeloId\nLEFT JOIN dbo.MarcaVeiculo        AS ma  ON ma.MarcaId        = v.MarcaId\nLEFT JOIN dbo.Combustivel         AS c   ON c.CombustivelId   = v.CombustivelId\nLEFT JOIN dbo.Unidade             AS u   ON u.UnidadeId       = v.UnidadeId\nLEFT JOIN dbo.ItemVeiculoContrato AS ivc ON ivc.ItemVeiculoId = v.ItemVeiculoId\n\n-- === Inclusão pedida: veículo de reserva ===\nLEFT JOIN dbo.Veiculo             AS vr  ON vr.VeiculoId      = b.VeiculoReservaId\nLEFT JOIN dbo.MarcaVeiculo        AS mar ON mar.MarcaId       = vr.MarcaId\nLEFT JOIN dbo.ModeloVeiculo       AS mr  ON mr.ModeloId       = vr.ModeloId\n\nCROSS APPLY (\n  SELECT DiasCalc =\n    CASE\n      WHEN b.DataDevolucao IS NULL THEN 1\n      WHEN b.DataEntrega  IS NOT NULL THEN DATEDIFF(DAY, b.DataEntrega,  b.DataDevolucao)\n      ELSE                               DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao)\n    END\n) AS d\n\n--WHERE\n--    v.Status = 1\n--    AND b.DataDevolucao IS NOT NULL\n--    AND DATEDIFF(DAY, b.DataSolicitacao, b.DataDevolucao) \u003e 0\n-- Create or alter view [dbo].[ViewManutencao]\n--;",
                     "ViewOcorrencia":  "CREATE OR ALTER VIEW dbo.ViewOcorrencia \nWITH SCHEMABINDING\nAS SELECT\n  Viagem.VeiculoId\n ,Viagem.ViagemId\n ,Viagem.NoFichaVistoria\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\n ,Motorista.Nome AS NomeMotorista\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\n ,Viagem.ResumoOcorrencia\n ,Viagem.StatusOcorrencia\n ,Viagem.MotoristaId\n ,Viagem.ImagemOcorrencia\n ,Viagem.ItemManutencaoId\n ,Viagem.DescricaoOcorrencia\n ,Viagem.DescricaoSolucaoOcorrencia\nFROM dbo.Viagem\nINNER JOIN dbo.Motorista\n  ON Motorista.MotoristaId = Viagem.MotoristaId\nINNER JOIN dbo.Veiculo\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\nINNER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\n-- Create index [UK_ViewOcorrencia_ViagemId] on view [dbo].[ViewOcorrencia]\n--;",
                     "ViewEmpenhoMulta":  "CREATE OR ALTER VIEW dbo.ViewEmpenhoMulta \nAS SELECT\n  EmpenhoMulta.EmpenhoMultaId,\n  EmpenhoMulta.NotaEmpenho,\n  EmpenhoMulta.AnoVigencia,\n  EmpenhoMulta.SaldoInicial,\n  EmpenhoMulta.SaldoAtual,\n  EmpenhoMulta.OrgaoAutuanteId,\n  COUNT(DISTINCT MovimentacaoEmpenhoMulta.MovimentacaoId) AS Movimentacoes,\n  SUM(DISTINCT MovimentacaoEmpenhoMulta.Valor) AS SaldoMovimentacao,\n  SUM(DISTINCT Multa.ValorPago) AS SaldoMultas\nFROM dbo.EmpenhoMulta\nLEFT OUTER JOIN dbo.MovimentacaoEmpenhoMulta\n  ON EmpenhoMulta.EmpenhoMultaId = MovimentacaoEmpenhoMulta.EmpenhoMultaId \nLEFT OUTER JOIN dbo.Multa\n  ON EmpenhoMulta.EmpenhoMultaId = Multa.EmpenhoMultaId\nGROUP BY EmpenhoMulta.EmpenhoMultaId, EmpenhoMulta.NotaEmpenho, EmpenhoMulta.AnoVigencia, EmpenhoMulta.SaldoInicial, EmpenhoMulta.SaldoAtual, EmpenhoMulta.OrgaoAutuanteId\n-- Create or alter view [dbo].[ViewEdocMultas]\n--;",
                     "ViewRequisitantes":  "CREATE OR ALTER VIEW dbo.ViewRequisitantes \nAS SELECT\n  Requisitante.RequisitanteId\n ,CASE WHEN Requisitante.Ponto IS NULL AND SetorSolicitante.Sigla IS NULL THEN Requisitante.Nome + \u0027  - (\u0027 + SetorSolicitante.Nome + \u0027)\u0027 \n       WHEN Requisitante.Ponto IS NOT NULL AND SetorSolicitante.Sigla IS NULL THEN Requisitante.Nome  + \u0027 (\u0027 + Requisitante.Ponto + \u0027)\u0027 + \u0027 -  (\u0027 + SetorSolicitante.Nome + \u0027)\u0027 \n       WHEN Requisitante.Ponto IS NOT NULL AND SetorSolicitante.Sigla IS NOT NULL THEN Requisitante.Nome  + \u0027 (\u0027 + Requisitante.Ponto + \u0027)\u0027 + \u0027 -  (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027 \n  END AS Requisitante\n ,Requisitante.Status\n ,SetorSolicitante.Nome\n ,SetorSolicitante.Sigla\nFROM dbo.Requisitante\nINNER JOIN dbo.SetorSolicitante\n  ON Requisitante.SetorSolicitanteId = SetorSolicitante.SetorSolicitanteId\nWHERE Requisitante.Status = 1\n-- Create table [dbo].[Evento]\n--;",
                     "ViewManutencaoAberta_Base":  "CREATE OR ALTER VIEW dbo.ViewManutencaoAberta_Base \nAS SELECT\n    m.ManutencaoId,\n    m.NumOS,\n    m.DataSolicitacao,\n    m.ResumoOS,\n    m.DataRecolhimento,\n    m.DataRecebimentoReserva,\n    m.DataDevolucaoReserva,\n    m.DataDisponibilidade,\n    m.DataEntrega,\n    m.StatusOS,\n    m.VeiculoId,\n    v.ItemVeiculoId,  -- leva para a UI fazer LEFT JOIN\n    -- Concatenação determinística para descrição:\n    \u0027(\u0027 + v.Placa + \u0027) \u0027 + ma.DescricaoMarca + \u0027 / \u0027 + mo.DescricaoModelo AS DescricaoVeiculo,\n    CAST(ISNULL(m.ReservaEnviado, 0) AS bit) AS ReservaEnviado,\n    m.DataDevolucao,\n    -- Cálculo determinístico/preciso:\n    DATEDIFF(DAY, ISNULL(m.DataEntrega, m.DataSolicitacao), ISNULL(m.DataDevolucao, m.DataSolicitacao)) AS DiasGlosa\nFROM dbo.Manutencao      AS m\nJOIN dbo.Veiculo         AS v  ON m.VeiculoId = v.VeiculoId\nJOIN dbo.ModeloVeiculo   AS mo ON v.ModeloId  = mo.ModeloId       -- ajuste se o nome for diferente\nJOIN dbo.MarcaVeiculo    AS ma ON mo.MarcaId  = ma.MarcaId\nWHERE m.StatusOS = \u0027Aberta\u0027\n-- Create or alter view [dbo].[ViewManutencao.ATUAL]\n--;",
                     "ViewMotoristaFluxo":  "CREATE OR ALTER VIEW dbo.ViewMotoristaFluxo \nAS SELECT DISTINCT\n  convert(nvarchar(50), ViewFluxoEconomildo.MotoristaId) AS MotoristaId,\n  ViewFluxoEconomildo.NomeMotorista\nFROM dbo.ViewFluxoEconomildo\n-- Create table [dbo].[RankingMotoristasMensal]\n--;",
                     "ViewEdocMultas":  "CREATE OR ALTER VIEW dbo.ViewEdocMultas \nAS SELECT\n  Multa.MultaId\n ,Multa.NumInfracao\n ,CONVERT(VARCHAR, Multa.Data, 103) AS Data\n ,FORMAT(Multa.Hora, \u0027HH:mm\u0027) AS Hora\n ,Motorista.Nome\n ,Motorista.MotoristaId\n ,CASE\n    WHEN Motorista.Celular02 IS NULL THEN Motorista.Celular01\n    ELSE Motorista.Celular01 + \u0027 / \u0027 + Motorista.Celular02\n  END AS Telefone\n ,Veiculo.Placa\n ,Veiculo.VeiculoId\n ,OrgaoAutuante.Sigla\n ,OrgaoAutuante.OrgaoAutuanteId\n ,Multa.Localizacao\n ,TipoMulta.Artigo\n ,CONVERT(VARCHAR, Multa.Vencimento, 103) AS Vencimento\n ,Multa.ValorAteVencimento\n ,Multa.ValorPosVencimento\n ,Multa.ProcessoEDoc\n ,Multa.Status\n ,Multa.Fase\n ,TipoMulta.Descricao\n ,Multa.Observacao\n ,Multa.Paga\n ,Motorista.Ponto\n ,Contrato.AnoContrato + \u0027/\u0027 + Contrato.NumeroContrato AS NumContrato\n ,CASE\n    WHEN Multa.Paga = -1 THEN \u0027Pago\u0027\n  END AS Pago\n ,Fornecedor.DescricaoFornecedor\nFROM dbo.Multa\nLEFT OUTER JOIN dbo.Motorista\n  ON Multa.MotoristaId = Motorista.MotoristaId\nLEFT OUTER JOIN dbo.Veiculo\n  ON Multa.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.OrgaoAutuante\n  ON Multa.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\nLEFT OUTER JOIN dbo.TipoMulta\n  ON Multa.TipoMultaId = TipoMulta.TipoMultaId\nLEFT OUTER JOIN dbo.EmpenhoMulta\n  ON Multa.EmpenhoMultaId = EmpenhoMulta.EmpenhoMultaId\n    AND EmpenhoMulta.OrgaoAutuanteId = OrgaoAutuante.OrgaoAutuanteId\nLEFT OUTER JOIN dbo.Contrato\n  ON Multa.ContratoMotoristaId = Contrato.ContratoId\nLEFT OUTER JOIN dbo.Fornecedor\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\n-- Create table [dbo].[Abastecimento]\n--;",
                     "ViewCustosMotoristas":  "CREATE OR ALTER VIEW dbo.ViewCustosMotoristas \nAS SELECT\n  Motorista.Nome\n ,FORMAT(SUM(Viagem.CustoCombustivel), \u0027N2\u0027, \u0027pt-BR\u0027) AS Combustivel\n ,FORMAT(SUM(Viagem.CustoMotorista), \u0027N2\u0027, \u0027pt-BR\u0027) AS Motorista\n ,FORMAT(SUM(Viagem.CustoVeiculo), \u0027N2\u0027, \u0027pt-BR\u0027) AS Veiculo\n ,FORMAT(SUM(Viagem.KmFinal - Viagem.KmInicial), \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\nFROM dbo.Viagem\nINNER JOIN dbo.Motorista\n  ON Viagem.MotoristaId = Motorista.MotoristaId\nWHERE Viagem.Status = \u0027Realizada\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\nAND Motorista.TipoCondutor = \u0027Terceirizado\u0027\nAND MONTH(Viagem.DataInicial) = 05\nGROUP BY Motorista.Nome\n-- Create or alter view [dbo].[ViewCustosFinalidade]\n--;",
                     "ViewViagens_Sergio":  "CREATE OR ALTER VIEW dbo.ViewViagens_Sergio \nAS SELECT\n  Viagem.ViagemId\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\n ,FORMAT(Viagem.HoraInicio, \u0027HH:mm\u0027) AS HoraInicio\n ,Viagem.Descricao\n ,Viagem.KmInicial\n ,Viagem.KmFinal\n ,Viagem.CombustivelInicial\n ,Viagem.CombustivelFinal\n ,Viagem.NoFichaVistoria\n ,Viagem.Finalidade\n,CASE\n    WHEN Requisitante.Ramal IS NULL THEN Requisitante.Nome\n    ELSE Requisitante.Nome + \u0027 - (\u0027 + CONVERT(VARCHAR, Requisitante.Ramal) + \u0027)\u0027\n  END AS NomeRequisitante\n ,CASE\n    WHEN SetorSolicitante.Sigla IS NULL THEN SetorSolicitante.Nome\n    ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027\n  END AS NomeSetor\n ,Motorista.Nome AS NomeMotorista\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\n ,Veiculo.CombustivelId\n ,Viagem.FichaVistoria\n ,Viagem.Origem\n ,Viagem.Destino\n ,Viagem.Minutos\n ,Viagem.NomeEvento\nFROM dbo.SetorSolicitante\nRIGHT OUTER JOIN dbo.Viagem\n  ON SetorSolicitante.SetorSolicitanteId = Viagem.SetorSolicitanteId\nLEFT OUTER JOIN dbo.Requisitante\n  ON Requisitante.RequisitanteId = Viagem.RequisitanteId\nLEFT OUTER JOIN dbo.Motorista\n  ON Motorista.MotoristaId = Viagem.MotoristaId\nLEFT OUTER JOIN dbo.Veiculo\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\nINNER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\n-- Create or alter view [dbo].[ViewViagens]\n--;",
                     "ViewFichaViagem":  "CREATE OR ALTER VIEW dbo.ViewFichaViagem \nAS SELECT\n  CONVERT(NVARCHAR(100), Viagem.ViagemId) AS ViagemId\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS DataInicial\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS DataFinal\n ,FORMAT(Viagem.HoraInicio, \u0027HH:mm\u0027) AS HoraInicio\n ,FORMAT(Viagem.HoraFim, \u0027HH:mm\u0027) AS HoraFim\n ,Viagem.DescricaoSemFormato\n ,Viagem.KmInicial\n ,Viagem.KmFinal\n ,Viagem.ResumoOcorrencia\n ,Viagem.DescricaoOcorrencia\n ,Viagem.StatusOcorrencia\n ,Viagem.NoFichaVistoria\n ,Viagem.Finalidade\n ,Viagem.Origem\n ,Viagem.Destino\n ,Viagem.Status\n ,Viagem.EventoId\n ,Viagem.StatusAgendamento\n ,CASE\n    WHEN Requisitante.Ramal IS NULL THEN Requisitante.Nome\n    ELSE Requisitante.Nome + \u0027 - (\u0027 + CONVERT(VARCHAR, Requisitante.Ramal) + \u0027)\u0027\n  END AS NomeRequisitante\n ,CASE\n    WHEN SetorSolicitante.Sigla IS NULL THEN SetorSolicitante.Nome\n    ELSE SetorSolicitante.Nome + \u0027 - (\u0027 + SetorSolicitante.Sigla + \u0027)\u0027\n  END AS NomeSetor\n ,Motorista.Nome AS NomeMotorista\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\n ,Veiculo.UnidadeId\n ,Evento.Nome AS NomeEvento\n ,Viagem.FichaVistoria\n ,Viagem.Minutos\n ,Viagem.Descricao\n ,Viagem.CombustivelInicial\n ,Viagem.CombustivelFinal\n ,Viagem.RamalRequisitante\nFROM dbo.SetorSolicitante\nLEFT OUTER JOIN dbo.Viagem\n  ON SetorSolicitante.SetorSolicitanteId = Viagem.SetorSolicitanteId\nLEFT OUTER JOIN dbo.Requisitante\n  ON Requisitante.RequisitanteId = Viagem.RequisitanteId\nLEFT OUTER JOIN dbo.Motorista\n  ON Motorista.MotoristaId = Viagem.MotoristaId\nLEFT OUTER JOIN dbo.Veiculo\n  ON Veiculo.VeiculoId = Viagem.VeiculoId\nLEFT OUTER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nLEFT OUTER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nLEFT OUTER JOIN dbo.Evento\n  ON Viagem.EventoId = Evento.EventoId\n-- Create or alter view [dbo].[ViewEventos]\n--;",
                     "ViewPendenciasManutencao":  "CREATE OR ALTER VIEW dbo.ViewPendenciasManutencao \nAS SELECT\n  ItensManutencao.ItemManutencaoId\n ,ItensManutencao.ManutencaoId\n ,ItensManutencao.TipoItem\n ,ItensManutencao.NumFicha\n ,CONVERT(VARCHAR, ItensManutencao.DataItem, 103) AS DataItem\n ,ItensManutencao.Resumo\n ,ItensManutencao.Descricao\n ,ItensManutencao.Status\n ,ItensManutencao.MotoristaId\n ,ItensManutencao.ViagemId\n ,ItensManutencao.ImagemOcorrencia\n ,Motorista.Nome\n ,Manutencao.VeiculoId\nFROM dbo.ItensManutencao\nLEFT OUTER JOIN dbo.Motorista\n  ON ItensManutencao.MotoristaId = Motorista.MotoristaId\nLEFT OUTER JOIN dbo.Viagem\n  ON ItensManutencao.ViagemId = Viagem.ViagemId\nINNER JOIN dbo.Manutencao\n  ON ItensManutencao.ManutencaoId = Manutencao.ManutencaoId\n-- Create or alter view [dbo].[ViewOcorrencia]\n--;",
                     "ViewMotoristasViagem_Ultimo":  "CREATE OR ALTER VIEW dbo.ViewMotoristasViagem_Ultimo \nAS SELECT TOP 10000\n    m.MotoristaId,\n    m.Nome,\n    m.TipoCondutor,\n    m.Status,\n    m.Foto,\n    CAST(m.Nome + \u0027 (\u0027 + m.TipoCondutor + \u0027)\u0027 AS NVARCHAR(300)) AS MotoristaCondutor\nFROM dbo.Motorista AS m\nWHERE m.Status = 1\nORDER BY m.Nome\n-- Create or alter view [dbo].[ViewMotoristasViagem]\n--;",
                     "ViewOcorrenciasAbertasVeiculo":  "CREATE OR ALTER VIEW dbo.ViewOcorrenciasAbertasVeiculo\nAS\nSELECT \n    oc.OcorrenciaViagemId,\n    oc.ViagemId,\n    oc.VeiculoId,\n    oc.MotoristaId,\n    oc.Resumo,\n    oc.Descricao,\n    oc.ImagemOcorrencia,\n    oc.DataCriacao,\n    oc.UsuarioCriacao,\n    \n    -- Dados do Veículo\n    ve.Placa,\n    ma.DescricaoMarca,\n    mo.DescricaoModelo,\n    CONCAT(ve.Placa, \u0027 - \u0027, ma.DescricaoMarca, \u0027/\u0027, mo.DescricaoModelo) AS VeiculoCompleto,\n    \n    -- Dados da Viagem de Origem\n    vi.DataInicial AS DataViagem,\n    vi.NoFichaVistoria,\n    \n    -- Dados do Motorista que registrou\n    mt.Nome AS NomeMotorista,\n    \n    -- Campos de Urgência\n    DATEDIFF(DAY, oc.DataCriacao, GETDATE()) AS DiasEmAberto,\n    \n    CASE \n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027Crítica\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027Alta\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027Média\u0027\n        ELSE \u0027Normal\u0027\n    END AS Urgencia,\n    \n    CASE \n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 30 THEN \u0027#dc3545\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 15 THEN \u0027#ffc107\u0027\n        WHEN DATEDIFF(DAY, oc.DataCriacao, GETDATE()) \u003e 7 THEN \u0027#17a2b8\u0027\n        ELSE \u0027#6c757d\u0027\n    END AS CorUrgencia\n\nFROM dbo.OcorrenciaViagem oc\n    INNER JOIN dbo.Viagem vi ON oc.ViagemId = vi.ViagemId\n    INNER JOIN dbo.Veiculo ve ON oc.VeiculoId = ve.VeiculoId\n    INNER JOIN dbo.MarcaVeiculo ma ON ve.MarcaId = ma.MarcaId\n    INNER JOIN dbo.ModeloVeiculo mo ON ve.ModeloId = mo.ModeloId\n    LEFT JOIN dbo.Motorista mt ON oc.MotoristaId = mt.MotoristaId\n\nWHERE oc.Status = \u0027Aberta\u0027\n-- Create table [dbo].[AlertasFrotiX]\n--;",
                     "ViewLavagem":  "CREATE OR ALTER VIEW dbo.ViewLavagem \nAS SELECT\n  Lavagem.LavagemId\n  ,Lavagem.VeiculoId\n  ,Lavagem.MotoristaId\n ,CONVERT(VARCHAR, Lavagem.Data, 103) AS Data\n ,CONVERT(VARCHAR, Lavagem.HorarioInicio, 8) AS Horario\n ,CONVERT(VARCHAR, Lavagem.HorarioInicio, 8) AS HorarioInicio\n ,CONVERT(VARCHAR, Lavagem.HorarioFim, 8) AS HorarioFim\n ,DATEDIFF(MINUTE, Lavagem.HorarioInicio, Lavagem.HorarioFim) AS DuracaoMinutos\n ,STRING_AGG(Lavador.Nome, \u0027,\u0027) AS Lavadores\n ,STRING_AGG(convert(nvarchar(50),Lavador.LavadorId), \u0027,\u0027) AS LavadoresId\n ,\u0027(\u0027 + Veiculo.Placa + \u0027) - \u0027 + MarcaVeiculo.DescricaoMarca + \u0027/\u0027 + ModeloVeiculo.DescricaoModelo AS DescricaoVeiculo\n ,Motorista.Nome\nFROM dbo.LavadoresLavagem\nLEFT OUTER JOIN dbo.Lavador\n  ON LavadoresLavagem.LavadorId = Lavador.LavadorId\nRIGHT OUTER JOIN dbo.Lavagem\n  ON LavadoresLavagem.LavagemId = Lavagem.LavagemId\nLEFT OUTER JOIN dbo.Veiculo\n  ON Lavagem.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nLEFT OUTER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nLEFT OUTER JOIN dbo.Motorista\n  ON Lavagem.MotoristaId = Motorista.MotoristaId\nGROUP BY Lavagem.LavagemId\n        ,Lavagem.VeiculoId\n        ,Lavagem.MotoristaId\n        ,Lavagem.Data\n        ,Lavagem.HorarioInicio\n        ,HorarioFim\n        ,Veiculo.Placa\n        ,MarcaVeiculo.DescricaoMarca\n        ,ModeloVeiculo.DescricaoModelo\n        ,Motorista.Nome\n-- Create table [dbo].[EstatisticaMotoristasMensal]\n--;",
                     "ViewAlertasAtivos":  "CREATE OR ALTER VIEW dbo.ViewAlertasAtivos \nAS SELECT \n    a.AlertasFrotiXId,\n    a.Titulo,\n    a.Descricao,\n    a.TipoAlerta,\n    CASE a.TipoAlerta\n        WHEN 1 THEN \u0027Agendamento\u0027\n        WHEN 2 THEN \u0027Manutenção\u0027\n        WHEN 3 THEN \u0027Motorista\u0027\n        WHEN 4 THEN \u0027Veículo\u0027\n        WHEN 5 THEN \u0027Anúncio\u0027\n        ELSE \u0027Diversos\u0027\n    END AS TipoAlertaTexto,\n    a.Prioridade,\n    CASE a.Prioridade\n        WHEN 1 THEN \u0027Baixa\u0027\n        WHEN 2 THEN \u0027Média\u0027\n        WHEN 3 THEN \u0027Alta\u0027\n    END AS PrioridadeTexto,\n    a.DataInsercao,\n    a.DataExibicao,\n    a.DataExpiracao,\n    a.ViagemId,\n    a.ManutencaoId,\n    a.MotoristaId,\n    a.VeiculoId,\n    a.TipoExibicao,\n    a.HorarioExibicao,\n    a.UsuarioCriadorId,\n    a.Ativo,\n    au.UsuarioId,\n    au.Lido,\n    au.DataLeitura,\n    au.Notificado,\n    u.UserName,\n    u.Email\nFROM AlertasFrotiX a\nINNER JOIN AlertasUsuario au ON a.AlertasFrotiXId = au.AlertasFrotiXId\nINNER JOIN AspNetUsers u ON au.UsuarioId = u.Id\nWHERE a.Ativo = 1\n-- Create user [frotix]\n--;",
                     "ViewCustosVeiculos":  "CREATE OR ALTER VIEW dbo.ViewCustosVeiculos \nAS SELECT\n  ItemVeiculoContrato.Descricao\n ,FORMAT(SUM(Viagem.CustoCombustivel), \u0027N2\u0027, \u0027pt-BR\u0027) AS Combustivel\n ,FORMAT(SUM(Viagem.CustoMotorista), \u0027N2\u0027, \u0027pt-BR\u0027) AS Motorista\n ,FORMAT(SUM(Viagem.CustoVeiculo), \u0027N2\u0027, \u0027pt-BR\u0027) AS Veiculo\n ,FORMAT(SUM(Viagem.KmFinal - Viagem.KmInicial), \u0027N2\u0027, \u0027pt-BR\u0027) AS Quilometragem\nFROM dbo.Viagem\nLEFT OUTER JOIN dbo.Veiculo\n  ON Viagem.VeiculoId = Veiculo.VeiculoId\nLEFT OUTER JOIN dbo.ItemVeiculoContrato\n  ON Veiculo.ItemVeiculoId = ItemVeiculoContrato.ItemVeiculoId\nWHERE Viagem.Status = \u0027Realizada\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027\nAND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\nAND MONTH(Viagem.DataInicial) = 12\nGROUP BY ItemVeiculoContrato.Descricao\n-- Create or alter view [dbo].[ViewCustosTemporaria]\n--;",
                     "ViewCustosTemporaria":  "CREATE OR ALTER VIEW dbo.ViewCustosTemporaria \nAS SELECT\n Viagem.NoFichaVistoria\n ,SetorSolicitante.Sigla\n ,SetorSolicitante.Nome\n ,CONVERT(VARCHAR, Viagem.DataInicial, 103) AS \u0027Data Inicial\u0027\n ,CONVERT(VARCHAR, Viagem.DataFinal, 103) AS \u0027Data Final\u0027\n ,FORMAT((Viagem.HoraFim - Viagem.HoraInicio), \u0027HH:mm\u0027) AS Duração\n ,(Viagem.KmFinal - Viagem.KmInicial) AS Quilometragem\n ,CONVERT(DECIMAL(10,2),Viagem.CustoCombustivel) AS Combustivel\n ,CONVERT(DECIMAL(10,2),Viagem.CustoMotorista) AS Motorista\n ,Viagem.Finalidade \nFROM dbo.Viagem\nINNER JOIN dbo.SetorSolicitante\n  ON Viagem.SetorSolicitanteId = SetorSolicitante.SetorSolicitanteId\nWHERE SetorSolicitante.Sigla = \u0027CTRAN\u0027 AND Viagem.Finalidade NOT LIKE \u0027Manutenção\u0027 AND Viagem.Finalidade NOT LIKE \u0027Devolução à Locadora\u0027\n-- Create or alter view [dbo].[ViewCustosMotoristas_Individual]\n--;",
                     "ViewMotoristas_Ultimo":  "CREATE OR ALTER VIEW dbo.ViewMotoristas_Ultimo \nAS SELECT TOP 10000\n  Motorista.MotoristaId\n ,Motorista.Nome\n ,Motorista.Ponto\n ,Motorista.CNH\n ,Motorista.CategoriaCNH\n ,Motorista.Celular01\n ,Motorista.Status\n ,Unidade.Sigla\n ,Contrato.AnoContrato\n ,Contrato.NumeroContrato\n ,Fornecedor.DescricaoFornecedor\n ,AspNetUsers.NomeCompleto\n ,Motorista.DataAlteracao\n ,Motorista.ContratoId\n ,Motorista.TipoCondutor \n ,Motorista.Foto\n ,Motorista.EfetivoFerista   \n,Motorista.Nome + \u0027 (\u0027 + Motorista.TipoCondutor + \u0027)\u0027 AS MotoristaCondutor\n ,ROW_NUMBER() OVER (ORDER BY Motorista.Nome) AS RowNum\nFROM dbo.Motorista\nLEFT OUTER JOIN dbo.Contrato\n  ON Motorista.ContratoId = Contrato.ContratoId\nLEFT OUTER JOIN dbo.Fornecedor\n  ON Contrato.FornecedorId = Fornecedor.FornecedorId\nINNER JOIN dbo.AspNetUsers\n  ON Motorista.UsuarioIdAlteracao = AspNetUsers.Id\nLEFT OUTER JOIN dbo.Unidade\n  ON Motorista.UnidadeId = Unidade.UnidadeId\nORDER BY Motorista.Nome\n-- Create or alter view [dbo].[ViewMotoristas_original]\n--;",
                     "ViewViagensAgendaTodosMeses":  "CREATE OR ALTER VIEW dbo.ViewViagensAgendaTodosMeses \nAS SELECT\n  Viagem.DataInicial\n ,Viagem.HoraInicio\n ,Viagem.MotoristaId\n ,Viagem.VeiculoId\n ,Viagem.Descricao\n ,Viagem.Status\n ,Viagem.ViagemId\n ,Viagem.Finalidade\n ,Viagem.StatusAgendamento\n ,Viagem.NomeEvento\nFROM dbo.Viagem\n-- Create or alter view [dbo].[ViewViagensAgenda]\n--;",
                     "ViewAbastecimentos":  "CREATE OR ALTER VIEW dbo.ViewAbastecimentos \nAS SELECT TOP (100) PERCENT\n  Abastecimento.AbastecimentoId\n ,Abastecimento.DataHora\n ,CONVERT(VARCHAR, Abastecimento.DataHora, 103) AS Data\n ,FORMAT(Abastecimento.DataHora, \u0027HH:mm\u0027) AS Hora\n ,Veiculo.Placa\n ,MarcaVeiculo.DescricaoMarca + \u0027 / \u0027 + ModeloVeiculo.DescricaoModelo AS TipoVeiculo\n ,Motorista.Nome\n ,Combustivel.Descricao AS TipoCombustivel\n ,Unidade.Sigla\n ,FORMAT(Abastecimento.Litros, \u0027N2\u0027) AS Litros\n ,FORMAT(Abastecimento.ValorUnitario, \u0027N2\u0027) AS ValorUnitario\n ,FORMAT(Abastecimento.Litros * Abastecimento.ValorUnitario, \u0027N2\u0027) AS ValorTotal\n ,FORMAT(Abastecimento.KmRodado / Abastecimento.Litros, \u0027N2\u0027) AS Consumo\n ,ViewMediaConsumo.ConsumoGeral\n ,Abastecimento.KmRodado\n ,Veiculo.VeiculoId\n ,Combustivel.CombustivelId\n ,Unidade.UnidadeId\n ,Motorista.MotoristaId\n  ,ROW_NUMBER() OVER (ORDER BY Abastecimento.DataHora DESC) AS RowNum\n ,Motorista.Nome + \u0027 (\u0027 + Motorista.TipoCondutor + \u0027)\u0027 AS MotoristaCondutor\nFROM dbo.Abastecimento\nINNER JOIN dbo.Veiculo\n  ON Abastecimento.VeiculoId = Veiculo.VeiculoId\nINNER JOIN dbo.ModeloVeiculo\n  ON Veiculo.ModeloId = ModeloVeiculo.ModeloId\nINNER JOIN dbo.MarcaVeiculo\n  ON ModeloVeiculo.MarcaId = MarcaVeiculo.MarcaId\nINNER JOIN dbo.Motorista\n  ON Abastecimento.MotoristaId = Motorista.MotoristaId\nINNER JOIN dbo.Combustivel\n  ON Abastecimento.CombustivelId = Combustivel.CombustivelId\nINNER JOIN dbo.Unidade\n  ON Motorista.UnidadeId = Unidade.UnidadeId\nLEFT OUTER JOIN dbo.ViewMediaConsumo\n  ON ViewMediaConsumo.VeiculoId = Abastecimento.VeiculoId\nLEFT OUTER JOIN dbo.CondutorApoio\n  ON CondutorApoio.CondutorId = Motorista.CondutorId\n-- Create or alter view [dbo].[ViewCustoAbastecimento]\n--;"
                 }
}
